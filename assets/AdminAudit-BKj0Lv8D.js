import{j as e}from"./ui-vendor-DpWgbapL.js";import{r as i}from"./react-vendor-ylmX0jv_.js";import{auditService as m}from"./auditService-XpTAU5i3.js";import{aD as h,i as c,j,k as f,l as u,n as p}from"./index-CkS_J3ry.js";import{T as y,a as g,b as n,c as a,d as N,e as t}from"./table-NruZ36Yn.js";import{f as b}from"./utils-B3_ieZWp.js";import"./animation-D5s1b1Vs.js";import"./excel-uoQkVabA.js";function A(){const[d,o]=i.useState([]),[l,x]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const r=await m.getLogs({limit:100});o(r||[])}catch(r){console.error("Error fetching logs",r)}finally{x(!1)}})()},[]),l?e.jsx(h,{}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Registro de Auditoría"}),e.jsx(c,{variant:"outline",className:"text-muted-foreground",children:"Últimos 100 eventos"})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(u,{children:"Eventos del Sistema"})}),e.jsx(p,{children:e.jsxs(y,{children:[e.jsx(g,{children:e.jsxs(n,{children:[e.jsx(a,{children:"Fecha"}),e.jsx(a,{children:"Acción"}),e.jsx(a,{children:"Entidad"}),e.jsx(a,{children:"Detalles"})]})}),e.jsxs(N,{children:[d.map(s=>e.jsxs(n,{children:[e.jsx(t,{className:"whitespace-nowrap text-sm text-muted-foreground",children:b(new Date(s.created_at),"dd/MM/yyyy HH:mm:ss")}),e.jsx(t,{children:e.jsx(c,{variant:s.action.includes("DELETE")?"destructive":"secondary",children:s.action})}),e.jsxs(t,{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:s.entity_type}),s.entity_id&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["#",s.entity_id.substring(0,8)]})]}),e.jsx(t,{className:"font-mono text-xs text-muted-foreground",children:s.details?JSON.stringify(s.details):"-"})]},s.id)),d.length===0&&e.jsx(n,{children:e.jsx(t,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No hay registros de auditoría encontrados."})})]})]})})]})]})}export{A as default};
