import{j as e}from"./ui-vendor-DpWgbapL.js";import{r as B,k as bt,u as jt}from"./react-vendor-ylmX0jv_.js";import{b as se,P as Fe,H as je,T as Ct,j as de,i as Ee,B as ne,w as Ke,x as Xe,A as Ye,E as Je,I as Nt,af as St,z as q,u as Mt,V as Et,U as $e,S as It,N as Pt,F as kt}from"./index-CkS_J3ry.js";import{I as he}from"./input-Bfzfj-ys.js";import{T as _t,a as Lt,b as ge,c as xe}from"./tabs-DCuAvRiw.js";import{P as Dt}from"./ProductImageHover-DkwmeyGx.js";import{u as Tt,C as Bt}from"./Calculator-UOxLmjBD.js";import{u as Rt,a as Ie,m as ve,A as He}from"./animation-D5s1b1Vs.js";import{P as Oe}from"./pencil-BPt1t0dp.js";import{T as ze}from"./trash-2-DFD3IUWJ.js";import{D as At,c as ce}from"./cyclicInventoryService-Bo5XskA8.js";import{C as Qe}from"./calculator-_ojvT72l.js";import{C as ye}from"./CounterAnimation-Cxw_j9vI.js";import{S as Ft}from"./switch-BNEZe51g.js";import{L as Pe}from"./label-mT_bHPpi.js";import{C as $t}from"./circle-help-Bxuh-UNL.js";import{F as Ht}from"./FabMenu-DXjHau5o.js";import{r as Ot,u as zt}from"./excel-uoQkVabA.js";import{P as Qt}from"./PageHeader-CpKlg9j7.js";import{L as Wt}from"./loader-circle-DHTeucL4.js";import{R as Ut}from"./rotate-ccw-Bxn2bsAO.js";import"./utils-B3_ieZWp.js";import"./plus-DCQjhfq2.js";var De={};(function r(t,s,l,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),m=typeof Path2D=="function"&&typeof DOMMatrix=="function",N=function(){if(!t.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),n=a.getContext("2d");n.fillRect(0,0,1,1);var S=a.transferToImageBitmap();n.createPattern(S,"no-repeat")}catch{return!1}return!0}();function p(){}function x(a){var n=s.exports.Promise,S=n!==void 0?n:t.Promise;return typeof S=="function"?new S(a):(a(p,p),null)}var g=function(a,n){return{transform:function(S){if(a)return S;if(n.has(S))return n.get(S);var d=new OffscreenCanvas(S.width,S.height),C=d.getContext("2d");return C.drawImage(S,0,0),n.set(S,d),d},clear:function(){n.clear()}}}(N,new Map),D=function(){var a=Math.floor(16.666666666666668),n,S,d={},C=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(M){var P=Math.random();return d[P]=requestAnimationFrame(function y(k){C===k||C+a-1<k?(C=k,delete d[P],M()):d[P]=requestAnimationFrame(y)}),P},S=function(M){d[M]&&cancelAnimationFrame(d[M])}):(n=function(M){return setTimeout(M,a)},S=function(M){return clearTimeout(M)}),{frame:n,cancel:S}}(),u=function(){var a,n,S={};function d(C){function M(P,y){C.postMessage({options:P||{},callback:y})}C.init=function(y){var k=y.transferControlToOffscreen();C.postMessage({canvas:k},[k])},C.fire=function(y,k,F){if(n)return M(y,null),n;var O=Math.random().toString(36).slice(2);return n=x(function($){function z(V){V.data.callback===O&&(delete S[O],C.removeEventListener("message",z),n=null,g.clear(),F(),$())}C.addEventListener("message",z),M(y,O),S[O]=z.bind(null,{data:{callback:O}})}),n},C.reset=function(){C.postMessage({reset:!0});for(var y in S)S[y](),delete S[y]}}return function(){if(a)return a;if(!l&&c){var C=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([C])))}catch(M){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("游꿁 Could not load worker",M),null}d(a)}return a}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(a,n){return n?n(a):a}function b(a){return a!=null}function i(a,n,S){return v(a&&b(a[n])?a[n]:h[n],S)}function j(a){return a<0?0:Math.floor(a)}function E(a,n){return Math.floor(Math.random()*(n-a))+a}function I(a){return parseInt(a,16)}function R(a){return a.map(_)}function _(a){var n=String(a).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:I(n.substring(0,2)),g:I(n.substring(2,4)),b:I(n.substring(4,6))}}function L(a){var n=i(a,"origin",Object);return n.x=i(n,"x",Number),n.y=i(n,"y",Number),n}function U(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function Z(a){var n=a.getBoundingClientRect();a.width=n.width,a.height=n.height}function G(a){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=a,n}function ee(a,n,S,d,C,M,P,y,k){a.save(),a.translate(n,S),a.rotate(M),a.scale(d,C),a.arc(0,0,1,P,y,k),a.restore()}function H(a){var n=a.angle*(Math.PI/180),S=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-n+(.5*S-Math.random()*S),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function A(a,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var S=n.tick++/n.totalTicks,d=n.x+n.random*n.tiltCos,C=n.y+n.random*n.tiltSin,M=n.wobbleX+n.random*n.tiltCos,P=n.wobbleY+n.random*n.tiltSin;if(a.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-S)+")",a.beginPath(),m&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))a.fill(ie(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(M-d)*.1,Math.abs(P-C)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var y=Math.PI/10*n.wobble,k=Math.abs(M-d)*.1,F=Math.abs(P-C)*.1,O=n.shape.bitmap.width*n.scalar,$=n.shape.bitmap.height*n.scalar,z=new DOMMatrix([Math.cos(y)*k,Math.sin(y)*k,-Math.sin(y)*F,Math.cos(y)*F,n.x,n.y]);z.multiplySelf(new DOMMatrix(n.shape.matrix));var V=a.createPattern(g.transform(n.shape.bitmap),"no-repeat");V.setTransform(z),a.globalAlpha=1-S,a.fillStyle=V,a.fillRect(n.x-O/2,n.y-$/2,O,$),a.globalAlpha=1}else if(n.shape==="circle")a.ellipse?a.ellipse(n.x,n.y,Math.abs(M-d)*n.ovalScalar,Math.abs(P-C)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):ee(a,n.x,n.y,Math.abs(M-d)*n.ovalScalar,Math.abs(P-C)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var T=Math.PI/2*3,Y=4*n.scalar,te=8*n.scalar,re=n.x,le=n.y,ue=5,oe=Math.PI/ue;ue--;)re=n.x+Math.cos(T)*te,le=n.y+Math.sin(T)*te,a.lineTo(re,le),T+=oe,re=n.x+Math.cos(T)*Y,le=n.y+Math.sin(T)*Y,a.lineTo(re,le),T+=oe;else a.moveTo(Math.floor(n.x),Math.floor(n.y)),a.lineTo(Math.floor(n.wobbleX),Math.floor(C)),a.lineTo(Math.floor(M),Math.floor(P)),a.lineTo(Math.floor(d),Math.floor(n.wobbleY));return a.closePath(),a.fill(),n.tick<n.totalTicks}function K(a,n,S,d,C){var M=n.slice(),P=a.getContext("2d"),y,k,F=x(function(O){function $(){y=k=null,P.clearRect(0,0,d.width,d.height),g.clear(),C(),O()}function z(){l&&!(d.width===o.width&&d.height===o.height)&&(d.width=a.width=o.width,d.height=a.height=o.height),!d.width&&!d.height&&(S(a),d.width=a.width,d.height=a.height),P.clearRect(0,0,d.width,d.height),M=M.filter(function(V){return A(P,V)}),M.length?y=D.frame(z):$()}y=D.frame(z),k=$});return{addFettis:function(O){return M=M.concat(O),F},canvas:a,promise:F,reset:function(){y&&D.cancel(y),k&&k()}}}function X(a,n){var S=!a,d=!!i(n||{},"resize"),C=!1,M=i(n,"disableForReducedMotion",Boolean),P=c&&!!i(n||{},"useWorker"),y=P?u():null,k=S?U:Z,F=a&&y?!!a.__confetti_initialized:!1,O=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,$;function z(T,Y,te){for(var re=i(T,"particleCount",j),le=i(T,"angle",Number),ue=i(T,"spread",Number),oe=i(T,"startVelocity",Number),vt=i(T,"decay",Number),mt=i(T,"gravity",Number),ht=i(T,"drift",Number),Te=i(T,"colors",R),ft=i(T,"ticks",Number),Be=i(T,"shapes"),gt=i(T,"scalar"),xt=!!i(T,"flat"),Re=L(T),Ae=re,Me=[],yt=a.width*Re.x,wt=a.height*Re.y;Ae--;)Me.push(H({x:yt,y:wt,angle:le,spread:ue,startVelocity:oe,color:Te[Ae%Te.length],shape:Be[E(0,Be.length)],ticks:ft,decay:vt,gravity:mt,drift:ht,scalar:gt,flat:xt}));return $?$.addFettis(Me):($=K(a,Me,k,Y,te),$.promise)}function V(T){var Y=M||i(T,"disableForReducedMotion",Boolean),te=i(T,"zIndex",Number);if(Y&&O)return x(function(oe){oe()});S&&$?a=$.canvas:S&&!a&&(a=G(te),document.body.appendChild(a)),d&&!F&&k(a);var re={width:a.width,height:a.height};y&&!F&&y.init(a),F=!0,y&&(a.__confetti_initialized=!0);function le(){if(y){var oe={getBoundingClientRect:function(){if(!S)return a.getBoundingClientRect()}};k(oe),y.postMessage({resize:{width:oe.width,height:oe.height}});return}re.width=re.height=null}function ue(){$=null,d&&(C=!1,t.removeEventListener("resize",le)),S&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,F=!1)}return d&&!C&&(C=!0,t.addEventListener("resize",le,!1)),y?y.fire(T,re,ue):z(T,re,ue)}return V.reset=function(){y&&y.reset(),$&&$.reset()},V}var Q;function ae(){return Q||(Q=X(null,{useWorker:!0,resize:!0})),Q}function ie(a,n,S,d,C,M,P){var y=new Path2D(a),k=new Path2D;k.addPath(y,new DOMMatrix(n));var F=new Path2D;return F.addPath(k,new DOMMatrix([Math.cos(P)*C,Math.sin(P)*C,-Math.sin(P)*M,Math.cos(P)*M,S,d])),F}function me(a){if(!m)throw new Error("path confetti are not supported in this browser");var n,S;typeof a=="string"?n=a:(n=a.path,S=a.matrix);var d=new Path2D(n),C=document.createElement("canvas"),M=C.getContext("2d");if(!S){for(var P=1e3,y=P,k=P,F=0,O=0,$,z,V=0;V<P;V+=2)for(var T=0;T<P;T+=2)M.isPointInPath(d,V,T,"nonzero")&&(y=Math.min(y,V),k=Math.min(k,T),F=Math.max(F,V),O=Math.max(O,T));$=F-y,z=O-k;var Y=10,te=Math.min(Y/$,Y/z);S=[te,0,0,te,-Math.round($/2+y)*te,-Math.round(z/2+k)*te]}return{type:"path",path:n,matrix:S}}function Se(a){var n,S=1,d="#000000",C='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?n=a:(n=a.text,S="scalar"in a?a.scalar:S,C="fontFamily"in a?a.fontFamily:C,d="color"in a?a.color:d);var M=10*S,P=""+M+"px "+C,y=new OffscreenCanvas(M,M),k=y.getContext("2d");k.font=P;var F=k.measureText(n),O=Math.ceil(F.actualBoundingBoxRight+F.actualBoundingBoxLeft),$=Math.ceil(F.actualBoundingBoxAscent+F.actualBoundingBoxDescent),z=2,V=F.actualBoundingBoxLeft+z,T=F.actualBoundingBoxAscent+z;O+=z+z,$+=z+z,y=new OffscreenCanvas(O,$),k=y.getContext("2d"),k.font=P,k.fillStyle=d,k.fillText(n,V,T);var Y=1/S;return{type:"bitmap",bitmap:y.transferToImageBitmap(),matrix:[Y,0,0,Y,-O*Y/2,-$*Y/2]}}s.exports=function(){return ae().apply(this,arguments)},s.exports.reset=function(){ae().reset()},s.exports.create=X,s.exports.shapeFromPath=me,s.exports.shapeFromText=Se})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),De,!1);const Vt=De.exports;De.exports.create;function qt({children:r,leftAction:t,rightAction:s,className:l,threshold:o=60,disabled:c=!1}){const m=Rt(0),[N,p]=B.useState(!1),x=Ie(m,[0,o],[0,1]),g=Ie(m,[-o,0],[1,0]),D=Ie(m,[-o,0,o],[(s==null?void 0:s.bgColor)||"rgba(0,0,0,0)","rgba(0,0,0,0)",(t==null?void 0:t.bgColor)||"rgba(0,0,0,0)"]),{trigger:u}=Tt(),[h,v]=B.useState(!1),b=(j,E)=>{p(!1),v(!1),!c&&(E.offset.x<-o&&s?s.onAction():E.offset.x>o&&t&&t.onAction())},i=(j,E)=>{if(c)return;const I=E.offset.x;h?I>-o&&I<o&&v(!1):(I<-o&&s||I>o&&t)&&(u("selection"),v(!0))};return e.jsxs("div",{className:se("relative overflow-hidden rounded-xl",l),children:[e.jsxs(ve.div,{className:"absolute inset-0 flex items-center justify-between px-4 pointer-events-none",style:{backgroundColor:D},children:[e.jsxs(ve.div,{style:{opacity:x},className:se("flex items-center",t==null?void 0:t.color),children:[t==null?void 0:t.icon,e.jsx("span",{className:"font-medium ml-2",children:t==null?void 0:t.label})]}),e.jsxs(ve.div,{style:{opacity:g},className:se("flex items-center",s==null?void 0:s.color),children:[e.jsx("span",{className:"font-medium mr-2",children:s==null?void 0:s.label}),s==null?void 0:s.icon]})]}),e.jsx(ve.div,{drag:c?!1:"x",dragConstraints:{left:0,right:0},dragElastic:.7,onDragStart:()=>p(!0),onDrag:i,onDragEnd:b,style:{x:m,touchAction:"none"},className:"relative bg-card z-10",whileTap:{cursor:c?"default":"grabbing"},children:r})]})}const ke=B.memo(function({items:t,onUpdateQuantity:s,onCheck:l,onRevert:o,readOnly:c=!1}){const[m,N]=B.useState(null),[p,x]=B.useState(""),[g,D]=B.useState(!1),u=i=>{N(i.id),x(i.countedQuantity.toString()),D(!1)},h=()=>{if(m){const i=parseInt(p,10);!isNaN(i)&&i>=0&&(s(m,i),N(null))}},v=()=>{N(null),x(""),D(!1)},b=i=>{x(Math.floor(i).toString())};return t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Fe,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No hay productos en esta lista"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:e.jsx(He,{mode:"popLayout",children:t.map(i=>{const j=i.countedQuantity-i.systemQuantity,E=j!==0,I=i.status==="controlled",R=j===0;return e.jsx(ve.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:e.jsx(qt,{disabled:c,...I?{leftAction:{label:"Editar",icon:e.jsx(Oe,{className:"w-5 h-5"}),color:"text-blue-500",bgColor:"rgba(59, 130, 246, 0.2)",onAction:()=>u(i)},rightAction:o?{label:"Revertir",icon:e.jsx(ze,{className:"w-5 h-5"}),color:"text-red-500",bgColor:"rgba(239, 68, 68, 0.2)",onAction:()=>o(i.id)}:void 0}:{leftAction:{label:"Confirmar",icon:e.jsx(je,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"rgba(22, 163, 74, 0.2)",onAction:()=>l(i.id)},rightAction:{label:"Diferencia",icon:e.jsx(Ct,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"rgba(249, 115, 22, 0.2)",onAction:()=>u(i)}},children:e.jsx(de,{className:se("p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border"),onClick:()=>u(i),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:se("p-2 rounded-lg flex-shrink-0 transition-colors",I?"bg-success/10":"bg-primary/10"),children:I?e.jsx(je,{className:"w-5 h-5 text-success"}):e.jsx(Fe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Dt,{ean:i.ean,name:i.name,children:e.jsx("h4",{className:"font-medium text-foreground truncate",title:i.name,children:i.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-mono bg-muted px-1.5 py-0.5 rounded",children:i.ean}),i.cost>0&&e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx(At,{className:"w-3 h-3 mr-0.5"}),i.cost.toFixed(2)]}),(i.status==="controlled"||i.status==="adjusted")&&i.category&&e.jsx(Ee,{variant:"outline",className:"text-[10px] h-5 px-1.5 ml-auto",children:i.category})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Sistema"}),e.jsx("span",{className:"text-sm font-medium",children:i.systemQuantity})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"F칤sico"}),e.jsx("span",{className:se("text-sm font-bold",E?"text-warning":"text-success"),children:i.countedQuantity})]}),E&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Diferencia"}),e.jsx(Ee,{variant:j>0?"default":"destructive",className:"h-5 px-1.5 text-[10px]",children:j>0?`+${j}`:j})]}),i.wasReadjusted&&e.jsxs("div",{className:"flex flex-col",title:"Este producto fue re-ajustado",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Re-Ajuste"}),e.jsxs(Ee,{variant:"outline",className:"h-5 px-1.5 text-[10px] bg-purple-100 text-purple-700 border-purple-200",children:[e.jsx(Qe,{className:"w-3 h-3 mr-0.5"})," Modif."]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:_=>{_.stopPropagation(),u(i)},children:e.jsx(Oe,{className:"w-4 h-4"})}),i.status==="pending"&&e.jsx(ne,{size:"icon",variant:R?"default":"secondary",className:se("h-10 w-10 rounded-full shadow-sm flex-shrink-0 transition-all ml-1",R?"bg-success hover:bg-success/90 text-white":"hover:bg-warning/20 text-warning"),onClick:_=>{_.stopPropagation(),l(i.id)},children:e.jsx(je,{className:"w-5 h-5"})}),i.status==="controlled"&&o&&e.jsx(ne,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:_=>{_.stopPropagation(),o(i.id)},title:"Volver a pendientes",children:e.jsx(ze,{className:"w-4 h-4"})})]})]})})})},i.id)})})}),e.jsx(Ke,{open:m!==null,onOpenChange:i=>!i&&v(),children:e.jsxs(Xe,{className:"sm:max-w-md",children:[e.jsx(Ye,{children:e.jsx(Je,{children:"Editar Cantidad"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cantidad F칤sica"}),e.jsx(he,{type:"number",min:"0",value:p,onChange:i=>x(i.target.value),onKeyDown:i=>{i.key==="Enter"&&h()},placeholder:"Ingresa la cantidad",autoFocus:!0})]}),e.jsx(ne,{variant:g?"secondary":"outline",size:"icon",onClick:()=>D(!g),title:"Calculadora",children:e.jsx(Qe,{className:"w-4 h-4"})})]}),e.jsx(He,{children:g&&e.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx(Bt,{onResult:b,onClose:()=>D(!1)})})})]}),e.jsxs(Nt,{children:[e.jsx(ne,{variant:"outline",onClick:v,children:"Cancelar"}),e.jsx(ne,{onClick:h,children:"Guardar"})]})]})})]})}),Zt=St("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),et=B.forwardRef(({className:r,variant:t,...s},l)=>e.jsx("div",{ref:l,role:"alert",className:se(Zt({variant:t}),r),...s}));et.displayName="Alert";const tt=B.forwardRef(({className:r,...t},s)=>e.jsx("h5",{ref:s,className:se("mb-1 font-medium leading-none tracking-tight",r),...t}));tt.displayName="AlertTitle";const rt=B.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:se("text-sm [&_p]:leading-relaxed",r),...t}));rt.displayName="AlertDescription";let Le={},nt;function _e(r={}){Le={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function f(r){return r?Le[r]:Le}function Gt(r){nt=r}function J(){return nt}let Ce={};function we(r,t){Ce[r]=t}function pe(r){var t;(t=Ce[r])==null||t.call(Ce)}function Kt(){Ce={}}function be(r,t,s,l){return(r/=l/2)<1?s/2*r*r+t:-s/2*(--r*(r-2)-1)+t}function st(r){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(s=>{const l=s.matches(t),o=Array.from(s.querySelectorAll(t));return[...l?[s]:[],...o]}).filter(s=>getComputedStyle(s).pointerEvents!=="none"&&Jt(s))}function at(r){if(!r||Yt(r))return;const t=f("smoothScroll"),s=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!t||Xt(r)?"auto":"smooth",inline:"center",block:s?"start":"center"})}function Xt(r){if(!r||!r.parentElement)return;const t=r.parentElement;return t.scrollHeight>t.clientHeight}function Yt(r){const t=r.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Jt(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let Ne={};function W(r,t){Ne[r]=t}function w(r){return r?Ne[r]:Ne}function We(){Ne={}}function er(r,t,s,l){let o=w("__activeStagePosition");const c=o||s.getBoundingClientRect(),m=l.getBoundingClientRect(),N=be(r,c.x,m.x-c.x,t),p=be(r,c.y,m.y-c.y,t),x=be(r,c.width,m.width-c.width,t),g=be(r,c.height,m.height-c.height,t);o={x:N,y:p,width:x,height:g},it(o),W("__activeStagePosition",o)}function ot(r){if(!r)return;const t=r.getBoundingClientRect(),s={x:t.x,y:t.y,width:t.width,height:t.height};W("__activeStagePosition",s),it(s)}function tr(){const r=w("__activeStagePosition"),t=w("__overlaySvg");if(!r)return;if(!t){console.warn("No stage svg found.");return}const s=window.innerWidth,l=window.innerHeight;t.setAttribute("viewBox",`0 0 ${s} ${l}`)}function rr(r){const t=nr(r);document.body.appendChild(t),ct(t,s=>{s.target.tagName==="path"&&pe("overlayClick")}),W("__overlaySvg",t)}function it(r){const t=w("__overlaySvg");if(!t){rr(r);return}const s=t.firstElementChild;if((s==null?void 0:s.tagName)!=="path")throw new Error("no path element found in stage svg");s.setAttribute("d",lt(r))}function nr(r){const t=window.innerWidth,s=window.innerHeight,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("driver-overlay","driver-overlay-animated"),l.setAttribute("viewBox",`0 0 ${t} ${s}`),l.setAttribute("xmlSpace","preserve"),l.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),l.setAttribute("version","1.1"),l.setAttribute("preserveAspectRatio","xMinYMin slice"),l.style.fillRule="evenodd",l.style.clipRule="evenodd",l.style.strokeLinejoin="round",l.style.strokeMiterlimit="2",l.style.zIndex="10000",l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",lt(r)),o.style.fill=f("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${f("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",l.appendChild(o),l}function lt(r){const t=window.innerWidth,s=window.innerHeight,l=f("stagePadding")||0,o=f("stageRadius")||0,c=r.width+l*2,m=r.height+l*2,N=Math.min(o,c/2,m/2),p=Math.floor(Math.max(N,0)),x=r.x-l+p,g=r.y-l,D=c-p*2,u=m-p*2;return`M${t},0L0,0L0,${s}L${t},${s}L${t},0Z
    M${x},${g} h${D} a${p},${p} 0 0 1 ${p},${p} v${u} a${p},${p} 0 0 1 -${p},${p} h-${D} a${p},${p} 0 0 1 -${p},-${p} v-${u} a${p},${p} 0 0 1 ${p},-${p} z`}function sr(){const r=w("__overlaySvg");r&&r.remove()}function ar(){const r=document.getElementById("driver-dummy-element");if(r)return r;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function Ue(r){const{element:t}=r;let s=typeof t=="function"?t():typeof t=="string"?document.querySelector(t):t;s||(s=ar()),ir(s,r)}function or(){const r=w("__activeElement"),t=w("__activeStep");r&&(ot(r),tr(),pt(r,t))}function ir(r,t){var s;const l=Date.now(),o=w("__activeStep"),c=w("__activeElement")||r,m=!c||c===r,N=r.id==="driver-dummy-element",p=c.id==="driver-dummy-element",x=f("animate"),g=t.onHighlightStarted||f("onHighlightStarted"),D=(t==null?void 0:t.onHighlighted)||f("onHighlighted"),u=(o==null?void 0:o.onDeselected)||f("onDeselected"),h=f(),v=w();!m&&u&&u(p?void 0:c,o,{config:h,state:v,driver:J()}),g&&g(N?void 0:r,t,{config:h,state:v,driver:J()});const b=!m&&x;let i=!1;pr(),W("previousStep",o),W("previousElement",c),W("activeStep",t),W("activeElement",r);const j=()=>{if(w("__transitionCallback")!==j)return;const E=Date.now()-l,I=400-E<=400/2;t.popover&&I&&!i&&b&&(Ve(r,t),i=!0),f("animate")&&E<400?er(E,400,c,r):(ot(r),D&&D(N?void 0:r,t,{config:f(),state:w(),driver:J()}),W("__transitionCallback",void 0),W("__previousStep",o),W("__previousElement",c),W("__activeStep",t),W("__activeElement",r)),window.requestAnimationFrame(j)};W("__transitionCallback",j),window.requestAnimationFrame(j),at(r),!b&&t.popover&&Ve(r,t),c.classList.remove("driver-active-element","driver-no-interaction"),c.removeAttribute("aria-haspopup"),c.removeAttribute("aria-expanded"),c.removeAttribute("aria-controls"),((s=t.disableActiveInteraction)!=null?s:f("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function lr(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function fe(){const r=w("__resizeTimeout");r&&window.cancelAnimationFrame(r),W("__resizeTimeout",window.requestAnimationFrame(or))}function dr(r){var t;if(!w("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const s=w("__activeElement"),l=(t=w("popover"))==null?void 0:t.wrapper,o=st([...l?[l]:[],...s?[s]:[]]),c=o[0],m=o[o.length-1];if(r.preventDefault(),r.shiftKey){const N=o[o.indexOf(document.activeElement)-1]||m;N==null||N.focus()}else{const N=o[o.indexOf(document.activeElement)+1]||c;N==null||N.focus()}}function dt(r){var t;((t=f("allowKeyboardControl"))==null||t)&&(r.key==="Escape"?pe("escapePress"):r.key==="ArrowRight"?pe("arrowRightPress"):r.key==="ArrowLeft"&&pe("arrowLeftPress"))}function ct(r,t,s){const l=(o,c)=>{const m=o.target;r.contains(m)&&((!s||s(m))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),c==null||c(o))};document.addEventListener("pointerdown",l,!0),document.addEventListener("mousedown",l,!0),document.addEventListener("pointerup",l,!0),document.addEventListener("mouseup",l,!0),document.addEventListener("click",o=>{l(o,t)},!0)}function cr(){window.addEventListener("keyup",dt,!1),window.addEventListener("keydown",dr,!1),window.addEventListener("resize",fe),window.addEventListener("scroll",fe)}function ur(){window.removeEventListener("keyup",dt),window.removeEventListener("resize",fe),window.removeEventListener("scroll",fe)}function pr(){const r=w("popover");r&&(r.wrapper.style.display="none")}function Ve(r,t){var s,l;let o=w("popover");o&&document.body.removeChild(o.wrapper),o=mr(),document.body.appendChild(o.wrapper);const{title:c,description:m,showButtons:N,disableButtons:p,showProgress:x,nextBtnText:g=f("nextBtnText")||"Next &rarr;",prevBtnText:D=f("prevBtnText")||"&larr; Previous",progressText:u=f("progressText")||"{current} of {total}"}=t.popover||{};o.nextButton.innerHTML=g,o.previousButton.innerHTML=D,o.progress.innerHTML=u,c?(o.title.innerHTML=c,o.title.style.display="block"):o.title.style.display="none",m?(o.description.innerHTML=m,o.description.style.display="block"):o.description.style.display="none";const h=N||f("showButtons"),v=x||f("showProgress")||!1,b=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||v;o.closeButton.style.display=h.includes("close")?"block":"none",b?(o.footer.style.display="flex",o.progress.style.display=v?"block":"none",o.nextButton.style.display=h.includes("next")?"block":"none",o.previousButton.style.display=h.includes("previous")?"block":"none"):o.footer.style.display="none";const i=p||f("disableButtons")||[];i!=null&&i.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),i!=null&&i.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),i!=null&&i.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const j=o.wrapper;j.style.display="block",j.style.left="",j.style.top="",j.style.bottom="",j.style.right="",j.id="driver-popover-content",j.setAttribute("role","dialog"),j.setAttribute("aria-labelledby","driver-popover-title"),j.setAttribute("aria-describedby","driver-popover-description");const E=o.arrow;E.className="driver-popover-arrow";const I=((s=t.popover)==null?void 0:s.popoverClass)||f("popoverClass")||"";j.className=`driver-popover ${I}`.trim(),ct(o.wrapper,U=>{var Z,G,ee;const H=U.target,A=((Z=t.popover)==null?void 0:Z.onNextClick)||f("onNextClick"),K=((G=t.popover)==null?void 0:G.onPrevClick)||f("onPrevClick"),X=((ee=t.popover)==null?void 0:ee.onCloseClick)||f("onCloseClick");if(H.closest(".driver-popover-next-btn"))return A?A(r,t,{config:f(),state:w(),driver:J()}):pe("nextClick");if(H.closest(".driver-popover-prev-btn"))return K?K(r,t,{config:f(),state:w(),driver:J()}):pe("prevClick");if(H.closest(".driver-popover-close-btn"))return X?X(r,t,{config:f(),state:w(),driver:J()}):pe("closeClick")},U=>!(o!=null&&o.description.contains(U))&&!(o!=null&&o.title.contains(U))&&typeof U.className=="string"&&U.className.includes("driver-popover")),W("popover",o);const R=((l=t.popover)==null?void 0:l.onPopoverRender)||f("onPopoverRender");R&&R(o,{config:f(),state:w(),driver:J()}),pt(r,t),at(j);const _=r.classList.contains("driver-dummy-element"),L=st([j,..._?[]:[r]]);L.length>0&&L[0].focus()}function ut(){const r=w("popover");if(!(r!=null&&r.wrapper))return;const t=r.wrapper.getBoundingClientRect(),s=f("stagePadding")||0,l=f("popoverOffset")||0;return{width:t.width+s+l,height:t.height+s+l,realWidth:t.width,realHeight:t.height}}function qe(r,t){const{elementDimensions:s,popoverDimensions:l,popoverPadding:o,popoverArrowDimensions:c}=t;return r==="start"?Math.max(Math.min(s.top-o,window.innerHeight-l.realHeight-c.width),c.width):r==="end"?Math.max(Math.min(s.top-(l==null?void 0:l.realHeight)+s.height+o,window.innerHeight-(l==null?void 0:l.realHeight)-c.width),c.width):r==="center"?Math.max(Math.min(s.top+s.height/2-(l==null?void 0:l.realHeight)/2,window.innerHeight-(l==null?void 0:l.realHeight)-c.width),c.width):0}function Ze(r,t){const{elementDimensions:s,popoverDimensions:l,popoverPadding:o,popoverArrowDimensions:c}=t;return r==="start"?Math.max(Math.min(s.left-o,window.innerWidth-l.realWidth-c.width),c.width):r==="end"?Math.max(Math.min(s.left-(l==null?void 0:l.realWidth)+s.width+o,window.innerWidth-(l==null?void 0:l.realWidth)-c.width),c.width):r==="center"?Math.max(Math.min(s.left+s.width/2-(l==null?void 0:l.realWidth)/2,window.innerWidth-(l==null?void 0:l.realWidth)-c.width),c.width):0}function pt(r,t){const s=w("popover");if(!s)return;const{align:l="start",side:o="left"}=(t==null?void 0:t.popover)||{},c=l,m=r.id==="driver-dummy-element"?"over":o,N=f("stagePadding")||0,p=ut(),x=s.arrow.getBoundingClientRect(),g=r.getBoundingClientRect(),D=g.top-p.height;let u=D>=0;const h=window.innerHeight-(g.bottom+p.height);let v=h>=0;const b=g.left-p.width;let i=b>=0;const j=window.innerWidth-(g.right+p.width);let E=j>=0;const I=!u&&!v&&!i&&!E;let R=m;if(m==="top"&&u?E=i=v=!1:m==="bottom"&&v?E=i=u=!1:m==="left"&&i?E=u=v=!1:m==="right"&&E&&(i=u=v=!1),m==="over"){const _=window.innerWidth/2-p.realWidth/2,L=window.innerHeight/2-p.realHeight/2;s.wrapper.style.left=`${_}px`,s.wrapper.style.right="auto",s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto"}else if(I){const _=window.innerWidth/2-(p==null?void 0:p.realWidth)/2,L=10;s.wrapper.style.left=`${_}px`,s.wrapper.style.right="auto",s.wrapper.style.bottom=`${L}px`,s.wrapper.style.top="auto"}else if(i){const _=Math.min(b,window.innerWidth-(p==null?void 0:p.realWidth)-x.width),L=qe(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:N,popoverArrowDimensions:x});s.wrapper.style.left=`${_}px`,s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",R="left"}else if(E){const _=Math.min(j,window.innerWidth-(p==null?void 0:p.realWidth)-x.width),L=qe(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:N,popoverArrowDimensions:x});s.wrapper.style.right=`${_}px`,s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.left="auto",R="right"}else if(u){const _=Math.min(D,window.innerHeight-p.realHeight-x.width);let L=Ze(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:N,popoverArrowDimensions:x});s.wrapper.style.top=`${_}px`,s.wrapper.style.left=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",R="top"}else if(v){const _=Math.min(h,window.innerHeight-(p==null?void 0:p.realHeight)-x.width);let L=Ze(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:N,popoverArrowDimensions:x});s.wrapper.style.left=`${L}px`,s.wrapper.style.bottom=`${_}px`,s.wrapper.style.top="auto",s.wrapper.style.right="auto",R="bottom"}I?s.arrow.classList.add("driver-popover-arrow-none"):vr(c,R,r)}function vr(r,t,s){const l=w("popover");if(!l)return;const o=s.getBoundingClientRect(),c=ut(),m=l.arrow,N=c.width,p=window.innerWidth,x=o.width,g=o.left,D=c.height,u=window.innerHeight,h=o.top,v=o.height;m.className="driver-popover-arrow";let b=t,i=r;if(t==="top"?(g+x<=0?(b="right",i="end"):g+x-N<=0&&(b="top",i="start"),g>=p?(b="left",i="end"):g+N>=p&&(b="top",i="end")):t==="bottom"?(g+x<=0?(b="right",i="start"):g+x-N<=0&&(b="bottom",i="start"),g>=p?(b="left",i="start"):g+N>=p&&(b="bottom",i="end")):t==="left"?(h+v<=0?(b="bottom",i="end"):h+v-D<=0&&(b="left",i="start"),h>=u?(b="top",i="end"):h+D>=u&&(b="left",i="end")):t==="right"&&(h+v<=0?(b="bottom",i="start"):h+v-D<=0&&(b="right",i="start"),h>=u?(b="top",i="start"):h+D>=u&&(b="right",i="end")),!b)m.classList.add("driver-popover-arrow-none");else{m.classList.add(`driver-popover-arrow-side-${b}`),m.classList.add(`driver-popover-arrow-align-${i}`);const j=s.getBoundingClientRect(),E=m.getBoundingClientRect(),I=f("stagePadding")||0,R=j.left-I<window.innerWidth&&j.right+I>0&&j.top-I<window.innerHeight&&j.bottom+I>0;t==="bottom"&&R&&(E.x>j.x&&E.x+E.width<j.x+j.width?l.wrapper.style.transform="translateY(0)":(m.classList.remove(`driver-popover-arrow-align-${i}`),m.classList.add("driver-popover-arrow-none"),l.wrapper.style.transform=`translateY(-${I/2}px)`))}}function mr(){const r=document.createElement("div");r.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const s=document.createElement("header");s.id="driver-popover-title",s.classList.add("driver-popover-title"),s.style.display="none",s.innerText="Popover Title";const l=document.createElement("div");l.id="driver-popover-description",l.classList.add("driver-popover-description"),l.style.display="none",l.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const c=document.createElement("footer");c.classList.add("driver-popover-footer");const m=document.createElement("span");m.classList.add("driver-popover-progress-text"),m.innerText="";const N=document.createElement("span");N.classList.add("driver-popover-navigation-btns");const p=document.createElement("button");p.type="button",p.classList.add("driver-popover-prev-btn"),p.innerHTML="&larr; Previous";const x=document.createElement("button");return x.type="button",x.classList.add("driver-popover-next-btn"),x.innerHTML="Next &rarr;",N.appendChild(p),N.appendChild(x),c.appendChild(m),c.appendChild(N),r.appendChild(o),r.appendChild(t),r.appendChild(s),r.appendChild(l),r.appendChild(c),{wrapper:r,arrow:t,title:s,description:l,footer:c,previousButton:p,nextButton:x,closeButton:o,footerButtons:N,progress:m}}function hr(){var r;const t=w("popover");t&&((r=t.wrapper.parentElement)==null||r.removeChild(t.wrapper))}function fr(r={}){_e(r);function t(){f("allowClose")&&g()}function s(){const u=f("overlayClickBehavior");if(f("allowClose")&&u==="close"){g();return}if(typeof u=="function"){const h=w("__activeStep"),v=w("__activeElement");u(v,h,{config:f(),state:w(),driver:J()});return}u==="nextStep"&&l()}function l(){const u=w("activeIndex"),h=f("steps")||[];if(typeof u>"u")return;const v=u+1;h[v]?x(v):g()}function o(){const u=w("activeIndex"),h=f("steps")||[];if(typeof u>"u")return;const v=u-1;h[v]?x(v):g()}function c(u){(f("steps")||[])[u]?x(u):g()}function m(){var u;if(w("__transitionCallback"))return;const h=w("activeIndex"),v=w("__activeStep"),b=w("__activeElement");if(typeof h>"u"||typeof v>"u"||typeof w("activeIndex")>"u")return;const i=((u=v.popover)==null?void 0:u.onPrevClick)||f("onPrevClick");if(i)return i(b,v,{config:f(),state:w(),driver:J()});o()}function N(){var u;if(w("__transitionCallback"))return;const h=w("activeIndex"),v=w("__activeStep"),b=w("__activeElement");if(typeof h>"u"||typeof v>"u")return;const i=((u=v.popover)==null?void 0:u.onNextClick)||f("onNextClick");if(i)return i(b,v,{config:f(),state:w(),driver:J()});l()}function p(){w("isInitialized")||(W("isInitialized",!0),document.body.classList.add("driver-active",f("animate")?"driver-fade":"driver-simple"),cr(),we("overlayClick",s),we("escapePress",t),we("arrowLeftPress",m),we("arrowRightPress",N))}function x(u=0){var h,v,b,i,j,E,I,R;const _=f("steps");if(!_){console.error("No steps to drive through"),g();return}if(!_[u]){g();return}W("__activeOnDestroyed",document.activeElement),W("activeIndex",u);const L=_[u],U=_[u+1],Z=_[u-1],G=((h=L.popover)==null?void 0:h.doneBtnText)||f("doneBtnText")||"Done",ee=f("allowClose"),H=typeof((v=L.popover)==null?void 0:v.showProgress)<"u"?(b=L.popover)==null?void 0:b.showProgress:f("showProgress"),A=(((i=L.popover)==null?void 0:i.progressText)||f("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${_.length}`),K=((j=L.popover)==null?void 0:j.showButtons)||f("showButtons"),X=["next","previous",...ee?["close"]:[]].filter(me=>!(K!=null&&K.length)||K.includes(me)),Q=((E=L.popover)==null?void 0:E.onNextClick)||f("onNextClick"),ae=((I=L.popover)==null?void 0:I.onPrevClick)||f("onPrevClick"),ie=((R=L.popover)==null?void 0:R.onCloseClick)||f("onCloseClick");Ue({...L,popover:{showButtons:X,nextBtnText:U?void 0:G,disableButtons:[...Z?[]:["previous"]],showProgress:H,progressText:A,onNextClick:Q||(()=>{U?x(u+1):g()}),onPrevClick:ae||(()=>{x(u-1)}),onCloseClick:ie||(()=>{g()}),...(L==null?void 0:L.popover)||{}}})}function g(u=!0){const h=w("__activeElement"),v=w("__activeStep"),b=w("__activeOnDestroyed"),i=f("onDestroyStarted");if(u&&i){const I=!h||(h==null?void 0:h.id)==="driver-dummy-element";i(I?void 0:h,v,{config:f(),state:w(),driver:J()});return}const j=(v==null?void 0:v.onDeselected)||f("onDeselected"),E=f("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),ur(),hr(),lr(),sr(),Kt(),We(),h&&v){const I=h.id==="driver-dummy-element";j&&j(I?void 0:h,v,{config:f(),state:w(),driver:J()}),E&&E(I?void 0:h,v,{config:f(),state:w(),driver:J()})}b&&b.focus()}const D={isActive:()=>w("isInitialized")||!1,refresh:fe,drive:(u=0)=>{p(),x(u)},setConfig:_e,setSteps:u=>{We(),_e({...f(),steps:u})},getConfig:f,getState:w,getActiveIndex:()=>w("activeIndex"),isFirstStep:()=>w("activeIndex")===0,isLastStep:()=>{const u=f("steps")||[],h=w("activeIndex");return h!==void 0&&h===u.length-1},getActiveStep:()=>w("activeStep"),getActiveElement:()=>w("activeElement"),getPreviousElement:()=>w("previousElement"),getPreviousStep:()=>w("previousStep"),moveNext:l,movePrevious:o,moveTo:c,hasNextStep:()=>{const u=f("steps")||[],h=w("activeIndex");return h!==void 0&&!!u[h+1]},hasPreviousStep:()=>{const u=f("steps")||[],h=w("activeIndex");return h!==void 0&&!!u[h-1]},highlight:u=>{p(),Ue({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{g(!1)}};return Gt(D),D}function gr(){const r=()=>{fr({showProgress:!0,steps:[{element:"#diff-mode",popover:{title:"Solo Diferencias",description:"Activa este interruptor para ver solo los productos que tienen diferencias entre el stock f칤sico y el del sistema.",side:"bottom",align:"start"}},{element:'[role="tablist"]',popover:{title:"Pesta침as de Estado",description:'Navega entre "Pendientes" y "Controlados" para organizar tu trabajo.',side:"bottom",align:"start"}},{element:".bg-card.relative",popover:{title:"Acciones R치pidas",description:"Desliza a la derecha para Confirmar/Editar o a la izquierda para reportar Diferencia/Revertir.",side:"top",align:"start"}},{element:"button:has(.lucide-save)",popover:{title:"Finalizar Inventario",description:"Cuando termines, guarda el estado del inventario aqu칤.",side:"left",align:"start"}}]}).drive()};return B.useEffect(()=>{localStorage.getItem("has_seen_inventory_tour")||setTimeout(()=>{r(),localStorage.setItem("has_seen_inventory_tour","true")},1e3)},[]),e.jsx(ne,{variant:"ghost",size:"icon",onClick:r,title:"Ver Tutorial",children:e.jsx($t,{className:"w-5 h-5"})})}function xr({branchName:r,labName:t,items:s,onItemsLoaded:l}){const[o,c]=B.useState(!1),[m,N]=B.useState(!1);return B.useEffect(()=>{t&&r!=="Sucursal Desconocida"&&(async()=>{c(!0);try{const g=await ce.getLabInventory(r,t);g&&g.length>0&&l(g)}catch(g){console.error("Failed to load inventory:",g),q.error("Error de carga","No se pudo cargar el inventario desde la nube")}finally{c(!1)}})()},[t,r]),B.useEffect(()=>{if(s.length===0||!t||r==="Sucursal Desconocida")return;const x=setTimeout(()=>{ce.saveInventory(r,t,s).then(()=>console.log("Auto-saved")).catch(g=>console.error("Auto-save error",g))},2e3);return()=>clearTimeout(x)},[s,r,t]),{isLoading:o,setIsLoading:c,isSaving:m,setIsSaving:N,saveProgress:async()=>{N(!0);try{await ce.saveInventory(r,t,s),q.success("Progreso guardado","Los datos se guardaron en la nube")}catch(x){console.error("Error saving progress:",x),q.error("Error al guardar","No se pudo guardar el progreso")}finally{N(!1)}}}}const yr=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function wr({labName:r,branchName:t,currentItems:s,onItemsUpdated:l}){const[o,c]=B.useState(!1);return{isUploading:o,handleFileUpload:async N=>{var g;const p=(g=N.target.files)==null?void 0:g[0];if(!p)return;c(!0);const x=new FileReader;x.onload=D=>{var u,h;try{const v=(u=D.target)==null?void 0:u.result,b=Ot(v,{type:"binary"}),i=b.SheetNames[0],j=b.Sheets[i],E=zt.sheet_to_json(j,{header:1});let I="";for(let H=1;H<Math.min(E.length,20);H++){const A=E[H];if(A&&A[14]){I=String(A[14]).trim();break}}if(!I){q.error("Archivo inv치lido","No se pudo identificar el laboratorio en el archivo (Columna O)"),c(!1);return}const R=r.toUpperCase().trim(),_=I.toUpperCase().trim();if(R!==_&&!_.includes(R)&&!R.includes(_)){q.error("Laboratorio incorrecto",`El archivo pertenece a "${I}", pero est치s en "${r}"`),c(!1);return}const L=[...s],U=new Map;L.forEach((H,A)=>{U.set(String(H.ean).trim(),A)});let Z=0,G=0,ee=0;for(let H=1;H<E.length;H++){const A=E[H];if(!A||!A[3])continue;const K=A[2];if(!K)continue;const X=String(K).trim();if(!X)continue;let Q=(h=A[9])==null?void 0:h.toString().trim();if(Q&&(Q==="Medicamento"&&(Q="Medicamentos"),Q==="Perfumeria"&&(Q="Perfumer칤a")),(!Q||!yr.includes(Q))&&(Q="Varios"),U.has(X)){const ae=U.get(X),ie=L[ae];if(ie.status==="adjusted"||ie.status==="controlled"){ee++;continue}L[ae]={...ie,name:A[3],systemQuantity:Number(A[4])||0,countedQuantity:Number(A[4])||0,cost:Number(A[12])||0,category:Q,status:"pending"},G++;continue}L.push({id:crypto.randomUUID(),ean:X,name:A[3],systemQuantity:Number(A[4])||0,countedQuantity:Number(A[4])||0,cost:Number(A[12])||0,status:"pending",category:Q,wasReadjusted:!1}),Z++}l(L),ce.saveInventory(t,r,L).then(()=>console.log("Auto-save after upload success")).catch(H=>console.error("Auto-save failed",H)),Z>0||G>0?q.success("Carga exitosa",`${Z} nuevos, ${G} actualizados`):q.info("Sin cambios",`${ee} productos ya estaban procesados`)}catch(v){console.error("Error reading file:",v),q.error("Error de archivo","No se pudo procesar el archivo Excel")}finally{c(!1),N.target.value=""}},x.readAsBinaryString(p)}}}function br(r,t="Medicamentos"){const[s,l]=B.useState(""),[o,c]=B.useState(!1),[m,N]=B.useState(t),p=B.useMemo(()=>r.filter(v=>{if(s){const b=s.toLowerCase();if(!v.name.toLowerCase().includes(b)&&!v.ean.includes(b))return!1}return o?v.countedQuantity!==v.systemQuantity:!0}),[r,s,o]),x=B.useMemo(()=>p.filter(v=>v.status==="pending"&&(v.category===m||!v.category&&m==="Varios")),[p,m]),g=v=>[...v].sort((b,i)=>{const j=b.countedQuantity-b.systemQuantity,E=i.countedQuantity-i.systemQuantity,I=j!==0,R=E!==0;return I&&!R?-1:!I&&R?1:j-E}),D=B.useMemo(()=>g(p.filter(v=>v.status==="controlled")),[p]),u=B.useMemo(()=>g(p.filter(v=>v.status==="adjusted")),[p]),h=B.useMemo(()=>{let v=0,b=0,i=0;return r.forEach(j=>{const E=j.countedQuantity-j.systemQuantity,I=E*j.cost;E<0?v+=I:E>0&&(b+=I),i+=I}),{negative:v,positive:b,net:i}},[r]);return{searchTerm:s,setSearchTerm:l,showDifferencesOnly:o,setShowDifferencesOnly:c,currentCategory:m,setCurrentCategory:N,filteredItems:p,pendingItems:x,controlledItems:D,adjustedItems:u,financialStats:h}}function jr(){return e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"h-8 w-1/3 bg-muted rounded"}),e.jsx("div",{className:"h-8 w-24 bg-muted rounded"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(r=>e.jsx(de,{className:"p-4 h-24 bg-muted/50 border-none"},r))}),e.jsx("div",{className:"h-10 w-full bg-muted rounded mb-6"}),e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(r=>e.jsxs(de,{className:"p-4 flex gap-4 border-none bg-muted/20",children:[e.jsx("div",{className:"h-12 w-12 bg-muted rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-muted rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted rounded"})]}),e.jsx("div",{className:"h-8 w-8 bg-muted rounded"})]},r))})]})}const Ge=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function Vr(){const{id:r}=bt(),t=jt(),{user:s}=Mt(),l=r?decodeURIComponent(r):"",o=(s==null?void 0:s.branchName)||"Sucursal Desconocida",[c,m]=B.useState([]),{isLoading:N,setIsLoading:p,isSaving:x,setIsSaving:g,saveProgress:D}=xr({branchName:o,labName:l,items:c,onItemsLoaded:m}),{isUploading:u,handleFileUpload:h}=wr({branchName:o,labName:l,currentItems:c,onItemsUpdated:m}),{searchTerm:v,setSearchTerm:b,showDifferencesOnly:i,setShowDifferencesOnly:j,currentCategory:E,setCurrentCategory:I,pendingItems:R,controlledItems:_,adjustedItems:L}=br(c,Ge[0]),[U,Z]=B.useState(!1),[G,ee]=B.useState(""),[H,A]=B.useState(""),[K,X]=B.useState([]);B.useState(()=>{o&&l&&ce.getAdjustmentHistory(o,l).then(X)});const Q=B.useCallback((d,C)=>{m(M=>M.map(P=>{if(P.id===d){C-P.systemQuantity!==0&&navigator.vibrate?navigator.vibrate([50,50,50]):navigator.vibrate&&navigator.vibrate(50);const k=P.status==="adjusted";return{...P,countedQuantity:C,status:P.status==="adjusted"?"adjusted":"controlled",wasReadjusted:k?!0:P.wasReadjusted}}return P}))},[]),ae=B.useCallback(d=>{navigator.vibrate&&navigator.vibrate(50),Vt({particleCount:100,spread:70,origin:{y:.6}}),m(C=>C.map(M=>M.id===d?{...M,status:"controlled",countedQuantity:M.systemQuantity}:M)),q.success("Operaci칩n exitosa","Producto controlado")},[]),ie=B.useCallback(d=>{m(C=>C.map(M=>M.id===d?{...M,status:"pending"}:M)),q.info("Informaci칩n","Producto devuelto a pendientes")},[]),me=async()=>{const d=_.filter(y=>y.countedQuantity<y.systemQuantity),C=_.filter(y=>y.countedQuantity>y.systemQuantity),M=d.length>0,P=C.length>0;if(M&&!G.trim()){q.error("Error","Por favor ingresa el ID de ajuste para Faltantes");return}if(P&&!H.trim()){q.error("Error","Por favor ingresa el ID de ajuste para Sobrantes");return}g(!0);try{const y=c.map(k=>k.status==="controlled"?{...k,status:"adjusted"}:k);m(y),await ce.saveInventory(o,l,y),await ce.saveAdjustmentHistory(o,l,{adjustment_id_shortage:G,adjustment_id_surplus:H,shortage_value:a,surplus_value:n,total_units_adjusted:_.length,user_name:s==null?void 0:s.name,items_snapshot:y}),q.success("Operaci칩n exitosa","Inventario finalizado y guardado en la nube."),Z(!1),ee(""),A(""),t("/cyclic-inventory")}catch(y){console.error("Error saving inventory:",y),q.error("Error","Error al guardar en la nube.")}finally{g(!1)}},Se=async()=>{await D(),Z(!0)},a=_.filter(d=>d.countedQuantity<d.systemQuantity).reduce((d,C)=>d+(C.systemQuantity-C.countedQuantity)*C.cost,0),n=_.filter(d=>d.countedQuantity>d.systemQuantity).reduce((d,C)=>d+(C.countedQuantity-C.systemQuantity)*C.cost,0),S=async()=>{if(confirm("쮼st치s seguro de que quieres reiniciar los datos de este laboratorio? Se borrar치n de la nube.")){m([]),await new Promise(d=>setTimeout(d,2500));try{await ce.deleteInventory(o,l),q.success("Operaci칩n exitosa","Datos reiniciados correctamente."),t("/cyclic-inventory")}catch(d){console.error("Error resetting data:",d),q.error("Error","Error al reiniciar datos. Intente de nuevo.")}}};return e.jsxs(Et,{className:"pb-32 lg:pb-10",children:[e.jsx(Qt,{title:l,subtitle:"Control de Inventario C칤clico",showBackButton:!0}),N?e.jsx(jr,{}):e.jsx(e.Fragment,{children:c.length===0?e.jsxs(de,{className:"p-12 border-dashed border-2 flex flex-col items-center justify-center text-center space-y-4 bg-muted/20",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx($e,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cargar Archivo de Inventario"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:["Sube el archivo Excel (.xlsx) descargado del sistema para comenzar el control de ",l,"."]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{disabled:N,children:N?"Procesando...":"Seleccionar Archivo"}),e.jsx(he,{type:"file",accept:".xlsx, .xls",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:h,disabled:u||N})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Columnas requeridas: C (EAN), D (Producto), E (Cantidad), O (Laboratorio), J (Rubro)"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-warning/5 border-warning/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Pendientes"}),e.jsx("span",{className:"text-2xl font-bold text-warning",children:e.jsx(ye,{value:c.filter(d=>d.status==="pending").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-success/5 border-success/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Controlados"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:e.jsx(ye,{value:c.filter(d=>d.status==="controlled").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-blue-500/5 border-blue-500/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Ajustados"}),e.jsx("span",{className:"text-2xl font-bold text-blue-500",children:e.jsx(ye,{value:c.filter(d=>d.status==="adjusted").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Avance"}),e.jsxs("span",{className:"text-2xl font-bold",children:[e.jsx(ye,{value:Math.round(c.filter(d=>d.status==="controlled"||d.status==="adjusted").length/c.length*100)}),"%"]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(It,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(he,{placeholder:"Buscar por nombre o EAN...",value:v,onChange:d=>b(d.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-card p-2 rounded-lg border",children:[e.jsx(Ft,{id:"diff-mode",checked:i,onCheckedChange:j}),e.jsx(Pe,{htmlFor:"diff-mode",className:"cursor-pointer",children:"Solo Diferencias"})]})]}),e.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:e.jsx("div",{className:"flex gap-2",children:Ge.map(d=>e.jsx(ne,{variant:E===d?"default":"outline",onClick:()=>I(d),className:se("rounded-full px-6 transition-all",E===d?"shadow-md":"opacity-70 hover:opacity-100"),children:d},d))})}),e.jsxs(_t,{defaultValue:"pending",className:"w-full",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(ge,{value:"pending",className:"relative",children:["Pendientes (",E,")",R.length>0&&e.jsx("span",{className:"ml-2 bg-warning text-warning-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:R.length})]}),e.jsxs(ge,{value:"controlled",children:["Controlados",_.length>0&&e.jsx("span",{className:"ml-2 bg-success text-success-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:_.length})]}),e.jsxs(ge,{value:"adjusted",children:["Ajustados",L.length>0&&e.jsx("span",{className:"ml-2 bg-blue-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:L.length})]}),e.jsx(ge,{value:"history",children:"Historial"})]}),e.jsxs(xe,{value:"pending",className:"space-y-4",children:[e.jsxs(et,{className:"bg-muted/50 border-none mb-4",children:[e.jsx(Pt,{className:"h-4 w-4"}),e.jsx(tt,{children:"Instrucciones"}),e.jsx(rt,{children:"Desliza a la derecha para confirmar (verde) o a la izquierda para reportar diferencia (naranja)."})]}),e.jsx(ke,{items:R,onUpdateQuantity:Q,onCheck:ae})]}),e.jsx(xe,{value:"controlled",className:"space-y-4",children:e.jsx(ke,{items:_,onUpdateQuantity:Q,onCheck:ae,onRevert:ie,readOnly:!1})}),e.jsx(xe,{value:"adjusted",className:"space-y-4",children:e.jsx(ke,{items:L,onUpdateQuantity:Q,onCheck:()=>{},readOnly:!1})}),e.jsx(xe,{value:"history",className:"space-y-4",children:K.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-lg border-dashed border-2",children:"No hay historial de ajustes para este laboratorio."}):e.jsx("div",{className:"space-y-4",children:K.map(d=>e.jsxs(de,{className:"p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-primary",children:[new Date(d.created_at).toLocaleDateString()," ",new Date(d.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Por: ",d.user_name||"Desconocido"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:[d.total_units_adjusted," items"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[e.jsxs("div",{className:"bg-destructive/10 p-2 rounded border border-destructive/20",children:[e.jsx("span",{className:"font-semibold text-destructive block",children:"Faltantes"}),"ID: ",d.adjustment_id_shortage||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(d.shortage_value).toLocaleString()]})]}),e.jsxs("div",{className:"bg-success/10 p-2 rounded border border-success/20",children:[e.jsx("span",{className:"font-semibold text-success block",children:"Sobrantes"}),"ID: ",d.adjustment_id_surplus||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(d.surplus_value).toLocaleString()]})]})]})]},d.id))})})]})]})]})}),e.jsx(Ke,{open:U,onOpenChange:Z,children:e.jsxs(Xe,{children:[e.jsxs(Ye,{children:[e.jsx(Je,{children:"Finalizar Inventario"}),e.jsx(kt,{children:"Ingresa el ID del ajuste generado en PLEX para guardar el estado de este inventario."})]}),e.jsxs("div",{className:"py-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-destructive/5 rounded-lg border border-destructive/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Pe,{className:"text-destructive font-bold",children:"Faltantes (Negativos)"}),e.jsxs("span",{className:"font-mono font-bold text-destructive",children:["$",a.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(he,{value:G,onChange:d=>ee(d.target.value),placeholder:"ID Ajuste Faltantes (PLEX)"})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-success/5 rounded-lg border border-success/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Pe,{className:"text-success font-bold",children:"Sobrantes (Positivos)"}),e.jsxs("span",{className:"font-mono font-bold text-success",children:["$",n.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(he,{value:H,onChange:d=>A(d.target.value),placeholder:"ID Ajuste Sobrantes (PLEX)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ne,{variant:"outline",onClick:()=>Z(!1),children:"Cancelar"}),e.jsxs(ne,{onClick:me,disabled:x,children:[x?e.jsx(Wt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Confirmar y Finalizar"]})]})]})}),e.jsx("input",{id:"inventory-upload-hidden",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:h,disabled:u||N}),e.jsx(Ht,{actions:[{label:"Cargar Excel",icon:e.jsx($e,{className:"w-5 h-5"}),onClick:()=>{var d;return(d=document.getElementById("inventory-upload-hidden"))==null?void 0:d.click()},disabled:u||x,variant:"secondary"},{label:"Reiniciar",icon:e.jsx(Ut,{className:"w-5 h-5"}),onClick:S,disabled:u||x,variant:"destructive",color:"bg-red-100 text-red-600 hover:bg-red-200"},{label:"Finalizar",icon:e.jsx(je,{className:"w-5 h-5"}),onClick:Se,disabled:x,variant:"default",color:"bg-primary text-primary-foreground"}].filter(d=>!(d.label==="Finalizar"&&c.length===0))}),e.jsx(gr,{})]})}export{Vr as default};
