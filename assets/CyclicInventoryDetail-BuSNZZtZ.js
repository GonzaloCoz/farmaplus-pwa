import{j as e}from"./ui-vendor-CwIRxpyq.js";import{r as B,k as jt,u as Ct}from"./react-vendor-ylmX0jv_.js";import{b as se,P as Oe,p as fe,T as Nt,O as Se,i as de,h as Pe,B as q,F as Xe,G as Je,H as Ye,J as et,Q as St,ad as Mt,x as Z,u as Et,M as It,U as ke,S as Pt,I as kt,K as _t}from"./index-CRCrhKU4.js";import{I as me}from"./input-DJmmUFgp.js";import{T as Lt,a as Dt,b as ye,c as we}from"./tabs-BekFzWPa.js";import{P as Tt}from"./ProductImageHover-C-z3ApTV.js";import{u as Bt,P as ze,C as Rt}from"./Calculator-DLJeaUI0.js";import{u as At,a as _e,m as ve,A as Qe}from"./animation-DbfETv0H.js";import{D as $t,c as ce}from"./cyclicInventoryService-BO2R7mmW.js";import{C as We}from"./calculator-BzteN5kW.js";import{C as be}from"./CounterAnimation-DSOCKTOo.js";import{S as Ft}from"./switch-Dfiy9-aF.js";import{L as Le}from"./label-BdVcOHK8.js";import{C as Ht}from"./circle-help-CC1_usRp.js";import{r as Ot,u as zt}from"./excel-uoQkVabA.js";import{P as Qt}from"./PageHeader-Pu5qrWnn.js";import{L as je}from"./loader-circle-DVdQsWNG.js";import"./utils-DNiwW225.js";var Re={};(function r(t,s,l,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",S=function(){if(!t.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),n=a.getContext("2d");n.fillRect(0,0,1,1);var N=a.transferToImageBitmap();n.createPattern(N,"no-repeat")}catch{return!1}return!0}();function p(){}function x(a){var n=s.exports.Promise,N=n!==void 0?n:t.Promise;return typeof N=="function"?new N(a):(a(p,p),null)}var g=function(a,n){return{transform:function(N){if(a)return N;if(n.has(N))return n.get(N);var d=new OffscreenCanvas(N.width,N.height),C=d.getContext("2d");return C.drawImage(N,0,0),n.set(N,d),d},clear:function(){n.clear()}}}(S,new Map),D=function(){var a=Math.floor(16.666666666666668),n,N,d={},C=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(M){var P=Math.random();return d[P]=requestAnimationFrame(function y(k){C===k||C+a-1<k?(C=k,delete d[P],M()):d[P]=requestAnimationFrame(y)}),P},N=function(M){d[M]&&cancelAnimationFrame(d[M])}):(n=function(M){return setTimeout(M,a)},N=function(M){return clearTimeout(M)}),{frame:n,cancel:N}}(),u=function(){var a,n,N={};function d(C){function M(P,y){C.postMessage({options:P||{},callback:y})}C.init=function(y){var k=y.transferControlToOffscreen();C.postMessage({canvas:k},[k])},C.fire=function(y,k,$){if(n)return M(y,null),n;var O=Math.random().toString(36).slice(2);return n=x(function(F){function z(V){V.data.callback===O&&(delete N[O],C.removeEventListener("message",z),n=null,g.clear(),$(),F())}C.addEventListener("message",z),M(y,O),N[O]=z.bind(null,{data:{callback:O}})}),n},C.reset=function(){C.postMessage({reset:!0});for(var y in N)N[y](),delete N[y]}}return function(){if(a)return a;if(!l&&c){var C=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([C])))}catch(M){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("游꿁 Could not load worker",M),null}d(a)}return a}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function m(a,n){return n?n(a):a}function b(a){return a!=null}function i(a,n,N){return m(a&&b(a[n])?a[n]:v[n],N)}function j(a){return a<0?0:Math.floor(a)}function E(a,n){return Math.floor(Math.random()*(n-a))+a}function I(a){return parseInt(a,16)}function R(a){return a.map(_)}function _(a){var n=String(a).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:I(n.substring(0,2)),g:I(n.substring(2,4)),b:I(n.substring(4,6))}}function L(a){var n=i(a,"origin",Object);return n.x=i(n,"x",Number),n.y=i(n,"y",Number),n}function U(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function G(a){var n=a.getBoundingClientRect();a.width=n.width,a.height=n.height}function K(a){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=a,n}function te(a,n,N,d,C,M,P,y,k){a.save(),a.translate(n,N),a.rotate(M),a.scale(d,C),a.arc(0,0,1,P,y,k),a.restore()}function H(a){var n=a.angle*(Math.PI/180),N=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-n+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function A(a,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var N=n.tick++/n.totalTicks,d=n.x+n.random*n.tiltCos,C=n.y+n.random*n.tiltSin,M=n.wobbleX+n.random*n.tiltCos,P=n.wobbleY+n.random*n.tiltSin;if(a.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-N)+")",a.beginPath(),h&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))a.fill(ie(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(M-d)*.1,Math.abs(P-C)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var y=Math.PI/10*n.wobble,k=Math.abs(M-d)*.1,$=Math.abs(P-C)*.1,O=n.shape.bitmap.width*n.scalar,F=n.shape.bitmap.height*n.scalar,z=new DOMMatrix([Math.cos(y)*k,Math.sin(y)*k,-Math.sin(y)*$,Math.cos(y)*$,n.x,n.y]);z.multiplySelf(new DOMMatrix(n.shape.matrix));var V=a.createPattern(g.transform(n.shape.bitmap),"no-repeat");V.setTransform(z),a.globalAlpha=1-N,a.fillStyle=V,a.fillRect(n.x-O/2,n.y-F/2,O,F),a.globalAlpha=1}else if(n.shape==="circle")a.ellipse?a.ellipse(n.x,n.y,Math.abs(M-d)*n.ovalScalar,Math.abs(P-C)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):te(a,n.x,n.y,Math.abs(M-d)*n.ovalScalar,Math.abs(P-C)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var T=Math.PI/2*3,Y=4*n.scalar,re=8*n.scalar,ne=n.x,le=n.y,ue=5,oe=Math.PI/ue;ue--;)ne=n.x+Math.cos(T)*re,le=n.y+Math.sin(T)*re,a.lineTo(ne,le),T+=oe,ne=n.x+Math.cos(T)*Y,le=n.y+Math.sin(T)*Y,a.lineTo(ne,le),T+=oe;else a.moveTo(Math.floor(n.x),Math.floor(n.y)),a.lineTo(Math.floor(n.wobbleX),Math.floor(C)),a.lineTo(Math.floor(M),Math.floor(P)),a.lineTo(Math.floor(d),Math.floor(n.wobbleY));return a.closePath(),a.fill(),n.tick<n.totalTicks}function X(a,n,N,d,C){var M=n.slice(),P=a.getContext("2d"),y,k,$=x(function(O){function F(){y=k=null,P.clearRect(0,0,d.width,d.height),g.clear(),C(),O()}function z(){l&&!(d.width===o.width&&d.height===o.height)&&(d.width=a.width=o.width,d.height=a.height=o.height),!d.width&&!d.height&&(N(a),d.width=a.width,d.height=a.height),P.clearRect(0,0,d.width,d.height),M=M.filter(function(V){return A(P,V)}),M.length?y=D.frame(z):F()}y=D.frame(z),k=F});return{addFettis:function(O){return M=M.concat(O),$},canvas:a,promise:$,reset:function(){y&&D.cancel(y),k&&k()}}}function J(a,n){var N=!a,d=!!i(n||{},"resize"),C=!1,M=i(n,"disableForReducedMotion",Boolean),P=c&&!!i(n||{},"useWorker"),y=P?u():null,k=N?U:G,$=a&&y?!!a.__confetti_initialized:!1,O=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,F;function z(T,Y,re){for(var ne=i(T,"particleCount",j),le=i(T,"angle",Number),ue=i(T,"spread",Number),oe=i(T,"startVelocity",Number),vt=i(T,"decay",Number),ht=i(T,"gravity",Number),ft=i(T,"drift",Number),Ae=i(T,"colors",R),gt=i(T,"ticks",Number),$e=i(T,"shapes"),xt=i(T,"scalar"),yt=!!i(T,"flat"),Fe=L(T),He=ne,Ie=[],wt=a.width*Fe.x,bt=a.height*Fe.y;He--;)Ie.push(H({x:wt,y:bt,angle:le,spread:ue,startVelocity:oe,color:Ae[He%Ae.length],shape:$e[E(0,$e.length)],ticks:gt,decay:vt,gravity:ht,drift:ft,scalar:xt,flat:yt}));return F?F.addFettis(Ie):(F=X(a,Ie,k,Y,re),F.promise)}function V(T){var Y=M||i(T,"disableForReducedMotion",Boolean),re=i(T,"zIndex",Number);if(Y&&O)return x(function(oe){oe()});N&&F?a=F.canvas:N&&!a&&(a=K(re),document.body.appendChild(a)),d&&!$&&k(a);var ne={width:a.width,height:a.height};y&&!$&&y.init(a),$=!0,y&&(a.__confetti_initialized=!0);function le(){if(y){var oe={getBoundingClientRect:function(){if(!N)return a.getBoundingClientRect()}};k(oe),y.postMessage({resize:{width:oe.width,height:oe.height}});return}ne.width=ne.height=null}function ue(){F=null,d&&(C=!1,t.removeEventListener("resize",le)),N&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,$=!1)}return d&&!C&&(C=!0,t.addEventListener("resize",le,!1)),y?y.fire(T,ne,ue):z(T,ne,ue)}return V.reset=function(){y&&y.reset(),F&&F.reset()},V}var Q;function ae(){return Q||(Q=J(null,{useWorker:!0,resize:!0})),Q}function ie(a,n,N,d,C,M,P){var y=new Path2D(a),k=new Path2D;k.addPath(y,new DOMMatrix(n));var $=new Path2D;return $.addPath(k,new DOMMatrix([Math.cos(P)*C,Math.sin(P)*C,-Math.sin(P)*M,Math.cos(P)*M,N,d])),$}function he(a){if(!h)throw new Error("path confetti are not supported in this browser");var n,N;typeof a=="string"?n=a:(n=a.path,N=a.matrix);var d=new Path2D(n),C=document.createElement("canvas"),M=C.getContext("2d");if(!N){for(var P=1e3,y=P,k=P,$=0,O=0,F,z,V=0;V<P;V+=2)for(var T=0;T<P;T+=2)M.isPointInPath(d,V,T,"nonzero")&&(y=Math.min(y,V),k=Math.min(k,T),$=Math.max($,V),O=Math.max(O,T));F=$-y,z=O-k;var Y=10,re=Math.min(Y/F,Y/z);N=[re,0,0,re,-Math.round(F/2+y)*re,-Math.round(z/2+k)*re]}return{type:"path",path:n,matrix:N}}function xe(a){var n,N=1,d="#000000",C='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?n=a:(n=a.text,N="scalar"in a?a.scalar:N,C="fontFamily"in a?a.fontFamily:C,d="color"in a?a.color:d);var M=10*N,P=""+M+"px "+C,y=new OffscreenCanvas(M,M),k=y.getContext("2d");k.font=P;var $=k.measureText(n),O=Math.ceil($.actualBoundingBoxRight+$.actualBoundingBoxLeft),F=Math.ceil($.actualBoundingBoxAscent+$.actualBoundingBoxDescent),z=2,V=$.actualBoundingBoxLeft+z,T=$.actualBoundingBoxAscent+z;O+=z+z,F+=z+z,y=new OffscreenCanvas(O,F),k=y.getContext("2d"),k.font=P,k.fillStyle=d,k.fillText(n,V,T);var Y=1/N;return{type:"bitmap",bitmap:y.transferToImageBitmap(),matrix:[Y,0,0,Y,-O*Y/2,-F*Y/2]}}s.exports=function(){return ae().apply(this,arguments)},s.exports.reset=function(){ae().reset()},s.exports.create=J,s.exports.shapeFromPath=he,s.exports.shapeFromText=xe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Re,!1);const Wt=Re.exports;Re.exports.create;function Ut({children:r,leftAction:t,rightAction:s,className:l,threshold:o=60,disabled:c=!1}){const h=At(0),[S,p]=B.useState(!1),x=_e(h,[0,o],[0,1]),g=_e(h,[-o,0],[1,0]),D=_e(h,[-o,0,o],[(s==null?void 0:s.bgColor)||"rgba(0,0,0,0)","rgba(0,0,0,0)",(t==null?void 0:t.bgColor)||"rgba(0,0,0,0)"]),{trigger:u}=Bt(),[v,m]=B.useState(!1),b=(j,E)=>{p(!1),m(!1),!c&&(E.offset.x<-o&&s?s.onAction():E.offset.x>o&&t&&t.onAction())},i=(j,E)=>{if(c)return;const I=E.offset.x;v?I>-o&&I<o&&m(!1):(I<-o&&s||I>o&&t)&&(u("selection"),m(!0))};return e.jsxs("div",{className:se("relative overflow-hidden rounded-xl",l),children:[e.jsxs(ve.div,{className:"absolute inset-0 flex items-center justify-between px-4 pointer-events-none",style:{backgroundColor:D},children:[e.jsxs(ve.div,{style:{opacity:x},className:se("flex items-center",t==null?void 0:t.color),children:[t==null?void 0:t.icon,e.jsx("span",{className:"font-medium ml-2",children:t==null?void 0:t.label})]}),e.jsxs(ve.div,{style:{opacity:g},className:se("flex items-center",s==null?void 0:s.color),children:[e.jsx("span",{className:"font-medium mr-2",children:s==null?void 0:s.label}),s==null?void 0:s.icon]})]}),e.jsx(ve.div,{drag:c?!1:"x",dragConstraints:{left:0,right:0},dragElastic:.7,onDragStart:()=>p(!0),onDrag:i,onDragEnd:b,style:{x:h,touchAction:"none"},className:"relative bg-card z-10",whileTap:{cursor:c?"default":"grabbing"},children:r})]})}const De=B.memo(function({items:t,onUpdateQuantity:s,onCheck:l,onRevert:o,readOnly:c=!1}){const[h,S]=B.useState(null),[p,x]=B.useState(""),[g,D]=B.useState(!1),u=i=>{S(i.id),x(i.countedQuantity.toString()),D(!1)},v=()=>{if(h){const i=parseInt(p,10);!isNaN(i)&&i>=0&&(s(h,i),S(null))}},m=()=>{S(null),x(""),D(!1)},b=i=>{x(Math.floor(i).toString())};return t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No hay productos en esta lista"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:e.jsx(Qe,{mode:"popLayout",children:t.map(i=>{const j=i.countedQuantity-i.systemQuantity,E=j!==0,I=i.status==="controlled",R=j===0;return e.jsx(ve.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:e.jsx(Ut,{disabled:c,...I?{leftAction:{label:"Editar",icon:e.jsx(ze,{className:"w-5 h-5"}),color:"text-blue-500",bgColor:"rgba(59, 130, 246, 0.2)",onAction:()=>u(i)},rightAction:o?{label:"Revertir",icon:e.jsx(Se,{className:"w-5 h-5"}),color:"text-red-500",bgColor:"rgba(239, 68, 68, 0.2)",onAction:()=>o(i.id)}:void 0}:{leftAction:{label:"Confirmar",icon:e.jsx(fe,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"rgba(22, 163, 74, 0.2)",onAction:()=>l(i.id)},rightAction:{label:"Diferencia",icon:e.jsx(Nt,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"rgba(249, 115, 22, 0.2)",onAction:()=>u(i)}},children:e.jsx(de,{className:se("p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border"),onClick:()=>u(i),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:se("p-2 rounded-lg flex-shrink-0 transition-colors",I?"bg-success/10":"bg-primary/10"),children:I?e.jsx(fe,{className:"w-5 h-5 text-success"}):e.jsx(Oe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Tt,{ean:i.ean,name:i.name,children:e.jsx("h4",{className:"font-medium text-foreground truncate",title:i.name,children:i.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-mono bg-muted px-1.5 py-0.5 rounded",children:i.ean}),i.cost>0&&e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx($t,{className:"w-3 h-3 mr-0.5"}),i.cost.toFixed(2)]}),(i.status==="controlled"||i.status==="adjusted")&&i.category&&e.jsx(Pe,{variant:"outline",className:"text-[10px] h-5 px-1.5 ml-auto",children:i.category})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Sistema"}),e.jsx("span",{className:"text-sm font-medium",children:i.systemQuantity})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"F칤sico"}),e.jsx("span",{className:se("text-sm font-bold",E?"text-warning":"text-success"),children:i.countedQuantity})]}),E&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Diferencia"}),e.jsx(Pe,{variant:j>0?"default":"destructive",className:"h-5 px-1.5 text-[10px]",children:j>0?`+${j}`:j})]}),i.wasReadjusted&&e.jsxs("div",{className:"flex flex-col",title:"Este producto fue re-ajustado",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Re-Ajuste"}),e.jsxs(Pe,{variant:"outline",className:"h-5 px-1.5 text-[10px] bg-purple-100 text-purple-700 border-purple-200",children:[e.jsx(We,{className:"w-3 h-3 mr-0.5"})," Modif."]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:_=>{_.stopPropagation(),u(i)},children:e.jsx(ze,{className:"w-4 h-4"})}),i.status==="pending"&&e.jsx(q,{size:"icon",variant:R?"default":"secondary",className:se("h-10 w-10 rounded-full shadow-sm flex-shrink-0 transition-all ml-1",R?"bg-success hover:bg-success/90 text-white":"hover:bg-warning/20 text-warning"),onClick:_=>{_.stopPropagation(),l(i.id)},children:e.jsx(fe,{className:"w-5 h-5"})}),i.status==="controlled"&&o&&e.jsx(q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:_=>{_.stopPropagation(),o(i.id)},title:"Volver a pendientes",children:e.jsx(Se,{className:"w-4 h-4"})})]})]})})})},i.id)})})}),e.jsx(Xe,{open:h!==null,onOpenChange:i=>!i&&m(),children:e.jsxs(Je,{className:"sm:max-w-md",children:[e.jsx(Ye,{children:e.jsx(et,{children:"Editar Cantidad"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cantidad F칤sica"}),e.jsx(me,{type:"number",min:"0",value:p,onChange:i=>x(i.target.value),onKeyDown:i=>{i.key==="Enter"&&v()},placeholder:"Ingresa la cantidad",autoFocus:!0})]}),e.jsx(q,{variant:g?"secondary":"outline",size:"icon",onClick:()=>D(!g),title:"Calculadora",children:e.jsx(We,{className:"w-4 h-4"})})]}),e.jsx(Qe,{children:g&&e.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx(Rt,{onResult:b,onClose:()=>D(!1)})})})]}),e.jsxs(St,{children:[e.jsx(q,{variant:"outline",onClick:m,children:"Cancelar"}),e.jsx(q,{onClick:v,children:"Guardar"})]})]})})]})}),Vt=Mt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tt=B.forwardRef(({className:r,variant:t,...s},l)=>e.jsx("div",{ref:l,role:"alert",className:se(Vt({variant:t}),r),...s}));tt.displayName="Alert";const rt=B.forwardRef(({className:r,...t},s)=>e.jsx("h5",{ref:s,className:se("mb-1 font-medium leading-none tracking-tight",r),...t}));rt.displayName="AlertTitle";const nt=B.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:se("text-sm [&_p]:leading-relaxed",r),...t}));nt.displayName="AlertDescription";let Be={},st;function Te(r={}){Be={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function f(r){return r?Be[r]:Be}function qt(r){st=r}function ee(){return st}let Me={};function Ce(r,t){Me[r]=t}function pe(r){var t;(t=Me[r])==null||t.call(Me)}function Zt(){Me={}}function Ne(r,t,s,l){return(r/=l/2)<1?s/2*r*r+t:-s/2*(--r*(r-2)-1)+t}function at(r){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(s=>{const l=s.matches(t),o=Array.from(s.querySelectorAll(t));return[...l?[s]:[],...o]}).filter(s=>getComputedStyle(s).pointerEvents!=="none"&&Xt(s))}function ot(r){if(!r||Kt(r))return;const t=f("smoothScroll"),s=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!t||Gt(r)?"auto":"smooth",inline:"center",block:s?"start":"center"})}function Gt(r){if(!r||!r.parentElement)return;const t=r.parentElement;return t.scrollHeight>t.clientHeight}function Kt(r){const t=r.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Xt(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let Ee={};function W(r,t){Ee[r]=t}function w(r){return r?Ee[r]:Ee}function Ue(){Ee={}}function Jt(r,t,s,l){let o=w("__activeStagePosition");const c=o||s.getBoundingClientRect(),h=l.getBoundingClientRect(),S=Ne(r,c.x,h.x-c.x,t),p=Ne(r,c.y,h.y-c.y,t),x=Ne(r,c.width,h.width-c.width,t),g=Ne(r,c.height,h.height-c.height,t);o={x:S,y:p,width:x,height:g},lt(o),W("__activeStagePosition",o)}function it(r){if(!r)return;const t=r.getBoundingClientRect(),s={x:t.x,y:t.y,width:t.width,height:t.height};W("__activeStagePosition",s),lt(s)}function Yt(){const r=w("__activeStagePosition"),t=w("__overlaySvg");if(!r)return;if(!t){console.warn("No stage svg found.");return}const s=window.innerWidth,l=window.innerHeight;t.setAttribute("viewBox",`0 0 ${s} ${l}`)}function er(r){const t=tr(r);document.body.appendChild(t),ut(t,s=>{s.target.tagName==="path"&&pe("overlayClick")}),W("__overlaySvg",t)}function lt(r){const t=w("__overlaySvg");if(!t){er(r);return}const s=t.firstElementChild;if((s==null?void 0:s.tagName)!=="path")throw new Error("no path element found in stage svg");s.setAttribute("d",dt(r))}function tr(r){const t=window.innerWidth,s=window.innerHeight,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("driver-overlay","driver-overlay-animated"),l.setAttribute("viewBox",`0 0 ${t} ${s}`),l.setAttribute("xmlSpace","preserve"),l.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),l.setAttribute("version","1.1"),l.setAttribute("preserveAspectRatio","xMinYMin slice"),l.style.fillRule="evenodd",l.style.clipRule="evenodd",l.style.strokeLinejoin="round",l.style.strokeMiterlimit="2",l.style.zIndex="10000",l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",dt(r)),o.style.fill=f("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${f("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",l.appendChild(o),l}function dt(r){const t=window.innerWidth,s=window.innerHeight,l=f("stagePadding")||0,o=f("stageRadius")||0,c=r.width+l*2,h=r.height+l*2,S=Math.min(o,c/2,h/2),p=Math.floor(Math.max(S,0)),x=r.x-l+p,g=r.y-l,D=c-p*2,u=h-p*2;return`M${t},0L0,0L0,${s}L${t},${s}L${t},0Z
    M${x},${g} h${D} a${p},${p} 0 0 1 ${p},${p} v${u} a${p},${p} 0 0 1 -${p},${p} h-${D} a${p},${p} 0 0 1 -${p},-${p} v-${u} a${p},${p} 0 0 1 ${p},-${p} z`}function rr(){const r=w("__overlaySvg");r&&r.remove()}function nr(){const r=document.getElementById("driver-dummy-element");if(r)return r;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function Ve(r){const{element:t}=r;let s=typeof t=="function"?t():typeof t=="string"?document.querySelector(t):t;s||(s=nr()),ar(s,r)}function sr(){const r=w("__activeElement"),t=w("__activeStep");r&&(it(r),Yt(),mt(r,t))}function ar(r,t){var s;const l=Date.now(),o=w("__activeStep"),c=w("__activeElement")||r,h=!c||c===r,S=r.id==="driver-dummy-element",p=c.id==="driver-dummy-element",x=f("animate"),g=t.onHighlightStarted||f("onHighlightStarted"),D=(t==null?void 0:t.onHighlighted)||f("onHighlighted"),u=(o==null?void 0:o.onDeselected)||f("onDeselected"),v=f(),m=w();!h&&u&&u(p?void 0:c,o,{config:v,state:m,driver:ee()}),g&&g(S?void 0:r,t,{config:v,state:m,driver:ee()});const b=!h&&x;let i=!1;cr(),W("previousStep",o),W("previousElement",c),W("activeStep",t),W("activeElement",r);const j=()=>{if(w("__transitionCallback")!==j)return;const E=Date.now()-l,I=400-E<=400/2;t.popover&&I&&!i&&b&&(qe(r,t),i=!0),f("animate")&&E<400?Jt(E,400,c,r):(it(r),D&&D(S?void 0:r,t,{config:f(),state:w(),driver:ee()}),W("__transitionCallback",void 0),W("__previousStep",o),W("__previousElement",c),W("__activeStep",t),W("__activeElement",r)),window.requestAnimationFrame(j)};W("__transitionCallback",j),window.requestAnimationFrame(j),ot(r),!b&&t.popover&&qe(r,t),c.classList.remove("driver-active-element","driver-no-interaction"),c.removeAttribute("aria-haspopup"),c.removeAttribute("aria-expanded"),c.removeAttribute("aria-controls"),((s=t.disableActiveInteraction)!=null?s:f("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function or(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function ge(){const r=w("__resizeTimeout");r&&window.cancelAnimationFrame(r),W("__resizeTimeout",window.requestAnimationFrame(sr))}function ir(r){var t;if(!w("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const s=w("__activeElement"),l=(t=w("popover"))==null?void 0:t.wrapper,o=at([...l?[l]:[],...s?[s]:[]]),c=o[0],h=o[o.length-1];if(r.preventDefault(),r.shiftKey){const S=o[o.indexOf(document.activeElement)-1]||h;S==null||S.focus()}else{const S=o[o.indexOf(document.activeElement)+1]||c;S==null||S.focus()}}function ct(r){var t;((t=f("allowKeyboardControl"))==null||t)&&(r.key==="Escape"?pe("escapePress"):r.key==="ArrowRight"?pe("arrowRightPress"):r.key==="ArrowLeft"&&pe("arrowLeftPress"))}function ut(r,t,s){const l=(o,c)=>{const h=o.target;r.contains(h)&&((!s||s(h))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),c==null||c(o))};document.addEventListener("pointerdown",l,!0),document.addEventListener("mousedown",l,!0),document.addEventListener("pointerup",l,!0),document.addEventListener("mouseup",l,!0),document.addEventListener("click",o=>{l(o,t)},!0)}function lr(){window.addEventListener("keyup",ct,!1),window.addEventListener("keydown",ir,!1),window.addEventListener("resize",ge),window.addEventListener("scroll",ge)}function dr(){window.removeEventListener("keyup",ct),window.removeEventListener("resize",ge),window.removeEventListener("scroll",ge)}function cr(){const r=w("popover");r&&(r.wrapper.style.display="none")}function qe(r,t){var s,l;let o=w("popover");o&&document.body.removeChild(o.wrapper),o=pr(),document.body.appendChild(o.wrapper);const{title:c,description:h,showButtons:S,disableButtons:p,showProgress:x,nextBtnText:g=f("nextBtnText")||"Next &rarr;",prevBtnText:D=f("prevBtnText")||"&larr; Previous",progressText:u=f("progressText")||"{current} of {total}"}=t.popover||{};o.nextButton.innerHTML=g,o.previousButton.innerHTML=D,o.progress.innerHTML=u,c?(o.title.innerHTML=c,o.title.style.display="block"):o.title.style.display="none",h?(o.description.innerHTML=h,o.description.style.display="block"):o.description.style.display="none";const v=S||f("showButtons"),m=x||f("showProgress")||!1,b=(v==null?void 0:v.includes("next"))||(v==null?void 0:v.includes("previous"))||m;o.closeButton.style.display=v.includes("close")?"block":"none",b?(o.footer.style.display="flex",o.progress.style.display=m?"block":"none",o.nextButton.style.display=v.includes("next")?"block":"none",o.previousButton.style.display=v.includes("previous")?"block":"none"):o.footer.style.display="none";const i=p||f("disableButtons")||[];i!=null&&i.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),i!=null&&i.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),i!=null&&i.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const j=o.wrapper;j.style.display="block",j.style.left="",j.style.top="",j.style.bottom="",j.style.right="",j.id="driver-popover-content",j.setAttribute("role","dialog"),j.setAttribute("aria-labelledby","driver-popover-title"),j.setAttribute("aria-describedby","driver-popover-description");const E=o.arrow;E.className="driver-popover-arrow";const I=((s=t.popover)==null?void 0:s.popoverClass)||f("popoverClass")||"";j.className=`driver-popover ${I}`.trim(),ut(o.wrapper,U=>{var G,K,te;const H=U.target,A=((G=t.popover)==null?void 0:G.onNextClick)||f("onNextClick"),X=((K=t.popover)==null?void 0:K.onPrevClick)||f("onPrevClick"),J=((te=t.popover)==null?void 0:te.onCloseClick)||f("onCloseClick");if(H.closest(".driver-popover-next-btn"))return A?A(r,t,{config:f(),state:w(),driver:ee()}):pe("nextClick");if(H.closest(".driver-popover-prev-btn"))return X?X(r,t,{config:f(),state:w(),driver:ee()}):pe("prevClick");if(H.closest(".driver-popover-close-btn"))return J?J(r,t,{config:f(),state:w(),driver:ee()}):pe("closeClick")},U=>!(o!=null&&o.description.contains(U))&&!(o!=null&&o.title.contains(U))&&typeof U.className=="string"&&U.className.includes("driver-popover")),W("popover",o);const R=((l=t.popover)==null?void 0:l.onPopoverRender)||f("onPopoverRender");R&&R(o,{config:f(),state:w(),driver:ee()}),mt(r,t),ot(j);const _=r.classList.contains("driver-dummy-element"),L=at([j,..._?[]:[r]]);L.length>0&&L[0].focus()}function pt(){const r=w("popover");if(!(r!=null&&r.wrapper))return;const t=r.wrapper.getBoundingClientRect(),s=f("stagePadding")||0,l=f("popoverOffset")||0;return{width:t.width+s+l,height:t.height+s+l,realWidth:t.width,realHeight:t.height}}function Ze(r,t){const{elementDimensions:s,popoverDimensions:l,popoverPadding:o,popoverArrowDimensions:c}=t;return r==="start"?Math.max(Math.min(s.top-o,window.innerHeight-l.realHeight-c.width),c.width):r==="end"?Math.max(Math.min(s.top-(l==null?void 0:l.realHeight)+s.height+o,window.innerHeight-(l==null?void 0:l.realHeight)-c.width),c.width):r==="center"?Math.max(Math.min(s.top+s.height/2-(l==null?void 0:l.realHeight)/2,window.innerHeight-(l==null?void 0:l.realHeight)-c.width),c.width):0}function Ge(r,t){const{elementDimensions:s,popoverDimensions:l,popoverPadding:o,popoverArrowDimensions:c}=t;return r==="start"?Math.max(Math.min(s.left-o,window.innerWidth-l.realWidth-c.width),c.width):r==="end"?Math.max(Math.min(s.left-(l==null?void 0:l.realWidth)+s.width+o,window.innerWidth-(l==null?void 0:l.realWidth)-c.width),c.width):r==="center"?Math.max(Math.min(s.left+s.width/2-(l==null?void 0:l.realWidth)/2,window.innerWidth-(l==null?void 0:l.realWidth)-c.width),c.width):0}function mt(r,t){const s=w("popover");if(!s)return;const{align:l="start",side:o="left"}=(t==null?void 0:t.popover)||{},c=l,h=r.id==="driver-dummy-element"?"over":o,S=f("stagePadding")||0,p=pt(),x=s.arrow.getBoundingClientRect(),g=r.getBoundingClientRect(),D=g.top-p.height;let u=D>=0;const v=window.innerHeight-(g.bottom+p.height);let m=v>=0;const b=g.left-p.width;let i=b>=0;const j=window.innerWidth-(g.right+p.width);let E=j>=0;const I=!u&&!m&&!i&&!E;let R=h;if(h==="top"&&u?E=i=m=!1:h==="bottom"&&m?E=i=u=!1:h==="left"&&i?E=u=m=!1:h==="right"&&E&&(i=u=m=!1),h==="over"){const _=window.innerWidth/2-p.realWidth/2,L=window.innerHeight/2-p.realHeight/2;s.wrapper.style.left=`${_}px`,s.wrapper.style.right="auto",s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto"}else if(I){const _=window.innerWidth/2-(p==null?void 0:p.realWidth)/2,L=10;s.wrapper.style.left=`${_}px`,s.wrapper.style.right="auto",s.wrapper.style.bottom=`${L}px`,s.wrapper.style.top="auto"}else if(i){const _=Math.min(b,window.innerWidth-(p==null?void 0:p.realWidth)-x.width),L=Ze(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:S,popoverArrowDimensions:x});s.wrapper.style.left=`${_}px`,s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",R="left"}else if(E){const _=Math.min(j,window.innerWidth-(p==null?void 0:p.realWidth)-x.width),L=Ze(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:S,popoverArrowDimensions:x});s.wrapper.style.right=`${_}px`,s.wrapper.style.top=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.left="auto",R="right"}else if(u){const _=Math.min(D,window.innerHeight-p.realHeight-x.width);let L=Ge(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:S,popoverArrowDimensions:x});s.wrapper.style.top=`${_}px`,s.wrapper.style.left=`${L}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",R="top"}else if(m){const _=Math.min(v,window.innerHeight-(p==null?void 0:p.realHeight)-x.width);let L=Ge(c,{elementDimensions:g,popoverDimensions:p,popoverPadding:S,popoverArrowDimensions:x});s.wrapper.style.left=`${L}px`,s.wrapper.style.bottom=`${_}px`,s.wrapper.style.top="auto",s.wrapper.style.right="auto",R="bottom"}I?s.arrow.classList.add("driver-popover-arrow-none"):ur(c,R,r)}function ur(r,t,s){const l=w("popover");if(!l)return;const o=s.getBoundingClientRect(),c=pt(),h=l.arrow,S=c.width,p=window.innerWidth,x=o.width,g=o.left,D=c.height,u=window.innerHeight,v=o.top,m=o.height;h.className="driver-popover-arrow";let b=t,i=r;if(t==="top"?(g+x<=0?(b="right",i="end"):g+x-S<=0&&(b="top",i="start"),g>=p?(b="left",i="end"):g+S>=p&&(b="top",i="end")):t==="bottom"?(g+x<=0?(b="right",i="start"):g+x-S<=0&&(b="bottom",i="start"),g>=p?(b="left",i="start"):g+S>=p&&(b="bottom",i="end")):t==="left"?(v+m<=0?(b="bottom",i="end"):v+m-D<=0&&(b="left",i="start"),v>=u?(b="top",i="end"):v+D>=u&&(b="left",i="end")):t==="right"&&(v+m<=0?(b="bottom",i="start"):v+m-D<=0&&(b="right",i="start"),v>=u?(b="top",i="start"):v+D>=u&&(b="right",i="end")),!b)h.classList.add("driver-popover-arrow-none");else{h.classList.add(`driver-popover-arrow-side-${b}`),h.classList.add(`driver-popover-arrow-align-${i}`);const j=s.getBoundingClientRect(),E=h.getBoundingClientRect(),I=f("stagePadding")||0,R=j.left-I<window.innerWidth&&j.right+I>0&&j.top-I<window.innerHeight&&j.bottom+I>0;t==="bottom"&&R&&(E.x>j.x&&E.x+E.width<j.x+j.width?l.wrapper.style.transform="translateY(0)":(h.classList.remove(`driver-popover-arrow-align-${i}`),h.classList.add("driver-popover-arrow-none"),l.wrapper.style.transform=`translateY(-${I/2}px)`))}}function pr(){const r=document.createElement("div");r.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const s=document.createElement("header");s.id="driver-popover-title",s.classList.add("driver-popover-title"),s.style.display="none",s.innerText="Popover Title";const l=document.createElement("div");l.id="driver-popover-description",l.classList.add("driver-popover-description"),l.style.display="none",l.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const c=document.createElement("footer");c.classList.add("driver-popover-footer");const h=document.createElement("span");h.classList.add("driver-popover-progress-text"),h.innerText="";const S=document.createElement("span");S.classList.add("driver-popover-navigation-btns");const p=document.createElement("button");p.type="button",p.classList.add("driver-popover-prev-btn"),p.innerHTML="&larr; Previous";const x=document.createElement("button");return x.type="button",x.classList.add("driver-popover-next-btn"),x.innerHTML="Next &rarr;",S.appendChild(p),S.appendChild(x),c.appendChild(h),c.appendChild(S),r.appendChild(o),r.appendChild(t),r.appendChild(s),r.appendChild(l),r.appendChild(c),{wrapper:r,arrow:t,title:s,description:l,footer:c,previousButton:p,nextButton:x,closeButton:o,footerButtons:S,progress:h}}function mr(){var r;const t=w("popover");t&&((r=t.wrapper.parentElement)==null||r.removeChild(t.wrapper))}function vr(r={}){Te(r);function t(){f("allowClose")&&g()}function s(){const u=f("overlayClickBehavior");if(f("allowClose")&&u==="close"){g();return}if(typeof u=="function"){const v=w("__activeStep"),m=w("__activeElement");u(m,v,{config:f(),state:w(),driver:ee()});return}u==="nextStep"&&l()}function l(){const u=w("activeIndex"),v=f("steps")||[];if(typeof u>"u")return;const m=u+1;v[m]?x(m):g()}function o(){const u=w("activeIndex"),v=f("steps")||[];if(typeof u>"u")return;const m=u-1;v[m]?x(m):g()}function c(u){(f("steps")||[])[u]?x(u):g()}function h(){var u;if(w("__transitionCallback"))return;const v=w("activeIndex"),m=w("__activeStep"),b=w("__activeElement");if(typeof v>"u"||typeof m>"u"||typeof w("activeIndex")>"u")return;const i=((u=m.popover)==null?void 0:u.onPrevClick)||f("onPrevClick");if(i)return i(b,m,{config:f(),state:w(),driver:ee()});o()}function S(){var u;if(w("__transitionCallback"))return;const v=w("activeIndex"),m=w("__activeStep"),b=w("__activeElement");if(typeof v>"u"||typeof m>"u")return;const i=((u=m.popover)==null?void 0:u.onNextClick)||f("onNextClick");if(i)return i(b,m,{config:f(),state:w(),driver:ee()});l()}function p(){w("isInitialized")||(W("isInitialized",!0),document.body.classList.add("driver-active",f("animate")?"driver-fade":"driver-simple"),lr(),Ce("overlayClick",s),Ce("escapePress",t),Ce("arrowLeftPress",h),Ce("arrowRightPress",S))}function x(u=0){var v,m,b,i,j,E,I,R;const _=f("steps");if(!_){console.error("No steps to drive through"),g();return}if(!_[u]){g();return}W("__activeOnDestroyed",document.activeElement),W("activeIndex",u);const L=_[u],U=_[u+1],G=_[u-1],K=((v=L.popover)==null?void 0:v.doneBtnText)||f("doneBtnText")||"Done",te=f("allowClose"),H=typeof((m=L.popover)==null?void 0:m.showProgress)<"u"?(b=L.popover)==null?void 0:b.showProgress:f("showProgress"),A=(((i=L.popover)==null?void 0:i.progressText)||f("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${_.length}`),X=((j=L.popover)==null?void 0:j.showButtons)||f("showButtons"),J=["next","previous",...te?["close"]:[]].filter(he=>!(X!=null&&X.length)||X.includes(he)),Q=((E=L.popover)==null?void 0:E.onNextClick)||f("onNextClick"),ae=((I=L.popover)==null?void 0:I.onPrevClick)||f("onPrevClick"),ie=((R=L.popover)==null?void 0:R.onCloseClick)||f("onCloseClick");Ve({...L,popover:{showButtons:J,nextBtnText:U?void 0:K,disableButtons:[...G?[]:["previous"]],showProgress:H,progressText:A,onNextClick:Q||(()=>{U?x(u+1):g()}),onPrevClick:ae||(()=>{x(u-1)}),onCloseClick:ie||(()=>{g()}),...(L==null?void 0:L.popover)||{}}})}function g(u=!0){const v=w("__activeElement"),m=w("__activeStep"),b=w("__activeOnDestroyed"),i=f("onDestroyStarted");if(u&&i){const I=!v||(v==null?void 0:v.id)==="driver-dummy-element";i(I?void 0:v,m,{config:f(),state:w(),driver:ee()});return}const j=(m==null?void 0:m.onDeselected)||f("onDeselected"),E=f("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),dr(),mr(),or(),rr(),Zt(),Ue(),v&&m){const I=v.id==="driver-dummy-element";j&&j(I?void 0:v,m,{config:f(),state:w(),driver:ee()}),E&&E(I?void 0:v,m,{config:f(),state:w(),driver:ee()})}b&&b.focus()}const D={isActive:()=>w("isInitialized")||!1,refresh:ge,drive:(u=0)=>{p(),x(u)},setConfig:Te,setSteps:u=>{Ue(),Te({...f(),steps:u})},getConfig:f,getState:w,getActiveIndex:()=>w("activeIndex"),isFirstStep:()=>w("activeIndex")===0,isLastStep:()=>{const u=f("steps")||[],v=w("activeIndex");return v!==void 0&&v===u.length-1},getActiveStep:()=>w("activeStep"),getActiveElement:()=>w("activeElement"),getPreviousElement:()=>w("previousElement"),getPreviousStep:()=>w("previousStep"),moveNext:l,movePrevious:o,moveTo:c,hasNextStep:()=>{const u=f("steps")||[],v=w("activeIndex");return v!==void 0&&!!u[v+1]},hasPreviousStep:()=>{const u=f("steps")||[],v=w("activeIndex");return v!==void 0&&!!u[v-1]},highlight:u=>{p(),Ve({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{g(!1)}};return qt(D),D}function hr(){const r=()=>{vr({showProgress:!0,steps:[{element:"#diff-mode",popover:{title:"Solo Diferencias",description:"Activa este interruptor para ver solo los productos que tienen diferencias entre el stock f칤sico y el del sistema.",side:"bottom",align:"start"}},{element:'[role="tablist"]',popover:{title:"Pesta침as de Estado",description:'Navega entre "Pendientes" y "Controlados" para organizar tu trabajo.',side:"bottom",align:"start"}},{element:".bg-card.relative",popover:{title:"Acciones R치pidas",description:"Desliza a la derecha para Confirmar/Editar o a la izquierda para reportar Diferencia/Revertir.",side:"top",align:"start"}},{element:"button:has(.lucide-save)",popover:{title:"Finalizar Inventario",description:"Cuando termines, guarda el estado del inventario aqu칤.",side:"left",align:"start"}}]}).drive()};return B.useEffect(()=>{localStorage.getItem("has_seen_inventory_tour")||setTimeout(()=>{r(),localStorage.setItem("has_seen_inventory_tour","true")},1e3)},[]),e.jsx(q,{variant:"ghost",size:"icon",onClick:r,title:"Ver Tutorial",children:e.jsx(Ht,{className:"w-5 h-5"})})}function fr({branchName:r,labName:t,items:s,onItemsLoaded:l}){const[o,c]=B.useState(!1),[h,S]=B.useState(!1);return B.useEffect(()=>{t&&r!=="Sucursal Desconocida"&&(async()=>{c(!0);try{const g=await ce.getLabInventory(r,t);g&&g.length>0&&l(g)}catch(g){console.error("Failed to load inventory:",g),Z.error("Error de carga","No se pudo cargar el inventario desde la nube")}finally{c(!1)}})()},[t,r]),B.useEffect(()=>{if(s.length===0||!t||r==="Sucursal Desconocida")return;const x=setTimeout(()=>{ce.saveInventory(r,t,s).then(()=>console.log("Auto-saved")).catch(g=>console.error("Auto-save error",g))},2e3);return()=>clearTimeout(x)},[s,r,t]),{isLoading:o,setIsLoading:c,isSaving:h,setIsSaving:S,saveProgress:async()=>{S(!0);try{await ce.saveInventory(r,t,s),Z.success("Progreso guardado","Los datos se guardaron en la nube")}catch(x){console.error("Error saving progress:",x),Z.error("Error al guardar","No se pudo guardar el progreso")}finally{S(!1)}}}}const gr=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function xr({labName:r,branchName:t,currentItems:s,onItemsUpdated:l}){const[o,c]=B.useState(!1);return{isUploading:o,handleFileUpload:async S=>{var g;const p=(g=S.target.files)==null?void 0:g[0];if(!p)return;c(!0);const x=new FileReader;x.onload=D=>{var u,v;try{const m=(u=D.target)==null?void 0:u.result,b=Ot(m,{type:"binary"}),i=b.SheetNames[0],j=b.Sheets[i],E=zt.sheet_to_json(j,{header:1});let I="";for(let H=1;H<Math.min(E.length,20);H++){const A=E[H];if(A&&A[14]){I=String(A[14]).trim();break}}if(!I){Z.error("Archivo inv치lido","No se pudo identificar el laboratorio en el archivo (Columna O)"),c(!1);return}const R=r.toUpperCase().trim(),_=I.toUpperCase().trim();if(R!==_&&!_.includes(R)&&!R.includes(_)){Z.error("Laboratorio incorrecto",`El archivo pertenece a "${I}", pero est치s en "${r}"`),c(!1);return}const L=[...s],U=new Map;L.forEach((H,A)=>{U.set(String(H.ean).trim(),A)});let G=0,K=0,te=0;for(let H=1;H<E.length;H++){const A=E[H];if(!A||!A[3])continue;const X=A[2];if(!X)continue;const J=String(X).trim();if(!J)continue;let Q=(v=A[9])==null?void 0:v.toString().trim();if(Q&&(Q==="Medicamento"&&(Q="Medicamentos"),Q==="Perfumeria"&&(Q="Perfumer칤a")),(!Q||!gr.includes(Q))&&(Q="Varios"),U.has(J)){const ae=U.get(J),ie=L[ae];if(ie.status==="adjusted"||ie.status==="controlled"){te++;continue}L[ae]={...ie,name:A[3],systemQuantity:Number(A[4])||0,countedQuantity:Number(A[4])||0,cost:Number(A[12])||0,category:Q,status:"pending"},K++;continue}L.push({id:crypto.randomUUID(),ean:J,name:A[3],systemQuantity:Number(A[4])||0,countedQuantity:Number(A[4])||0,cost:Number(A[12])||0,status:"pending",category:Q,wasReadjusted:!1}),G++}l(L),ce.saveInventory(t,r,L).then(()=>console.log("Auto-save after upload success")).catch(H=>console.error("Auto-save failed",H)),G>0||K>0?Z.success("Carga exitosa",`${G} nuevos, ${K} actualizados`):Z.info("Sin cambios",`${te} productos ya estaban procesados`)}catch(m){console.error("Error reading file:",m),Z.error("Error de archivo","No se pudo procesar el archivo Excel")}finally{c(!1),S.target.value=""}},x.readAsBinaryString(p)}}}function yr(r,t="Medicamentos"){const[s,l]=B.useState(""),[o,c]=B.useState(!1),[h,S]=B.useState(t),p=B.useMemo(()=>r.filter(m=>{if(s){const b=s.toLowerCase();if(!m.name.toLowerCase().includes(b)&&!m.ean.includes(b))return!1}return o?m.countedQuantity!==m.systemQuantity:!0}),[r,s,o]),x=B.useMemo(()=>p.filter(m=>m.status==="pending"&&(m.category===h||!m.category&&h==="Varios")),[p,h]),g=m=>[...m].sort((b,i)=>{const j=b.countedQuantity-b.systemQuantity,E=i.countedQuantity-i.systemQuantity,I=j!==0,R=E!==0;return I&&!R?-1:!I&&R?1:j-E}),D=B.useMemo(()=>g(p.filter(m=>m.status==="controlled")),[p]),u=B.useMemo(()=>g(p.filter(m=>m.status==="adjusted")),[p]),v=B.useMemo(()=>{let m=0,b=0,i=0;return r.forEach(j=>{const E=j.countedQuantity-j.systemQuantity,I=E*j.cost;E<0?m+=I:E>0&&(b+=I),i+=I}),{negative:m,positive:b,net:i}},[r]);return{searchTerm:s,setSearchTerm:l,showDifferencesOnly:o,setShowDifferencesOnly:c,currentCategory:h,setCurrentCategory:S,filteredItems:p,pendingItems:x,controlledItems:D,adjustedItems:u,financialStats:v}}function wr(){return e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"h-8 w-1/3 bg-muted rounded"}),e.jsx("div",{className:"h-8 w-24 bg-muted rounded"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(r=>e.jsx(de,{className:"p-4 h-24 bg-muted/50 border-none"},r))}),e.jsx("div",{className:"h-10 w-full bg-muted rounded mb-6"}),e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(r=>e.jsxs(de,{className:"p-4 flex gap-4 border-none bg-muted/20",children:[e.jsx("div",{className:"h-12 w-12 bg-muted rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-muted rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted rounded"})]}),e.jsx("div",{className:"h-8 w-8 bg-muted rounded"})]},r))})]})}const Ke=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function Fr(){const{id:r}=jt(),t=Ct(),{user:s}=Et(),l=r?decodeURIComponent(r):"",o=(s==null?void 0:s.branchName)||"Sucursal Desconocida",[c,h]=B.useState([]),{isLoading:S,setIsLoading:p,isSaving:x,setIsSaving:g,saveProgress:D}=fr({branchName:o,labName:l,items:c,onItemsLoaded:h}),{isUploading:u,handleFileUpload:v}=xr({branchName:o,labName:l,currentItems:c,onItemsUpdated:h}),{searchTerm:m,setSearchTerm:b,showDifferencesOnly:i,setShowDifferencesOnly:j,currentCategory:E,setCurrentCategory:I,pendingItems:R,controlledItems:_,adjustedItems:L}=yr(c,Ke[0]),[U,G]=B.useState(!1),[K,te]=B.useState(""),[H,A]=B.useState(""),[X,J]=B.useState([]);B.useState(()=>{o&&l&&ce.getAdjustmentHistory(o,l).then(J)});const Q=B.useCallback((d,C)=>{h(M=>M.map(P=>{if(P.id===d){C-P.systemQuantity!==0&&navigator.vibrate?navigator.vibrate([50,50,50]):navigator.vibrate&&navigator.vibrate(50);const k=P.status==="adjusted";return{...P,countedQuantity:C,status:P.status==="adjusted"?"adjusted":"controlled",wasReadjusted:k?!0:P.wasReadjusted}}return P}))},[]),ae=B.useCallback(d=>{navigator.vibrate&&navigator.vibrate(50),Wt({particleCount:100,spread:70,origin:{y:.6}}),h(C=>C.map(M=>M.id===d?{...M,status:"controlled",countedQuantity:M.systemQuantity}:M)),Z.success("Operaci칩n exitosa","Producto controlado")},[]),ie=B.useCallback(d=>{h(C=>C.map(M=>M.id===d?{...M,status:"pending"}:M)),Z.info("Informaci칩n","Producto devuelto a pendientes")},[]),he=async()=>{const d=_.filter(y=>y.countedQuantity<y.systemQuantity),C=_.filter(y=>y.countedQuantity>y.systemQuantity),M=d.length>0,P=C.length>0;if(M&&!K.trim()){Z.error("Error","Por favor ingresa el ID de ajuste para Faltantes");return}if(P&&!H.trim()){Z.error("Error","Por favor ingresa el ID de ajuste para Sobrantes");return}g(!0);try{const y=c.map(k=>k.status==="controlled"?{...k,status:"adjusted"}:k);h(y),await ce.saveInventory(o,l,y),await ce.saveAdjustmentHistory(o,l,{adjustment_id_shortage:K,adjustment_id_surplus:H,shortage_value:a,surplus_value:n,total_units_adjusted:_.length,user_name:s==null?void 0:s.name,items_snapshot:y}),Z.success("Operaci칩n exitosa","Inventario finalizado y guardado en la nube."),G(!1),te(""),A(""),t("/cyclic-inventory")}catch(y){console.error("Error saving inventory:",y),Z.error("Error","Error al guardar en la nube.")}finally{g(!1)}},xe=async()=>{await D(),G(!0)},a=_.filter(d=>d.countedQuantity<d.systemQuantity).reduce((d,C)=>d+(C.systemQuantity-C.countedQuantity)*C.cost,0),n=_.filter(d=>d.countedQuantity>d.systemQuantity).reduce((d,C)=>d+(C.countedQuantity-C.systemQuantity)*C.cost,0),N=async()=>{if(confirm("쮼st치s seguro de que quieres reiniciar los datos de este laboratorio? Se borrar치n de la nube.")){h([]),await new Promise(d=>setTimeout(d,2500));try{await ce.deleteInventory(o,l),Z.success("Operaci칩n exitosa","Datos reiniciados correctamente."),t("/cyclic-inventory")}catch(d){console.error("Error resetting data:",d),Z.error("Error","Error al reiniciar datos. Intente de nuevo.")}}};return e.jsxs(It,{className:"pb-32 lg:pb-10",children:[e.jsx(Qt,{title:l,subtitle:"Control de Inventario C칤clico",showBackButton:!0,actions:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{var d;return(d=document.getElementById("inventory-upload"))==null?void 0:d.click()},disabled:u||x,children:[u?e.jsx(je,{className:"w-4 h-4 animate-spin"}):e.jsx(ke,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Cargar Excel"})]}),e.jsx(me,{id:"inventory-upload",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:v,disabled:u}),e.jsxs(q,{variant:"destructive",size:"sm",onClick:N,children:[e.jsx(Se,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Reiniciar"})]}),c.length>0&&e.jsxs(q,{onClick:xe,disabled:x,children:[x?e.jsx(je,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Finalizar"]})]})}),S?e.jsx(wr,{}):e.jsx(e.Fragment,{children:c.length===0?e.jsxs(de,{className:"p-12 border-dashed border-2 flex flex-col items-center justify-center text-center space-y-4 bg-muted/20",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx(ke,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cargar Archivo de Inventario"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:["Sube el archivo Excel (.xlsx) descargado del sistema para comenzar el control de ",l,"."]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{disabled:S,children:S?"Procesando...":"Seleccionar Archivo"}),e.jsx(me,{type:"file",accept:".xlsx, .xls",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:v,disabled:u||S})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Columnas requeridas: C (EAN), D (Producto), E (Cantidad), O (Laboratorio), J (Rubro)"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-warning/5 border-warning/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Pendientes"}),e.jsx("span",{className:"text-2xl font-bold text-warning",children:e.jsx(be,{value:c.filter(d=>d.status==="pending").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-success/5 border-success/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Controlados"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:e.jsx(be,{value:c.filter(d=>d.status==="controlled").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center bg-blue-500/5 border-blue-500/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Ajustados"}),e.jsx("span",{className:"text-2xl font-bold text-blue-500",children:e.jsx(be,{value:c.filter(d=>d.status==="adjusted").length})})]}),e.jsxs(de,{className:"p-4 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Avance"}),e.jsxs("span",{className:"text-2xl font-bold",children:[e.jsx(be,{value:Math.round(c.filter(d=>d.status==="controlled"||d.status==="adjusted").length/c.length*100)}),"%"]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(me,{placeholder:"Buscar por nombre o EAN...",value:m,onChange:d=>b(d.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-card p-2 rounded-lg border",children:[e.jsx(Ft,{id:"diff-mode",checked:i,onCheckedChange:j}),e.jsx(Le,{htmlFor:"diff-mode",className:"cursor-pointer",children:"Solo Diferencias"})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{var d;return(d=document.getElementById("header-upload-input"))==null?void 0:d.click()},children:[e.jsx(ke,{className:"w-4 h-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Cargar Excel"})]}),e.jsx("input",{id:"header-upload-input",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:v,disabled:S})]}),e.jsxs(q,{variant:"destructive",size:"sm",onClick:N,children:[e.jsx(Se,{className:"w-4 h-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Reiniciar"})]}),e.jsxs(q,{variant:"default",size:"sm",onClick:xe,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",disabled:x,children:[x?e.jsx(je,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Finalizar Inventario"]})]})]}),e.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:e.jsx("div",{className:"flex gap-2",children:Ke.map(d=>e.jsx(q,{variant:E===d?"default":"outline",onClick:()=>I(d),className:se("rounded-full px-6 transition-all",E===d?"shadow-md":"opacity-70 hover:opacity-100"),children:d},d))})}),e.jsxs(Lt,{defaultValue:"pending",className:"w-full",children:[e.jsxs(Dt,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(ye,{value:"pending",className:"relative",children:["Pendientes (",E,")",R.length>0&&e.jsx("span",{className:"ml-2 bg-warning text-warning-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:R.length})]}),e.jsxs(ye,{value:"controlled",children:["Controlados",_.length>0&&e.jsx("span",{className:"ml-2 bg-success text-success-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:_.length})]}),e.jsxs(ye,{value:"adjusted",children:["Ajustados",L.length>0&&e.jsx("span",{className:"ml-2 bg-blue-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:L.length})]}),e.jsx(ye,{value:"history",children:"Historial"})]}),e.jsxs(we,{value:"pending",className:"space-y-4",children:[e.jsxs(tt,{className:"bg-muted/50 border-none mb-4",children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx(rt,{children:"Instrucciones"}),e.jsx(nt,{children:"Desliza a la derecha para confirmar (verde) o a la izquierda para reportar diferencia (naranja)."})]}),e.jsx(De,{items:R,onUpdateQuantity:Q,onCheck:ae})]}),e.jsx(we,{value:"controlled",className:"space-y-4",children:e.jsx(De,{items:_,onUpdateQuantity:Q,onCheck:ae,onRevert:ie,readOnly:!1})}),e.jsx(we,{value:"adjusted",className:"space-y-4",children:e.jsx(De,{items:L,onUpdateQuantity:Q,onCheck:()=>{},readOnly:!1})}),e.jsx(we,{value:"history",className:"space-y-4",children:X.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-lg border-dashed border-2",children:"No hay historial de ajustes para este laboratorio."}):e.jsx("div",{className:"space-y-4",children:X.map(d=>e.jsxs(de,{className:"p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-primary",children:[new Date(d.created_at).toLocaleDateString()," ",new Date(d.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Por: ",d.user_name||"Desconocido"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:[d.total_units_adjusted," items"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[e.jsxs("div",{className:"bg-destructive/10 p-2 rounded border border-destructive/20",children:[e.jsx("span",{className:"font-semibold text-destructive block",children:"Faltantes"}),"ID: ",d.adjustment_id_shortage||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(d.shortage_value).toLocaleString()]})]}),e.jsxs("div",{className:"bg-success/10 p-2 rounded border border-success/20",children:[e.jsx("span",{className:"font-semibold text-success block",children:"Sobrantes"}),"ID: ",d.adjustment_id_surplus||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(d.surplus_value).toLocaleString()]})]})]})]},d.id))})})]})]})]})}),e.jsx(Xe,{open:U,onOpenChange:G,children:e.jsxs(Je,{children:[e.jsxs(Ye,{children:[e.jsx(et,{children:"Finalizar Inventario"}),e.jsx(_t,{children:"Ingresa el ID del ajuste generado en PLEX para guardar el estado de este inventario."})]}),e.jsxs("div",{className:"py-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-destructive/5 rounded-lg border border-destructive/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Le,{className:"text-destructive font-bold",children:"Faltantes (Negativos)"}),e.jsxs("span",{className:"font-mono font-bold text-destructive",children:["$",a.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(me,{value:K,onChange:d=>te(d.target.value),placeholder:"ID Ajuste Faltantes (PLEX)"})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-success/5 rounded-lg border border-success/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Le,{className:"text-success font-bold",children:"Sobrantes (Positivos)"}),e.jsxs("span",{className:"font-mono font-bold text-success",children:["$",n.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(me,{value:H,onChange:d=>A(d.target.value),placeholder:"ID Ajuste Sobrantes (PLEX)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(q,{variant:"outline",onClick:()=>G(!1),children:"Cancelar"}),e.jsxs(q,{onClick:he,disabled:x,children:[x?e.jsx(je,{className:"w-4 h-4 animate-spin mr-2"}):null,"Confirmar y Finalizar"]})]})]})}),e.jsx(hr,{})]})}export{Fr as default};
