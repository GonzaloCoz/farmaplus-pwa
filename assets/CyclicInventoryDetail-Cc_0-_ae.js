import{j as t}from"./ui-vendor-DWmIoBIJ.js";import{r as B,k as jt,u as Nt}from"./react-vendor-ylmX0jv_.js";import{c as nt,B as q,X as St,a as le,P as We,n as we,f as kt,y as Oe,g as me,q as rt,r as at,s as ot,t as st,z as it,a0 as Mt,u as Et,v as H,U as qe,S as Pt,I as It,Z as At,D as Dt,m as ke}from"./index-CPz0rxuc.js";import{I as ye}from"./input-C_a6pyjI.js";import{T as Lt,a as Tt,b as Te,c as _e}from"./tabs-DJMGpf-A.js";import{r as _t,u as Me,w as Bt}from"./excel-uoQkVabA.js";import{E as Ft}from"./jspdf.es.min-o8YbjmK3.js";import{P as $t}from"./ProductImageHover-f66nwdFq.js";import{B as Ue}from"./badge--0MDKttn.js";import{S as Rt,P as Ve}from"./SwipeableItem-BvLsSCua.js";import{A as Ze,m as Xe}from"./animation-Ch0GoCcm.js";import{D as Ot}from"./dollar-sign-C6xa1EnQ.js";import{C as Qt,F as zt}from"./file-spreadsheet-DkEJ_8es.js";import{C as Ee}from"./CounterAnimation-BByUy0p8.js";import{S as Ht}from"./switch-C9vn1c2r.js";import{L as Be}from"./label-CyvB7xXk.js";import{A as Wt,B as qt}from"./BarcodeScanner-7BJKaUOT.js";import{C as Ut}from"./circle-help-COIhh4Pq.js";import{F as Vt}from"./FabMenu-zXbaKCq-.js";import{L as Ge}from"./loader-circle-dIzC710_.js";import"./utils-CUsTgaRG.js";import"./scanner-D4NToCeH.js";import"./plus-DPOsrdt7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=nt("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=nt("ScanBarcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]);var ze={};(function n(r,s,c,i){var v=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),m=typeof Path2D=="function"&&typeof DOMMatrix=="function",w=function(){if(!r.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var j=a.transferToImageBitmap();e.createPattern(j,"no-repeat")}catch{return!1}return!0}();function d(){}function E(a){var e=s.exports.Promise,j=e!==void 0?e:r.Promise;return typeof j=="function"?new j(a):(a(d,d),null)}var S=function(a,e){return{transform:function(j){if(a)return j;if(e.has(j))return e.get(j);var P=new OffscreenCanvas(j.width,j.height),A=P.getContext("2d");return A.drawImage(j,0,0),e.set(j,P),P},clear:function(){e.clear()}}}(w,new Map),F=function(){var a=Math.floor(16.666666666666668),e,j,P={},A=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(D){var L=Math.random();return P[L]=requestAnimationFrame(function k(T){A===T||A+a-1<T?(A=T,delete P[L],D()):P[L]=requestAnimationFrame(k)}),L},j=function(D){P[D]&&cancelAnimationFrame(P[D])}):(e=function(D){return setTimeout(D,a)},j=function(D){return clearTimeout(D)}),{frame:e,cancel:j}}(),p=function(){var a,e,j={};function P(A){function D(L,k){A.postMessage({options:L||{},callback:k})}A.init=function(k){var T=k.transferControlToOffscreen();A.postMessage({canvas:T},[T])},A.fire=function(k,T,o){if(e)return D(k,null),e;var u=Math.random().toString(36).slice(2);return e=E(function(b){function C(N){N.data.callback===u&&(delete j[u],A.removeEventListener("message",C),e=null,S.clear(),o(),b())}A.addEventListener("message",C),D(k,u),j[u]=C.bind(null,{data:{callback:u}})}),e},A.reset=function(){A.postMessage({reset:!0});for(var k in j)j[k](),delete j[k]}}return function(){if(a)return a;if(!c&&v){var A=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([A])))}catch(D){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("游꿁 Could not load worker",D),null}P(a)}return a}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(a,e){return e?e(a):a}function I(a){return a!=null}function l(a,e,j){return g(a&&I(a[e])?a[e]:h[e],j)}function M(a){return a<0?0:Math.floor(a)}function O(a,e){return Math.floor(Math.random()*(e-a))+a}function _(a){return parseInt(a,16)}function z(a){return a.map($)}function $(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:_(e.substring(0,2)),g:_(e.substring(2,4)),b:_(e.substring(4,6))}}function R(a){var e=l(a,"origin",Object);return e.x=l(e,"x",Number),e.y=l(e,"y",Number),e}function Z(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function G(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function re(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function se(a,e,j,P,A,D,L,k,T){a.save(),a.translate(e,j),a.rotate(D),a.scale(P,A),a.arc(0,0,1,L,k,T),a.restore()}function U(a){var e=a.angle*(Math.PI/180),j=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*j-Math.random()*j),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function ae(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var j=e.tick++/e.totalTicks,P=e.x+e.random*e.tiltCos,A=e.y+e.random*e.tiltSin,D=e.wobbleX+e.random*e.tiltCos,L=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-j)+")",a.beginPath(),m&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(fe(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(D-P)*.1,Math.abs(L-A)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var k=Math.PI/10*e.wobble,T=Math.abs(D-P)*.1,o=Math.abs(L-A)*.1,u=e.shape.bitmap.width*e.scalar,b=e.shape.bitmap.height*e.scalar,C=new DOMMatrix([Math.cos(k)*T,Math.sin(k)*T,-Math.sin(k)*o,Math.cos(k)*o,e.x,e.y]);C.multiplySelf(new DOMMatrix(e.shape.matrix));var N=a.createPattern(S.transform(e.shape.bitmap),"no-repeat");N.setTransform(C),a.globalAlpha=1-j,a.fillStyle=N,a.fillRect(e.x-u/2,e.y-b/2,u,b),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(D-P)*e.ovalScalar,Math.abs(L-A)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):se(a,e.x,e.y,Math.abs(D-P)*e.ovalScalar,Math.abs(L-A)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var x=Math.PI/2*3,Q=4*e.scalar,X=8*e.scalar,V=e.x,Y=e.y,ie=5,ee=Math.PI/ie;ie--;)V=e.x+Math.cos(x)*X,Y=e.y+Math.sin(x)*X,a.lineTo(V,Y),x+=ee,V=e.x+Math.cos(x)*Q,Y=e.y+Math.sin(x)*Q,a.lineTo(V,Y),x+=ee;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(A)),a.lineTo(Math.floor(D),Math.floor(L)),a.lineTo(Math.floor(P),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function ne(a,e,j,P,A){var D=e.slice(),L=a.getContext("2d"),k,T,o=E(function(u){function b(){k=T=null,L.clearRect(0,0,P.width,P.height),S.clear(),A(),u()}function C(){c&&!(P.width===i.width&&P.height===i.height)&&(P.width=a.width=i.width,P.height=a.height=i.height),!P.width&&!P.height&&(j(a),P.width=a.width,P.height=a.height),L.clearRect(0,0,P.width,P.height),D=D.filter(function(N){return ae(L,N)}),D.length?k=F.frame(C):b()}k=F.frame(C),T=b});return{addFettis:function(u){return D=D.concat(u),o},canvas:a,promise:o,reset:function(){k&&F.cancel(k),T&&T()}}}function J(a,e){var j=!a,P=!!l(e||{},"resize"),A=!1,D=l(e,"disableForReducedMotion",Boolean),L=v&&!!l(e||{},"useWorker"),k=L?p():null,T=j?Z:G,o=a&&k?!!a.__confetti_initialized:!1,u=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,b;function C(x,Q,X){for(var V=l(x,"particleCount",M),Y=l(x,"angle",Number),ie=l(x,"spread",Number),ee=l(x,"startVelocity",Number),je=l(x,"decay",Number),Ne=l(x,"gravity",Number),Se=l(x,"drift",Number),he=l(x,"colors",z),xe=l(x,"ticks",Number),de=l(x,"shapes"),oe=l(x,"scalar"),ve=!!l(x,"flat"),te=R(x),He=V,Le=[],bt=a.width*te.x,Ct=a.height*te.y;He--;)Le.push(U({x:bt,y:Ct,angle:Y,spread:ie,startVelocity:ee,color:he[He%he.length],shape:de[O(0,de.length)],ticks:xe,decay:je,gravity:Ne,drift:Se,scalar:oe,flat:ve}));return b?b.addFettis(Le):(b=ne(a,Le,T,Q,X),b.promise)}function N(x){var Q=D||l(x,"disableForReducedMotion",Boolean),X=l(x,"zIndex",Number);if(Q&&u)return E(function(ee){ee()});j&&b?a=b.canvas:j&&!a&&(a=re(X),document.body.appendChild(a)),P&&!o&&T(a);var V={width:a.width,height:a.height};k&&!o&&k.init(a),o=!0,k&&(a.__confetti_initialized=!0);function Y(){if(k){var ee={getBoundingClientRect:function(){if(!j)return a.getBoundingClientRect()}};T(ee),k.postMessage({resize:{width:ee.width,height:ee.height}});return}V.width=V.height=null}function ie(){b=null,P&&(A=!1,r.removeEventListener("resize",Y)),j&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,o=!1)}return P&&!A&&(A=!0,r.addEventListener("resize",Y,!1)),k?k.fire(x,V,ie):C(x,V,ie)}return N.reset=function(){k&&k.reset(),b&&b.reset()},N}var ce;function pe(){return ce||(ce=J(null,{useWorker:!0,resize:!0})),ce}function fe(a,e,j,P,A,D,L){var k=new Path2D(a),T=new Path2D;T.addPath(k,new DOMMatrix(e));var o=new Path2D;return o.addPath(T,new DOMMatrix([Math.cos(L)*A,Math.sin(L)*A,-Math.sin(L)*D,Math.cos(L)*D,j,P])),o}function ge(a){if(!m)throw new Error("path confetti are not supported in this browser");var e,j;typeof a=="string"?e=a:(e=a.path,j=a.matrix);var P=new Path2D(e),A=document.createElement("canvas"),D=A.getContext("2d");if(!j){for(var L=1e3,k=L,T=L,o=0,u=0,b,C,N=0;N<L;N+=2)for(var x=0;x<L;x+=2)D.isPointInPath(P,N,x,"nonzero")&&(k=Math.min(k,N),T=Math.min(T,x),o=Math.max(o,N),u=Math.max(u,x));b=o-k,C=u-T;var Q=10,X=Math.min(Q/b,Q/C);j=[X,0,0,X,-Math.round(b/2+k)*X,-Math.round(C/2+T)*X]}return{type:"path",path:e,matrix:j}}function Ce(a){var e,j=1,P="#000000",A='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,j="scalar"in a?a.scalar:j,A="fontFamily"in a?a.fontFamily:A,P="color"in a?a.color:P);var D=10*j,L=""+D+"px "+A,k=new OffscreenCanvas(D,D),T=k.getContext("2d");T.font=L;var o=T.measureText(e),u=Math.ceil(o.actualBoundingBoxRight+o.actualBoundingBoxLeft),b=Math.ceil(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent),C=2,N=o.actualBoundingBoxLeft+C,x=o.actualBoundingBoxAscent+C;u+=C+C,b+=C+C,k=new OffscreenCanvas(u,b),T=k.getContext("2d"),T.font=L,T.fillStyle=P,T.fillText(e,N,x);var Q=1/j;return{type:"bitmap",bitmap:k.transferToImageBitmap(),matrix:[Q,0,0,Q,-u*Q/2,-b*Q/2]}}s.exports=function(){return pe().apply(this,arguments)},s.exports.reset=function(){pe().reset()},s.exports.create=J,s.exports.shapeFromPath=ge,s.exports.shapeFromText=Ce})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ze,!1);const Gt=ze.exports;ze.exports.create;function Kt({onResult:n,onClose:r,initialValue:s=""}){const[c,i]=B.useState(s),[v,m]=B.useState(""),w=h=>{i(g=>g==="0"?h:g+h)},d=h=>{m(c+" "+h+" "),i("")},E=()=>{i(""),m("")},S=()=>{try{const h=v+c;if(!/^[0-9+\-*/. ]+$/.test(h)){i("Error");return}const g=new Function("return "+h)();i(String(g)),m(""),n(Number(g))}catch{i("Error")}},F=()=>{i(h=>h.slice(0,-1))},p=[{label:"C",onClick:E,variant:"destructive",className:"col-span-1"},{label:"/",onClick:()=>d("/"),variant:"secondary"},{label:"*",onClick:()=>d("*"),variant:"secondary"},{label:t.jsx(Zt,{className:"w-4 h-4"}),onClick:F,variant:"secondary"},{label:"7",onClick:()=>w("7"),variant:"outline"},{label:"8",onClick:()=>w("8"),variant:"outline"},{label:"9",onClick:()=>w("9"),variant:"outline"},{label:"-",onClick:()=>d("-"),variant:"secondary"},{label:"4",onClick:()=>w("4"),variant:"outline"},{label:"5",onClick:()=>w("5"),variant:"outline"},{label:"6",onClick:()=>w("6"),variant:"outline"},{label:"+",onClick:()=>d("+"),variant:"secondary"},{label:"1",onClick:()=>w("1"),variant:"outline"},{label:"2",onClick:()=>w("2"),variant:"outline"},{label:"3",onClick:()=>w("3"),variant:"outline"},{label:"=",onClick:S,variant:"default",className:"row-span-2 h-full"},{label:"0",onClick:()=>w("0"),variant:"outline",className:"col-span-2"},{label:".",onClick:()=>w("."),variant:"outline"}];return t.jsxs("div",{className:"p-4 bg-card rounded-lg border shadow-lg max-w-xs mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground font-mono h-4 block",children:v}),t.jsx(q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,children:t.jsx(St,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"bg-muted p-3 rounded-md mb-4 text-right font-mono text-2xl font-bold tracking-wider overflow-hidden",children:c||"0"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:p.map((h,g)=>t.jsx(q,{variant:h.variant,onClick:h.onClick,className:le("h-12 text-lg font-medium",h.className),children:h.label},g))})]})}const Fe=B.memo(function({items:r,onUpdateQuantity:s,onCheck:c,onRevert:i,readOnly:v=!1}){const[m,w]=B.useState(null),[d,E]=B.useState(""),[S,F]=B.useState(!1),p=l=>{w(l.id),E(l.countedQuantity.toString()),F(!1)},h=()=>{if(m){const l=parseInt(d,10);!isNaN(l)&&l>=0&&(s(m,l),w(null))}},g=()=>{w(null),E(""),F(!1)},I=l=>{E(Math.floor(l).toString())};return r.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(We,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),t.jsx("p",{children:"No hay productos en esta lista"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3",children:t.jsx(Ze,{mode:"popLayout",children:r.map(l=>{const M=l.countedQuantity-l.systemQuantity,O=M!==0,_=l.status==="controlled",z=M===0;return t.jsx(Xe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:t.jsx(Rt,{disabled:v,..._?{leftAction:{label:"Editar",icon:t.jsx(Ve,{className:"w-5 h-5"}),color:"text-blue-500",bgColor:"rgba(59, 130, 246, 0.2)",onAction:()=>p(l)},rightAction:i?{label:"Revertir",icon:t.jsx(Oe,{className:"w-5 h-5"}),color:"text-red-500",bgColor:"rgba(239, 68, 68, 0.2)",onAction:()=>i(l.id)}:void 0}:{leftAction:{label:"Confirmar",icon:t.jsx(we,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"rgba(22, 163, 74, 0.2)",onAction:()=>c(l.id)},rightAction:{label:"Diferencia",icon:t.jsx(kt,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"rgba(249, 115, 22, 0.2)",onAction:()=>p(l)}},children:t.jsx(me,{className:le("p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border"),onClick:()=>p(l),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:le("p-2 rounded-lg flex-shrink-0 transition-colors",_?"bg-success/10":"bg-primary/10"),children:_?t.jsx(we,{className:"w-5 h-5 text-success"}):t.jsx(We,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx($t,{ean:l.ean,name:l.name,children:t.jsx("h4",{className:"font-medium text-foreground truncate",title:l.name,children:l.name})}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-mono bg-muted px-1.5 py-0.5 rounded",children:l.ean}),l.cost>0&&t.jsxs("span",{className:"flex items-center text-muted-foreground",children:[t.jsx(Ot,{className:"w-3 h-3 mr-0.5"}),l.cost.toFixed(2)]}),(l.status==="controlled"||l.status==="adjusted")&&l.category&&t.jsx(Ue,{variant:"outline",className:"text-[10px] h-5 px-1.5 ml-auto",children:l.category})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Sistema"}),t.jsx("span",{className:"text-sm font-medium",children:l.systemQuantity})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"F칤sico"}),t.jsx("span",{className:le("text-sm font-bold",O?"text-warning":"text-success"),children:l.countedQuantity})]}),O&&t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Diferencia"}),t.jsx(Ue,{variant:M>0?"default":"destructive",className:"h-5 px-1.5 text-[10px]",children:M>0?`+${M}`:M})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:$=>{$.stopPropagation(),p(l)},children:t.jsx(Ve,{className:"w-4 h-4"})}),l.status==="pending"&&t.jsx(q,{size:"icon",variant:z?"default":"secondary",className:le("h-10 w-10 rounded-full shadow-sm flex-shrink-0 transition-all ml-1",z?"bg-success hover:bg-success/90 text-white":"hover:bg-warning/20 text-warning"),onClick:$=>{$.stopPropagation(),c(l.id)},children:t.jsx(we,{className:"w-5 h-5"})}),l.status==="controlled"&&i&&t.jsx(q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:$=>{$.stopPropagation(),i(l.id)},title:"Volver a pendientes",children:t.jsx(Oe,{className:"w-4 h-4"})})]})]})})})},l.id)})})}),t.jsx(rt,{open:m!==null,onOpenChange:l=>!l&&g(),children:t.jsxs(at,{className:"sm:max-w-md",children:[t.jsx(ot,{children:t.jsx(st,{children:"Editar Cantidad"})}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex gap-2 items-end",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cantidad F칤sica"}),t.jsx(ye,{type:"number",min:"0",value:d,onChange:l=>E(l.target.value),onKeyDown:l=>{l.key==="Enter"&&h()},placeholder:"Ingresa la cantidad",autoFocus:!0})]}),t.jsx(q,{variant:S?"secondary":"outline",size:"icon",onClick:()=>F(!S),title:"Calculadora",children:t.jsx(Qt,{className:"w-4 h-4"})})]}),t.jsx(Ze,{children:S&&t.jsx(Xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsx(Kt,{onResult:I,onClose:()=>F(!1)})})})]}),t.jsxs(it,{children:[t.jsx(q,{variant:"outline",onClick:g,children:"Cancelar"}),t.jsx(q,{onClick:h,children:"Guardar"})]})]})})]})}),Jt=Mt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),lt=B.forwardRef(({className:n,variant:r,...s},c)=>t.jsx("div",{ref:c,role:"alert",className:le(Jt({variant:r}),n),...s}));lt.displayName="Alert";const ct=B.forwardRef(({className:n,...r},s)=>t.jsx("h5",{ref:s,className:le("mb-1 font-medium leading-none tracking-tight",n),...r}));ct.displayName="AlertTitle";const dt=B.forwardRef(({className:n,...r},s)=>t.jsx("div",{ref:s,className:le("text-sm [&_p]:leading-relaxed",n),...r}));dt.displayName="AlertDescription";let Qe={},ut;function $e(n={}){Qe={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function f(n){return n?Qe[n]:Qe}function Yt(n){ut=n}function K(){return ut}let Ae={};function Pe(n,r){Ae[n]=r}function ue(n){var r;(r=Ae[n])==null||r.call(Ae)}function en(){Ae={}}function Ie(n,r,s,c){return(n/=c/2)<1?s/2*n*n+r:-s/2*(--n*(n-2)-1)+r}function pt(n){const r='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(s=>{const c=s.matches(r),i=Array.from(s.querySelectorAll(r));return[...c?[s]:[],...i]}).filter(s=>getComputedStyle(s).pointerEvents!=="none"&&rn(s))}function ht(n){if(!n||nn(n))return;const r=f("smoothScroll"),s=n.offsetHeight>window.innerHeight;n.scrollIntoView({behavior:!r||tn(n)?"auto":"smooth",inline:"center",block:s?"start":"center"})}function tn(n){if(!n||!n.parentElement)return;const r=n.parentElement;return r.scrollHeight>r.clientHeight}function nn(n){const r=n.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}function rn(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}let De={};function W(n,r){De[n]=r}function y(n){return n?De[n]:De}function Ke(){De={}}function an(n,r,s,c){let i=y("__activeStagePosition");const v=i||s.getBoundingClientRect(),m=c.getBoundingClientRect(),w=Ie(n,v.x,m.x-v.x,r),d=Ie(n,v.y,m.y-v.y,r),E=Ie(n,v.width,m.width-v.width,r),S=Ie(n,v.height,m.height-v.height,r);i={x:w,y:d,width:E,height:S},mt(i),W("__activeStagePosition",i)}function vt(n){if(!n)return;const r=n.getBoundingClientRect(),s={x:r.x,y:r.y,width:r.width,height:r.height};W("__activeStagePosition",s),mt(s)}function on(){const n=y("__activeStagePosition"),r=y("__overlaySvg");if(!n)return;if(!r){console.warn("No stage svg found.");return}const s=window.innerWidth,c=window.innerHeight;r.setAttribute("viewBox",`0 0 ${s} ${c}`)}function sn(n){const r=ln(n);document.body.appendChild(r),xt(r,s=>{s.target.tagName==="path"&&ue("overlayClick")}),W("__overlaySvg",r)}function mt(n){const r=y("__overlaySvg");if(!r){sn(n);return}const s=r.firstElementChild;if((s==null?void 0:s.tagName)!=="path")throw new Error("no path element found in stage svg");s.setAttribute("d",ft(n))}function ln(n){const r=window.innerWidth,s=window.innerHeight,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add("driver-overlay","driver-overlay-animated"),c.setAttribute("viewBox",`0 0 ${r} ${s}`),c.setAttribute("xmlSpace","preserve"),c.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),c.setAttribute("version","1.1"),c.setAttribute("preserveAspectRatio","xMinYMin slice"),c.style.fillRule="evenodd",c.style.clipRule="evenodd",c.style.strokeLinejoin="round",c.style.strokeMiterlimit="2",c.style.zIndex="10000",c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%";const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",ft(n)),i.style.fill=f("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${f("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",c.appendChild(i),c}function ft(n){const r=window.innerWidth,s=window.innerHeight,c=f("stagePadding")||0,i=f("stageRadius")||0,v=n.width+c*2,m=n.height+c*2,w=Math.min(i,v/2,m/2),d=Math.floor(Math.max(w,0)),E=n.x-c+d,S=n.y-c,F=v-d*2,p=m-d*2;return`M${r},0L0,0L0,${s}L${r},${s}L${r},0Z
    M${E},${S} h${F} a${d},${d} 0 0 1 ${d},${d} v${p} a${d},${d} 0 0 1 -${d},${d} h-${F} a${d},${d} 0 0 1 -${d},-${d} v-${p} a${d},${d} 0 0 1 ${d},-${d} z`}function cn(){const n=y("__overlaySvg");n&&n.remove()}function dn(){const n=document.getElementById("driver-dummy-element");if(n)return n;let r=document.createElement("div");return r.id="driver-dummy-element",r.style.width="0",r.style.height="0",r.style.pointerEvents="none",r.style.opacity="0",r.style.position="fixed",r.style.top="50%",r.style.left="50%",document.body.appendChild(r),r}function Je(n){const{element:r}=n;let s=typeof r=="function"?r():typeof r=="string"?document.querySelector(r):r;s||(s=dn()),pn(s,n)}function un(){const n=y("__activeElement"),r=y("__activeStep");n&&(vt(n),on(),wt(n,r))}function pn(n,r){var s;const c=Date.now(),i=y("__activeStep"),v=y("__activeElement")||n,m=!v||v===n,w=n.id==="driver-dummy-element",d=v.id==="driver-dummy-element",E=f("animate"),S=r.onHighlightStarted||f("onHighlightStarted"),F=(r==null?void 0:r.onHighlighted)||f("onHighlighted"),p=(i==null?void 0:i.onDeselected)||f("onDeselected"),h=f(),g=y();!m&&p&&p(d?void 0:v,i,{config:h,state:g,driver:K()}),S&&S(w?void 0:n,r,{config:h,state:g,driver:K()});const I=!m&&E;let l=!1;gn(),W("previousStep",i),W("previousElement",v),W("activeStep",r),W("activeElement",n);const M=()=>{if(y("__transitionCallback")!==M)return;const O=Date.now()-c,_=400-O<=400/2;r.popover&&_&&!l&&I&&(Ye(n,r),l=!0),f("animate")&&O<400?an(O,400,v,n):(vt(n),F&&F(w?void 0:n,r,{config:f(),state:y(),driver:K()}),W("__transitionCallback",void 0),W("__previousStep",i),W("__previousElement",v),W("__activeStep",r),W("__activeElement",n)),window.requestAnimationFrame(M)};W("__transitionCallback",M),window.requestAnimationFrame(M),ht(n),!I&&r.popover&&Ye(n,r),v.classList.remove("driver-active-element","driver-no-interaction"),v.removeAttribute("aria-haspopup"),v.removeAttribute("aria-expanded"),v.removeAttribute("aria-controls"),((s=r.disableActiveInteraction)!=null?s:f("disableActiveInteraction"))&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function hn(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(r=>{r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls")})}function be(){const n=y("__resizeTimeout");n&&window.cancelAnimationFrame(n),W("__resizeTimeout",window.requestAnimationFrame(un))}function vn(n){var r;if(!y("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;const s=y("__activeElement"),c=(r=y("popover"))==null?void 0:r.wrapper,i=pt([...c?[c]:[],...s?[s]:[]]),v=i[0],m=i[i.length-1];if(n.preventDefault(),n.shiftKey){const w=i[i.indexOf(document.activeElement)-1]||m;w==null||w.focus()}else{const w=i[i.indexOf(document.activeElement)+1]||v;w==null||w.focus()}}function gt(n){var r;((r=f("allowKeyboardControl"))==null||r)&&(n.key==="Escape"?ue("escapePress"):n.key==="ArrowRight"?ue("arrowRightPress"):n.key==="ArrowLeft"&&ue("arrowLeftPress"))}function xt(n,r,s){const c=(i,v)=>{const m=i.target;n.contains(m)&&((!s||s(m))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),v==null||v(i))};document.addEventListener("pointerdown",c,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("pointerup",c,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("click",i=>{c(i,r)},!0)}function mn(){window.addEventListener("keyup",gt,!1),window.addEventListener("keydown",vn,!1),window.addEventListener("resize",be),window.addEventListener("scroll",be)}function fn(){window.removeEventListener("keyup",gt),window.removeEventListener("resize",be),window.removeEventListener("scroll",be)}function gn(){const n=y("popover");n&&(n.wrapper.style.display="none")}function Ye(n,r){var s,c;let i=y("popover");i&&document.body.removeChild(i.wrapper),i=yn(),document.body.appendChild(i.wrapper);const{title:v,description:m,showButtons:w,disableButtons:d,showProgress:E,nextBtnText:S=f("nextBtnText")||"Next &rarr;",prevBtnText:F=f("prevBtnText")||"&larr; Previous",progressText:p=f("progressText")||"{current} of {total}"}=r.popover||{};i.nextButton.innerHTML=S,i.previousButton.innerHTML=F,i.progress.innerHTML=p,v?(i.title.innerHTML=v,i.title.style.display="block"):i.title.style.display="none",m?(i.description.innerHTML=m,i.description.style.display="block"):i.description.style.display="none";const h=w||f("showButtons"),g=E||f("showProgress")||!1,I=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||g;i.closeButton.style.display=h.includes("close")?"block":"none",I?(i.footer.style.display="flex",i.progress.style.display=g?"block":"none",i.nextButton.style.display=h.includes("next")?"block":"none",i.previousButton.style.display=h.includes("previous")?"block":"none"):i.footer.style.display="none";const l=d||f("disableButtons")||[];l!=null&&l.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),l!=null&&l.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),l!=null&&l.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));const M=i.wrapper;M.style.display="block",M.style.left="",M.style.top="",M.style.bottom="",M.style.right="",M.id="driver-popover-content",M.setAttribute("role","dialog"),M.setAttribute("aria-labelledby","driver-popover-title"),M.setAttribute("aria-describedby","driver-popover-description");const O=i.arrow;O.className="driver-popover-arrow";const _=((s=r.popover)==null?void 0:s.popoverClass)||f("popoverClass")||"";M.className=`driver-popover ${_}`.trim(),xt(i.wrapper,Z=>{var G,re,se;const U=Z.target,ae=((G=r.popover)==null?void 0:G.onNextClick)||f("onNextClick"),ne=((re=r.popover)==null?void 0:re.onPrevClick)||f("onPrevClick"),J=((se=r.popover)==null?void 0:se.onCloseClick)||f("onCloseClick");if(U.closest(".driver-popover-next-btn"))return ae?ae(n,r,{config:f(),state:y(),driver:K()}):ue("nextClick");if(U.closest(".driver-popover-prev-btn"))return ne?ne(n,r,{config:f(),state:y(),driver:K()}):ue("prevClick");if(U.closest(".driver-popover-close-btn"))return J?J(n,r,{config:f(),state:y(),driver:K()}):ue("closeClick")},Z=>!(i!=null&&i.description.contains(Z))&&!(i!=null&&i.title.contains(Z))&&typeof Z.className=="string"&&Z.className.includes("driver-popover")),W("popover",i);const z=((c=r.popover)==null?void 0:c.onPopoverRender)||f("onPopoverRender");z&&z(i,{config:f(),state:y(),driver:K()}),wt(n,r),ht(M);const $=n.classList.contains("driver-dummy-element"),R=pt([M,...$?[]:[n]]);R.length>0&&R[0].focus()}function yt(){const n=y("popover");if(!(n!=null&&n.wrapper))return;const r=n.wrapper.getBoundingClientRect(),s=f("stagePadding")||0,c=f("popoverOffset")||0;return{width:r.width+s+c,height:r.height+s+c,realWidth:r.width,realHeight:r.height}}function et(n,r){const{elementDimensions:s,popoverDimensions:c,popoverPadding:i,popoverArrowDimensions:v}=r;return n==="start"?Math.max(Math.min(s.top-i,window.innerHeight-c.realHeight-v.width),v.width):n==="end"?Math.max(Math.min(s.top-(c==null?void 0:c.realHeight)+s.height+i,window.innerHeight-(c==null?void 0:c.realHeight)-v.width),v.width):n==="center"?Math.max(Math.min(s.top+s.height/2-(c==null?void 0:c.realHeight)/2,window.innerHeight-(c==null?void 0:c.realHeight)-v.width),v.width):0}function tt(n,r){const{elementDimensions:s,popoverDimensions:c,popoverPadding:i,popoverArrowDimensions:v}=r;return n==="start"?Math.max(Math.min(s.left-i,window.innerWidth-c.realWidth-v.width),v.width):n==="end"?Math.max(Math.min(s.left-(c==null?void 0:c.realWidth)+s.width+i,window.innerWidth-(c==null?void 0:c.realWidth)-v.width),v.width):n==="center"?Math.max(Math.min(s.left+s.width/2-(c==null?void 0:c.realWidth)/2,window.innerWidth-(c==null?void 0:c.realWidth)-v.width),v.width):0}function wt(n,r){const s=y("popover");if(!s)return;const{align:c="start",side:i="left"}=(r==null?void 0:r.popover)||{},v=c,m=n.id==="driver-dummy-element"?"over":i,w=f("stagePadding")||0,d=yt(),E=s.arrow.getBoundingClientRect(),S=n.getBoundingClientRect(),F=S.top-d.height;let p=F>=0;const h=window.innerHeight-(S.bottom+d.height);let g=h>=0;const I=S.left-d.width;let l=I>=0;const M=window.innerWidth-(S.right+d.width);let O=M>=0;const _=!p&&!g&&!l&&!O;let z=m;if(m==="top"&&p?O=l=g=!1:m==="bottom"&&g?O=l=p=!1:m==="left"&&l?O=p=g=!1:m==="right"&&O&&(l=p=g=!1),m==="over"){const $=window.innerWidth/2-d.realWidth/2,R=window.innerHeight/2-d.realHeight/2;s.wrapper.style.left=`${$}px`,s.wrapper.style.right="auto",s.wrapper.style.top=`${R}px`,s.wrapper.style.bottom="auto"}else if(_){const $=window.innerWidth/2-(d==null?void 0:d.realWidth)/2,R=10;s.wrapper.style.left=`${$}px`,s.wrapper.style.right="auto",s.wrapper.style.bottom=`${R}px`,s.wrapper.style.top="auto"}else if(l){const $=Math.min(I,window.innerWidth-(d==null?void 0:d.realWidth)-E.width),R=et(v,{elementDimensions:S,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:E});s.wrapper.style.left=`${$}px`,s.wrapper.style.top=`${R}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",z="left"}else if(O){const $=Math.min(M,window.innerWidth-(d==null?void 0:d.realWidth)-E.width),R=et(v,{elementDimensions:S,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:E});s.wrapper.style.right=`${$}px`,s.wrapper.style.top=`${R}px`,s.wrapper.style.bottom="auto",s.wrapper.style.left="auto",z="right"}else if(p){const $=Math.min(F,window.innerHeight-d.realHeight-E.width);let R=tt(v,{elementDimensions:S,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:E});s.wrapper.style.top=`${$}px`,s.wrapper.style.left=`${R}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",z="top"}else if(g){const $=Math.min(h,window.innerHeight-(d==null?void 0:d.realHeight)-E.width);let R=tt(v,{elementDimensions:S,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:E});s.wrapper.style.left=`${R}px`,s.wrapper.style.bottom=`${$}px`,s.wrapper.style.top="auto",s.wrapper.style.right="auto",z="bottom"}_?s.arrow.classList.add("driver-popover-arrow-none"):xn(v,z,n)}function xn(n,r,s){const c=y("popover");if(!c)return;const i=s.getBoundingClientRect(),v=yt(),m=c.arrow,w=v.width,d=window.innerWidth,E=i.width,S=i.left,F=v.height,p=window.innerHeight,h=i.top,g=i.height;m.className="driver-popover-arrow";let I=r,l=n;if(r==="top"?(S+E<=0?(I="right",l="end"):S+E-w<=0&&(I="top",l="start"),S>=d?(I="left",l="end"):S+w>=d&&(I="top",l="end")):r==="bottom"?(S+E<=0?(I="right",l="start"):S+E-w<=0&&(I="bottom",l="start"),S>=d?(I="left",l="start"):S+w>=d&&(I="bottom",l="end")):r==="left"?(h+g<=0?(I="bottom",l="end"):h+g-F<=0&&(I="left",l="start"),h>=p?(I="top",l="end"):h+F>=p&&(I="left",l="end")):r==="right"&&(h+g<=0?(I="bottom",l="start"):h+g-F<=0&&(I="right",l="start"),h>=p?(I="top",l="start"):h+F>=p&&(I="right",l="end")),!I)m.classList.add("driver-popover-arrow-none");else{m.classList.add(`driver-popover-arrow-side-${I}`),m.classList.add(`driver-popover-arrow-align-${l}`);const M=s.getBoundingClientRect(),O=m.getBoundingClientRect(),_=f("stagePadding")||0,z=M.left-_<window.innerWidth&&M.right+_>0&&M.top-_<window.innerHeight&&M.bottom+_>0;r==="bottom"&&z&&(O.x>M.x&&O.x+O.width<M.x+M.width?c.wrapper.style.transform="translateY(0)":(m.classList.remove(`driver-popover-arrow-align-${l}`),m.classList.add("driver-popover-arrow-none"),c.wrapper.style.transform=`translateY(-${_/2}px)`))}}function yn(){const n=document.createElement("div");n.classList.add("driver-popover");const r=document.createElement("div");r.classList.add("driver-popover-arrow");const s=document.createElement("header");s.id="driver-popover-title",s.classList.add("driver-popover-title"),s.style.display="none",s.innerText="Popover Title";const c=document.createElement("div");c.id="driver-popover-description",c.classList.add("driver-popover-description"),c.style.display="none",c.innerText="Popover description is here";const i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";const v=document.createElement("footer");v.classList.add("driver-popover-footer");const m=document.createElement("span");m.classList.add("driver-popover-progress-text"),m.innerText="";const w=document.createElement("span");w.classList.add("driver-popover-navigation-btns");const d=document.createElement("button");d.type="button",d.classList.add("driver-popover-prev-btn"),d.innerHTML="&larr; Previous";const E=document.createElement("button");return E.type="button",E.classList.add("driver-popover-next-btn"),E.innerHTML="Next &rarr;",w.appendChild(d),w.appendChild(E),v.appendChild(m),v.appendChild(w),n.appendChild(i),n.appendChild(r),n.appendChild(s),n.appendChild(c),n.appendChild(v),{wrapper:n,arrow:r,title:s,description:c,footer:v,previousButton:d,nextButton:E,closeButton:i,footerButtons:w,progress:m}}function wn(){var n;const r=y("popover");r&&((n=r.wrapper.parentElement)==null||n.removeChild(r.wrapper))}function bn(n={}){$e(n);function r(){f("allowClose")&&S()}function s(){const p=f("overlayClickBehavior");if(f("allowClose")&&p==="close"){S();return}if(typeof p=="function"){const h=y("__activeStep"),g=y("__activeElement");p(g,h,{config:f(),state:y(),driver:K()});return}p==="nextStep"&&c()}function c(){const p=y("activeIndex"),h=f("steps")||[];if(typeof p>"u")return;const g=p+1;h[g]?E(g):S()}function i(){const p=y("activeIndex"),h=f("steps")||[];if(typeof p>"u")return;const g=p-1;h[g]?E(g):S()}function v(p){(f("steps")||[])[p]?E(p):S()}function m(){var p;if(y("__transitionCallback"))return;const h=y("activeIndex"),g=y("__activeStep"),I=y("__activeElement");if(typeof h>"u"||typeof g>"u"||typeof y("activeIndex")>"u")return;const l=((p=g.popover)==null?void 0:p.onPrevClick)||f("onPrevClick");if(l)return l(I,g,{config:f(),state:y(),driver:K()});i()}function w(){var p;if(y("__transitionCallback"))return;const h=y("activeIndex"),g=y("__activeStep"),I=y("__activeElement");if(typeof h>"u"||typeof g>"u")return;const l=((p=g.popover)==null?void 0:p.onNextClick)||f("onNextClick");if(l)return l(I,g,{config:f(),state:y(),driver:K()});c()}function d(){y("isInitialized")||(W("isInitialized",!0),document.body.classList.add("driver-active",f("animate")?"driver-fade":"driver-simple"),mn(),Pe("overlayClick",s),Pe("escapePress",r),Pe("arrowLeftPress",m),Pe("arrowRightPress",w))}function E(p=0){var h,g,I,l,M,O,_,z;const $=f("steps");if(!$){console.error("No steps to drive through"),S();return}if(!$[p]){S();return}W("__activeOnDestroyed",document.activeElement),W("activeIndex",p);const R=$[p],Z=$[p+1],G=$[p-1],re=((h=R.popover)==null?void 0:h.doneBtnText)||f("doneBtnText")||"Done",se=f("allowClose"),U=typeof((g=R.popover)==null?void 0:g.showProgress)<"u"?(I=R.popover)==null?void 0:I.showProgress:f("showProgress"),ae=(((l=R.popover)==null?void 0:l.progressText)||f("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${p+1}`).replace("{{total}}",`${$.length}`),ne=((M=R.popover)==null?void 0:M.showButtons)||f("showButtons"),J=["next","previous",...se?["close"]:[]].filter(ge=>!(ne!=null&&ne.length)||ne.includes(ge)),ce=((O=R.popover)==null?void 0:O.onNextClick)||f("onNextClick"),pe=((_=R.popover)==null?void 0:_.onPrevClick)||f("onPrevClick"),fe=((z=R.popover)==null?void 0:z.onCloseClick)||f("onCloseClick");Je({...R,popover:{showButtons:J,nextBtnText:Z?void 0:re,disableButtons:[...G?[]:["previous"]],showProgress:U,progressText:ae,onNextClick:ce||(()=>{Z?E(p+1):S()}),onPrevClick:pe||(()=>{E(p-1)}),onCloseClick:fe||(()=>{S()}),...(R==null?void 0:R.popover)||{}}})}function S(p=!0){const h=y("__activeElement"),g=y("__activeStep"),I=y("__activeOnDestroyed"),l=f("onDestroyStarted");if(p&&l){const _=!h||(h==null?void 0:h.id)==="driver-dummy-element";l(_?void 0:h,g,{config:f(),state:y(),driver:K()});return}const M=(g==null?void 0:g.onDeselected)||f("onDeselected"),O=f("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),fn(),wn(),hn(),cn(),en(),Ke(),h&&g){const _=h.id==="driver-dummy-element";M&&M(_?void 0:h,g,{config:f(),state:y(),driver:K()}),O&&O(_?void 0:h,g,{config:f(),state:y(),driver:K()})}I&&I.focus()}const F={isActive:()=>y("isInitialized")||!1,refresh:be,drive:(p=0)=>{d(),E(p)},setConfig:$e,setSteps:p=>{Ke(),$e({...f(),steps:p})},getConfig:f,getState:y,getActiveIndex:()=>y("activeIndex"),isFirstStep:()=>y("activeIndex")===0,isLastStep:()=>{const p=f("steps")||[],h=y("activeIndex");return h!==void 0&&h===p.length-1},getActiveStep:()=>y("activeStep"),getActiveElement:()=>y("activeElement"),getPreviousElement:()=>y("previousElement"),getPreviousStep:()=>y("previousStep"),moveNext:c,movePrevious:i,moveTo:v,hasNextStep:()=>{const p=f("steps")||[],h=y("activeIndex");return h!==void 0&&!!p[h+1]},hasPreviousStep:()=>{const p=f("steps")||[],h=y("activeIndex");return h!==void 0&&!!p[h-1]},highlight:p=>{d(),Je({...p,popover:p.popover?{showButtons:[],showProgress:!1,progressText:"",...p.popover}:void 0})},destroy:()=>{S(!1)}};return Yt(F),F}function Cn(){const n=()=>{bn({showProgress:!0,steps:[{element:"#diff-mode",popover:{title:"Solo Diferencias",description:"Activa este interruptor para ver solo los productos que tienen diferencias entre el stock f칤sico y el del sistema.",side:"bottom",align:"start"}},{element:'[role="tablist"]',popover:{title:"Pesta침as de Estado",description:'Navega entre "Pendientes" y "Controlados" para organizar tu trabajo.',side:"bottom",align:"start"}},{element:".bg-card.relative",popover:{title:"Acciones R치pidas",description:"Desliza a la derecha para Confirmar/Editar o a la izquierda para reportar Diferencia/Revertir.",side:"top",align:"start"}},{element:"button:has(.lucide-save)",popover:{title:"Finalizar Inventario",description:"Cuando termines, guarda el estado del inventario aqu칤.",side:"left",align:"start"}}]}).drive()};return B.useEffect(()=>{localStorage.getItem("has_seen_inventory_tour")||setTimeout(()=>{n(),localStorage.setItem("has_seen_inventory_tour","true")},1e3)},[]),t.jsx(q,{variant:"ghost",size:"icon",onClick:n,title:"Ver Tutorial",children:t.jsx(Ut,{className:"w-5 h-5"})})}const Re=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function Un(){const{id:n}=jt(),r=Nt(),[s,c]=B.useState(!1),[i,v]=B.useState(!1),[m,w]=B.useState([]),[d,E]=B.useState(""),[S,F]=B.useState(""),[p,h]=B.useState(!1),[g,I]=B.useState(Re[0]),{user:l}=Et(),M=(l==null?void 0:l.branchName)||"Sucursal Desconocida",[O,_]=B.useState(!1),[z,$]=B.useState(""),[R,Z]=B.useState("");B.useEffect(()=>{n&&E(decodeURIComponent(n))},[n]),B.useEffect(()=>{(async()=>{if(d){c(!0);try{const u=await ke.getLabInventory(M,d);w(u)}catch(u){console.error("Failed to load inventory:",u),H.error("Error al cargar el inventario desde la nube.")}finally{c(!1)}}})()},[d]);const G=B.useMemo(()=>m.filter(o=>{if(S){const u=S.toLowerCase();if(!o.name.toLowerCase().includes(u)&&!o.ean.includes(u))return!1}return p?o.countedQuantity!==o.systemQuantity:!0}),[m,S,p]),re=B.useMemo(()=>G.filter(o=>o.status==="pending"&&(o.category===g||!o.category&&g==="Varios")),[G,g]),se=o=>[...o].sort((u,b)=>{const C=u.countedQuantity-u.systemQuantity,N=b.countedQuantity-b.systemQuantity,x=C!==0,Q=N!==0;return x&&!Q?-1:!x&&Q?1:C-N}),U=B.useMemo(()=>se(G.filter(o=>o.status==="controlled")),[G]),ae=B.useMemo(()=>se(G.filter(o=>o.status==="adjusted")),[G]);B.useMemo(()=>{let o=0,u=0,b=0;return m.forEach(C=>{const N=C.countedQuantity-C.systemQuantity,x=N*C.cost;N<0?o+=x:N>0&&(u+=x),b+=x}),{negative:o,positive:u,net:b}},[m]);const ne=async o=>{var C;const u=(C=o.target.files)==null?void 0:C[0];if(!u)return;c(!0);const b=new FileReader;b.onload=N=>{var x,Q,X;try{const V=(x=N.target)==null?void 0:x.result,Y=_t(V,{type:"binary"}),ie=Y.SheetNames[0],ee=Y.Sheets[ie],je=Me.sheet_to_json(ee,{header:1}),Ne=[...m],Se=new Set(m.map(de=>de.ean));let he=0,xe=0;for(let de=1;de<je.length;de++){const oe=je[de];if(!oe||!oe[3])continue;const ve=(Q=oe[2])==null?void 0:Q.toString().trim();if(!ve)continue;if(Se.has(ve)){xe++;continue}let te=(X=oe[9])==null?void 0:X.toString().trim();te&&(te==="Medicamento"&&(te="Medicamentos"),te==="Perfumeria"&&(te="Perfumer칤a")),(!te||!Re.includes(te))&&(te="Varios"),Ne.push({id:crypto.randomUUID(),ean:ve,name:oe[3],systemQuantity:Number(oe[4])||0,countedQuantity:Number(oe[4])||0,cost:Number(oe[12])||0,status:"pending",category:te}),Se.add(ve),he++}w(Ne),xe>0?H.success(`Procesado. ${he} nuevos, ${xe} ignorados (ya existentes/ajustados).`):H.success(`Archivo procesado. Se agregaron ${he} items nuevos.`)}catch(V){console.error("Error reading file:",V),H.error("Error al procesar el archivo Excel.")}finally{c(!1),o.target.value=""}},b.readAsBinaryString(u)},J=B.useCallback((o,u)=>{w(b=>b.map(C=>C.id===o?(u-C.systemQuantity!==0&&navigator.vibrate?navigator.vibrate([50,50,50]):navigator.vibrate&&navigator.vibrate(50),{...C,countedQuantity:u,status:"controlled"}):C))},[]),ce=B.useCallback(o=>{navigator.vibrate&&navigator.vibrate(50),Gt({particleCount:100,spread:70,origin:{y:.6}}),w(u=>u.map(b=>b.id===o?{...b,status:"controlled",countedQuantity:b.systemQuantity}:b)),H.success("Producto controlado")},[]),pe=B.useCallback(o=>{w(u=>u.map(b=>b.id===o?{...b,status:"pending"}:b)),H.info("Producto devuelto a pendientes")},[]),fe=async()=>{v(!0);try{await ke.saveInventory(M,d,m),H.success("Progreso guardado en la nube.")}catch(o){console.error("Error saving progress:",o),H.error("Error al guardar el progreso.")}finally{v(!1)}},ge=async()=>{const o=U.filter(N=>N.countedQuantity<N.systemQuantity),u=U.filter(N=>N.countedQuantity>N.systemQuantity),b=o.length>0,C=u.length>0;if(b&&!z.trim()){H.error("Por favor ingresa el ID de ajuste para Faltantes");return}if(C&&!R.trim()){H.error("Por favor ingresa el ID de ajuste para Sobrantes");return}v(!0);try{const N=m.map(x=>x.status==="controlled"?{...x,status:"adjusted"}:x);w(N),await ke.saveInventory(M,d,N),H.success("Inventario finalizado y guardado en la nube."),_(!1),$(""),Z(""),r("/cyclic-inventory")}catch(N){console.error("Error saving inventory:",N),H.error("Error al guardar en la nube.")}finally{v(!1)}},Ce=async()=>{await fe(),_(!0)},a=U.filter(o=>o.countedQuantity<o.systemQuantity).reduce((o,u)=>o+(u.systemQuantity-u.countedQuantity)*u.cost,0),e=U.filter(o=>o.countedQuantity>o.systemQuantity).reduce((o,u)=>o+(u.countedQuantity-u.systemQuantity)*u.cost,0),j=()=>{const o=m.map(C=>({EAN:C.ean,Producto:C.name,Laboratorio:d,Rubro:C.category||"Varios","Cantidad Sistema":C.systemQuantity,"Cantidad F칤sica":C.countedQuantity,Diferencia:C.countedQuantity-C.systemQuantity,Costo:C.cost,Estado:C.status==="controlled"?"CONTROLADO":C.status==="adjusted"?"AJUSTADO":"PENDIENTE"})),u=Me.json_to_sheet(o),b=Me.book_new();Me.book_append_sheet(b,u,"Inventario"),Bt(b,`Inventario_${d}.xlsx`),H.success("Excel generado")},[P,A]=B.useState(!1),D=B.useCallback(o=>{const u=m.find(b=>b.ean===o);u?(J(u.id,u.countedQuantity+1),H.success(`Producto encontrado: ${u.name}`)):H.error(`Producto no encontrado: ${o}`)},[m,J]),L=B.useCallback(o=>{let u=0,b=0;const C=new Map;m.forEach(N=>C.set(N.id,N.countedQuantity)),o.forEach(N=>{const x=m.find(Q=>Q.ean===N);if(x){const Q=C.get(x.id)||0;C.set(x.id,Q+1),u++}else b++}),u>0&&(w(N=>N.map(x=>{if(C.has(x.id)){const Q=C.get(x.id);if(Q!==x.countedQuantity)return{...x,countedQuantity:Q,status:"controlled"}}return x})),H.success(`Procesados ${u} items correctamente.`)),b>0&&H.warning(`${b} c칩digos no encontrados.`)},[m]),k=()=>{const o=new Ft;o.setFontSize(16),o.text(`Inventario C칤clico: ${d}`,10,10),o.setFontSize(10),o.text(`Fecha: ${new Date().toLocaleDateString()}`,10,18);let u=30;const b=10,C=o.internal.pageSize.height;o.setFont("helvetica","bold"),o.text("Producto",10,u),o.text("Rubro",80,u),o.text("Sistema",100,u),o.text("F칤sico",130,u),o.text("Dif",160,u),o.text("Estado",180,u),u+=b,o.setFont("helvetica","normal"),m.forEach(N=>{u>C-20&&(o.addPage(),u=20);const x=N.countedQuantity-N.systemQuantity;o.text(N.name.substring(0,35),10,u),o.text((N.category||"Varios").substring(0,15),80,u),o.text(N.systemQuantity.toString(),100,u),o.text(N.countedQuantity.toString(),130,u),o.setTextColor(x===0?0:255,0,0),o.text(x.toString(),160,u),o.setTextColor(0),o.text(N.status==="controlled"?"OK":N.status==="adjusted"?"Ajust":"Pend",180,u),u+=b}),o.save(`Inventario_${d}_${new Date().toISOString().split("T")[0]}.pdf`),H.success("Reporte PDF generado")},T=async()=>{if(confirm("쮼st치s seguro de que quieres reiniciar los datos de este laboratorio? Se borrar치n de la nube."))try{await ke.deleteInventory(M,d),w([]),H.success("Datos reiniciados correctamente."),r("/cyclic-inventory")}catch(o){console.error("Error resetting data:",o),H.error("Error al reiniciar datos.")}};return t.jsxs("div",{className:"p-4 md:p-6 space-y-6 max-w-7xl mx-auto pb-32 lg:pb-10",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(q,{variant:"ghost",size:"icon",onClick:()=>r("/cyclic-inventory"),children:t.jsx(Wt,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:d}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Control de Inventario C칤clico"})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(Cn,{})})]}),s?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[t.jsx(Ge,{className:"w-8 h-8 animate-spin text-primary"}),t.jsx("p",{className:"text-muted-foreground",children:"Cargando inventario desde la nube..."})]}):t.jsx(t.Fragment,{children:m.length===0?t.jsxs(me,{className:"p-12 border-dashed border-2 flex flex-col items-center justify-center text-center space-y-4 bg-muted/20",children:[t.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:t.jsx(qe,{className:"w-8 h-8 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Cargar Archivo de Inventario"}),t.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:["Sube el archivo Excel (.xlsx) descargado del sistema para comenzar el control de ",d,"."]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(q,{disabled:s,children:s?"Procesando...":"Seleccionar Archivo"}),t.jsx(ye,{type:"file",accept:".xlsx, .xls",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:ne,disabled:s})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Columnas requeridas: C (EAN), D (Producto), E (Cantidad), O (Laboratorio), J (Rubro)"})]}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(me,{className:"p-4 flex flex-col items-center justify-center bg-warning/5 border-warning/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Pendientes"}),t.jsx("span",{className:"text-2xl font-bold text-warning",children:t.jsx(Ee,{value:m.filter(o=>o.status==="pending").length})})]}),t.jsxs(me,{className:"p-4 flex flex-col items-center justify-center bg-success/5 border-success/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Controlados"}),t.jsx("span",{className:"text-2xl font-bold text-success",children:t.jsx(Ee,{value:m.filter(o=>o.status==="controlled").length})})]}),t.jsxs(me,{className:"p-4 flex flex-col items-center justify-center bg-blue-500/5 border-blue-500/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Ajustados"}),t.jsx("span",{className:"text-2xl font-bold text-blue-500",children:t.jsx(Ee,{value:m.filter(o=>o.status==="adjusted").length})})]}),t.jsxs(me,{className:"p-4 flex flex-col items-center justify-center",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Avance"}),t.jsxs("span",{className:"text-2xl font-bold",children:[t.jsx(Ee,{value:Math.round(m.filter(o=>o.status==="controlled"||o.status==="adjusted").length/m.length*100)}),"%"]})]})]}),t.jsxs("div",{className:"lg:col-span-3",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(ye,{placeholder:"Buscar por nombre o EAN...",value:S,onChange:o=>F(o.target.value),className:"pl-9"})]}),t.jsxs("div",{className:"flex items-center space-x-2 bg-card p-2 rounded-lg border",children:[t.jsx(Ht,{id:"diff-mode",checked:p,onCheckedChange:h}),t.jsx(Be,{htmlFor:"diff-mode",className:"cursor-pointer",children:"Solo Diferencias"})]}),t.jsxs("div",{className:"flex gap-2 ml-auto",children:[t.jsxs(q,{variant:"destructive",size:"sm",onClick:T,children:[t.jsx(Oe,{className:"w-4 h-4 lg:mr-2"}),t.jsx("span",{className:"hidden lg:inline",children:"Reiniciar"})]}),t.jsxs(q,{variant:"default",size:"sm",onClick:Ce,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",disabled:i,children:[i?t.jsx(Ge,{className:"w-4 h-4 animate-spin mr-2"}):t.jsx(we,{className:"w-4 h-4 mr-2"}),"Finalizar Inventario"]})]})]}),t.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:t.jsx("div",{className:"flex gap-2",children:Re.map(o=>t.jsx(q,{variant:g===o?"default":"outline",onClick:()=>I(o),className:le("rounded-full px-6 transition-all",g===o?"shadow-md":"opacity-70 hover:opacity-100"),children:o},o))})}),t.jsxs(Lt,{defaultValue:"pending",className:"w-full",children:[t.jsxs(Tt,{className:"grid w-full grid-cols-3 mb-4",children:[t.jsxs(Te,{value:"pending",className:"relative",children:["Pendientes (",g,")",re.length>0&&t.jsx("span",{className:"ml-2 bg-warning text-warning-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:re.length})]}),t.jsxs(Te,{value:"controlled",children:["Controlados",U.length>0&&t.jsx("span",{className:"ml-2 bg-success text-success-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:U.length})]}),t.jsxs(Te,{value:"adjusted",children:["Ajustados",ae.length>0&&t.jsx("span",{className:"ml-2 bg-blue-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:ae.length})]})]}),t.jsxs(_e,{value:"pending",className:"space-y-4",children:[t.jsxs(lt,{className:"bg-muted/50 border-none mb-4",children:[t.jsx(It,{className:"h-4 w-4"}),t.jsx(ct,{children:"Instrucciones"}),t.jsx(dt,{children:"Desliza a la derecha para confirmar (verde) o a la izquierda para reportar diferencia (naranja)."})]}),t.jsx(Fe,{items:re,onUpdateQuantity:J,onCheck:ce})]}),t.jsx(_e,{value:"controlled",className:"space-y-4",children:t.jsx(Fe,{items:U,onUpdateQuantity:J,onCheck:ce,onRevert:pe,readOnly:!1})}),t.jsx(_e,{value:"adjusted",className:"space-y-4",children:t.jsx(Fe,{items:ae,onUpdateQuantity:()=>{},onCheck:()=>{},readOnly:!0})})]})]})]})}),t.jsx(rt,{open:O,onOpenChange:_,children:t.jsxs(at,{children:[t.jsxs(ot,{children:[t.jsx(st,{children:"Finalizar Inventario"}),t.jsx(At,{children:"Ingresa el ID del ajuste generado en PLEX para guardar el estado de este inventario."})]}),t.jsxs("div",{className:"py-4 space-y-6",children:[t.jsxs("div",{className:"space-y-2 p-4 bg-destructive/5 rounded-lg border border-destructive/10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Be,{className:"text-destructive font-bold",children:"Faltantes (Negativos)"}),t.jsxs("span",{className:"font-mono font-bold text-destructive",children:["$",a.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),t.jsx(ye,{value:z,onChange:o=>$(o.target.value),placeholder:"ID Ajuste Faltantes (PLEX)"})]}),t.jsxs("div",{className:"space-y-2 p-4 bg-success/5 rounded-lg border border-success/10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Be,{className:"text-success font-bold",children:"Sobrantes (Positivos)"}),t.jsxs("span",{className:"font-mono font-bold text-success",children:["$",e.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),t.jsx(ye,{value:R,onChange:o=>Z(o.target.value),placeholder:"ID Ajuste Sobrantes (PLEX)"})]})]}),t.jsxs(it,{children:[t.jsx(q,{variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),t.jsx(q,{onClick:ge,disabled:i,children:i?"Guardando...":"Guardar y Finalizar"})]})]})}),t.jsx(qt,{open:P,onOpenChange:A,onScan:D,onBatchScan:L}),m.length>0&&t.jsx(Vt,{actions:[{label:"Finalizar",icon:t.jsx(we,{className:"w-5 h-5"}),onClick:Ce,variant:"default",color:"bg-primary text-primary-foreground"},{label:"Exportar PDF",icon:t.jsx(Dt,{className:"w-5 h-5"}),onClick:k,variant:"secondary"},{label:"Exportar Excel",icon:t.jsx(zt,{className:"w-5 h-5"}),onClick:j,variant:"secondary",color:"text-green-600"},{label:"Escanear",icon:t.jsx(Xt,{className:"w-5 h-5"}),onClick:()=>A(!0),variant:"secondary"},{label:"Cargar Excel",icon:t.jsx(qe,{className:"w-5 h-5"}),onClick:()=>{var o;return(o=document.getElementById("fab-upload-input"))==null?void 0:o.click()},variant:"secondary"}]}),t.jsx("input",{id:"fab-upload-input",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:ne,disabled:s})]})}export{Un as default};
