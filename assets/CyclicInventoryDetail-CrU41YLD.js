const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CfsGIlE1.js","assets/ui-vendor-B9YtwGJ-.js","assets/react-vendor-DdjUaGoS.js","assets/utils-CUsTgaRG.js","assets/animation-CvwzMRXu.js","assets/excel-uoQkVabA.js","assets/index-DERlGo9j.css"])))=>i.map(i=>d[i]);
import{c as Te,B as U,X as bt,o as ie,P as Qe,Q as Ct,q as De,C as ve,D as Ke,h as Ye,i as et,j as tt,r as nt,R as jt,v as q,U as He,S as Nt,N as St,M as Mt,_ as kt}from"./index-CfsGIlE1.js";import{j as t}from"./ui-vendor-B9YtwGJ-.js";import{r as D,h as Et,u as Pt}from"./react-vendor-DdjUaGoS.js";import{I as fe}from"./input-BNQlWmVc.js";import{T as It,a as At,b as ke,c as Ee}from"./tabs-BjkYCD-G.js";import{r as _t,u as xe,w as Dt}from"./excel-uoQkVabA.js";import{E as Lt}from"./jspdf.es.min-Cm0kf70i.js";import{P as Tt}from"./ProductImageHover-CvH0flXy.js";import{B as ze}from"./badge-CzjD55xo.js";import{S as Bt,P as We,B as $t}from"./SwipeableItem-DjTRjrVQ.js";import{A as Ve,m as qe}from"./animation-CvwzMRXu.js";import{C as Pe}from"./circle-check-CwNOYbMh.js";import{D as Ft}from"./dollar-sign-BC71thmy.js";import{C as Rt,a as Ot,S as Qt,F as Ht}from"./FabMenu-D0WXYh8R.js";import{C as ye}from"./CounterAnimation-CLeRA1eU.js";import{S as zt}from"./switch-BNp0sC_2.js";import{L as Ie}from"./label-BY2Z0kLh.js";import{A as Wt}from"./arrow-left-DrhDRTh-.js";import{S as Vt}from"./search-DovExvO1.js";import"./utils-CUsTgaRG.js";import"./scanner-ThRrwOEs.js";import"./plus-B9-dOtMn.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Te("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Te("ScanBarcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]);var Be={};(function n(r,i,c,s){var u=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),x=typeof Path2D=="function"&&typeof DOMMatrix=="function",S=function(){if(!r.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var N=a.transferToImageBitmap();e.createPattern(N,"no-repeat")}catch{return!1}return!0}();function v(){}function k(a){var e=i.exports.Promise,N=e!==void 0?e:r.Promise;return typeof N=="function"?new N(a):(a(v,v),null)}var M=function(a,e){return{transform:function(N){if(a)return N;if(e.has(N))return e.get(N);var o=new OffscreenCanvas(N.width,N.height),d=o.getContext("2d");return d.drawImage(N,0,0),e.set(N,o),o},clear:function(){e.clear()}}}(S,new Map),L=function(){var a=Math.floor(16.666666666666668),e,N,o={},d=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var m=Math.random();return o[m]=requestAnimationFrame(function g(C){d===C||d+a-1<C?(d=C,delete o[m],f()):o[m]=requestAnimationFrame(g)}),m},N=function(f){o[f]&&cancelAnimationFrame(o[f])}):(e=function(f){return setTimeout(f,a)},N=function(f){return clearTimeout(f)}),{frame:e,cancel:N}}(),p=function(){var a,e,N={};function o(d){function f(m,g){d.postMessage({options:m||{},callback:g})}d.init=function(g){var C=g.transferControlToOffscreen();d.postMessage({canvas:C},[C])},d.fire=function(g,C,j){if(e)return f(g,null),e;var F=Math.random().toString(36).slice(2);return e=k(function($){function O(H){H.data.callback===F&&(delete N[F],d.removeEventListener("message",O),e=null,M.clear(),j(),$())}d.addEventListener("message",O),f(g,F),N[F]=O.bind(null,{data:{callback:F}})}),e},d.reset=function(){d.postMessage({reset:!0});for(var g in N)N[g](),delete N[g]}}return function(){if(a)return a;if(!c&&u){var d=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([d])))}catch(f){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("游꿁 Could not load worker",f),null}o(a)}return a}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(a,e){return e?e(a):a}function P(a){return a!=null}function l(a,e,N){return b(a&&P(a[e])?a[e]:h[e],N)}function E(a){return a<0?0:Math.floor(a)}function A(a,e){return Math.floor(Math.random()*(e-a))+a}function T(a){return parseInt(a,16)}function R(a){return a.map(_)}function _(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:T(e.substring(0,2)),g:T(e.substring(2,4)),b:T(e.substring(4,6))}}function B(a){var e=l(a,"origin",Object);return e.x=l(e,"x",Number),e.y=l(e,"y",Number),e}function Q(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function te(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function oe(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function Y(a,e,N,o,d,f,m,g,C){a.save(),a.translate(e,N),a.rotate(f),a.scale(o,d),a.arc(0,0,1,m,g,C),a.restore()}function ne(a){var e=a.angle*(Math.PI/180),N=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function le(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var N=e.tick++/e.totalTicks,o=e.x+e.random*e.tiltCos,d=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,m=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-N)+")",a.beginPath(),x&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(me(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(f-o)*.1,Math.abs(m-d)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var g=Math.PI/10*e.wobble,C=Math.abs(f-o)*.1,j=Math.abs(m-d)*.1,F=e.shape.bitmap.width*e.scalar,$=e.shape.bitmap.height*e.scalar,O=new DOMMatrix([Math.cos(g)*C,Math.sin(g)*C,-Math.sin(g)*j,Math.cos(g)*j,e.x,e.y]);O.multiplySelf(new DOMMatrix(e.shape.matrix));var H=a.createPattern(M.transform(e.shape.bitmap),"no-repeat");H.setTransform(O),a.globalAlpha=1-N,a.fillStyle=H,a.fillRect(e.x-F/2,e.y-$/2,F,$),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(f-o)*e.ovalScalar,Math.abs(m-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Y(a,e.x,e.y,Math.abs(f-o)*e.ovalScalar,Math.abs(m-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var I=Math.PI/2*3,W=4*e.scalar,Z=8*e.scalar,J=e.x,X=e.y,ee=5,V=Math.PI/ee;ee--;)J=e.x+Math.cos(I)*Z,X=e.y+Math.sin(I)*Z,a.lineTo(J,X),I+=V,J=e.x+Math.cos(I)*W,X=e.y+Math.sin(I)*W,a.lineTo(J,X),I+=V;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(d)),a.lineTo(Math.floor(f),Math.floor(m)),a.lineTo(Math.floor(o),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function re(a,e,N,o,d){var f=e.slice(),m=a.getContext("2d"),g,C,j=k(function(F){function $(){g=C=null,m.clearRect(0,0,o.width,o.height),M.clear(),d(),F()}function O(){c&&!(o.width===s.width&&o.height===s.height)&&(o.width=a.width=s.width,o.height=a.height=s.height),!o.width&&!o.height&&(N(a),o.width=a.width,o.height=a.height),m.clearRect(0,0,o.width,o.height),f=f.filter(function(H){return le(m,H)}),f.length?g=L.frame(O):$()}g=L.frame(O),C=$});return{addFettis:function(F){return f=f.concat(F),j},canvas:a,promise:j,reset:function(){g&&L.cancel(g),C&&C()}}}function se(a,e){var N=!a,o=!!l(e||{},"resize"),d=!1,f=l(e,"disableForReducedMotion",Boolean),m=u&&!!l(e||{},"useWorker"),g=m?p():null,C=N?Q:te,j=a&&g?!!a.__confetti_initialized:!1,F=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,$;function O(I,W,Z){for(var J=l(I,"particleCount",E),X=l(I,"angle",Number),ee=l(I,"spread",Number),V=l(I,"startVelocity",Number),ae=l(I,"decay",Number),he=l(I,"gravity",Number),K=l(I,"drift",Number),$e=l(I,"colors",R),ft=l(I,"ticks",Number),Fe=l(I,"shapes"),gt=l(I,"scalar"),xt=!!l(I,"flat"),Re=B(I),Oe=J,Me=[],yt=a.width*Re.x,wt=a.height*Re.y;Oe--;)Me.push(ne({x:yt,y:wt,angle:X,spread:ee,startVelocity:V,color:$e[Oe%$e.length],shape:Fe[A(0,Fe.length)],ticks:ft,decay:ae,gravity:he,drift:K,scalar:gt,flat:xt}));return $?$.addFettis(Me):($=re(a,Me,C,W,Z),$.promise)}function H(I){var W=f||l(I,"disableForReducedMotion",Boolean),Z=l(I,"zIndex",Number);if(W&&F)return k(function(V){V()});N&&$?a=$.canvas:N&&!a&&(a=oe(Z),document.body.appendChild(a)),o&&!j&&C(a);var J={width:a.width,height:a.height};g&&!j&&g.init(a),j=!0,g&&(a.__confetti_initialized=!0);function X(){if(g){var V={getBoundingClientRect:function(){if(!N)return a.getBoundingClientRect()}};C(V),g.postMessage({resize:{width:V.width,height:V.height}});return}J.width=J.height=null}function ee(){$=null,o&&(d=!1,r.removeEventListener("resize",X)),N&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,j=!1)}return o&&!d&&(d=!0,r.addEventListener("resize",X,!1)),g?g.fire(I,J,ee):O(I,J,ee)}return H.reset=function(){g&&g.reset(),$&&$.reset()},H}var ce;function ue(){return ce||(ce=se(null,{useWorker:!0,resize:!0})),ce}function me(a,e,N,o,d,f,m){var g=new Path2D(a),C=new Path2D;C.addPath(g,new DOMMatrix(e));var j=new Path2D;return j.addPath(C,new DOMMatrix([Math.cos(m)*d,Math.sin(m)*d,-Math.sin(m)*f,Math.cos(m)*f,N,o])),j}function pe(a){if(!x)throw new Error("path confetti are not supported in this browser");var e,N;typeof a=="string"?e=a:(e=a.path,N=a.matrix);var o=new Path2D(e),d=document.createElement("canvas"),f=d.getContext("2d");if(!N){for(var m=1e3,g=m,C=m,j=0,F=0,$,O,H=0;H<m;H+=2)for(var I=0;I<m;I+=2)f.isPointInPath(o,H,I,"nonzero")&&(g=Math.min(g,H),C=Math.min(C,I),j=Math.max(j,H),F=Math.max(F,I));$=j-g,O=F-C;var W=10,Z=Math.min(W/$,W/O);N=[Z,0,0,Z,-Math.round($/2+g)*Z,-Math.round(O/2+C)*Z]}return{type:"path",path:e,matrix:N}}function Se(a){var e,N=1,o="#000000",d='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,N="scalar"in a?a.scalar:N,d="fontFamily"in a?a.fontFamily:d,o="color"in a?a.color:o);var f=10*N,m=""+f+"px "+d,g=new OffscreenCanvas(f,f),C=g.getContext("2d");C.font=m;var j=C.measureText(e),F=Math.ceil(j.actualBoundingBoxRight+j.actualBoundingBoxLeft),$=Math.ceil(j.actualBoundingBoxAscent+j.actualBoundingBoxDescent),O=2,H=j.actualBoundingBoxLeft+O,I=j.actualBoundingBoxAscent+O;F+=O+O,$+=O+O,g=new OffscreenCanvas(F,$),C=g.getContext("2d"),C.font=m,C.fillStyle=o,C.fillText(e,H,I);var W=1/N;return{type:"bitmap",bitmap:g.transferToImageBitmap(),matrix:[W,0,0,W,-F*W/2,-$*W/2]}}i.exports=function(){return ue().apply(this,arguments)},i.exports.reset=function(){ue().reset()},i.exports.create=se,i.exports.shapeFromPath=pe,i.exports.shapeFromText=Se})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Be,!1);const Jt=Be.exports;Be.exports.create;function Xt({onResult:n,onClose:r,initialValue:i=""}){const[c,s]=D.useState(i),[u,x]=D.useState(""),S=h=>{s(b=>b==="0"?h:b+h)},v=h=>{x(c+" "+h+" "),s("")},k=()=>{s(""),x("")},M=()=>{try{const h=u+c;if(!/^[0-9+\-*/. ]+$/.test(h)){s("Error");return}const b=new Function("return "+h)();s(String(b)),x(""),n(Number(b))}catch{s("Error")}},L=()=>{s(h=>h.slice(0,-1))},p=[{label:"C",onClick:k,variant:"destructive",className:"col-span-1"},{label:"/",onClick:()=>v("/"),variant:"secondary"},{label:"*",onClick:()=>v("*"),variant:"secondary"},{label:t.jsx(Ut,{className:"w-4 h-4"}),onClick:L,variant:"secondary"},{label:"7",onClick:()=>S("7"),variant:"outline"},{label:"8",onClick:()=>S("8"),variant:"outline"},{label:"9",onClick:()=>S("9"),variant:"outline"},{label:"-",onClick:()=>v("-"),variant:"secondary"},{label:"4",onClick:()=>S("4"),variant:"outline"},{label:"5",onClick:()=>S("5"),variant:"outline"},{label:"6",onClick:()=>S("6"),variant:"outline"},{label:"+",onClick:()=>v("+"),variant:"secondary"},{label:"1",onClick:()=>S("1"),variant:"outline"},{label:"2",onClick:()=>S("2"),variant:"outline"},{label:"3",onClick:()=>S("3"),variant:"outline"},{label:"=",onClick:M,variant:"default",className:"row-span-2 h-full"},{label:"0",onClick:()=>S("0"),variant:"outline",className:"col-span-2"},{label:".",onClick:()=>S("."),variant:"outline"}];return t.jsxs("div",{className:"p-4 bg-card rounded-lg border shadow-lg max-w-xs mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground font-mono h-4 block",children:u}),t.jsx(U,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,children:t.jsx(bt,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"bg-muted p-3 rounded-md mb-4 text-right font-mono text-2xl font-bold tracking-wider overflow-hidden",children:c||"0"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:p.map((h,b)=>t.jsx(U,{variant:h.variant,onClick:h.onClick,className:ie("h-12 text-lg font-medium",h.className),children:h.label},b))})]})}const Ae=D.memo(function({items:r,onUpdateQuantity:i,onCheck:c,onRevert:s,readOnly:u=!1}){const[x,S]=D.useState(null),[v,k]=D.useState(""),[M,L]=D.useState(!1),p=l=>{S(l.id),k(l.countedQuantity.toString()),L(!1)},h=()=>{if(x){const l=parseInt(v,10);!isNaN(l)&&l>=0&&(i(x,l),S(null))}},b=()=>{S(null),k(""),L(!1)},P=l=>{k(Math.floor(l).toString())};return r.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Qe,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),t.jsx("p",{children:"No hay productos en esta lista"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3",children:t.jsx(Ve,{mode:"popLayout",children:r.map(l=>{const E=l.countedQuantity-l.systemQuantity,A=E!==0,T=l.status==="controlled",R=E===0;return t.jsx(qe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:t.jsx(Bt,{disabled:u,...T?{leftAction:{label:"Editar",icon:t.jsx(We,{className:"w-5 h-5"}),color:"text-blue-500",bgColor:"rgba(59, 130, 246, 0.2)",onAction:()=>p(l)},rightAction:s?{label:"Revertir",icon:t.jsx(De,{className:"w-5 h-5"}),color:"text-red-500",bgColor:"rgba(239, 68, 68, 0.2)",onAction:()=>s(l.id)}:void 0}:{leftAction:{label:"Confirmar",icon:t.jsx(Pe,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"rgba(22, 163, 74, 0.2)",onAction:()=>c(l.id)},rightAction:{label:"Diferencia",icon:t.jsx(Ct,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"rgba(249, 115, 22, 0.2)",onAction:()=>p(l)}},children:t.jsx(ve,{className:ie("p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border"),onClick:()=>p(l),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:ie("p-2 rounded-lg flex-shrink-0 transition-colors",T?"bg-success/10":"bg-primary/10"),children:T?t.jsx(Pe,{className:"w-5 h-5 text-success"}):t.jsx(Qe,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(Tt,{ean:l.ean,name:l.name,children:t.jsx("h4",{className:"font-medium text-foreground truncate",title:l.name,children:l.name})}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-mono bg-muted px-1.5 py-0.5 rounded",children:l.ean}),l.cost>0&&t.jsxs("span",{className:"flex items-center text-muted-foreground",children:[t.jsx(Ft,{className:"w-3 h-3 mr-0.5"}),l.cost.toFixed(2)]}),(l.status==="controlled"||l.status==="adjusted")&&l.category&&t.jsx(ze,{variant:"outline",className:"text-[10px] h-5 px-1.5 ml-auto",children:l.category})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Sistema"}),t.jsx("span",{className:"text-sm font-medium",children:l.systemQuantity})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"F칤sico"}),t.jsx("span",{className:ie("text-sm font-bold",A?"text-warning":"text-success"),children:l.countedQuantity})]}),A&&t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Diferencia"}),t.jsx(ze,{variant:E>0?"default":"destructive",className:"h-5 px-1.5 text-[10px]",children:E>0?`+${E}`:E})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(U,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:_=>{_.stopPropagation(),p(l)},children:t.jsx(We,{className:"w-4 h-4"})}),l.status==="pending"&&t.jsx(U,{size:"icon",variant:R?"default":"secondary",className:ie("h-10 w-10 rounded-full shadow-sm flex-shrink-0 transition-all ml-1",R?"bg-success hover:bg-success/90 text-white":"hover:bg-warning/20 text-warning"),onClick:_=>{_.stopPropagation(),c(l.id)},children:t.jsx(Pe,{className:"w-5 h-5"})}),l.status==="controlled"&&s&&t.jsx(U,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:_=>{_.stopPropagation(),s(l.id)},title:"Volver a pendientes",children:t.jsx(De,{className:"w-4 h-4"})})]})]})})})},l.id)})})}),t.jsx(Ke,{open:x!==null,onOpenChange:l=>!l&&b(),children:t.jsxs(Ye,{className:"sm:max-w-md",children:[t.jsx(et,{children:t.jsx(tt,{children:"Editar Cantidad"})}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex gap-2 items-end",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cantidad F칤sica"}),t.jsx(fe,{type:"number",min:"0",value:v,onChange:l=>k(l.target.value),onKeyDown:l=>{l.key==="Enter"&&h()},placeholder:"Ingresa la cantidad",autoFocus:!0})]}),t.jsx(U,{variant:M?"secondary":"outline",size:"icon",onClick:()=>L(!M),title:"Calculadora",children:t.jsx(Rt,{className:"w-4 h-4"})})]}),t.jsx(Ve,{children:M&&t.jsx(qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsx(Xt,{onResult:P,onClose:()=>L(!1)})})})]}),t.jsxs(nt,{children:[t.jsx(U,{variant:"outline",onClick:b,children:"Cancelar"}),t.jsx(U,{onClick:h,children:"Guardar"})]})]})})]})}),Gt=jt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),rt=D.forwardRef(({className:n,variant:r,...i},c)=>t.jsx("div",{ref:c,role:"alert",className:ie(Gt({variant:r}),n),...i}));rt.displayName="Alert";const at=D.forwardRef(({className:n,...r},i)=>t.jsx("h5",{ref:i,className:ie("mb-1 font-medium leading-none tracking-tight",n),...r}));at.displayName="AlertTitle";const ot=D.forwardRef(({className:n,...r},i)=>t.jsx("div",{ref:i,className:ie("text-sm [&_p]:leading-relaxed",n),...r}));ot.displayName="AlertDescription";let Le={},st;function _e(n={}){Le={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function y(n){return n?Le[n]:Le}function Kt(n){st=n}function G(){return st}let je={};function we(n,r){je[n]=r}function de(n){var r;(r=je[n])==null||r.call(je)}function Yt(){je={}}function be(n,r,i,c){return(n/=c/2)<1?i/2*n*n+r:-i/2*(--n*(n-2)-1)+r}function it(n){const r='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(i=>{const c=i.matches(r),s=Array.from(i.querySelectorAll(r));return[...c?[i]:[],...s]}).filter(i=>getComputedStyle(i).pointerEvents!=="none"&&nn(i))}function lt(n){if(!n||tn(n))return;const r=y("smoothScroll"),i=n.offsetHeight>window.innerHeight;n.scrollIntoView({behavior:!r||en(n)?"auto":"smooth",inline:"center",block:i?"start":"center"})}function en(n){if(!n||!n.parentElement)return;const r=n.parentElement;return r.scrollHeight>r.clientHeight}function tn(n){const r=n.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}function nn(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}let Ne={};function z(n,r){Ne[n]=r}function w(n){return n?Ne[n]:Ne}function Ue(){Ne={}}function rn(n,r,i,c){let s=w("__activeStagePosition");const u=s||i.getBoundingClientRect(),x=c.getBoundingClientRect(),S=be(n,u.x,x.x-u.x,r),v=be(n,u.y,x.y-u.y,r),k=be(n,u.width,x.width-u.width,r),M=be(n,u.height,x.height-u.height,r);s={x:S,y:v,width:k,height:M},dt(s),z("__activeStagePosition",s)}function ct(n){if(!n)return;const r=n.getBoundingClientRect(),i={x:r.x,y:r.y,width:r.width,height:r.height};z("__activeStagePosition",i),dt(i)}function an(){const n=w("__activeStagePosition"),r=w("__overlaySvg");if(!n)return;if(!r){console.warn("No stage svg found.");return}const i=window.innerWidth,c=window.innerHeight;r.setAttribute("viewBox",`0 0 ${i} ${c}`)}function on(n){const r=sn(n);document.body.appendChild(r),ht(r,i=>{i.target.tagName==="path"&&de("overlayClick")}),z("__overlaySvg",r)}function dt(n){const r=w("__overlaySvg");if(!r){on(n);return}const i=r.firstElementChild;if((i==null?void 0:i.tagName)!=="path")throw new Error("no path element found in stage svg");i.setAttribute("d",ut(n))}function sn(n){const r=window.innerWidth,i=window.innerHeight,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add("driver-overlay","driver-overlay-animated"),c.setAttribute("viewBox",`0 0 ${r} ${i}`),c.setAttribute("xmlSpace","preserve"),c.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),c.setAttribute("version","1.1"),c.setAttribute("preserveAspectRatio","xMinYMin slice"),c.style.fillRule="evenodd",c.style.clipRule="evenodd",c.style.strokeLinejoin="round",c.style.strokeMiterlimit="2",c.style.zIndex="10000",c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%";const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",ut(n)),s.style.fill=y("overlayColor")||"rgb(0,0,0)",s.style.opacity=`${y("overlayOpacity")}`,s.style.pointerEvents="auto",s.style.cursor="auto",c.appendChild(s),c}function ut(n){const r=window.innerWidth,i=window.innerHeight,c=y("stagePadding")||0,s=y("stageRadius")||0,u=n.width+c*2,x=n.height+c*2,S=Math.min(s,u/2,x/2),v=Math.floor(Math.max(S,0)),k=n.x-c+v,M=n.y-c,L=u-v*2,p=x-v*2;return`M${r},0L0,0L0,${i}L${r},${i}L${r},0Z
    M${k},${M} h${L} a${v},${v} 0 0 1 ${v},${v} v${p} a${v},${v} 0 0 1 -${v},${v} h-${L} a${v},${v} 0 0 1 -${v},-${v} v-${p} a${v},${v} 0 0 1 ${v},-${v} z`}function ln(){const n=w("__overlaySvg");n&&n.remove()}function cn(){const n=document.getElementById("driver-dummy-element");if(n)return n;let r=document.createElement("div");return r.id="driver-dummy-element",r.style.width="0",r.style.height="0",r.style.pointerEvents="none",r.style.opacity="0",r.style.position="fixed",r.style.top="50%",r.style.left="50%",document.body.appendChild(r),r}function Ze(n){const{element:r}=n;let i=typeof r=="function"?r():typeof r=="string"?document.querySelector(r):r;i||(i=cn()),un(i,n)}function dn(){const n=w("__activeElement"),r=w("__activeStep");n&&(ct(n),an(),mt(n,r))}function un(n,r){var i;const c=Date.now(),s=w("__activeStep"),u=w("__activeElement")||n,x=!u||u===n,S=n.id==="driver-dummy-element",v=u.id==="driver-dummy-element",k=y("animate"),M=r.onHighlightStarted||y("onHighlightStarted"),L=(r==null?void 0:r.onHighlighted)||y("onHighlighted"),p=(s==null?void 0:s.onDeselected)||y("onDeselected"),h=y(),b=w();!x&&p&&p(v?void 0:u,s,{config:h,state:b,driver:G()}),M&&M(S?void 0:n,r,{config:h,state:b,driver:G()});const P=!x&&k;let l=!1;fn(),z("previousStep",s),z("previousElement",u),z("activeStep",r),z("activeElement",n);const E=()=>{if(w("__transitionCallback")!==E)return;const A=Date.now()-c,T=400-A<=400/2;r.popover&&T&&!l&&P&&(Je(n,r),l=!0),y("animate")&&A<400?rn(A,400,u,n):(ct(n),L&&L(S?void 0:n,r,{config:y(),state:w(),driver:G()}),z("__transitionCallback",void 0),z("__previousStep",s),z("__previousElement",u),z("__activeStep",r),z("__activeElement",n)),window.requestAnimationFrame(E)};z("__transitionCallback",E),window.requestAnimationFrame(E),lt(n),!P&&r.popover&&Je(n,r),u.classList.remove("driver-active-element","driver-no-interaction"),u.removeAttribute("aria-haspopup"),u.removeAttribute("aria-expanded"),u.removeAttribute("aria-controls"),((i=r.disableActiveInteraction)!=null?i:y("disableActiveInteraction"))&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function pn(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(r=>{r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls")})}function ge(){const n=w("__resizeTimeout");n&&window.cancelAnimationFrame(n),z("__resizeTimeout",window.requestAnimationFrame(dn))}function hn(n){var r;if(!w("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;const i=w("__activeElement"),c=(r=w("popover"))==null?void 0:r.wrapper,s=it([...c?[c]:[],...i?[i]:[]]),u=s[0],x=s[s.length-1];if(n.preventDefault(),n.shiftKey){const S=s[s.indexOf(document.activeElement)-1]||x;S==null||S.focus()}else{const S=s[s.indexOf(document.activeElement)+1]||u;S==null||S.focus()}}function pt(n){var r;((r=y("allowKeyboardControl"))==null||r)&&(n.key==="Escape"?de("escapePress"):n.key==="ArrowRight"?de("arrowRightPress"):n.key==="ArrowLeft"&&de("arrowLeftPress"))}function ht(n,r,i){const c=(s,u)=>{const x=s.target;n.contains(x)&&((!i||i(x))&&(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation()),u==null||u(s))};document.addEventListener("pointerdown",c,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("pointerup",c,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("click",s=>{c(s,r)},!0)}function vn(){window.addEventListener("keyup",pt,!1),window.addEventListener("keydown",hn,!1),window.addEventListener("resize",ge),window.addEventListener("scroll",ge)}function mn(){window.removeEventListener("keyup",pt),window.removeEventListener("resize",ge),window.removeEventListener("scroll",ge)}function fn(){const n=w("popover");n&&(n.wrapper.style.display="none")}function Je(n,r){var i,c;let s=w("popover");s&&document.body.removeChild(s.wrapper),s=xn(),document.body.appendChild(s.wrapper);const{title:u,description:x,showButtons:S,disableButtons:v,showProgress:k,nextBtnText:M=y("nextBtnText")||"Next &rarr;",prevBtnText:L=y("prevBtnText")||"&larr; Previous",progressText:p=y("progressText")||"{current} of {total}"}=r.popover||{};s.nextButton.innerHTML=M,s.previousButton.innerHTML=L,s.progress.innerHTML=p,u?(s.title.innerHTML=u,s.title.style.display="block"):s.title.style.display="none",x?(s.description.innerHTML=x,s.description.style.display="block"):s.description.style.display="none";const h=S||y("showButtons"),b=k||y("showProgress")||!1,P=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||b;s.closeButton.style.display=h.includes("close")?"block":"none",P?(s.footer.style.display="flex",s.progress.style.display=b?"block":"none",s.nextButton.style.display=h.includes("next")?"block":"none",s.previousButton.style.display=h.includes("previous")?"block":"none"):s.footer.style.display="none";const l=v||y("disableButtons")||[];l!=null&&l.includes("next")&&(s.nextButton.disabled=!0,s.nextButton.classList.add("driver-popover-btn-disabled")),l!=null&&l.includes("previous")&&(s.previousButton.disabled=!0,s.previousButton.classList.add("driver-popover-btn-disabled")),l!=null&&l.includes("close")&&(s.closeButton.disabled=!0,s.closeButton.classList.add("driver-popover-btn-disabled"));const E=s.wrapper;E.style.display="block",E.style.left="",E.style.top="",E.style.bottom="",E.style.right="",E.id="driver-popover-content",E.setAttribute("role","dialog"),E.setAttribute("aria-labelledby","driver-popover-title"),E.setAttribute("aria-describedby","driver-popover-description");const A=s.arrow;A.className="driver-popover-arrow";const T=((i=r.popover)==null?void 0:i.popoverClass)||y("popoverClass")||"";E.className=`driver-popover ${T}`.trim(),ht(s.wrapper,Q=>{var te,oe,Y;const ne=Q.target,le=((te=r.popover)==null?void 0:te.onNextClick)||y("onNextClick"),re=((oe=r.popover)==null?void 0:oe.onPrevClick)||y("onPrevClick"),se=((Y=r.popover)==null?void 0:Y.onCloseClick)||y("onCloseClick");if(ne.closest(".driver-popover-next-btn"))return le?le(n,r,{config:y(),state:w(),driver:G()}):de("nextClick");if(ne.closest(".driver-popover-prev-btn"))return re?re(n,r,{config:y(),state:w(),driver:G()}):de("prevClick");if(ne.closest(".driver-popover-close-btn"))return se?se(n,r,{config:y(),state:w(),driver:G()}):de("closeClick")},Q=>!(s!=null&&s.description.contains(Q))&&!(s!=null&&s.title.contains(Q))&&typeof Q.className=="string"&&Q.className.includes("driver-popover")),z("popover",s);const R=((c=r.popover)==null?void 0:c.onPopoverRender)||y("onPopoverRender");R&&R(s,{config:y(),state:w(),driver:G()}),mt(n,r),lt(E);const _=n.classList.contains("driver-dummy-element"),B=it([E,..._?[]:[n]]);B.length>0&&B[0].focus()}function vt(){const n=w("popover");if(!(n!=null&&n.wrapper))return;const r=n.wrapper.getBoundingClientRect(),i=y("stagePadding")||0,c=y("popoverOffset")||0;return{width:r.width+i+c,height:r.height+i+c,realWidth:r.width,realHeight:r.height}}function Xe(n,r){const{elementDimensions:i,popoverDimensions:c,popoverPadding:s,popoverArrowDimensions:u}=r;return n==="start"?Math.max(Math.min(i.top-s,window.innerHeight-c.realHeight-u.width),u.width):n==="end"?Math.max(Math.min(i.top-(c==null?void 0:c.realHeight)+i.height+s,window.innerHeight-(c==null?void 0:c.realHeight)-u.width),u.width):n==="center"?Math.max(Math.min(i.top+i.height/2-(c==null?void 0:c.realHeight)/2,window.innerHeight-(c==null?void 0:c.realHeight)-u.width),u.width):0}function Ge(n,r){const{elementDimensions:i,popoverDimensions:c,popoverPadding:s,popoverArrowDimensions:u}=r;return n==="start"?Math.max(Math.min(i.left-s,window.innerWidth-c.realWidth-u.width),u.width):n==="end"?Math.max(Math.min(i.left-(c==null?void 0:c.realWidth)+i.width+s,window.innerWidth-(c==null?void 0:c.realWidth)-u.width),u.width):n==="center"?Math.max(Math.min(i.left+i.width/2-(c==null?void 0:c.realWidth)/2,window.innerWidth-(c==null?void 0:c.realWidth)-u.width),u.width):0}function mt(n,r){const i=w("popover");if(!i)return;const{align:c="start",side:s="left"}=(r==null?void 0:r.popover)||{},u=c,x=n.id==="driver-dummy-element"?"over":s,S=y("stagePadding")||0,v=vt(),k=i.arrow.getBoundingClientRect(),M=n.getBoundingClientRect(),L=M.top-v.height;let p=L>=0;const h=window.innerHeight-(M.bottom+v.height);let b=h>=0;const P=M.left-v.width;let l=P>=0;const E=window.innerWidth-(M.right+v.width);let A=E>=0;const T=!p&&!b&&!l&&!A;let R=x;if(x==="top"&&p?A=l=b=!1:x==="bottom"&&b?A=l=p=!1:x==="left"&&l?A=p=b=!1:x==="right"&&A&&(l=p=b=!1),x==="over"){const _=window.innerWidth/2-v.realWidth/2,B=window.innerHeight/2-v.realHeight/2;i.wrapper.style.left=`${_}px`,i.wrapper.style.right="auto",i.wrapper.style.top=`${B}px`,i.wrapper.style.bottom="auto"}else if(T){const _=window.innerWidth/2-(v==null?void 0:v.realWidth)/2,B=10;i.wrapper.style.left=`${_}px`,i.wrapper.style.right="auto",i.wrapper.style.bottom=`${B}px`,i.wrapper.style.top="auto"}else if(l){const _=Math.min(P,window.innerWidth-(v==null?void 0:v.realWidth)-k.width),B=Xe(u,{elementDimensions:M,popoverDimensions:v,popoverPadding:S,popoverArrowDimensions:k});i.wrapper.style.left=`${_}px`,i.wrapper.style.top=`${B}px`,i.wrapper.style.bottom="auto",i.wrapper.style.right="auto",R="left"}else if(A){const _=Math.min(E,window.innerWidth-(v==null?void 0:v.realWidth)-k.width),B=Xe(u,{elementDimensions:M,popoverDimensions:v,popoverPadding:S,popoverArrowDimensions:k});i.wrapper.style.right=`${_}px`,i.wrapper.style.top=`${B}px`,i.wrapper.style.bottom="auto",i.wrapper.style.left="auto",R="right"}else if(p){const _=Math.min(L,window.innerHeight-v.realHeight-k.width);let B=Ge(u,{elementDimensions:M,popoverDimensions:v,popoverPadding:S,popoverArrowDimensions:k});i.wrapper.style.top=`${_}px`,i.wrapper.style.left=`${B}px`,i.wrapper.style.bottom="auto",i.wrapper.style.right="auto",R="top"}else if(b){const _=Math.min(h,window.innerHeight-(v==null?void 0:v.realHeight)-k.width);let B=Ge(u,{elementDimensions:M,popoverDimensions:v,popoverPadding:S,popoverArrowDimensions:k});i.wrapper.style.left=`${B}px`,i.wrapper.style.bottom=`${_}px`,i.wrapper.style.top="auto",i.wrapper.style.right="auto",R="bottom"}T?i.arrow.classList.add("driver-popover-arrow-none"):gn(u,R,n)}function gn(n,r,i){const c=w("popover");if(!c)return;const s=i.getBoundingClientRect(),u=vt(),x=c.arrow,S=u.width,v=window.innerWidth,k=s.width,M=s.left,L=u.height,p=window.innerHeight,h=s.top,b=s.height;x.className="driver-popover-arrow";let P=r,l=n;if(r==="top"?(M+k<=0?(P="right",l="end"):M+k-S<=0&&(P="top",l="start"),M>=v?(P="left",l="end"):M+S>=v&&(P="top",l="end")):r==="bottom"?(M+k<=0?(P="right",l="start"):M+k-S<=0&&(P="bottom",l="start"),M>=v?(P="left",l="start"):M+S>=v&&(P="bottom",l="end")):r==="left"?(h+b<=0?(P="bottom",l="end"):h+b-L<=0&&(P="left",l="start"),h>=p?(P="top",l="end"):h+L>=p&&(P="left",l="end")):r==="right"&&(h+b<=0?(P="bottom",l="start"):h+b-L<=0&&(P="right",l="start"),h>=p?(P="top",l="start"):h+L>=p&&(P="right",l="end")),!P)x.classList.add("driver-popover-arrow-none");else{x.classList.add(`driver-popover-arrow-side-${P}`),x.classList.add(`driver-popover-arrow-align-${l}`);const E=i.getBoundingClientRect(),A=x.getBoundingClientRect(),T=y("stagePadding")||0,R=E.left-T<window.innerWidth&&E.right+T>0&&E.top-T<window.innerHeight&&E.bottom+T>0;r==="bottom"&&R&&(A.x>E.x&&A.x+A.width<E.x+E.width?c.wrapper.style.transform="translateY(0)":(x.classList.remove(`driver-popover-arrow-align-${l}`),x.classList.add("driver-popover-arrow-none"),c.wrapper.style.transform=`translateY(-${T/2}px)`))}}function xn(){const n=document.createElement("div");n.classList.add("driver-popover");const r=document.createElement("div");r.classList.add("driver-popover-arrow");const i=document.createElement("header");i.id="driver-popover-title",i.classList.add("driver-popover-title"),i.style.display="none",i.innerText="Popover Title";const c=document.createElement("div");c.id="driver-popover-description",c.classList.add("driver-popover-description"),c.style.display="none",c.innerText="Popover description is here";const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-close-btn"),s.setAttribute("aria-label","Close"),s.innerHTML="&times;";const u=document.createElement("footer");u.classList.add("driver-popover-footer");const x=document.createElement("span");x.classList.add("driver-popover-progress-text"),x.innerText="";const S=document.createElement("span");S.classList.add("driver-popover-navigation-btns");const v=document.createElement("button");v.type="button",v.classList.add("driver-popover-prev-btn"),v.innerHTML="&larr; Previous";const k=document.createElement("button");return k.type="button",k.classList.add("driver-popover-next-btn"),k.innerHTML="Next &rarr;",S.appendChild(v),S.appendChild(k),u.appendChild(x),u.appendChild(S),n.appendChild(s),n.appendChild(r),n.appendChild(i),n.appendChild(c),n.appendChild(u),{wrapper:n,arrow:r,title:i,description:c,footer:u,previousButton:v,nextButton:k,closeButton:s,footerButtons:S,progress:x}}function yn(){var n;const r=w("popover");r&&((n=r.wrapper.parentElement)==null||n.removeChild(r.wrapper))}function wn(n={}){_e(n);function r(){y("allowClose")&&M()}function i(){const p=y("overlayClickBehavior");if(y("allowClose")&&p==="close"){M();return}if(typeof p=="function"){const h=w("__activeStep"),b=w("__activeElement");p(b,h,{config:y(),state:w(),driver:G()});return}p==="nextStep"&&c()}function c(){const p=w("activeIndex"),h=y("steps")||[];if(typeof p>"u")return;const b=p+1;h[b]?k(b):M()}function s(){const p=w("activeIndex"),h=y("steps")||[];if(typeof p>"u")return;const b=p-1;h[b]?k(b):M()}function u(p){(y("steps")||[])[p]?k(p):M()}function x(){var p;if(w("__transitionCallback"))return;const h=w("activeIndex"),b=w("__activeStep"),P=w("__activeElement");if(typeof h>"u"||typeof b>"u"||typeof w("activeIndex")>"u")return;const l=((p=b.popover)==null?void 0:p.onPrevClick)||y("onPrevClick");if(l)return l(P,b,{config:y(),state:w(),driver:G()});s()}function S(){var p;if(w("__transitionCallback"))return;const h=w("activeIndex"),b=w("__activeStep"),P=w("__activeElement");if(typeof h>"u"||typeof b>"u")return;const l=((p=b.popover)==null?void 0:p.onNextClick)||y("onNextClick");if(l)return l(P,b,{config:y(),state:w(),driver:G()});c()}function v(){w("isInitialized")||(z("isInitialized",!0),document.body.classList.add("driver-active",y("animate")?"driver-fade":"driver-simple"),vn(),we("overlayClick",i),we("escapePress",r),we("arrowLeftPress",x),we("arrowRightPress",S))}function k(p=0){var h,b,P,l,E,A,T,R;const _=y("steps");if(!_){console.error("No steps to drive through"),M();return}if(!_[p]){M();return}z("__activeOnDestroyed",document.activeElement),z("activeIndex",p);const B=_[p],Q=_[p+1],te=_[p-1],oe=((h=B.popover)==null?void 0:h.doneBtnText)||y("doneBtnText")||"Done",Y=y("allowClose"),ne=typeof((b=B.popover)==null?void 0:b.showProgress)<"u"?(P=B.popover)==null?void 0:P.showProgress:y("showProgress"),le=(((l=B.popover)==null?void 0:l.progressText)||y("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${p+1}`).replace("{{total}}",`${_.length}`),re=((E=B.popover)==null?void 0:E.showButtons)||y("showButtons"),se=["next","previous",...Y?["close"]:[]].filter(pe=>!(re!=null&&re.length)||re.includes(pe)),ce=((A=B.popover)==null?void 0:A.onNextClick)||y("onNextClick"),ue=((T=B.popover)==null?void 0:T.onPrevClick)||y("onPrevClick"),me=((R=B.popover)==null?void 0:R.onCloseClick)||y("onCloseClick");Ze({...B,popover:{showButtons:se,nextBtnText:Q?void 0:oe,disableButtons:[...te?[]:["previous"]],showProgress:ne,progressText:le,onNextClick:ce||(()=>{Q?k(p+1):M()}),onPrevClick:ue||(()=>{k(p-1)}),onCloseClick:me||(()=>{M()}),...(B==null?void 0:B.popover)||{}}})}function M(p=!0){const h=w("__activeElement"),b=w("__activeStep"),P=w("__activeOnDestroyed"),l=y("onDestroyStarted");if(p&&l){const T=!h||(h==null?void 0:h.id)==="driver-dummy-element";l(T?void 0:h,b,{config:y(),state:w(),driver:G()});return}const E=(b==null?void 0:b.onDeselected)||y("onDeselected"),A=y("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),mn(),yn(),pn(),ln(),Yt(),Ue(),h&&b){const T=h.id==="driver-dummy-element";E&&E(T?void 0:h,b,{config:y(),state:w(),driver:G()}),A&&A(T?void 0:h,b,{config:y(),state:w(),driver:G()})}P&&P.focus()}const L={isActive:()=>w("isInitialized")||!1,refresh:ge,drive:(p=0)=>{v(),k(p)},setConfig:_e,setSteps:p=>{Ue(),_e({...y(),steps:p})},getConfig:y,getState:w,getActiveIndex:()=>w("activeIndex"),isFirstStep:()=>w("activeIndex")===0,isLastStep:()=>{const p=y("steps")||[],h=w("activeIndex");return h!==void 0&&h===p.length-1},getActiveStep:()=>w("activeStep"),getActiveElement:()=>w("activeElement"),getPreviousElement:()=>w("previousElement"),getPreviousStep:()=>w("previousStep"),moveNext:c,movePrevious:s,moveTo:u,hasNextStep:()=>{const p=y("steps")||[],h=w("activeIndex");return h!==void 0&&!!p[h+1]},hasPreviousStep:()=>{const p=y("steps")||[],h=w("activeIndex");return h!==void 0&&!!p[h-1]},highlight:p=>{v(),Ze({...p,popover:p.popover?{showButtons:[],showProgress:!1,progressText:"",...p.popover}:void 0})},destroy:()=>{M(!1)}};return Kt(L),L}function bn(){const n=()=>{wn({showProgress:!0,steps:[{element:"#diff-mode",popover:{title:"Solo Diferencias",description:"Activa este interruptor para ver solo los productos que tienen diferencias entre el stock f칤sico y el del sistema.",side:"bottom",align:"start"}},{element:'[role="tablist"]',popover:{title:"Pesta침as de Estado",description:'Navega entre "Pendientes" y "Controlados" para organizar tu trabajo.',side:"bottom",align:"start"}},{element:".bg-card.relative",popover:{title:"Acciones R치pidas",description:"Desliza a la derecha para Confirmar/Editar o a la izquierda para reportar Diferencia/Revertir.",side:"top",align:"start"}},{element:"button:has(.lucide-save)",popover:{title:"Finalizar Inventario",description:"Cuando termines, guarda el estado del inventario aqu칤.",side:"left",align:"start"}}]}).drive()};return D.useEffect(()=>{localStorage.getItem("has_seen_inventory_tour")||setTimeout(()=>{n(),localStorage.setItem("has_seen_inventory_tour","true")},1e3)},[]),t.jsx(U,{variant:"ghost",size:"icon",onClick:n,title:"Ver Tutorial",children:t.jsx(qt,{className:"w-5 h-5"})})}const Ce=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function Wn(){const{id:n}=Et(),r=Pt(),[i,c]=D.useState(!1),[s,u]=D.useState([]),[x,S]=D.useState(""),[v,k]=D.useState(""),[M,L]=D.useState(!1),[p,h]=D.useState(Ce[0]),[b,P]=D.useState(!1),[l,E]=D.useState(""),[A,T]=D.useState("");D.useEffect(()=>{n&&S(decodeURIComponent(n))},[n]),D.useEffect(()=>{if(x){const o=localStorage.getItem(`cyclic_inventory_${x}`);if(o)try{const d=JSON.parse(o);if(Array.isArray(d)){const f=d.filter(m=>m&&typeof m=="object"&&typeof m.id=="string"&&typeof m.name=="string"&&typeof m.systemQuantity=="number"&&typeof m.countedQuantity=="number");f.length!==d.length&&console.warn(`Filtered out ${d.length-f.length} invalid items.`),u(f)}else console.warn("Invalid inventory data format in localStorage, resetting."),u([])}catch(d){console.error("Failed to load saved inventory",d),u([])}}},[x]),D.useEffect(()=>{x&&s.length>0&&localStorage.setItem(`cyclic_inventory_${x}`,JSON.stringify(s))},[s,x]);const R=D.useMemo(()=>s.filter(o=>{if(v){const d=v.toLowerCase();if(!o.name.toLowerCase().includes(d)&&!o.ean.includes(d))return!1}return M?o.countedQuantity!==o.systemQuantity:!0}),[s,v,M]),_=D.useMemo(()=>R.filter(o=>o.status==="pending"&&(o.category===p||!o.category&&p==="Varios")),[R,p]),B=o=>[...o].sort((d,f)=>{const m=d.countedQuantity-d.systemQuantity,g=f.countedQuantity-f.systemQuantity,C=m!==0,j=g!==0;return C&&!j?-1:!C&&j?1:m-g}),Q=D.useMemo(()=>B(R.filter(o=>o.status==="controlled")),[R]),te=D.useMemo(()=>B(R.filter(o=>o.status==="adjusted")),[R]),oe=async o=>{var m;const d=(m=o.target.files)==null?void 0:m[0];if(!d)return;c(!0);const f=new FileReader;f.onload=g=>{var C,j,F;try{const $=(C=g.target)==null?void 0:C.result,O=_t($,{type:"binary"}),H=O.SheetNames[0],I=O.Sheets[H],W=xe.sheet_to_json(I,{header:1}),Z=[...s],J=new Set(s.map(V=>V.ean));let X=0,ee=0;for(let V=1;V<W.length;V++){const ae=W[V];if(!ae||!ae[3])continue;const he=(j=ae[2])==null?void 0:j.toString().trim();if(!he)continue;if(J.has(he)){ee++;continue}let K=(F=ae[9])==null?void 0:F.toString().trim();K&&(K==="Medicamento"&&(K="Medicamentos"),K==="Perfumeria"&&(K="Perfumer칤a")),(!K||!Ce.includes(K))&&(Ce.includes(K)||(K="Varios")),Z.push({id:crypto.randomUUID(),ean:he,name:ae[3],systemQuantity:Number(ae[4])||0,countedQuantity:Number(ae[4])||0,cost:Number(ae[12])||0,status:"pending",category:K}),J.add(he),X++}u(Z),ee>0?q.success(`Procesado. ${X} nuevos, ${ee} ignorados (ya existentes/ajustados).`):q.success(`Archivo procesado. Se agregaron ${X} items nuevos.`)}catch($){console.error("Error reading file:",$),q.error("Error al procesar el archivo Excel.")}finally{c(!1),o.target.value=""}},f.readAsBinaryString(d)},Y=D.useCallback((o,d)=>{u(f=>f.map(m=>m.id===o?(d-m.systemQuantity!==0&&navigator.vibrate?navigator.vibrate([50,50,50]):navigator.vibrate&&navigator.vibrate(50),{...m,countedQuantity:d,status:"controlled"}):m))},[]),ne=D.useCallback(o=>{navigator.vibrate&&navigator.vibrate(50),Jt({particleCount:100,spread:70,origin:{y:.6}}),u(d=>d.map(f=>f.id===o?{...f,status:"controlled",countedQuantity:f.systemQuantity}:f)),q.success("Producto controlado")},[]),le=D.useCallback(o=>{u(d=>d.map(f=>f.id===o?{...f,status:"pending"}:f)),q.info("Producto devuelto a pendientes")},[]),re=()=>{const o=Q.filter(j=>j.countedQuantity<j.systemQuantity),d=Q.filter(j=>j.countedQuantity>j.systemQuantity),f=o.length>0,m=d.length>0;if(f&&!l.trim()){q.error("Por favor ingresa el ID de ajuste para Faltantes");return}if(m&&!A.trim()){q.error("Por favor ingresa el ID de ajuste para Sobrantes");return}const g=s.map(j=>j.status==="controlled"?{...j,status:"adjusted"}:j).filter(j=>j.status==="adjusted");u(g);const C={status:"controlado",lastUpdated:Date.now(),shortageId:l,surplusId:A,items:g};localStorage.setItem(`cyclic_inventory_status_${x}`,JSON.stringify(C)),kt(async()=>{const{OfflineQueue:j}=await import("./index-CfsGIlE1.js").then(F=>F.ad);return{OfflineQueue:j}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({OfflineQueue:j})=>{j.enqueue("SAVE_INVENTORY",{labName:x,shortageId:l,surplusId:A,items:g}),navigator.onLine?q.success("Ajustes guardados correctamente. Los items pendientes han sido limpiados."):q.info("Guardado en cola. Se sincronizar치 cuando recuperes la conexi칩n.")}),P(!1),E(""),T("")},se=Q.filter(o=>o.countedQuantity<o.systemQuantity).reduce((o,d)=>o+(d.systemQuantity-d.countedQuantity)*d.cost,0),ce=Q.filter(o=>o.countedQuantity>o.systemQuantity).reduce((o,d)=>o+(d.countedQuantity-d.systemQuantity)*d.cost,0),ue=()=>{const o=s.map(m=>({EAN:m.ean,Producto:m.name,Laboratorio:x,Rubro:m.category||"Varios","Cantidad Sistema":m.systemQuantity,"Cantidad F칤sica":m.countedQuantity,Diferencia:m.countedQuantity-m.systemQuantity,Costo:m.cost,Estado:m.status==="controlled"?"CONTROLADO":m.status==="adjusted"?"AJUSTADO":"PENDIENTE"})),d=xe.json_to_sheet(o),f=xe.book_new();xe.book_append_sheet(f,d,"Inventario"),Dt(f,`Inventario_${x}.xlsx`),q.success("Excel generado")},[me,pe]=D.useState(!1),Se=D.useCallback(o=>{const d=s.find(f=>f.ean===o);d?(Y(d.id,d.countedQuantity+1),q.success(`Producto encontrado: ${d.name}`)):q.error(`Producto no encontrado: ${o}`)},[s,Y]),a=D.useCallback(o=>{let d=0,f=0;const m=new Map;s.forEach(g=>m.set(g.id,g.countedQuantity)),o.forEach(g=>{const C=s.find(j=>j.ean===g);if(C){const j=m.get(C.id)||0;m.set(C.id,j+1),d++}else f++}),d>0&&(u(g=>g.map(C=>{if(m.has(C.id)){const j=m.get(C.id);if(j!==C.countedQuantity)return{...C,countedQuantity:j,status:"controlled"}}return C})),q.success(`Procesados ${d} items correctamente.`)),f>0&&q.warning(`${f} c칩digos no encontrados.`)},[s]),e=()=>{const o=new Lt;o.setFontSize(16),o.text(`Inventario C칤clico: ${x}`,10,10),o.setFontSize(10),o.text(`Fecha: ${new Date().toLocaleDateString()}`,10,18);let d=30;const f=10,m=o.internal.pageSize.height;o.setFont("helvetica","bold"),o.text("Producto",10,d),o.text("Rubro",80,d),o.text("Sistema",100,d),o.text("F칤sico",130,d),o.text("Dif",160,d),o.text("Estado",180,d),d+=f,o.setFont("helvetica","normal"),s.forEach(g=>{d>m-20&&(o.addPage(),d=20);const C=g.countedQuantity-g.systemQuantity;o.text(g.name.substring(0,35),10,d),o.text((g.category||"Varios").substring(0,15),80,d),o.text(g.systemQuantity.toString(),100,d),o.text(g.countedQuantity.toString(),130,d),o.setTextColor(C===0?0:255,0,0),o.text(C.toString(),160,d),o.setTextColor(0),o.text(g.status==="controlled"?"OK":g.status==="adjusted"?"Ajust":"Pend",180,d),d+=f}),o.save(`Inventario_${x}_${new Date().toISOString().split("T")[0]}.pdf`),q.success("Reporte PDF generado")},N=()=>{confirm("쮼st치s seguro de que quieres reiniciar los datos de este laboratorio? Se perder치n los cambios no guardados.")&&(localStorage.removeItem(`cyclic_inventory_${x}`),localStorage.removeItem(`cyclic_inventory_status_${x}`),u([]),q.success("Datos reiniciados correctamente."),r("/cyclic-inventory"))};return t.jsxs("div",{className:"p-4 md:p-6 space-y-6 max-w-7xl mx-auto pb-32 lg:pb-10",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(U,{variant:"ghost",size:"icon",onClick:()=>r("/cyclic-inventory"),children:t.jsx(Wt,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:x}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Control de Inventario C칤clico"})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(bn,{})})]}),s.length===0?t.jsxs(ve,{className:"p-12 border-dashed border-2 flex flex-col items-center justify-center text-center space-y-4 bg-muted/20",children:[t.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:t.jsx(He,{className:"w-8 h-8 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Cargar Archivo de Inventario"}),t.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:["Sube el archivo Excel (.xlsx) descargado del sistema para comenzar el control de ",x,"."]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(U,{disabled:i,children:i?"Procesando...":"Seleccionar Archivo"}),t.jsx(fe,{type:"file",accept:".xlsx, .xls",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:oe,disabled:i})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Columnas requeridas: C (EAN), D (Producto), E (Cantidad), O (Laboratorio), J (Rubro)"})]}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(ve,{className:"p-4 flex flex-col items-center justify-center bg-warning/5 border-warning/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Pendientes"}),t.jsx("span",{className:"text-2xl font-bold text-warning",children:t.jsx(ye,{value:s.filter(o=>o.status==="pending").length})})]}),t.jsxs(ve,{className:"p-4 flex flex-col items-center justify-center bg-success/5 border-success/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Controlados"}),t.jsx("span",{className:"text-2xl font-bold text-success",children:t.jsx(ye,{value:s.filter(o=>o.status==="controlled").length})})]}),t.jsxs(ve,{className:"p-4 flex flex-col items-center justify-center bg-blue-500/5 border-blue-500/20",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Ajustados"}),t.jsx("span",{className:"text-2xl font-bold text-blue-500",children:t.jsx(ye,{value:s.filter(o=>o.status==="adjusted").length})})]}),t.jsxs(ve,{className:"p-4 flex flex-col items-center justify-center",children:[t.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Avance"}),t.jsxs("span",{className:"text-2xl font-bold",children:[t.jsx(ye,{value:Math.round(s.filter(o=>o.status==="controlled"||o.status==="adjusted").length/s.length*100)}),"%"]})]})]}),t.jsxs("div",{className:"lg:col-span-3",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(fe,{placeholder:"Buscar por nombre o EAN...",value:v,onChange:o=>k(o.target.value),className:"pl-9"})]}),t.jsxs("div",{className:"flex items-center space-x-2 bg-card p-2 rounded-lg border",children:[t.jsx(zt,{id:"diff-mode",checked:M,onCheckedChange:L}),t.jsx(Ie,{htmlFor:"diff-mode",className:"cursor-pointer",children:"Solo Diferencias"})]}),t.jsxs(U,{variant:"destructive",size:"sm",onClick:N,className:"ml-2",children:[t.jsx(De,{className:"w-4 h-4 mr-2"}),"Reiniciar Datos"]})]}),t.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:t.jsx("div",{className:"flex gap-2",children:Ce.map(o=>t.jsx(U,{variant:p===o?"default":"outline",onClick:()=>h(o),className:ie("rounded-full px-6 transition-all",p===o?"shadow-md":"opacity-70 hover:opacity-100"),children:o},o))})}),t.jsxs(It,{defaultValue:"pending",className:"w-full",children:[t.jsxs(At,{className:"grid w-full grid-cols-3 mb-4",children:[t.jsxs(ke,{value:"pending",className:"relative",children:["Pendientes (",p,")",_.length>0&&t.jsx("span",{className:"ml-2 bg-warning text-warning-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:_.length})]}),t.jsxs(ke,{value:"controlled",children:["Controlados",Q.length>0&&t.jsx("span",{className:"ml-2 bg-success text-success-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:Q.length})]}),t.jsxs(ke,{value:"adjusted",children:["Ajustados",te.length>0&&t.jsx("span",{className:"ml-2 bg-blue-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:te.length})]})]}),t.jsxs(Ee,{value:"pending",className:"space-y-4",children:[t.jsxs(rt,{className:"bg-muted/50 border-none mb-4",children:[t.jsx(Nt,{className:"h-4 w-4"}),t.jsx(at,{children:"Instrucciones"}),t.jsx(ot,{children:"Desliza a la derecha para confirmar (verde) o a la izquierda para reportar diferencia (naranja)."})]}),t.jsx(Ae,{items:_,onUpdateQuantity:Y,onCheck:ne})]}),t.jsx(Ee,{value:"controlled",className:"space-y-4",children:t.jsx(Ae,{items:Q,onUpdateQuantity:Y,onCheck:ne,onRevert:le,readOnly:!1})}),t.jsx(Ee,{value:"adjusted",className:"space-y-4",children:t.jsx(Ae,{items:te,onUpdateQuantity:()=>{},onCheck:()=>{},readOnly:!0})})]})]})]}),t.jsx(Ke,{open:b,onOpenChange:P,children:t.jsxs(Ye,{children:[t.jsxs(et,{children:[t.jsx(tt,{children:"Finalizar Inventario"}),t.jsx(St,{children:"Ingresa el ID del ajuste generado en PLEX para guardar el estado de este inventario."})]}),t.jsxs("div",{className:"py-4 space-y-6",children:[t.jsxs("div",{className:"space-y-2 p-4 bg-destructive/5 rounded-lg border border-destructive/10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"text-destructive font-bold",children:"Faltantes (Negativos)"}),t.jsxs("span",{className:"font-mono font-bold text-destructive",children:["$",se.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),t.jsx(fe,{value:l,onChange:o=>E(o.target.value),placeholder:"ID Ajuste Faltantes (PLEX)"})]}),t.jsxs("div",{className:"space-y-2 p-4 bg-success/5 rounded-lg border border-success/10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"text-success font-bold",children:"Sobrantes (Positivos)"}),t.jsxs("span",{className:"font-mono font-bold text-success",children:["$",ce.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),t.jsx(fe,{value:A,onChange:o=>T(o.target.value),placeholder:"ID Ajuste Sobrantes (PLEX)"})]})]}),t.jsxs(nt,{children:[t.jsx(U,{variant:"outline",onClick:()=>P(!1),children:"Cancelar"}),t.jsx(U,{onClick:re,children:"Guardar y Finalizar"})]})]})}),t.jsx($t,{open:me,onOpenChange:pe,onScan:Se,onBatchScan:a}),s.length>0&&t.jsx(Ot,{actions:[{label:"Finalizar",icon:t.jsx(Qt,{className:"w-5 h-5"}),onClick:()=>P(!0),variant:"default",color:"bg-primary text-primary-foreground"},{label:"Exportar PDF",icon:t.jsx(Mt,{className:"w-5 h-5"}),onClick:e,variant:"secondary"},{label:"Exportar Excel",icon:t.jsx(Ht,{className:"w-5 h-5"}),onClick:ue,variant:"secondary",color:"text-green-600"},{label:"Escanear",icon:t.jsx(Zt,{className:"w-5 h-5"}),onClick:()=>pe(!0),variant:"secondary"},{label:"Cargar Excel",icon:t.jsx(He,{className:"w-5 h-5"}),onClick:()=>{var o;return(o=document.getElementById("fab-upload-input"))==null?void 0:o.click()},variant:"secondary"}]}),t.jsx("input",{id:"fab-upload-input",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:oe,disabled:i})]})}export{Wn as default};
