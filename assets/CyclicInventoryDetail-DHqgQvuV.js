import{j as e}from"./ui-vendor-lsEhpTbO.js";import{r as L,k as bt,u as jt}from"./react-vendor-ylmX0jv_.js";import{c as Ct,B as U,X as Nt,a as le,P as Ue,l as Pe,f as Mt,E as He,g as he,q as rt,r as nt,t as at,v as st,x as St,a3 as kt,u as Et,n as pe,y as G,U as qe,S as Pt,I as It,$ as At}from"./index-fkPGpu1p.js";import{I as ye}from"./input-JyldaYdw.js";import{T as _t,a as Lt,b as Ne,c as Me}from"./tabs-Bx3ZrcHe.js";import{r as Dt,u as Tt}from"./excel-uoQkVabA.js";import{P as Bt}from"./ProductImageHover-DFX78vkm.js";import{B as De}from"./badge-KCcCHyJ6.js";import{S as Rt,P as Ve}from"./SwipeableItem-DmX1JMTp.js";import{A as Ze,m as Xe}from"./animation-DZFErbwn.js";import{D as $t}from"./dollar-sign-DyO_gRYD.js";import{C as Ke}from"./calculator-DEG-QFnm.js";import{C as Se}from"./CounterAnimation-GIE2m9HH.js";import{S as Ft}from"./switch-B3DXLxZa.js";import{L as Te}from"./label-DSPKJeUh.js";import{C as Ht}from"./circle-help-C8D73XeG.js";import{A as zt}from"./arrow-left-CGrt_vP4.js";import{L as Be}from"./loader-circle-ClaKuBoV.js";import"./utils-CUsTgaRG.js";import"./useHaptic-9bqCYA5r.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Ct("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);var Oe={};(function r(n,s,c,i){var h=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),f=typeof Path2D=="function"&&typeof DOMMatrix=="function",w=function(){if(!n.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),t=a.getContext("2d");t.fillRect(0,0,1,1);var C=a.transferToImageBitmap();t.createPattern(C,"no-repeat")}catch{return!1}return!0}();function d(){}function S(a){var t=s.exports.Promise,C=t!==void 0?t:n.Promise;return typeof C=="function"?new C(a):(a(d,d),null)}var N=function(a,t){return{transform:function(C){if(a)return C;if(t.has(C))return t.get(C);var M=new OffscreenCanvas(C.width,C.height),P=M.getContext("2d");return P.drawImage(C,0,0),t.set(C,M),M},clear:function(){t.clear()}}}(w,new Map),T=function(){var a=Math.floor(16.666666666666668),t,C,M={},P=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(l){var m=Math.random();return M[m]=requestAnimationFrame(function v(j){P===j||P+a-1<j?(P=j,delete M[m],l()):M[m]=requestAnimationFrame(v)}),m},C=function(l){M[l]&&cancelAnimationFrame(M[l])}):(t=function(l){return setTimeout(l,a)},C=function(l){return clearTimeout(l)}),{frame:t,cancel:C}}(),u=function(){var a,t,C={};function M(P){function l(m,v){P.postMessage({options:m||{},callback:v})}P.init=function(v){var j=v.transferControlToOffscreen();P.postMessage({canvas:j},[j])},P.fire=function(v,j,k){if(t)return l(v,null),t;var I=Math.random().toString(36).slice(2);return t=S(function(R){function F(z){z.data.callback===I&&(delete C[I],P.removeEventListener("message",F),t=null,N.clear(),k(),R())}P.addEventListener("message",F),l(v,I),C[I]=F.bind(null,{data:{callback:I}})}),t},P.reset=function(){P.postMessage({reset:!0});for(var v in C)C[v](),delete C[v]}}return function(){if(a)return a;if(!c&&h){var P=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([P])))}catch(l){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("游꿁 Could not load worker",l),null}M(a)}return a}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(a,t){return t?t(a):a}function E(a){return a!=null}function o(a,t,C){return x(a&&E(a[t])?a[t]:p[t],C)}function b(a){return a<0?0:Math.floor(a)}function $(a,t){return Math.floor(Math.random()*(t-a))+a}function _(a){return parseInt(a,16)}function H(a){return a.map(B)}function B(a){var t=String(a).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:_(t.substring(0,2)),g:_(t.substring(2,4)),b:_(t.substring(4,6))}}function D(a){var t=o(a,"origin",Object);return t.x=o(t,"x",Number),t.y=o(t,"y",Number),t}function Z(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function se(a){var t=a.getBoundingClientRect();a.width=t.width,a.height=t.height}function ce(a){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=a,t}function Y(a,t,C,M,P,l,m,v,j){a.save(),a.translate(t,C),a.rotate(l),a.scale(M,P),a.arc(0,0,1,m,v,j),a.restore()}function re(a){var t=a.angle*(Math.PI/180),C=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-t+(.5*C-Math.random()*C),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function oe(a,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var C=t.tick++/t.totalTicks,M=t.x+t.random*t.tiltCos,P=t.y+t.random*t.tiltSin,l=t.wobbleX+t.random*t.tiltCos,m=t.wobbleY+t.random*t.tiltSin;if(a.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-C)+")",a.beginPath(),f&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))a.fill(ve(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(l-M)*.1,Math.abs(m-P)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var v=Math.PI/10*t.wobble,j=Math.abs(l-M)*.1,k=Math.abs(m-P)*.1,I=t.shape.bitmap.width*t.scalar,R=t.shape.bitmap.height*t.scalar,F=new DOMMatrix([Math.cos(v)*j,Math.sin(v)*j,-Math.sin(v)*k,Math.cos(v)*k,t.x,t.y]);F.multiplySelf(new DOMMatrix(t.shape.matrix));var z=a.createPattern(N.transform(t.shape.bitmap),"no-repeat");z.setTransform(F),a.globalAlpha=1-C,a.fillStyle=z,a.fillRect(t.x-I/2,t.y-R/2,I,R),a.globalAlpha=1}else if(t.shape==="circle")a.ellipse?a.ellipse(t.x,t.y,Math.abs(l-M)*t.ovalScalar,Math.abs(m-P)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Y(a,t.x,t.y,Math.abs(l-M)*t.ovalScalar,Math.abs(m-P)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var A=Math.PI/2*3,q=4*t.scalar,X=8*t.scalar,O=t.x,J=t.y,ae=5,K=Math.PI/ae;ae--;)O=t.x+Math.cos(A)*X,J=t.y+Math.sin(A)*X,a.lineTo(O,J),A+=K,O=t.x+Math.cos(A)*q,J=t.y+Math.sin(A)*q,a.lineTo(O,J),A+=K;else a.moveTo(Math.floor(t.x),Math.floor(t.y)),a.lineTo(Math.floor(t.wobbleX),Math.floor(P)),a.lineTo(Math.floor(l),Math.floor(m)),a.lineTo(Math.floor(M),Math.floor(t.wobbleY));return a.closePath(),a.fill(),t.tick<t.totalTicks}function W(a,t,C,M,P){var l=t.slice(),m=a.getContext("2d"),v,j,k=S(function(I){function R(){v=j=null,m.clearRect(0,0,M.width,M.height),N.clear(),P(),I()}function F(){c&&!(M.width===i.width&&M.height===i.height)&&(M.width=a.width=i.width,M.height=a.height=i.height),!M.width&&!M.height&&(C(a),M.width=a.width,M.height=a.height),m.clearRect(0,0,M.width,M.height),l=l.filter(function(z){return oe(m,z)}),l.length?v=T.frame(F):R()}v=T.frame(F),j=R});return{addFettis:function(I){return l=l.concat(I),k},canvas:a,promise:k,reset:function(){v&&T.cancel(v),j&&j()}}}function ne(a,t){var C=!a,M=!!o(t||{},"resize"),P=!1,l=o(t,"disableForReducedMotion",Boolean),m=h&&!!o(t||{},"useWorker"),v=m?u():null,j=C?Z:se,k=a&&v?!!a.__confetti_initialized:!1,I=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,R;function F(A,q,X){for(var O=o(A,"particleCount",b),J=o(A,"angle",Number),ae=o(A,"spread",Number),K=o(A,"startVelocity",Number),be=o(A,"decay",Number),ie=o(A,"gravity",Number),V=o(A,"drift",Number),xe=o(A,"colors",H),fe=o(A,"ticks",Number),ee=o(A,"shapes"),je=o(A,"scalar"),Ce=!!o(A,"flat"),Qe=D(A),We=O,Le=[],yt=a.width*Qe.x,wt=a.height*Qe.y;We--;)Le.push(re({x:yt,y:wt,angle:J,spread:ae,startVelocity:K,color:xe[We%xe.length],shape:ee[$(0,ee.length)],ticks:fe,decay:be,gravity:ie,drift:V,scalar:je,flat:Ce}));return R?R.addFettis(Le):(R=W(a,Le,j,q,X),R.promise)}function z(A){var q=l||o(A,"disableForReducedMotion",Boolean),X=o(A,"zIndex",Number);if(q&&I)return S(function(K){K()});C&&R?a=R.canvas:C&&!a&&(a=ce(X),document.body.appendChild(a)),M&&!k&&j(a);var O={width:a.width,height:a.height};v&&!k&&v.init(a),k=!0,v&&(a.__confetti_initialized=!0);function J(){if(v){var K={getBoundingClientRect:function(){if(!C)return a.getBoundingClientRect()}};j(K),v.postMessage({resize:{width:K.width,height:K.height}});return}O.width=O.height=null}function ae(){R=null,M&&(P=!1,n.removeEventListener("resize",J)),C&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,k=!1)}return M&&!P&&(P=!0,n.addEventListener("resize",J,!1)),v?v.fire(A,O,ae):F(A,O,ae)}return z.reset=function(){v&&v.reset(),R&&R.reset()},z}var de;function ue(){return de||(de=ne(null,{useWorker:!0,resize:!0})),de}function ve(a,t,C,M,P,l,m){var v=new Path2D(a),j=new Path2D;j.addPath(v,new DOMMatrix(t));var k=new Path2D;return k.addPath(j,new DOMMatrix([Math.cos(m)*P,Math.sin(m)*P,-Math.sin(m)*l,Math.cos(m)*l,C,M])),k}function ge(a){if(!f)throw new Error("path confetti are not supported in this browser");var t,C;typeof a=="string"?t=a:(t=a.path,C=a.matrix);var M=new Path2D(t),P=document.createElement("canvas"),l=P.getContext("2d");if(!C){for(var m=1e3,v=m,j=m,k=0,I=0,R,F,z=0;z<m;z+=2)for(var A=0;A<m;A+=2)l.isPointInPath(M,z,A,"nonzero")&&(v=Math.min(v,z),j=Math.min(j,A),k=Math.max(k,z),I=Math.max(I,A));R=k-v,F=I-j;var q=10,X=Math.min(q/R,q/F);C=[X,0,0,X,-Math.round(R/2+v)*X,-Math.round(F/2+j)*X]}return{type:"path",path:t,matrix:C}}function _e(a){var t,C=1,M="#000000",P='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?t=a:(t=a.text,C="scalar"in a?a.scalar:C,P="fontFamily"in a?a.fontFamily:P,M="color"in a?a.color:M);var l=10*C,m=""+l+"px "+P,v=new OffscreenCanvas(l,l),j=v.getContext("2d");j.font=m;var k=j.measureText(t),I=Math.ceil(k.actualBoundingBoxRight+k.actualBoundingBoxLeft),R=Math.ceil(k.actualBoundingBoxAscent+k.actualBoundingBoxDescent),F=2,z=k.actualBoundingBoxLeft+F,A=k.actualBoundingBoxAscent+F;I+=F+F,R+=F+F,v=new OffscreenCanvas(I,R),j=v.getContext("2d"),j.font=m,j.fillStyle=M,j.fillText(t,z,A);var q=1/C;return{type:"bitmap",bitmap:v.transferToImageBitmap(),matrix:[q,0,0,q,-I*q/2,-R*q/2]}}s.exports=function(){return ue().apply(this,arguments)},s.exports.reset=function(){ue().reset()},s.exports.create=ne,s.exports.shapeFromPath=ge,s.exports.shapeFromText=_e})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Oe,!1);const Qt=Oe.exports;Oe.exports.create;function Wt({onResult:r,onClose:n,initialValue:s=""}){const[c,i]=L.useState(s),[h,f]=L.useState(""),w=p=>{i(x=>x==="0"?p:x+p)},d=p=>{f(c+" "+p+" "),i("")},S=()=>{i(""),f("")},N=()=>{try{const p=h+c;if(!/^[0-9+\-*/. ]+$/.test(p)){i("Error");return}const x=new Function("return "+p)();i(String(x)),f(""),r(Number(x))}catch{i("Error")}},T=()=>{i(p=>p.slice(0,-1))},u=[{label:"C",onClick:S,variant:"destructive",className:"col-span-1"},{label:"/",onClick:()=>d("/"),variant:"secondary"},{label:"*",onClick:()=>d("*"),variant:"secondary"},{label:e.jsx(Ot,{className:"w-4 h-4"}),onClick:T,variant:"secondary"},{label:"7",onClick:()=>w("7"),variant:"outline"},{label:"8",onClick:()=>w("8"),variant:"outline"},{label:"9",onClick:()=>w("9"),variant:"outline"},{label:"-",onClick:()=>d("-"),variant:"secondary"},{label:"4",onClick:()=>w("4"),variant:"outline"},{label:"5",onClick:()=>w("5"),variant:"outline"},{label:"6",onClick:()=>w("6"),variant:"outline"},{label:"+",onClick:()=>d("+"),variant:"secondary"},{label:"1",onClick:()=>w("1"),variant:"outline"},{label:"2",onClick:()=>w("2"),variant:"outline"},{label:"3",onClick:()=>w("3"),variant:"outline"},{label:"=",onClick:N,variant:"default",className:"row-span-2 h-full"},{label:"0",onClick:()=>w("0"),variant:"outline",className:"col-span-2"},{label:".",onClick:()=>w("."),variant:"outline"}];return e.jsxs("div",{className:"p-4 bg-card rounded-lg border shadow-lg max-w-xs mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-mono h-4 block",children:h}),e.jsx(U,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:n,children:e.jsx(Nt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"bg-muted p-3 rounded-md mb-4 text-right font-mono text-2xl font-bold tracking-wider overflow-hidden",children:c||"0"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:u.map((p,x)=>e.jsx(U,{variant:p.variant,onClick:p.onClick,className:le("h-12 text-lg font-medium",p.className),children:p.label},x))})]})}const Re=L.memo(function({items:n,onUpdateQuantity:s,onCheck:c,onRevert:i,readOnly:h=!1}){const[f,w]=L.useState(null),[d,S]=L.useState(""),[N,T]=L.useState(!1),u=o=>{w(o.id),S(o.countedQuantity.toString()),T(!1)},p=()=>{if(f){const o=parseInt(d,10);!isNaN(o)&&o>=0&&(s(f,o),w(null))}},x=()=>{w(null),S(""),T(!1)},E=o=>{S(Math.floor(o).toString())};return n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No hay productos en esta lista"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:e.jsx(Ze,{mode:"popLayout",children:n.map(o=>{const b=o.countedQuantity-o.systemQuantity,$=b!==0,_=o.status==="controlled",H=b===0;return e.jsx(Xe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:e.jsx(Rt,{disabled:h,..._?{leftAction:{label:"Editar",icon:e.jsx(Ve,{className:"w-5 h-5"}),color:"text-blue-500",bgColor:"rgba(59, 130, 246, 0.2)",onAction:()=>u(o)},rightAction:i?{label:"Revertir",icon:e.jsx(He,{className:"w-5 h-5"}),color:"text-red-500",bgColor:"rgba(239, 68, 68, 0.2)",onAction:()=>i(o.id)}:void 0}:{leftAction:{label:"Confirmar",icon:e.jsx(Pe,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"rgba(22, 163, 74, 0.2)",onAction:()=>c(o.id)},rightAction:{label:"Diferencia",icon:e.jsx(Mt,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"rgba(249, 115, 22, 0.2)",onAction:()=>u(o)}},children:e.jsx(he,{className:le("p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border"),onClick:()=>u(o),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:le("p-2 rounded-lg flex-shrink-0 transition-colors",_?"bg-success/10":"bg-primary/10"),children:_?e.jsx(Pe,{className:"w-5 h-5 text-success"}):e.jsx(Ue,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Bt,{ean:o.ean,name:o.name,children:e.jsx("h4",{className:"font-medium text-foreground truncate",title:o.name,children:o.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-mono bg-muted px-1.5 py-0.5 rounded",children:o.ean}),o.cost>0&&e.jsxs("span",{className:"flex items-center text-muted-foreground",children:[e.jsx($t,{className:"w-3 h-3 mr-0.5"}),o.cost.toFixed(2)]}),(o.status==="controlled"||o.status==="adjusted")&&o.category&&e.jsx(De,{variant:"outline",className:"text-[10px] h-5 px-1.5 ml-auto",children:o.category})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Sistema"}),e.jsx("span",{className:"text-sm font-medium",children:o.systemQuantity})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"F칤sico"}),e.jsx("span",{className:le("text-sm font-bold",$?"text-warning":"text-success"),children:o.countedQuantity})]}),$&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Diferencia"}),e.jsx(De,{variant:b>0?"default":"destructive",className:"h-5 px-1.5 text-[10px]",children:b>0?`+${b}`:b})]}),o.wasReadjusted&&e.jsxs("div",{className:"flex flex-col",title:"Este producto fue re-ajustado",children:[e.jsx("span",{className:"text-[10px] uppercase text-muted-foreground font-semibold",children:"Re-Ajuste"}),e.jsxs(De,{variant:"outline",className:"h-5 px-1.5 text-[10px] bg-purple-100 text-purple-700 border-purple-200",children:[e.jsx(Ke,{className:"w-3 h-3 mr-0.5"})," Modif."]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:B=>{B.stopPropagation(),u(o)},children:e.jsx(Ve,{className:"w-4 h-4"})}),o.status==="pending"&&e.jsx(U,{size:"icon",variant:H?"default":"secondary",className:le("h-10 w-10 rounded-full shadow-sm flex-shrink-0 transition-all ml-1",H?"bg-success hover:bg-success/90 text-white":"hover:bg-warning/20 text-warning"),onClick:B=>{B.stopPropagation(),c(o.id)},children:e.jsx(Pe,{className:"w-5 h-5"})}),o.status==="controlled"&&i&&e.jsx(U,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:B=>{B.stopPropagation(),i(o.id)},title:"Volver a pendientes",children:e.jsx(He,{className:"w-4 h-4"})})]})]})})})},o.id)})})}),e.jsx(rt,{open:f!==null,onOpenChange:o=>!o&&x(),children:e.jsxs(nt,{className:"sm:max-w-md",children:[e.jsx(at,{children:e.jsx(st,{children:"Editar Cantidad"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cantidad F칤sica"}),e.jsx(ye,{type:"number",min:"0",value:d,onChange:o=>S(o.target.value),onKeyDown:o=>{o.key==="Enter"&&p()},placeholder:"Ingresa la cantidad",autoFocus:!0})]}),e.jsx(U,{variant:N?"secondary":"outline",size:"icon",onClick:()=>T(!N),title:"Calculadora",children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsx(Ze,{children:N&&e.jsx(Xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx(Wt,{onResult:E,onClose:()=>T(!1)})})})]}),e.jsxs(St,{children:[e.jsx(U,{variant:"outline",onClick:x,children:"Cancelar"}),e.jsx(U,{onClick:p,children:"Guardar"})]})]})})]})}),Ut=kt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ot=L.forwardRef(({className:r,variant:n,...s},c)=>e.jsx("div",{ref:c,role:"alert",className:le(Ut({variant:n}),r),...s}));ot.displayName="Alert";const it=L.forwardRef(({className:r,...n},s)=>e.jsx("h5",{ref:s,className:le("mb-1 font-medium leading-none tracking-tight",r),...n}));it.displayName="AlertTitle";const lt=L.forwardRef(({className:r,...n},s)=>e.jsx("div",{ref:s,className:le("text-sm [&_p]:leading-relaxed",r),...n}));lt.displayName="AlertDescription";let ze={},ct;function $e(r={}){ze={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function g(r){return r?ze[r]:ze}function qt(r){ct=r}function te(){return ct}let Ie={};function ke(r,n){Ie[r]=n}function me(r){var n;(n=Ie[r])==null||n.call(Ie)}function Vt(){Ie={}}function Ee(r,n,s,c){return(r/=c/2)<1?s/2*r*r+n:-s/2*(--r*(r-2)-1)+n}function dt(r){const n='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(s=>{const c=s.matches(n),i=Array.from(s.querySelectorAll(n));return[...c?[s]:[],...i]}).filter(s=>getComputedStyle(s).pointerEvents!=="none"&&Kt(s))}function ut(r){if(!r||Xt(r))return;const n=g("smoothScroll"),s=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!n||Zt(r)?"auto":"smooth",inline:"center",block:s?"start":"center"})}function Zt(r){if(!r||!r.parentElement)return;const n=r.parentElement;return n.scrollHeight>n.clientHeight}function Xt(r){const n=r.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}function Kt(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let Ae={};function Q(r,n){Ae[r]=n}function y(r){return r?Ae[r]:Ae}function Ge(){Ae={}}function Gt(r,n,s,c){let i=y("__activeStagePosition");const h=i||s.getBoundingClientRect(),f=c.getBoundingClientRect(),w=Ee(r,h.x,f.x-h.x,n),d=Ee(r,h.y,f.y-h.y,n),S=Ee(r,h.width,f.width-h.width,n),N=Ee(r,h.height,f.height-h.height,n);i={x:w,y:d,width:S,height:N},ht(i),Q("__activeStagePosition",i)}function pt(r){if(!r)return;const n=r.getBoundingClientRect(),s={x:n.x,y:n.y,width:n.width,height:n.height};Q("__activeStagePosition",s),ht(s)}function Yt(){const r=y("__activeStagePosition"),n=y("__overlaySvg");if(!r)return;if(!n){console.warn("No stage svg found.");return}const s=window.innerWidth,c=window.innerHeight;n.setAttribute("viewBox",`0 0 ${s} ${c}`)}function Jt(r){const n=er(r);document.body.appendChild(n),ft(n,s=>{s.target.tagName==="path"&&me("overlayClick")}),Q("__overlaySvg",n)}function ht(r){const n=y("__overlaySvg");if(!n){Jt(r);return}const s=n.firstElementChild;if((s==null?void 0:s.tagName)!=="path")throw new Error("no path element found in stage svg");s.setAttribute("d",mt(r))}function er(r){const n=window.innerWidth,s=window.innerHeight,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add("driver-overlay","driver-overlay-animated"),c.setAttribute("viewBox",`0 0 ${n} ${s}`),c.setAttribute("xmlSpace","preserve"),c.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),c.setAttribute("version","1.1"),c.setAttribute("preserveAspectRatio","xMinYMin slice"),c.style.fillRule="evenodd",c.style.clipRule="evenodd",c.style.strokeLinejoin="round",c.style.strokeMiterlimit="2",c.style.zIndex="10000",c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%";const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",mt(r)),i.style.fill=g("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${g("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",c.appendChild(i),c}function mt(r){const n=window.innerWidth,s=window.innerHeight,c=g("stagePadding")||0,i=g("stageRadius")||0,h=r.width+c*2,f=r.height+c*2,w=Math.min(i,h/2,f/2),d=Math.floor(Math.max(w,0)),S=r.x-c+d,N=r.y-c,T=h-d*2,u=f-d*2;return`M${n},0L0,0L0,${s}L${n},${s}L${n},0Z
    M${S},${N} h${T} a${d},${d} 0 0 1 ${d},${d} v${u} a${d},${d} 0 0 1 -${d},${d} h-${T} a${d},${d} 0 0 1 -${d},-${d} v-${u} a${d},${d} 0 0 1 ${d},-${d} z`}function tr(){const r=y("__overlaySvg");r&&r.remove()}function rr(){const r=document.getElementById("driver-dummy-element");if(r)return r;let n=document.createElement("div");return n.id="driver-dummy-element",n.style.width="0",n.style.height="0",n.style.pointerEvents="none",n.style.opacity="0",n.style.position="fixed",n.style.top="50%",n.style.left="50%",document.body.appendChild(n),n}function Ye(r){const{element:n}=r;let s=typeof n=="function"?n():typeof n=="string"?document.querySelector(n):n;s||(s=rr()),ar(s,r)}function nr(){const r=y("__activeElement"),n=y("__activeStep");r&&(pt(r),Yt(),xt(r,n))}function ar(r,n){var s;const c=Date.now(),i=y("__activeStep"),h=y("__activeElement")||r,f=!h||h===r,w=r.id==="driver-dummy-element",d=h.id==="driver-dummy-element",S=g("animate"),N=n.onHighlightStarted||g("onHighlightStarted"),T=(n==null?void 0:n.onHighlighted)||g("onHighlighted"),u=(i==null?void 0:i.onDeselected)||g("onDeselected"),p=g(),x=y();!f&&u&&u(d?void 0:h,i,{config:p,state:x,driver:te()}),N&&N(w?void 0:r,n,{config:p,state:x,driver:te()});const E=!f&&S;let o=!1;cr(),Q("previousStep",i),Q("previousElement",h),Q("activeStep",n),Q("activeElement",r);const b=()=>{if(y("__transitionCallback")!==b)return;const $=Date.now()-c,_=400-$<=400/2;n.popover&&_&&!o&&E&&(Je(r,n),o=!0),g("animate")&&$<400?Gt($,400,h,r):(pt(r),T&&T(w?void 0:r,n,{config:g(),state:y(),driver:te()}),Q("__transitionCallback",void 0),Q("__previousStep",i),Q("__previousElement",h),Q("__activeStep",n),Q("__activeElement",r)),window.requestAnimationFrame(b)};Q("__transitionCallback",b),window.requestAnimationFrame(b),ut(r),!E&&n.popover&&Je(r,n),h.classList.remove("driver-active-element","driver-no-interaction"),h.removeAttribute("aria-haspopup"),h.removeAttribute("aria-expanded"),h.removeAttribute("aria-controls"),((s=n.disableActiveInteraction)!=null?s:g("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function sr(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(n=>{n.classList.remove("driver-active-element","driver-no-interaction"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-controls")})}function we(){const r=y("__resizeTimeout");r&&window.cancelAnimationFrame(r),Q("__resizeTimeout",window.requestAnimationFrame(nr))}function or(r){var n;if(!y("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const s=y("__activeElement"),c=(n=y("popover"))==null?void 0:n.wrapper,i=dt([...c?[c]:[],...s?[s]:[]]),h=i[0],f=i[i.length-1];if(r.preventDefault(),r.shiftKey){const w=i[i.indexOf(document.activeElement)-1]||f;w==null||w.focus()}else{const w=i[i.indexOf(document.activeElement)+1]||h;w==null||w.focus()}}function vt(r){var n;((n=g("allowKeyboardControl"))==null||n)&&(r.key==="Escape"?me("escapePress"):r.key==="ArrowRight"?me("arrowRightPress"):r.key==="ArrowLeft"&&me("arrowLeftPress"))}function ft(r,n,s){const c=(i,h)=>{const f=i.target;r.contains(f)&&((!s||s(f))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),h==null||h(i))};document.addEventListener("pointerdown",c,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("pointerup",c,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("click",i=>{c(i,n)},!0)}function ir(){window.addEventListener("keyup",vt,!1),window.addEventListener("keydown",or,!1),window.addEventListener("resize",we),window.addEventListener("scroll",we)}function lr(){window.removeEventListener("keyup",vt),window.removeEventListener("resize",we),window.removeEventListener("scroll",we)}function cr(){const r=y("popover");r&&(r.wrapper.style.display="none")}function Je(r,n){var s,c;let i=y("popover");i&&document.body.removeChild(i.wrapper),i=ur(),document.body.appendChild(i.wrapper);const{title:h,description:f,showButtons:w,disableButtons:d,showProgress:S,nextBtnText:N=g("nextBtnText")||"Next &rarr;",prevBtnText:T=g("prevBtnText")||"&larr; Previous",progressText:u=g("progressText")||"{current} of {total}"}=n.popover||{};i.nextButton.innerHTML=N,i.previousButton.innerHTML=T,i.progress.innerHTML=u,h?(i.title.innerHTML=h,i.title.style.display="block"):i.title.style.display="none",f?(i.description.innerHTML=f,i.description.style.display="block"):i.description.style.display="none";const p=w||g("showButtons"),x=S||g("showProgress")||!1,E=(p==null?void 0:p.includes("next"))||(p==null?void 0:p.includes("previous"))||x;i.closeButton.style.display=p.includes("close")?"block":"none",E?(i.footer.style.display="flex",i.progress.style.display=x?"block":"none",i.nextButton.style.display=p.includes("next")?"block":"none",i.previousButton.style.display=p.includes("previous")?"block":"none"):i.footer.style.display="none";const o=d||g("disableButtons")||[];o!=null&&o.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),o!=null&&o.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),o!=null&&o.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));const b=i.wrapper;b.style.display="block",b.style.left="",b.style.top="",b.style.bottom="",b.style.right="",b.id="driver-popover-content",b.setAttribute("role","dialog"),b.setAttribute("aria-labelledby","driver-popover-title"),b.setAttribute("aria-describedby","driver-popover-description");const $=i.arrow;$.className="driver-popover-arrow";const _=((s=n.popover)==null?void 0:s.popoverClass)||g("popoverClass")||"";b.className=`driver-popover ${_}`.trim(),ft(i.wrapper,Z=>{var se,ce,Y;const re=Z.target,oe=((se=n.popover)==null?void 0:se.onNextClick)||g("onNextClick"),W=((ce=n.popover)==null?void 0:ce.onPrevClick)||g("onPrevClick"),ne=((Y=n.popover)==null?void 0:Y.onCloseClick)||g("onCloseClick");if(re.closest(".driver-popover-next-btn"))return oe?oe(r,n,{config:g(),state:y(),driver:te()}):me("nextClick");if(re.closest(".driver-popover-prev-btn"))return W?W(r,n,{config:g(),state:y(),driver:te()}):me("prevClick");if(re.closest(".driver-popover-close-btn"))return ne?ne(r,n,{config:g(),state:y(),driver:te()}):me("closeClick")},Z=>!(i!=null&&i.description.contains(Z))&&!(i!=null&&i.title.contains(Z))&&typeof Z.className=="string"&&Z.className.includes("driver-popover")),Q("popover",i);const H=((c=n.popover)==null?void 0:c.onPopoverRender)||g("onPopoverRender");H&&H(i,{config:g(),state:y(),driver:te()}),xt(r,n),ut(b);const B=r.classList.contains("driver-dummy-element"),D=dt([b,...B?[]:[r]]);D.length>0&&D[0].focus()}function gt(){const r=y("popover");if(!(r!=null&&r.wrapper))return;const n=r.wrapper.getBoundingClientRect(),s=g("stagePadding")||0,c=g("popoverOffset")||0;return{width:n.width+s+c,height:n.height+s+c,realWidth:n.width,realHeight:n.height}}function et(r,n){const{elementDimensions:s,popoverDimensions:c,popoverPadding:i,popoverArrowDimensions:h}=n;return r==="start"?Math.max(Math.min(s.top-i,window.innerHeight-c.realHeight-h.width),h.width):r==="end"?Math.max(Math.min(s.top-(c==null?void 0:c.realHeight)+s.height+i,window.innerHeight-(c==null?void 0:c.realHeight)-h.width),h.width):r==="center"?Math.max(Math.min(s.top+s.height/2-(c==null?void 0:c.realHeight)/2,window.innerHeight-(c==null?void 0:c.realHeight)-h.width),h.width):0}function tt(r,n){const{elementDimensions:s,popoverDimensions:c,popoverPadding:i,popoverArrowDimensions:h}=n;return r==="start"?Math.max(Math.min(s.left-i,window.innerWidth-c.realWidth-h.width),h.width):r==="end"?Math.max(Math.min(s.left-(c==null?void 0:c.realWidth)+s.width+i,window.innerWidth-(c==null?void 0:c.realWidth)-h.width),h.width):r==="center"?Math.max(Math.min(s.left+s.width/2-(c==null?void 0:c.realWidth)/2,window.innerWidth-(c==null?void 0:c.realWidth)-h.width),h.width):0}function xt(r,n){const s=y("popover");if(!s)return;const{align:c="start",side:i="left"}=(n==null?void 0:n.popover)||{},h=c,f=r.id==="driver-dummy-element"?"over":i,w=g("stagePadding")||0,d=gt(),S=s.arrow.getBoundingClientRect(),N=r.getBoundingClientRect(),T=N.top-d.height;let u=T>=0;const p=window.innerHeight-(N.bottom+d.height);let x=p>=0;const E=N.left-d.width;let o=E>=0;const b=window.innerWidth-(N.right+d.width);let $=b>=0;const _=!u&&!x&&!o&&!$;let H=f;if(f==="top"&&u?$=o=x=!1:f==="bottom"&&x?$=o=u=!1:f==="left"&&o?$=u=x=!1:f==="right"&&$&&(o=u=x=!1),f==="over"){const B=window.innerWidth/2-d.realWidth/2,D=window.innerHeight/2-d.realHeight/2;s.wrapper.style.left=`${B}px`,s.wrapper.style.right="auto",s.wrapper.style.top=`${D}px`,s.wrapper.style.bottom="auto"}else if(_){const B=window.innerWidth/2-(d==null?void 0:d.realWidth)/2,D=10;s.wrapper.style.left=`${B}px`,s.wrapper.style.right="auto",s.wrapper.style.bottom=`${D}px`,s.wrapper.style.top="auto"}else if(o){const B=Math.min(E,window.innerWidth-(d==null?void 0:d.realWidth)-S.width),D=et(h,{elementDimensions:N,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:S});s.wrapper.style.left=`${B}px`,s.wrapper.style.top=`${D}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",H="left"}else if($){const B=Math.min(b,window.innerWidth-(d==null?void 0:d.realWidth)-S.width),D=et(h,{elementDimensions:N,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:S});s.wrapper.style.right=`${B}px`,s.wrapper.style.top=`${D}px`,s.wrapper.style.bottom="auto",s.wrapper.style.left="auto",H="right"}else if(u){const B=Math.min(T,window.innerHeight-d.realHeight-S.width);let D=tt(h,{elementDimensions:N,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:S});s.wrapper.style.top=`${B}px`,s.wrapper.style.left=`${D}px`,s.wrapper.style.bottom="auto",s.wrapper.style.right="auto",H="top"}else if(x){const B=Math.min(p,window.innerHeight-(d==null?void 0:d.realHeight)-S.width);let D=tt(h,{elementDimensions:N,popoverDimensions:d,popoverPadding:w,popoverArrowDimensions:S});s.wrapper.style.left=`${D}px`,s.wrapper.style.bottom=`${B}px`,s.wrapper.style.top="auto",s.wrapper.style.right="auto",H="bottom"}_?s.arrow.classList.add("driver-popover-arrow-none"):dr(h,H,r)}function dr(r,n,s){const c=y("popover");if(!c)return;const i=s.getBoundingClientRect(),h=gt(),f=c.arrow,w=h.width,d=window.innerWidth,S=i.width,N=i.left,T=h.height,u=window.innerHeight,p=i.top,x=i.height;f.className="driver-popover-arrow";let E=n,o=r;if(n==="top"?(N+S<=0?(E="right",o="end"):N+S-w<=0&&(E="top",o="start"),N>=d?(E="left",o="end"):N+w>=d&&(E="top",o="end")):n==="bottom"?(N+S<=0?(E="right",o="start"):N+S-w<=0&&(E="bottom",o="start"),N>=d?(E="left",o="start"):N+w>=d&&(E="bottom",o="end")):n==="left"?(p+x<=0?(E="bottom",o="end"):p+x-T<=0&&(E="left",o="start"),p>=u?(E="top",o="end"):p+T>=u&&(E="left",o="end")):n==="right"&&(p+x<=0?(E="bottom",o="start"):p+x-T<=0&&(E="right",o="start"),p>=u?(E="top",o="start"):p+T>=u&&(E="right",o="end")),!E)f.classList.add("driver-popover-arrow-none");else{f.classList.add(`driver-popover-arrow-side-${E}`),f.classList.add(`driver-popover-arrow-align-${o}`);const b=s.getBoundingClientRect(),$=f.getBoundingClientRect(),_=g("stagePadding")||0,H=b.left-_<window.innerWidth&&b.right+_>0&&b.top-_<window.innerHeight&&b.bottom+_>0;n==="bottom"&&H&&($.x>b.x&&$.x+$.width<b.x+b.width?c.wrapper.style.transform="translateY(0)":(f.classList.remove(`driver-popover-arrow-align-${o}`),f.classList.add("driver-popover-arrow-none"),c.wrapper.style.transform=`translateY(-${_/2}px)`))}}function ur(){const r=document.createElement("div");r.classList.add("driver-popover");const n=document.createElement("div");n.classList.add("driver-popover-arrow");const s=document.createElement("header");s.id="driver-popover-title",s.classList.add("driver-popover-title"),s.style.display="none",s.innerText="Popover Title";const c=document.createElement("div");c.id="driver-popover-description",c.classList.add("driver-popover-description"),c.style.display="none",c.innerText="Popover description is here";const i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";const h=document.createElement("footer");h.classList.add("driver-popover-footer");const f=document.createElement("span");f.classList.add("driver-popover-progress-text"),f.innerText="";const w=document.createElement("span");w.classList.add("driver-popover-navigation-btns");const d=document.createElement("button");d.type="button",d.classList.add("driver-popover-prev-btn"),d.innerHTML="&larr; Previous";const S=document.createElement("button");return S.type="button",S.classList.add("driver-popover-next-btn"),S.innerHTML="Next &rarr;",w.appendChild(d),w.appendChild(S),h.appendChild(f),h.appendChild(w),r.appendChild(i),r.appendChild(n),r.appendChild(s),r.appendChild(c),r.appendChild(h),{wrapper:r,arrow:n,title:s,description:c,footer:h,previousButton:d,nextButton:S,closeButton:i,footerButtons:w,progress:f}}function pr(){var r;const n=y("popover");n&&((r=n.wrapper.parentElement)==null||r.removeChild(n.wrapper))}function hr(r={}){$e(r);function n(){g("allowClose")&&N()}function s(){const u=g("overlayClickBehavior");if(g("allowClose")&&u==="close"){N();return}if(typeof u=="function"){const p=y("__activeStep"),x=y("__activeElement");u(x,p,{config:g(),state:y(),driver:te()});return}u==="nextStep"&&c()}function c(){const u=y("activeIndex"),p=g("steps")||[];if(typeof u>"u")return;const x=u+1;p[x]?S(x):N()}function i(){const u=y("activeIndex"),p=g("steps")||[];if(typeof u>"u")return;const x=u-1;p[x]?S(x):N()}function h(u){(g("steps")||[])[u]?S(u):N()}function f(){var u;if(y("__transitionCallback"))return;const p=y("activeIndex"),x=y("__activeStep"),E=y("__activeElement");if(typeof p>"u"||typeof x>"u"||typeof y("activeIndex")>"u")return;const o=((u=x.popover)==null?void 0:u.onPrevClick)||g("onPrevClick");if(o)return o(E,x,{config:g(),state:y(),driver:te()});i()}function w(){var u;if(y("__transitionCallback"))return;const p=y("activeIndex"),x=y("__activeStep"),E=y("__activeElement");if(typeof p>"u"||typeof x>"u")return;const o=((u=x.popover)==null?void 0:u.onNextClick)||g("onNextClick");if(o)return o(E,x,{config:g(),state:y(),driver:te()});c()}function d(){y("isInitialized")||(Q("isInitialized",!0),document.body.classList.add("driver-active",g("animate")?"driver-fade":"driver-simple"),ir(),ke("overlayClick",s),ke("escapePress",n),ke("arrowLeftPress",f),ke("arrowRightPress",w))}function S(u=0){var p,x,E,o,b,$,_,H;const B=g("steps");if(!B){console.error("No steps to drive through"),N();return}if(!B[u]){N();return}Q("__activeOnDestroyed",document.activeElement),Q("activeIndex",u);const D=B[u],Z=B[u+1],se=B[u-1],ce=((p=D.popover)==null?void 0:p.doneBtnText)||g("doneBtnText")||"Done",Y=g("allowClose"),re=typeof((x=D.popover)==null?void 0:x.showProgress)<"u"?(E=D.popover)==null?void 0:E.showProgress:g("showProgress"),oe=(((o=D.popover)==null?void 0:o.progressText)||g("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${B.length}`),W=((b=D.popover)==null?void 0:b.showButtons)||g("showButtons"),ne=["next","previous",...Y?["close"]:[]].filter(ge=>!(W!=null&&W.length)||W.includes(ge)),de=(($=D.popover)==null?void 0:$.onNextClick)||g("onNextClick"),ue=((_=D.popover)==null?void 0:_.onPrevClick)||g("onPrevClick"),ve=((H=D.popover)==null?void 0:H.onCloseClick)||g("onCloseClick");Ye({...D,popover:{showButtons:ne,nextBtnText:Z?void 0:ce,disableButtons:[...se?[]:["previous"]],showProgress:re,progressText:oe,onNextClick:de||(()=>{Z?S(u+1):N()}),onPrevClick:ue||(()=>{S(u-1)}),onCloseClick:ve||(()=>{N()}),...(D==null?void 0:D.popover)||{}}})}function N(u=!0){const p=y("__activeElement"),x=y("__activeStep"),E=y("__activeOnDestroyed"),o=g("onDestroyStarted");if(u&&o){const _=!p||(p==null?void 0:p.id)==="driver-dummy-element";o(_?void 0:p,x,{config:g(),state:y(),driver:te()});return}const b=(x==null?void 0:x.onDeselected)||g("onDeselected"),$=g("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),lr(),pr(),sr(),tr(),Vt(),Ge(),p&&x){const _=p.id==="driver-dummy-element";b&&b(_?void 0:p,x,{config:g(),state:y(),driver:te()}),$&&$(_?void 0:p,x,{config:g(),state:y(),driver:te()})}E&&E.focus()}const T={isActive:()=>y("isInitialized")||!1,refresh:we,drive:(u=0)=>{d(),S(u)},setConfig:$e,setSteps:u=>{Ge(),$e({...g(),steps:u})},getConfig:g,getState:y,getActiveIndex:()=>y("activeIndex"),isFirstStep:()=>y("activeIndex")===0,isLastStep:()=>{const u=g("steps")||[],p=y("activeIndex");return p!==void 0&&p===u.length-1},getActiveStep:()=>y("activeStep"),getActiveElement:()=>y("activeElement"),getPreviousElement:()=>y("previousElement"),getPreviousStep:()=>y("previousStep"),moveNext:c,movePrevious:i,moveTo:h,hasNextStep:()=>{const u=g("steps")||[],p=y("activeIndex");return p!==void 0&&!!u[p+1]},hasPreviousStep:()=>{const u=g("steps")||[],p=y("activeIndex");return p!==void 0&&!!u[p-1]},highlight:u=>{d(),Ye({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{N(!1)}};return qt(T),T}function mr(){const r=()=>{hr({showProgress:!0,steps:[{element:"#diff-mode",popover:{title:"Solo Diferencias",description:"Activa este interruptor para ver solo los productos que tienen diferencias entre el stock f칤sico y el del sistema.",side:"bottom",align:"start"}},{element:'[role="tablist"]',popover:{title:"Pesta침as de Estado",description:'Navega entre "Pendientes" y "Controlados" para organizar tu trabajo.',side:"bottom",align:"start"}},{element:".bg-card.relative",popover:{title:"Acciones R치pidas",description:"Desliza a la derecha para Confirmar/Editar o a la izquierda para reportar Diferencia/Revertir.",side:"top",align:"start"}},{element:"button:has(.lucide-save)",popover:{title:"Finalizar Inventario",description:"Cuando termines, guarda el estado del inventario aqu칤.",side:"left",align:"start"}}]}).drive()};return L.useEffect(()=>{localStorage.getItem("has_seen_inventory_tour")||setTimeout(()=>{r(),localStorage.setItem("has_seen_inventory_tour","true")},1e3)},[]),e.jsx(U,{variant:"ghost",size:"icon",onClick:r,title:"Ver Tutorial",children:e.jsx(Ht,{className:"w-5 h-5"})})}const Fe=["Medicamentos","Perfumer칤a","Accesorios","Varios"];function Tr(){const{id:r}=bt(),n=jt(),[s,c]=L.useState(!1),[i,h]=L.useState(!1),[f,w]=L.useState([]),[d,S]=L.useState(""),[N,T]=L.useState(""),[u,p]=L.useState(!1),[x,E]=L.useState(Fe[0]),{user:o}=Et(),b=(o==null?void 0:o.branchName)||"Sucursal Desconocida",[$,_]=L.useState(!1),[H,B]=L.useState(""),[D,Z]=L.useState(""),[se,ce]=L.useState([]);L.useEffect(()=>{b&&d&&pe.getAdjustmentHistory(b,d).then(ce)},[b,d]),L.useEffect(()=>{r&&S(decodeURIComponent(r))},[r]),L.useEffect(()=>{d&&b!=="Sucursal Desconocida"&&(async()=>{c(!0);try{const m=await pe.getLabInventory(b,d);m&&m.length>0&&w(m)}catch(m){console.error("Failed to load inventory:",m),G.error("Error al cargar el inventario desde la nube.")}finally{c(!1)}})()},[d,b]),L.useEffect(()=>{if(f.length===0||!d||b==="Sucursal Desconocida")return;const l=setTimeout(()=>{pe.saveInventory(b,d,f).then(()=>console.log("Auto-saved")).catch(m=>console.error("Auto-save error",m))},2e3);return()=>clearTimeout(l)},[f,b,d]);const Y=L.useMemo(()=>f.filter(l=>{if(N){const m=N.toLowerCase();if(!l.name.toLowerCase().includes(m)&&!l.ean.includes(m))return!1}return u?l.countedQuantity!==l.systemQuantity:!0}),[f,N,u]),re=L.useMemo(()=>Y.filter(l=>l.status==="pending"&&(l.category===x||!l.category&&x==="Varios")),[Y,x]),oe=l=>[...l].sort((m,v)=>{const j=m.countedQuantity-m.systemQuantity,k=v.countedQuantity-v.systemQuantity,I=j!==0,R=k!==0;return I&&!R?-1:!I&&R?1:j-k}),W=L.useMemo(()=>oe(Y.filter(l=>l.status==="controlled")),[Y]),ne=L.useMemo(()=>oe(Y.filter(l=>l.status==="adjusted")),[Y]);L.useMemo(()=>{let l=0,m=0,v=0;return f.forEach(j=>{const k=j.countedQuantity-j.systemQuantity,I=k*j.cost;k<0?l+=I:k>0&&(m+=I),v+=I}),{negative:l,positive:m,net:v}},[f]);const de=async l=>{var j;const m=(j=l.target.files)==null?void 0:j[0];if(!m)return;c(!0);const v=new FileReader;v.onload=k=>{var I,R;try{const F=(I=k.target)==null?void 0:I.result,z=Dt(F,{type:"binary"}),A=z.SheetNames[0],q=z.Sheets[A],X=Tt.sheet_to_json(q,{header:1}),O=[...f],J=new Map;O.forEach((ie,V)=>{J.set(String(ie.ean).trim(),V)});let ae=0,K=0,be=0;for(let ie=1;ie<X.length;ie++){const V=X[ie];if(!V||!V[3])continue;const xe=V[2];if(!xe)continue;const fe=String(xe).trim();if(!fe)continue;let ee=(R=V[9])==null?void 0:R.toString().trim();if(ee&&(ee==="Medicamento"&&(ee="Medicamentos"),ee==="Perfumeria"&&(ee="Perfumer칤a")),(!ee||!Fe.includes(ee))&&(ee="Varios"),J.has(fe)){const je=J.get(fe),Ce=O[je];Ce.status==="adjusted"?be++:(O[je]={...Ce,name:V[3],systemQuantity:Number(V[4])||0,countedQuantity:Number(V[4])||0,cost:Number(V[12])||0,category:ee},K++);continue}O.push({id:crypto.randomUUID(),ean:fe,name:V[3],systemQuantity:Number(V[4])||0,countedQuantity:Number(V[4])||0,cost:Number(V[12])||0,status:"pending",category:ee,wasReadjusted:!1}),ae++}w(O),pe.saveInventory(b,d,O).then(()=>console.log("Auto-save after upload success")).catch(ie=>console.error("Auto-save failed",ie)),ae>0||K>0?G.success(`Carga exitosa: ${ae} nuevos, ${K} actualizados.`):G.info(`Sin cambios: ${be} productos ya estaban ajustados.`)}catch(F){console.error("Error reading file:",F),G.error("Error al procesar el archivo Excel.")}finally{c(!1),l.target.value=""}},v.readAsBinaryString(m)},ue=L.useCallback((l,m)=>{w(v=>v.map(j=>{if(j.id===l){m-j.systemQuantity!==0&&navigator.vibrate?navigator.vibrate([50,50,50]):navigator.vibrate&&navigator.vibrate(50);const I=j.status==="adjusted";return{...j,countedQuantity:m,status:j.status==="adjusted"?"adjusted":"controlled",wasReadjusted:I?!0:j.wasReadjusted}}return j}))},[]),ve=L.useCallback(l=>{navigator.vibrate&&navigator.vibrate(50),Qt({particleCount:100,spread:70,origin:{y:.6}}),w(m=>m.map(v=>v.id===l?{...v,status:"controlled",countedQuantity:v.systemQuantity}:v)),G.success("Producto controlado")},[]),ge=L.useCallback(l=>{w(m=>m.map(v=>v.id===l?{...v,status:"pending"}:v)),G.info("Producto devuelto a pendientes")},[]),_e=async()=>{h(!0);try{await pe.saveInventory(b,d,f),G.success("Progreso guardado en la nube.")}catch(l){console.error("Error saving progress:",l),G.error("Error al guardar el progreso.")}finally{h(!1)}},a=async()=>{const l=W.filter(k=>k.countedQuantity<k.systemQuantity),m=W.filter(k=>k.countedQuantity>k.systemQuantity),v=l.length>0,j=m.length>0;if(v&&!H.trim()){G.error("Por favor ingresa el ID de ajuste para Faltantes");return}if(j&&!D.trim()){G.error("Por favor ingresa el ID de ajuste para Sobrantes");return}h(!0);try{const k=f.map(I=>I.status==="controlled"?{...I,status:"adjusted"}:I);w(k),await pe.saveInventory(b,d,k),await pe.saveAdjustmentHistory(b,d,{adjustment_id_shortage:H,adjustment_id_surplus:D,shortage_value:C,surplus_value:M,total_units_adjusted:W.length,user_name:o==null?void 0:o.name}),G.success("Inventario finalizado y guardado en la nube."),_(!1),B(""),Z(""),n("/cyclic-inventory")}catch(k){console.error("Error saving inventory:",k),G.error("Error al guardar en la nube.")}finally{h(!1)}},t=async()=>{await _e(),_(!0)},C=W.filter(l=>l.countedQuantity<l.systemQuantity).reduce((l,m)=>l+(m.systemQuantity-m.countedQuantity)*m.cost,0),M=W.filter(l=>l.countedQuantity>l.systemQuantity).reduce((l,m)=>l+(m.countedQuantity-m.systemQuantity)*m.cost,0),P=async()=>{if(confirm("쮼st치s seguro de que quieres reiniciar los datos de este laboratorio? Se borrar치n de la nube."))try{await pe.deleteInventory(b,d),w([]),G.success("Datos reiniciados correctamente."),n("/cyclic-inventory")}catch(l){console.error("Error resetting data:",l),G.error("Error al reiniciar datos.")}};return e.jsxs("div",{className:"p-4 md:p-6 space-y-6 max-w-7xl mx-auto pb-32 lg:pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{variant:"ghost",size:"icon",onClick:()=>n("/cyclic-inventory"),children:e.jsx(zt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:d}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Control de Inventario C칤clico"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(mr,{})})]}),s?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(Be,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Cargando inventario desde la nube..."})]}):e.jsx(e.Fragment,{children:f.length===0?e.jsxs(he,{className:"p-12 border-dashed border-2 flex flex-col items-center justify-center text-center space-y-4 bg-muted/20",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx(qe,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cargar Archivo de Inventario"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:["Sube el archivo Excel (.xlsx) descargado del sistema para comenzar el control de ",d,"."]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{disabled:s,children:s?"Procesando...":"Seleccionar Archivo"}),e.jsx(ye,{type:"file",accept:".xlsx, .xls",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:de,disabled:s})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Columnas requeridas: C (EAN), D (Producto), E (Cantidad), O (Laboratorio), J (Rubro)"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(he,{className:"p-4 flex flex-col items-center justify-center bg-warning/5 border-warning/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Pendientes"}),e.jsx("span",{className:"text-2xl font-bold text-warning",children:e.jsx(Se,{value:f.filter(l=>l.status==="pending").length})})]}),e.jsxs(he,{className:"p-4 flex flex-col items-center justify-center bg-success/5 border-success/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Controlados"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:e.jsx(Se,{value:f.filter(l=>l.status==="controlled").length})})]}),e.jsxs(he,{className:"p-4 flex flex-col items-center justify-center bg-blue-500/5 border-blue-500/20",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Ajustados"}),e.jsx("span",{className:"text-2xl font-bold text-blue-500",children:e.jsx(Se,{value:f.filter(l=>l.status==="adjusted").length})})]}),e.jsxs(he,{className:"p-4 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase font-bold",children:"Avance"}),e.jsxs("span",{className:"text-2xl font-bold",children:[e.jsx(Se,{value:Math.round(f.filter(l=>l.status==="controlled"||l.status==="adjusted").length/f.length*100)}),"%"]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(ye,{placeholder:"Buscar por nombre o EAN...",value:N,onChange:l=>T(l.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-card p-2 rounded-lg border",children:[e.jsx(Ft,{id:"diff-mode",checked:u,onCheckedChange:p}),e.jsx(Te,{htmlFor:"diff-mode",className:"cursor-pointer",children:"Solo Diferencias"})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{var l;return(l=document.getElementById("header-upload-input"))==null?void 0:l.click()},children:[e.jsx(qe,{className:"w-4 h-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Cargar Excel"})]}),e.jsx("input",{id:"header-upload-input",type:"file",accept:".xlsx, .xls",className:"hidden",onChange:de,disabled:s})]}),e.jsxs(U,{variant:"destructive",size:"sm",onClick:P,children:[e.jsx(He,{className:"w-4 h-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Reiniciar"})]}),e.jsxs(U,{variant:"default",size:"sm",onClick:t,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",disabled:i,children:[i?e.jsx(Be,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Finalizar Inventario"]})]})]}),e.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:e.jsx("div",{className:"flex gap-2",children:Fe.map(l=>e.jsx(U,{variant:x===l?"default":"outline",onClick:()=>E(l),className:le("rounded-full px-6 transition-all",x===l?"shadow-md":"opacity-70 hover:opacity-100"),children:l},l))})}),e.jsxs(_t,{defaultValue:"pending",className:"w-full",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(Ne,{value:"pending",className:"relative",children:["Pendientes (",x,")",re.length>0&&e.jsx("span",{className:"ml-2 bg-warning text-warning-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:re.length})]}),e.jsxs(Ne,{value:"controlled",children:["Controlados",W.length>0&&e.jsx("span",{className:"ml-2 bg-success text-success-foreground text-[10px] px-1.5 py-0.5 rounded-full",children:W.length})]}),e.jsxs(Ne,{value:"adjusted",children:["Ajustados",ne.length>0&&e.jsx("span",{className:"ml-2 bg-blue-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:ne.length})]}),e.jsx(Ne,{value:"history",children:"Historial"})]}),e.jsxs(Me,{value:"pending",className:"space-y-4",children:[e.jsxs(ot,{className:"bg-muted/50 border-none mb-4",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx(it,{children:"Instrucciones"}),e.jsx(lt,{children:"Desliza a la derecha para confirmar (verde) o a la izquierda para reportar diferencia (naranja)."})]}),e.jsx(Re,{items:re,onUpdateQuantity:ue,onCheck:ve})]}),e.jsx(Me,{value:"controlled",className:"space-y-4",children:e.jsx(Re,{items:W,onUpdateQuantity:ue,onCheck:ve,onRevert:ge,readOnly:!1})}),e.jsx(Me,{value:"adjusted",className:"space-y-4",children:e.jsx(Re,{items:ne,onUpdateQuantity:ue,onCheck:()=>{},readOnly:!1})}),e.jsx(Me,{value:"history",className:"space-y-4",children:se.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-lg border-dashed border-2",children:"No hay historial de ajustes para este laboratorio."}):e.jsx("div",{className:"space-y-4",children:se.map(l=>e.jsxs(he,{className:"p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-primary",children:[new Date(l.created_at).toLocaleDateString()," ",new Date(l.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Por: ",l.user_name||"Desconocido"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:[l.total_units_adjusted," items"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[e.jsxs("div",{className:"bg-destructive/10 p-2 rounded border border-destructive/20",children:[e.jsx("span",{className:"font-semibold text-destructive block",children:"Faltantes"}),"ID: ",l.adjustment_id_shortage||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(l.shortage_value).toLocaleString()]})]}),e.jsxs("div",{className:"bg-success/10 p-2 rounded border border-success/20",children:[e.jsx("span",{className:"font-semibold text-success block",children:"Sobrantes"}),"ID: ",l.adjustment_id_surplus||"-",e.jsxs("div",{className:"font-mono mt-1",children:["$",Number(l.surplus_value).toLocaleString()]})]})]})]},l.id))})})]})]})]})}),e.jsx(rt,{open:$,onOpenChange:_,children:e.jsxs(nt,{children:[e.jsxs(at,{children:[e.jsx(st,{children:"Finalizar Inventario"}),e.jsx(At,{children:"Ingresa el ID del ajuste generado en PLEX para guardar el estado de este inventario."})]}),e.jsxs("div",{className:"py-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-destructive/5 rounded-lg border border-destructive/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Te,{className:"text-destructive font-bold",children:"Faltantes (Negativos)"}),e.jsxs("span",{className:"font-mono font-bold text-destructive",children:["$",C.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(ye,{value:H,onChange:l=>B(l.target.value),placeholder:"ID Ajuste Faltantes (PLEX)"})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-success/5 rounded-lg border border-success/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Te,{className:"text-success font-bold",children:"Sobrantes (Positivos)"}),e.jsxs("span",{className:"font-mono font-bold text-success",children:["$",M.toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),e.jsx(ye,{value:D,onChange:l=>Z(l.target.value),placeholder:"ID Ajuste Sobrantes (PLEX)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(U,{variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),e.jsxs(U,{onClick:a,disabled:i,children:[i?e.jsx(Be,{className:"w-4 h-4 animate-spin mr-2"}):null,"Confirmar y Finalizar"]})]})]})})]})}export{Tr as default};
