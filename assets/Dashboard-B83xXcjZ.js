import{j as n,O as Es,a as Ts,k as ks,b as Is,c as Ms,D as As,d as Os,e as Ps,l as xr,m as zs,n as vr,o as br,p as Ls,q as yr,V as $s,L as wr,r as jr,s as Bs,v as Us,w as Nr,x as Fs,y as Ws}from"./ui-vendor-lsEhpTbO.js";import{r as l,c as N,a as ht}from"./react-vendor-ylmX0jv_.js";import{c as he,T as Vs,a as Hs,b as _s,C as Sr,d as gt,e as Cr,f as re,B as ae,X as qs,g as se,h as ge,i as xe,j as Ys,k as ve,u as Mn,S as Gs,l as Xs,m as xt,U as Dr,n as Rr,W as Ks,R as Zs,D as Js,o as Qs,I as ea,p as ta,s as rn,q as xn,r as vn,t as bn,v as yn,w as na,x as ra,y as Ke,z as sa}from"./index-EscPRQb9.js";import{s as aa,e as oa,a as ia,b as la,g as ca,f as _n,i as da,h as qn,j as ua,k as fa}from"./utils-CUsTgaRG.js";import{C as ma,a as ha,M as pa,A as Yn,P as Er}from"./progress-BF9nBihR.js";import{e as Pt,C as wn,E as ga}from"./es-DbQY71O9.js";import{D as Ft}from"./dollar-sign-gciDyGul.js";import{T as tt}from"./trending-up-i5k_cbeA.js";import{C as Dt}from"./clock-DJ2AHa3J.js";import{T as Tr}from"./target-DLvH5fVX.js";import{W as kr}from"./wifi-DySuAnLE.js";import{P as et}from"./plus-b64OZRbL.js";import{T as An}from"./trending-down-CgOmLYPI.js";import{C as Ir}from"./CounterAnimation-GIE2m9HH.js";import{A as sn}from"./AnimatedProgressBar-ByB7sYzF.js";import{I as Wt}from"./input-C4QXMYmi.js";import{T as xa,a as va,b as an,c as Ve,d as ba,e as ie}from"./table-CSxX5mre.js";import{B as Te}from"./badge-Co13y8SM.js";import{m as vt}from"./animation-DZFErbwn.js";import{R as Mr,L as ya,C as wa,X as ja,Y as Na,T as Ar,a as Sa,b as Gn,P as Ca,c as Da,d as Ra}from"./chart-vendor-Cu80epCr.js";import{L as Ze}from"./label-BEQd8YTI.js";import{C as Ea}from"./check-BTRlk5E8.js";import{L as Ta}from"./loader-circle-Dwl-9dWt.js";import"./excel-uoQkVabA.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=he("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=he("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=he("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=he("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=he("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=he("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=he("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Wa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const Yt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function On(e){return"nodeType"in e}function je(e){var t,r;return e?nt(e)?e:On(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Pn(e){const{Document:t}=je(e);return e instanceof t}function Rt(e){return nt(e)?!1:e instanceof je(e).HTMLElement}function $r(e){return e instanceof je(e).SVGElement}function rt(e){return e?nt(e)?e.document:On(e)?Pn(e)?e:Rt(e)||$r(e)?e.ownerDocument:document:document:document}const Le=Yt?l.useLayoutEffect:l.useEffect;function zn(e){const t=l.useRef(e);return Le(()=>{t.current=e}),l.useCallback(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function Va(){const e=l.useRef(null),t=l.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),r=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function jt(e,t){t===void 0&&(t=[e]);const r=l.useRef(e);return Le(()=>{r.current!==e&&(r.current=e)},t),r}function Et(e,t){const r=l.useRef();return l.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function Vt(e){const t=zn(e),r=l.useRef(null),s=l.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,s]}function jn(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let on={};function Tt(e,t){return l.useMemo(()=>{if(t)return t;const r=on[e]==null?0:on[e]+1;return on[e]=r,e+"-"+r},[e,t])}function Br(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((o,i)=>{const c=Object.entries(i);for(const[u,m]of c){const f=o[u];f!=null&&(o[u]=f+e*m)}return o},{...t})}}const Qe=Br(1),Nt=Br(-1);function Ha(e){return"clientX"in e&&"clientY"in e}function Ln(e){if(!e)return!1;const{KeyboardEvent:t}=je(e.target);return t&&e instanceof t}function _a(e){if(!e)return!1;const{TouchEvent:t}=je(e.target);return t&&e instanceof t}function Nn(e){if(_a(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Ha(e)?{x:e.clientX,y:e.clientY}:null}const St=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[St.Translate.toString(e),St.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),Kn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qa(e){return e.matches(Kn)?e:e.querySelector(Kn)}const Ya={display:"none"};function Ga(e){let{id:t,value:r}=e;return N.createElement("div",{id:t,style:Ya},r)}function Xa(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return N.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},r)}function Ka(){const[e,t]=l.useState("");return{announce:l.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const Ur=l.createContext(null);function Za(e){const t=l.useContext(Ur);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ja(){const[e]=l.useState(()=>new Set),t=l.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[l.useCallback(s=>{let{type:a,event:o}=s;e.forEach(i=>{var c;return(c=i[a])==null?void 0:c.call(i,o)})},[e]),t]}const Qa={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function to(e){let{announcements:t=eo,container:r,hiddenTextDescribedById:s,screenReaderInstructions:a=Qa}=e;const{announce:o,announcement:i}=Ka(),c=Tt("DndLiveRegion"),[u,m]=l.useState(!1);if(l.useEffect(()=>{m(!0)},[]),Za(l.useMemo(()=>({onDragStart(d){let{active:p}=d;o(t.onDragStart({active:p}))},onDragMove(d){let{active:p,over:g}=d;t.onDragMove&&o(t.onDragMove({active:p,over:g}))},onDragOver(d){let{active:p,over:g}=d;o(t.onDragOver({active:p,over:g}))},onDragEnd(d){let{active:p,over:g}=d;o(t.onDragEnd({active:p,over:g}))},onDragCancel(d){let{active:p,over:g}=d;o(t.onDragCancel({active:p,over:g}))}}),[o,t])),!u)return null;const f=N.createElement(N.Fragment,null,N.createElement(Ga,{id:s,value:a.draggable}),N.createElement(Xa,{id:c,announcement:i}));return r?ht.createPortal(f,r):f}var de;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(de||(de={}));function Ht(){}function Zn(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function no(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Ae=Object.freeze({x:0,y:0});function Fr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Wr(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function ro(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function Jn(e){let{left:t,top:r,height:s,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+s},{x:t+a,y:r+s}]}function Vr(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Qn(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const so=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=Qn(t,t.left,t.top),o=[];for(const i of s){const{id:c}=i,u=r.get(c);if(u){const m=Fr(Qn(u),a);o.push({id:c,data:{droppableContainer:i,value:m}})}}return o.sort(Wr)},ao=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=Jn(t),o=[];for(const i of s){const{id:c}=i,u=r.get(c);if(u){const m=Jn(u),f=a.reduce((p,g,y)=>p+Fr(m[y],g),0),d=Number((f/4).toFixed(4));o.push({id:c,data:{droppableContainer:i,value:d}})}}return o.sort(Wr)};function oo(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=a-s,c=o-r;if(s<a&&r<o){const u=t.width*t.height,m=e.width*e.height,f=i*c,d=f/(u+m-f);return Number(d.toFixed(4))}return 0}const io=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=[];for(const o of s){const{id:i}=o,c=r.get(i);if(c){const u=oo(c,t);u>0&&a.push({id:i,data:{droppableContainer:o,value:u}})}}return a.sort(ro)};function lo(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function Hr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ae}function co(e){return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((i,c)=>({...i,top:i.top+e*c.y,bottom:i.bottom+e*c.y,left:i.left+e*c.x,right:i.right+e*c.x}),{...r})}}const uo=co(1);function fo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function mo(e,t,r){const s=fo(t);if(!s)return e;const{scaleX:a,scaleY:o,x:i,y:c}=s,u=e.left-i-(1-a)*parseFloat(r),m=e.top-c-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),f=a?e.width/a:e.width,d=o?e.height/o:e.height;return{width:f,height:d,top:m,right:u+f,bottom:m+d,left:u}}const ho={ignoreTransform:!1};function st(e,t){t===void 0&&(t=ho);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:m,transformOrigin:f}=je(e).getComputedStyle(e);m&&(r=mo(r,m,f))}const{top:s,left:a,width:o,height:i,bottom:c,right:u}=r;return{top:s,left:a,width:o,height:i,bottom:c,right:u}}function er(e){return st(e,{ignoreTransform:!0})}function po(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function go(e,t){return t===void 0&&(t=je(e).getComputedStyle(e)),t.position==="fixed"}function xo(e,t){t===void 0&&(t=je(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?r.test(o):!1})}function Gt(e,t){const r=[];function s(a){if(t!=null&&r.length>=t||!a)return r;if(Pn(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Rt(a)||$r(a)||r.includes(a))return r;const o=je(e).getComputedStyle(a);return a!==e&&xo(a,o)&&r.push(a),go(a,o)?r:s(a.parentNode)}return e?s(e):r}function _r(e){const[t]=Gt(e,1);return t??null}function ln(e){return!Yt||!e?null:nt(e)?e:On(e)?Pn(e)||e===rt(e).scrollingElement?window:Rt(e)?e:null:null}function qr(e){return nt(e)?e.scrollX:e.scrollLeft}function Yr(e){return nt(e)?e.scrollY:e.scrollTop}function Sn(e){return{x:qr(e),y:Yr(e)}}var ue;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ue||(ue={}));function Gr(e){return!Yt||!e?!1:e===document.scrollingElement}function Xr(e){const t={x:0,y:0},r=Gr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:i,isRight:c,maxScroll:s,minScroll:t}}const vo={x:.2,y:.2};function bo(e,t,r,s,a){let{top:o,left:i,right:c,bottom:u}=r;s===void 0&&(s=10),a===void 0&&(a=vo);const{isTop:m,isBottom:f,isLeft:d,isRight:p}=Xr(e),g={x:0,y:0},y={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!m&&o<=t.top+x.height?(g.y=ue.Backward,y.y=s*Math.abs((t.top+x.height-o)/x.height)):!f&&u>=t.bottom-x.height&&(g.y=ue.Forward,y.y=s*Math.abs((t.bottom-x.height-u)/x.height)),!p&&c>=t.right-x.width?(g.x=ue.Forward,y.x=s*Math.abs((t.right-x.width-c)/x.width)):!d&&i<=t.left+x.width&&(g.x=ue.Backward,y.x=s*Math.abs((t.left+x.width-i)/x.width)),{direction:g,speed:y}}function yo(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:r,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Kr(e){return e.reduce((t,r)=>Qe(t,Sn(r)),Ae)}function wo(e){return e.reduce((t,r)=>t+qr(r),0)}function jo(e){return e.reduce((t,r)=>t+Yr(r),0)}function No(e,t){if(t===void 0&&(t=st),!e)return;const{top:r,left:s,bottom:a,right:o}=t(e);_r(e)&&(a<=0||o<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const So=[["x",["left","right"],wo],["y",["top","bottom"],jo]];class $n{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Gt(r),a=Kr(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,c]of So)for(const u of i)Object.defineProperty(this,u,{get:()=>{const m=c(s),f=a[o]-m;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var a;(a=this.target)==null||a.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function Co(e){const{EventTarget:t}=je(e);return e instanceof t?e:rt(e)}function cn(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var Ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ee||(Ee={}));function tr(e){e.preventDefault()}function Do(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(L||(L={}));const Zr={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},Ro=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case L.Right:return{...r,x:r.x+25};case L.Left:return{...r,x:r.x-25};case L.Down:return{...r,y:r.y+25};case L.Up:return{...r,y:r.y-25}}};class Bn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new bt(rt(r)),this.windowListeners=new bt(je(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&No(s),r(Ae)}handleKeyDown(t){if(Ln(t)){const{active:r,context:s,options:a}=this.props,{keyboardCodes:o=Zr,coordinateGetter:i=Ro,scrollBehavior:c="smooth"}=a,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:m}=s.current,f=m?{x:m.left,y:m.top}:Ae;this.referenceCoordinates||(this.referenceCoordinates=f);const d=i(t,{active:r,context:s.current,currentCoordinates:f});if(d){const p=Nt(d,f),g={x:0,y:0},{scrollableAncestors:y}=s.current;for(const x of y){const b=t.code,{isTop:v,isRight:C,isLeft:j,isBottom:h,maxScroll:R,minScroll:T}=Xr(x),w=yo(x),E={x:Math.min(b===L.Right?w.right-w.width/2:w.right,Math.max(b===L.Right?w.left:w.left+w.width/2,d.x)),y:Math.min(b===L.Down?w.bottom-w.height/2:w.bottom,Math.max(b===L.Down?w.top:w.top+w.height/2,d.y))},k=b===L.Right&&!C||b===L.Left&&!j,z=b===L.Down&&!h||b===L.Up&&!v;if(k&&E.x!==d.x){const S=x.scrollLeft+p.x,$=b===L.Right&&S<=R.x||b===L.Left&&S>=T.x;if($&&!p.y){x.scrollTo({left:S,behavior:c});return}$?g.x=x.scrollLeft-S:g.x=b===L.Right?x.scrollLeft-R.x:x.scrollLeft-T.x,g.x&&x.scrollBy({left:-g.x,behavior:c});break}else if(z&&E.y!==d.y){const S=x.scrollTop+p.y,$=b===L.Down&&S<=R.y||b===L.Up&&S>=T.y;if($&&!p.x){x.scrollTo({top:S,behavior:c});return}$?g.y=x.scrollTop-S:g.y=b===L.Down?x.scrollTop-R.y:x.scrollTop-T.y,g.y&&x.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(t,Qe(Nt(d,this.referenceCoordinates),g))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Bn.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=Zr,onActivation:a}=t,{active:o}=r;const{code:i}=e.nativeEvent;if(s.start.includes(i)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function nr(e){return!!(e&&"distance"in e)}function rr(e){return!!(e&&"delay"in e)}class Un{constructor(t,r,s){var a;s===void 0&&(s=Co(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:i}=o;this.props=t,this.events=r,this.document=rt(i),this.documentListeners=new bt(this.document),this.listeners=new bt(s),this.windowListeners=new bt(je(i)),this.initialCoordinates=(a=Nn(o))!=null?a:Ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.DragStart,tr),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),this.windowListeners.add(Ee.ContextMenu,tr),this.documentListeners.add(Ee.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rr(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(nr(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ee.Click,Do,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ee.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:c}}=o;if(!a)return;const u=(r=Nn(t))!=null?r:Ae,m=Nt(a,u);if(!s&&c){if(nr(c)){if(c.tolerance!=null&&cn(m,c.tolerance))return this.handleCancel();if(cn(m,c.distance))return this.handleStart()}if(rr(c)&&cn(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Eo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Fn extends Un{constructor(t){const{event:r}=t,s=rt(r.target);super(t,Eo,s)}}Fn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const To={move:{name:"mousemove"},end:{name:"mouseup"}};var Cn;(function(e){e[e.RightClick=2]="RightClick"})(Cn||(Cn={}));class ko extends Un{constructor(t){super(t,To,rt(t.event.target))}}ko.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===Cn.RightClick?!1:(s==null||s({event:r}),!0)}}];const dn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Io extends Un{constructor(t){super(t,dn)}static setup(){return window.addEventListener(dn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(dn.move.name,t)};function t(){}}}Io.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:a}=r;return a.length>1?!1:(s==null||s({event:r}),!0)}}];var yt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(yt||(yt={}));var _t;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(_t||(_t={}));function Mo(e){let{acceleration:t,activator:r=yt.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:i=5,order:c=_t.TreeOrder,pointerCoordinates:u,scrollableAncestors:m,scrollableAncestorRects:f,delta:d,threshold:p}=e;const g=Oo({delta:d,disabled:!o}),[y,x]=Va(),b=l.useRef({x:0,y:0}),v=l.useRef({x:0,y:0}),C=l.useMemo(()=>{switch(r){case yt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case yt.DraggableRect:return a}},[r,a,u]),j=l.useRef(null),h=l.useCallback(()=>{const T=j.current;if(!T)return;const w=b.current.x*v.current.x,E=b.current.y*v.current.y;T.scrollBy(w,E)},[]),R=l.useMemo(()=>c===_t.TreeOrder?[...m].reverse():m,[c,m]);l.useEffect(()=>{if(!o||!m.length||!C){x();return}for(const T of R){if((s==null?void 0:s(T))===!1)continue;const w=m.indexOf(T),E=f[w];if(!E)continue;const{direction:k,speed:z}=bo(T,E,C,t,p);for(const S of["x","y"])g[S][k[S]]||(z[S]=0,k[S]=0);if(z.x>0||z.y>0){x(),j.current=T,y(h,i),b.current=z,v.current=k;return}}b.current={x:0,y:0},v.current={x:0,y:0},x()},[t,h,s,x,o,i,JSON.stringify(C),JSON.stringify(g),y,m,R,f,JSON.stringify(p)])}const Ao={x:{[ue.Backward]:!1,[ue.Forward]:!1},y:{[ue.Backward]:!1,[ue.Forward]:!1}};function Oo(e){let{delta:t,disabled:r}=e;const s=jn(t);return Et(a=>{if(r||!s||!a)return Ao;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[ue.Backward]:a.x[ue.Backward]||o.x===-1,[ue.Forward]:a.x[ue.Forward]||o.x===1},y:{[ue.Backward]:a.y[ue.Backward]||o.y===-1,[ue.Forward]:a.y[ue.Forward]||o.y===1}}},[r,t,s])}function Po(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return Et(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function zo(e,t){return l.useMemo(()=>e.reduce((r,s)=>{const{sensor:a}=s,o=a.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,s)}));return[...r,...o]},[]),[e,t])}var Ct;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ct||(Ct={}));var Dn;(function(e){e.Optimized="optimized"})(Dn||(Dn={}));const sr=new Map;function Lo(e,t){let{dragging:r,dependencies:s,config:a}=t;const[o,i]=l.useState(null),{frequency:c,measure:u,strategy:m}=a,f=l.useRef(e),d=b(),p=jt(d),g=l.useCallback(function(v){v===void 0&&(v=[]),!p.current&&i(C=>C===null?v:C.concat(v.filter(j=>!C.includes(j))))},[p]),y=l.useRef(null),x=Et(v=>{if(d&&!r)return sr;if(!v||v===sr||f.current!==e||o!=null){const C=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){C.set(j.id,j.rect.current);continue}const h=j.node.current,R=h?new $n(u(h),h):null;j.rect.current=R,R&&C.set(j.id,R)}return C}return v},[e,o,r,d,u]);return l.useEffect(()=>{f.current=e},[e]),l.useEffect(()=>{d||g()},[r,d]),l.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),l.useEffect(()=>{d||typeof c!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},c))},[c,d,g,...s]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:o!=null};function b(){switch(m){case Ct.Always:return!1;case Ct.BeforeDragging:return r;default:return!r}}}function Jr(e,t){return Et(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function $o(e,t){return Jr(e,t)}function Bo(e){let{callback:t,disabled:r}=e;const s=zn(t),a=l.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,r]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Xt(e){let{callback:t,disabled:r}=e;const s=zn(t),a=l.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[r]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Uo(e){return new $n(st(e),e)}function ar(e,t,r){t===void 0&&(t=Uo);const[s,a]=l.useState(null);function o(){a(u=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=u??r)!=null?m:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const i=Bo({callback(u){if(e)for(const m of u){const{type:f,target:d}=m;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){o();break}}}}),c=Xt({callback:o});return Le(()=>{o(),e?(c==null||c.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),i==null||i.disconnect())},[e]),s}function Fo(e){const t=Jr(e);return Hr(e,t)}const or=[];function Wo(e){const t=l.useRef(e),r=Et(s=>e?s&&s!==or&&e&&t.current&&e.parentNode===t.current.parentNode?s:Gt(e):or,[e]);return l.useEffect(()=>{t.current=e},[e]),r}function Vo(e){const[t,r]=l.useState(null),s=l.useRef(e),a=l.useCallback(o=>{const i=ln(o.target);i&&r(c=>c?(c.set(i,Sn(i)),new Map(c)):null)},[]);return l.useEffect(()=>{const o=s.current;if(e!==o){i(o);const c=e.map(u=>{const m=ln(u);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,Sn(m)]):null}).filter(u=>u!=null);r(c.length?new Map(c):null),s.current=e}return()=>{i(e),i(o)};function i(c){c.forEach(u=>{const m=ln(u);m==null||m.removeEventListener("scroll",a)})}},[a,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>Qe(o,i),Ae):Kr(e):Ae,[e,t])}function ir(e,t){t===void 0&&(t=[]);const r=l.useRef(null);return l.useEffect(()=>{r.current=null},t),l.useEffect(()=>{const s=e!==Ae;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?Nt(e,r.current):Ae}function Ho(e){l.useEffect(()=>{if(!Yt)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function _o(e,t){return l.useMemo(()=>e.reduce((r,s)=>{let{eventName:a,handler:o}=s;return r[a]=i=>{o(i,t)},r},{}),[e,t])}function Qr(e){return l.useMemo(()=>e?po(e):null,[e])}const lr=[];function qo(e,t){t===void 0&&(t=st);const[r]=e,s=Qr(r?je(r):null),[a,o]=l.useState(lr);function i(){o(()=>e.length?e.map(u=>Gr(u)?s:new $n(t(u),u)):lr)}const c=Xt({callback:i});return Le(()=>{c==null||c.disconnect(),i(),e.forEach(u=>c==null?void 0:c.observe(u))},[e]),a}function Yo(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Rt(t)?t:e}function Go(e){let{measure:t}=e;const[r,s]=l.useState(null),a=l.useCallback(m=>{for(const{target:f}of m)if(Rt(f)){s(d=>{const p=t(f);return d?{...d,width:p.width,height:p.height}:p});break}},[t]),o=Xt({callback:a}),i=l.useCallback(m=>{const f=Yo(m);o==null||o.disconnect(),f&&(o==null||o.observe(f)),s(f?t(f):null)},[t,o]),[c,u]=Vt(i);return l.useMemo(()=>({nodeRef:c,rect:r,setRef:u}),[r,c,u])}const Xo=[{sensor:Fn,options:{}},{sensor:Bn,options:{}}],Ko={current:{}},Ut={draggable:{measure:er},droppable:{measure:er,strategy:Ct.WhileDragging,frequency:Dn.Optimized},dragOverlay:{measure:st}};class wt extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const Zo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ht},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ut,measureDroppableContainers:Ht,windowRect:null,measuringScheduled:!1},Jo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ht,draggableNodes:new Map,over:null,measureDroppableContainers:Ht},Kt=l.createContext(Jo),es=l.createContext(Zo);function Qo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wt}}}function ei(e,t){switch(t.type){case de.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case de.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case de.DragEnd:case de.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case de.RegisterDroppable:{const{element:r}=t,{id:s}=r,a=new wt(e.droppable.containers);return a.set(s,r),{...e,droppable:{...e.droppable,containers:a}}}case de.SetDroppableDisabled:{const{id:r,key:s,disabled:a}=t,o=e.droppable.containers.get(r);if(!o||s!==o.key)return e;const i=new wt(e.droppable.containers);return i.set(r,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case de.UnregisterDroppable:{const{id:r,key:s}=t,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const o=new wt(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function ti(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:a}=l.useContext(Kt),o=jn(s),i=jn(r==null?void 0:r.id);return l.useEffect(()=>{if(!t&&!s&&o&&i!=null){if(!Ln(o)||document.activeElement===o.target)return;const c=a.get(i);if(!c)return;const{activatorNode:u,node:m}=c;if(!u.current&&!m.current)return;requestAnimationFrame(()=>{for(const f of[u.current,m.current]){if(!f)continue;const d=qa(f);if(d){d.focus();break}}})}},[s,t,a,i,o]),null}function ni(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...s}),r):r}function ri(e){return l.useMemo(()=>({draggable:{...Ut.draggable,...e==null?void 0:e.draggable},droppable:{...Ut.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ut.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function si(e){let{activeNode:t,measure:r,initialRect:s,config:a=!0}=e;const o=l.useRef(!1),{x:i,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Le(()=>{if(!i&&!c||!t){o.current=!1;return}if(o.current||!s)return;const m=t==null?void 0:t.node.current;if(!m||m.isConnected===!1)return;const f=r(m),d=Hr(f,s);if(i||(d.x=0),c||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=_r(m);p&&p.scrollBy({top:d.y,left:d.x})}},[t,i,c,s,r])}const ts=l.createContext({...Ae,scaleX:1,scaleY:1});var Ge;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ge||(Ge={}));const ai=l.memo(function(t){var r,s,a,o;let{id:i,accessibility:c,autoScroll:u=!0,children:m,sensors:f=Xo,collisionDetection:d=io,measuring:p,modifiers:g,...y}=t;const x=l.useReducer(ei,void 0,Qo),[b,v]=x,[C,j]=Ja(),[h,R]=l.useState(Ge.Uninitialized),T=h===Ge.Initialized,{draggable:{active:w,nodes:E,translate:k},droppable:{containers:z}}=b,S=w!=null?E.get(w):null,$=l.useRef({initial:null,translated:null}),B=l.useMemo(()=>{var A;return w!=null?{id:w,data:(A=S==null?void 0:S.data)!=null?A:Ko,rect:$}:null},[w,S]),H=l.useRef(null),[X,pe]=l.useState(null),[F,be]=l.useState(null),fe=jt(y,Object.values(y)),Ne=Tt("DndDescribedBy",i),D=l.useMemo(()=>z.getEnabled(),[z]),O=ri(p),{droppableRects:P,measureDroppableContainers:_,measuringScheduled:K}=Lo(D,{dragging:T,dependencies:[k.x,k.y],config:O.droppable}),J=Po(E,w),Be=l.useMemo(()=>F?Nn(F):null,[F]),ye=Y(),Se=$o(J,O.draggable.measure);si({activeNode:w!=null?E.get(w):null,config:ye.layoutShiftCompensation,initialRect:Se,measure:O.draggable.measure});const U=ar(J,O.draggable.measure,Se),De=ar(J?J.parentElement:null),Ce=l.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:P,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),M=z.getNodeFor((r=Ce.current.over)==null?void 0:r.id),Re=Go({measure:O.dragOverlay.measure}),Ue=(s=Re.nodeRef.current)!=null?s:J,Oe=T?(a=Re.rect)!=null?a:U:null,kt=!!(Re.nodeRef.current&&Re.rect),It=Fo(kt?null:U),Fe=Qr(Ue?je(Ue):null),ke=Wo(T?M??J:null),Je=qo(ke),Pe=ni(g,{transform:{x:k.x-It.x,y:k.y-It.y,scaleX:1,scaleY:1},activatorEvent:F,active:B,activeNodeRect:U,containerNodeRect:De,draggingNodeRect:Oe,over:Ce.current.over,overlayNodeRect:Re.rect,scrollableAncestors:ke,scrollableAncestorRects:Je,windowRect:Fe}),Mt=Be?Qe(Be,k):null,ot=Vo(ke),Zt=ir(ot),Jt=ir(ot,[U]),Ie=Qe(Pe,Zt),_e=Oe?uo(Oe,Pe):null,qe=B&&_e?d({active:B,collisionRect:_e,droppableRects:P,droppableContainers:D,pointerCoordinates:Mt}):null,At=Vr(qe,"id"),[we,it]=l.useState(null),Qt=kt?Pe:Qe(Pe,Jt),en=lo(Qt,(o=we==null?void 0:we.rect)!=null?o:null,U),lt=l.useRef(null),Ot=l.useCallback((A,G)=>{let{sensor:V,options:ee}=G;if(H.current==null)return;const Z=E.get(H.current);if(!Z)return;const ne=A.nativeEvent,oe=new V({active:H.current,activeNode:Z,event:ne,options:ee,context:Ce,onAbort(te){if(!E.get(te))return;const{onDragAbort:ze}=fe.current,We={id:te};ze==null||ze(We),C({type:"onDragAbort",event:We})},onPending(te,Me,ze,We){if(!E.get(te))return;const{onDragPending:dt}=fe.current,Ye={id:te,constraint:Me,initialCoordinates:ze,offset:We};dt==null||dt(Ye),C({type:"onDragPending",event:Ye})},onStart(te){const Me=H.current;if(Me==null)return;const ze=E.get(Me);if(!ze)return;const{onDragStart:We}=fe.current,ct={activatorEvent:ne,active:{id:Me,data:ze.data,rect:$}};ht.unstable_batchedUpdates(()=>{We==null||We(ct),R(Ge.Initializing),v({type:de.DragStart,initialCoordinates:te,active:Me}),C({type:"onDragStart",event:ct}),pe(lt.current),be(ne)})},onMove(te){v({type:de.DragMove,coordinates:te})},onEnd:me(de.DragEnd),onCancel:me(de.DragCancel)});lt.current=oe;function me(te){return async function(){const{active:ze,collisions:We,over:ct,scrollAdjustedTranslate:dt}=Ce.current;let Ye=null;if(ze&&dt){const{cancelDrop:ut}=fe.current;Ye={activatorEvent:ne,active:ze,collisions:We,delta:dt,over:ct},te===de.DragEnd&&typeof ut=="function"&&await Promise.resolve(ut(Ye))&&(te=de.DragCancel)}H.current=null,ht.unstable_batchedUpdates(()=>{v({type:te}),R(Ge.Uninitialized),it(null),pe(null),be(null),lt.current=null;const ut=te===de.DragEnd?"onDragEnd":"onDragCancel";if(Ye){const nn=fe.current[ut];nn==null||nn(Ye),C({type:ut,event:Ye})}})}}},[E]),tn=l.useCallback((A,G)=>(V,ee)=>{const Z=V.nativeEvent,ne=E.get(ee);if(H.current!==null||!ne||Z.dndKit||Z.defaultPrevented)return;const oe={active:ne};A(V,G.options,oe)===!0&&(Z.dndKit={capturedBy:G.sensor},H.current=ee,Ot(V,G))},[E,Ot]),I=zo(f,tn);Ho(f),Le(()=>{U&&h===Ge.Initializing&&R(Ge.Initialized)},[U,h]),l.useEffect(()=>{const{onDragMove:A}=fe.current,{active:G,activatorEvent:V,collisions:ee,over:Z}=Ce.current;if(!G||!V)return;const ne={active:G,activatorEvent:V,collisions:ee,delta:{x:Ie.x,y:Ie.y},over:Z};ht.unstable_batchedUpdates(()=>{A==null||A(ne),C({type:"onDragMove",event:ne})})},[Ie.x,Ie.y]),l.useEffect(()=>{const{active:A,activatorEvent:G,collisions:V,droppableContainers:ee,scrollAdjustedTranslate:Z}=Ce.current;if(!A||H.current==null||!G||!Z)return;const{onDragOver:ne}=fe.current,oe=ee.get(At),me=oe&&oe.rect.current?{id:oe.id,rect:oe.rect.current,data:oe.data,disabled:oe.disabled}:null,te={active:A,activatorEvent:G,collisions:V,delta:{x:Z.x,y:Z.y},over:me};ht.unstable_batchedUpdates(()=>{it(me),ne==null||ne(te),C({type:"onDragOver",event:te})})},[At]),Le(()=>{Ce.current={activatorEvent:F,active:B,activeNode:J,collisionRect:_e,collisions:qe,droppableRects:P,draggableNodes:E,draggingNode:Ue,draggingNodeRect:Oe,droppableContainers:z,over:we,scrollableAncestors:ke,scrollAdjustedTranslate:Ie},$.current={initial:Oe,translated:_e}},[B,J,qe,_e,E,Ue,Oe,P,z,we,ke,Ie]),Mo({...ye,delta:k,draggingRect:_e,pointerCoordinates:Mt,scrollableAncestors:ke,scrollableAncestorRects:Je});const W=l.useMemo(()=>({active:B,activeNode:J,activeNodeRect:U,activatorEvent:F,collisions:qe,containerNodeRect:De,dragOverlay:Re,draggableNodes:E,droppableContainers:z,droppableRects:P,over:we,measureDroppableContainers:_,scrollableAncestors:ke,scrollableAncestorRects:Je,measuringConfiguration:O,measuringScheduled:K,windowRect:Fe}),[B,J,U,F,qe,De,Re,E,z,P,we,_,ke,Je,O,K,Fe]),q=l.useMemo(()=>({activatorEvent:F,activators:I,active:B,activeNodeRect:U,ariaDescribedById:{draggable:Ne},dispatch:v,draggableNodes:E,over:we,measureDroppableContainers:_}),[F,I,B,U,v,Ne,E,we,_]);return N.createElement(Ur.Provider,{value:j},N.createElement(Kt.Provider,{value:q},N.createElement(es.Provider,{value:W},N.createElement(ts.Provider,{value:en},m)),N.createElement(ti,{disabled:(c==null?void 0:c.restoreFocus)===!1})),N.createElement(to,{...c,hiddenTextDescribedById:Ne}));function Y(){const A=(X==null?void 0:X.autoScrollEnabled)===!1,G=typeof u=="object"?u.enabled===!1:u===!1,V=T&&!A&&!G;return typeof u=="object"?{...u,enabled:V}:{enabled:V}}}),oi=l.createContext(null),cr="button",ii="Draggable";function li(e){let{id:t,data:r,disabled:s=!1,attributes:a}=e;const o=Tt(ii),{activators:i,activatorEvent:c,active:u,activeNodeRect:m,ariaDescribedById:f,draggableNodes:d,over:p}=l.useContext(Kt),{role:g=cr,roleDescription:y="draggable",tabIndex:x=0}=a??{},b=(u==null?void 0:u.id)===t,v=l.useContext(b?ts:oi),[C,j]=Vt(),[h,R]=Vt(),T=_o(i,t),w=jt(r);Le(()=>(d.set(t,{id:t,key:o,node:C,activatorNode:h,data:w}),()=>{const k=d.get(t);k&&k.key===o&&d.delete(t)}),[d,t]);const E=l.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":s,"aria-pressed":b&&g===cr?!0:void 0,"aria-roledescription":y,"aria-describedby":f.draggable}),[s,g,x,b,y,f.draggable]);return{active:u,activatorEvent:c,activeNodeRect:m,attributes:E,isDragging:b,listeners:s?void 0:T,node:C,over:p,setNodeRef:j,setActivatorNodeRef:R,transform:v}}function ci(){return l.useContext(es)}const di="Droppable",ui={timeout:25};function fi(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:a}=e;const o=Tt(di),{active:i,dispatch:c,over:u,measureDroppableContainers:m}=l.useContext(Kt),f=l.useRef({disabled:r}),d=l.useRef(!1),p=l.useRef(null),g=l.useRef(null),{disabled:y,updateMeasurementsFor:x,timeout:b}={...ui,...a},v=jt(x??s),C=l.useCallback(()=>{if(!d.current){d.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{m(Array.isArray(v.current)?v.current:[v.current]),g.current=null},b)},[b]),j=Xt({callback:C,disabled:y||!i}),h=l.useCallback((E,k)=>{j&&(k&&(j.unobserve(k),d.current=!1),E&&j.observe(E))},[j]),[R,T]=Vt(h),w=jt(t);return l.useEffect(()=>{!j||!R.current||(j.disconnect(),d.current=!1,j.observe(R.current))},[R,j]),l.useEffect(()=>(c({type:de.RegisterDroppable,element:{id:s,key:o,disabled:r,node:R,rect:p,data:w}}),()=>c({type:de.UnregisterDroppable,key:o,id:s})),[s]),l.useEffect(()=>{r!==f.current.disabled&&(c({type:de.SetDroppableDisabled,id:s,key:o,disabled:r}),f.current.disabled=r)},[s,o,r,c]),{active:i,rect:p,isOver:(u==null?void 0:u.id)===s,node:R,over:u,setNodeRef:T}}function Wn(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function mi(e,t){return e.reduce((r,s,a)=>{const o=t.get(s);return o&&(r[a]=o),r},Array(e.length))}function zt(e){return e!==null&&e>=0}function hi(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function pi(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Vn=e=>{let{rects:t,activeIndex:r,overIndex:s,index:a}=e;const o=Wn(t,s,r),i=t[a],c=o[a];return!c||!i?null:{x:c.left-i.left,y:c.top-i.top,scaleX:c.width/i.width,scaleY:c.height/i.height}},ns="Sortable",rs=N.createContext({activeIndex:-1,containerId:ns,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Vn,disabled:{draggable:!1,droppable:!1}});function gi(e){let{children:t,id:r,items:s,strategy:a=Vn,disabled:o=!1}=e;const{active:i,dragOverlay:c,droppableRects:u,over:m,measureDroppableContainers:f}=ci(),d=Tt(ns,r),p=c.rect!==null,g=l.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),y=i!=null,x=i?g.indexOf(i.id):-1,b=m?g.indexOf(m.id):-1,v=l.useRef(g),C=!hi(g,v.current),j=b!==-1&&x===-1||C,h=pi(o);Le(()=>{C&&y&&f(g)},[C,g,y,f]),l.useEffect(()=>{v.current=g},[g]);const R=l.useMemo(()=>({activeIndex:x,containerId:d,disabled:h,disableTransforms:j,items:g,overIndex:b,useDragOverlay:p,sortedRects:mi(g,u),strategy:a}),[x,d,h.draggable,h.droppable,j,g,b,u,p,a]);return N.createElement(rs.Provider,{value:R},t)}const xi=e=>{let{id:t,items:r,activeIndex:s,overIndex:a}=e;return Wn(r,s,a).indexOf(t)},vi=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:a,items:o,newIndex:i,previousItems:c,previousContainerId:u,transition:m}=e;return!m||!s||c!==o&&a===i?!1:r?!0:i!==a&&t===u},bi={duration:200,easing:"ease"},ss="transform",yi=St.Transition.toString({property:ss,duration:0,easing:"linear"}),wi={roleDescription:"sortable"};function ji(e){let{disabled:t,index:r,node:s,rect:a}=e;const[o,i]=l.useState(null),c=l.useRef(r);return Le(()=>{if(!t&&r!==c.current&&s.current){const u=a.current;if(u){const m=st(s.current,{ignoreTransform:!0}),f={x:u.left-m.left,y:u.top-m.top,scaleX:u.width/m.width,scaleY:u.height/m.height};(f.x||f.y)&&i(f)}}r!==c.current&&(c.current=r)},[t,r,s,a]),l.useEffect(()=>{o&&i(null)},[o]),o}function Ni(e){let{animateLayoutChanges:t=vi,attributes:r,disabled:s,data:a,getNewIndex:o=xi,id:i,strategy:c,resizeObserverConfig:u,transition:m=bi}=e;const{items:f,containerId:d,activeIndex:p,disabled:g,disableTransforms:y,sortedRects:x,overIndex:b,useDragOverlay:v,strategy:C}=l.useContext(rs),j=Si(s,g),h=f.indexOf(i),R=l.useMemo(()=>({sortable:{containerId:d,index:h,items:f},...a}),[d,a,h,f]),T=l.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:w,node:E,isOver:k,setNodeRef:z}=fi({id:i,data:R,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...u}}),{active:S,activatorEvent:$,activeNodeRect:B,attributes:H,setNodeRef:X,listeners:pe,isDragging:F,over:be,setActivatorNodeRef:fe,transform:Ne}=li({id:i,data:R,attributes:{...wi,...r},disabled:j.draggable}),D=Wa(z,X),O=!!S,P=O&&!y&&zt(p)&&zt(b),_=!v&&F,K=_&&P?Ne:null,Be=P?K??(c??C)({rects:x,activeNodeRect:B,activeIndex:p,overIndex:b,index:h}):null,ye=zt(p)&&zt(b)?o({id:i,items:f,activeIndex:p,overIndex:b}):h,Se=S==null?void 0:S.id,U=l.useRef({activeId:Se,items:f,newIndex:ye,containerId:d}),De=f!==U.current.items,Ce=t({active:S,containerId:d,isDragging:F,isSorting:O,id:i,index:h,items:f,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:m,wasDragging:U.current.activeId!=null}),M=ji({disabled:!Ce,index:h,node:E,rect:w});return l.useEffect(()=>{O&&U.current.newIndex!==ye&&(U.current.newIndex=ye),d!==U.current.containerId&&(U.current.containerId=d),f!==U.current.items&&(U.current.items=f)},[O,ye,d,f]),l.useEffect(()=>{if(Se===U.current.activeId)return;if(Se!=null&&U.current.activeId==null){U.current.activeId=Se;return}const Ue=setTimeout(()=>{U.current.activeId=Se},50);return()=>clearTimeout(Ue)},[Se]),{active:S,activeIndex:p,attributes:H,data:R,rect:w,index:h,newIndex:ye,items:f,isOver:k,isSorting:O,isDragging:F,listeners:pe,node:E,overIndex:b,over:be,setNodeRef:D,setActivatorNodeRef:fe,setDroppableNodeRef:z,setDraggableNodeRef:X,transform:M??Be,transition:Re()};function Re(){if(M||De&&U.current.newIndex===h)return yi;if(!(_&&!Ln($)||!m)&&(O||Ce))return St.Transition.toString({...m,property:ss})}}function Si(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function qt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ci=[L.Down,L.Right,L.Up,L.Left],Di=(e,t)=>{let{context:{active:r,collisionRect:s,droppableRects:a,droppableContainers:o,over:i,scrollableAncestors:c}}=t;if(Ci.includes(e.code)){if(e.preventDefault(),!r||!s)return;const u=[];o.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const p=a.get(d.id);if(p)switch(e.code){case L.Down:s.top<p.top&&u.push(d);break;case L.Up:s.top>p.top&&u.push(d);break;case L.Left:s.left>p.left&&u.push(d);break;case L.Right:s.left<p.left&&u.push(d);break}});const m=ao({active:r,collisionRect:s,droppableRects:a,droppableContainers:u,pointerCoordinates:null});let f=Vr(m,"id");if(f===(i==null?void 0:i.id)&&m.length>1&&(f=m[1].id),f!=null){const d=o.get(r.id),p=o.get(f),g=p?a.get(p.id):null,y=p==null?void 0:p.node.current;if(y&&g&&d&&p){const b=Gt(y).some((T,w)=>c[w]!==T),v=as(d,p),C=Ri(d,p),j=b||!v?{x:0,y:0}:{x:C?s.width-g.width:0,y:C?s.height-g.height:0},h={x:g.left,y:g.top};return j.x&&j.y?h:Nt(h,j)}}}};function as(e,t){return!qt(e)||!qt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Ri(e,t){return!qt(e)||!qt(t)||!as(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Ei(e){const[t,r]=l.useState(!1);return l.useEffect(()=>{function s(o){r(o.matches)}const a=matchMedia(e);return a.addEventListener("change",s),r(a.matches),()=>a.removeEventListener("change",s)},[e]),t}function Ti({events:e=[],selected:t,onSelect:r}){const[s,a]=N.useState(t||new Date);N.useEffect(()=>{t&&a(t)},[t]);const o=aa(s),i=oa(o),c=ia(o,{locale:Pt,weekStartsOn:1}),u=la(i,{locale:Pt,weekStartsOn:1}),m=[];let f=c;for(;f<=u;){const b=[];for(let v=0;v<7;v++)b.push(f),f=ca(f,1);m.push(b)}const d=N.useMemo(()=>{const b=new Map;return e.forEach(v=>{const C=v.date;b.has(C)||b.set(C,[]),b.get(C).push(v)}),b},[e]),p=new Date,g=()=>a(b=>ua(b,1)),y=()=>a(b=>fa(b,1)),x="h-10 w-10";return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[n.jsx("button",{onClick:g,className:"p-1 rounded hover:bg-muted/50",children:n.jsx(ma,{className:"h-5 w-5 text-muted-foreground"})}),n.jsx("div",{className:"text-sm font-semibold",children:_n(o,"LLLL yyyy",{locale:Pt})}),n.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-muted/50",children:n.jsx(ha,{className:"h-5 w-5 text-muted-foreground"})})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1 px-1 text-xs text-muted-foreground mb-1",children:["LU","MA","MI","JU","VI","SA","DO"].map((b,v)=>n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"h-10 w-10 flex items-center justify-center font-medium uppercase",children:b})},v))}),n.jsx("div",{className:"space-y-2",children:m.map((b,v)=>n.jsx("div",{className:"grid grid-cols-7 gap-2",children:b.map(C=>{const j=C.toISOString().slice(0,10),h=da(C,o),R=d.get(j)||[],T=R.length>0,w=t?qn(C,t):!1,E=qn(C,p),k=w?"bg-primary text-white shadow-md scale-110":E?"bg-muted text-foreground ring-1 ring-primary":"hover:bg-muted/50",z=n.jsxs("button",{onClick:()=>r&&r(C),className:`relative flex items-center justify-center ${x} rounded-xl transition-all duration-200 focus:outline-none ${h?"text-foreground":"text-muted-foreground/30"} ${k}`,children:[n.jsx("span",{className:"text-sm font-medium z-10",children:_n(C,"d",{locale:Pt})}),T&&!w&&n.jsx("span",{className:"absolute bottom-1.5 h-1 w-1 rounded-full bg-primary"})]},j);if(T){const S=n.jsxs("div",{className:"space-y-1.5 p-1",children:[R.slice(0,5).map($=>n.jsxs("div",{className:"text-xs border-b last:border-0 pb-1 last:pb-0",children:[n.jsx("div",{className:"font-semibold text-primary",children:$.branch}),n.jsx("div",{className:"text-muted-foreground",children:$.title})]},$.id)),R.length>5&&n.jsxs("div",{className:"text-xs text-muted-foreground font-medium pt-1",children:["+",R.length-5," ms"]})]});return n.jsxs(Vs,{children:[n.jsx(Hs,{asChild:!0,children:z}),n.jsx(_s,{side:"top",className:"bg-popover text-popover-foreground border shadow-xl p-3 rounded-lg",children:S})]},j)}return z})},v))})]})}const Lt=[{id:"metrics-carousel",type:"metrics-carousel",title:"Mtricas Financieras",description:"Diferencia neta, negativos y positivos",icon:Ft,visible:!0,order:0,size:"small",mandatory:!0},{id:"active-products",type:"active-products",title:"Productos Activos",description:"Total de productos en inventarios",icon:Or,visible:!0,order:1,size:"small"},{id:"inventory-summary",type:"inventory-summary",title:"Resumen de Inventario",description:"Progreso de productos en stock",icon:Sr,visible:!0,order:2,size:"large"},{id:"inventory-alerts",type:"inventory-alerts",title:"Alertas de Inventario",description:"Notificaciones importantes",icon:gt,visible:!0,order:3,size:"large"},{id:"upcoming-inventories",type:"upcoming-inventories",title:"Prximos Inventarios",description:"Inventarios programados",icon:Pr,visible:!0,order:4,size:"large"},{id:"branches-table",type:"branches-table",title:"Tabla de Sucursales",description:"Listado completo de sucursales",icon:Ia,visible:!0,order:5,size:"full"},{id:"inventory-progress",type:"inventory-progress",title:"Progreso de Inventarios",description:"Porcentaje de inventarios completados",icon:tt,visible:!1,order:6,size:"small"},{id:"critical-products",type:"critical-products",title:"Productos Crticos",description:"Productos con stock bajo o agotados",icon:Cr,visible:!1,order:7,size:"small"},{id:"total-stock-value",type:"total-stock-value",title:"Valor Total de Stock",description:"Valor monetario total del inventario",icon:Ft,visible:!1,order:8,size:"small"},{id:"active-users",type:"active-users",title:"Usuarios Activos",description:"Usuarios trabajando en tiempo real",icon:Lr,visible:!1,order:9,size:"small"},{id:"pending-inventories",type:"pending-inventories",title:"Inventarios Pendientes",description:"Inventarios sin completar",icon:Dt,visible:!1,order:10,size:"small"},{id:"trends-chart",type:"trends-chart",title:"Grfico de Tendencias",description:"Evolucin de diferencias en el tiempo",icon:Aa,visible:!1,order:11,size:"large"},{id:"top-products",type:"top-products",title:"Top Productos con Diferencias",description:"Productos con mayores discrepancias",icon:Ua,visible:!1,order:12,size:"large"},{id:"activity-timeline",type:"activity-timeline",title:"Actividad Reciente",description:"Timeline de ltimas acciones",icon:za,visible:!1,order:13,size:"large"},{id:"category-distribution",type:"category-distribution",title:"Distribucin por Categora",description:"Porcentaje de productos por categora",icon:Xn,visible:!1,order:14,size:"large"},{id:"monthly-goals",type:"monthly-goals",title:"Objetivos del Mes",description:"Progreso hacia metas mensuales",icon:Tr,visible:!1,order:15,size:"large"},{id:"sync-status",type:"sync-status",title:"Estado de Sincronizacin",description:"Conexin y datos pendientes",icon:kr,visible:!1,order:16,size:"large"},{id:"quick-actions",type:"quick-actions",title:"Acciones Rpidas",description:"Tareas frecuentes",icon:Fa,visible:!1,order:17,size:"large"},{id:"countdown",type:"countdown",title:"Contador de Das",description:"Das restantes para finalizar conteo cclico",icon:wn,visible:!0,order:6,size:"small"},{id:"category-progress",type:"category-progress",title:"Progreso por Rubros",description:"Avance de inventario por categora",icon:Xn,visible:!0,order:7,size:"large"}];function ki(e){const t=`dashboard-layout-v2-${e||"default"}`,[r,s]=l.useState(()=>{try{const d=localStorage.getItem(t);if(d){const p=JSON.parse(d);return Lt.map(y=>{const x=p.widgets.find(b=>b.id===y.id);return x?{...y,visible:x.visible,order:x.order,...y.mandatory?{visible:!0}:{}}:y}).sort((y,x)=>y.order-x.order)}}catch(d){console.error("Error loading dashboard layout:",d)}return Lt}),[a,o]=l.useState(!1);l.useEffect(()=>{const p={widgets:r.map(({id:g,visible:y,order:x})=>({id:g,visible:y,order:x})),lastUpdated:Date.now()};localStorage.setItem(t,JSON.stringify(p))},[r,t]);const i=(d,p)=>{s(g=>{const y=g.findIndex(v=>v.id===d),x=g.findIndex(v=>v.id===p);return Wn(g,y,x).map((v,C)=>({...v,order:C}))})},c=d=>{s(p=>p.map(g=>g.id===d&&!g.mandatory?{...g,visible:!g.visible}:g))},u=()=>{s(Lt),o(!1)};l.useEffect(()=>{r.every(p=>p.title&&p.icon)||(console.warn("Detected corrupted widget state, resetting to defaults"),s(Lt))},[r]);const m=r.filter(d=>d.visible).sort((d,p)=>d.order-p.order),f=r.filter(d=>!d.visible).sort((d,p)=>(d.title||"").localeCompare(p.title||""));return{widgets:r,visibleWidgets:m,hiddenWidgets:f,isEditMode:a,setIsEditMode:o,reorderWidgets:i,toggleWidgetVisibility:c,resetLayout:u}}const Ii={small:"col-span-1",medium:"col-span-1 md:col-span-2",large:"col-span-1",full:"col-span-full"};function un({widget:e,isEditMode:t,onRemove:r,children:s}){const{attributes:a,listeners:o,setNodeRef:i,transform:c,transition:u,isDragging:m}=Ni({id:e.id,disabled:!t}),f={transform:St.Transform.toString(c),transition:u};return n.jsx("div",{ref:i,style:f,className:re(Ii[e.size],m&&"opacity-50 z-50",t&&"cursor-move"),children:n.jsxs("div",{className:re("relative h-full transition-all rounded-lg",t&&"ring-2 ring-primary/20 hover:ring-primary/40"),children:[t&&n.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[n.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 cursor-grab active:cursor-grabbing",...a,...o,children:n.jsx(Pa,{className:"h-4 w-4"})}),!e.mandatory&&r&&n.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive hover:text-destructive-foreground",onClick:r,children:n.jsx(qs,{className:"h-4 w-4"})})]}),s]})})}function Mi(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const os=N.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),at=()=>{const e=N.useContext(os);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Mi(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const Ai=24,Oi=typeof window<"u"?l.useLayoutEffect:l.useEffect;function dr(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function Pi(){return Hn(/^Mac/)}function zi(){return Hn(/^iPhone/)}function ur(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Li(){return Hn(/^iPad/)||Pi()&&navigator.maxTouchPoints>1}function is(){return zi()||Li()}function Hn(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const fn=typeof document<"u"&&window.visualViewport;function fr(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function ls(e){for(fr(e)&&(e=e.parentElement);e&&!fr(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const $i=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let $t=0,mn;function Bi(e={}){let{isDisabled:t}=e;Oi(()=>{if(!t)return $t++,$t===1&&is()&&(mn=Ui()),()=>{$t--,$t===0&&(mn==null||mn())}},[t])}function Ui(){let e,t=0,r=d=>{e=ls(d.target),!(e===document.documentElement&&e===document.body)&&(t=d.changedTouches[0].pageY)},s=d=>{if(!e||e===document.documentElement||e===document.body){d.preventDefault();return}let p=d.changedTouches[0].pageY,g=e.scrollTop,y=e.scrollHeight-e.clientHeight;y!==0&&((g<=0&&p>t||g>=y&&p<t)&&d.preventDefault(),t=p)},a=d=>{let p=d.target;Rn(p)&&p!==document.activeElement&&(d.preventDefault(),p.style.transform="translateY(-2000px)",p.focus(),requestAnimationFrame(()=>{p.style.transform=""}))},o=d=>{let p=d.target;Rn(p)&&(p.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{p.style.transform="",fn&&(fn.height<window.innerHeight?requestAnimationFrame(()=>{mr(p)}):fn.addEventListener("resize",()=>mr(p),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},c=window.pageXOffset,u=window.pageYOffset,m=dr(Fi(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=dr(ft(document,"touchstart",r,{passive:!1,capture:!0}),ft(document,"touchmove",s,{passive:!1,capture:!0}),ft(document,"touchend",a,{passive:!1,capture:!0}),ft(document,"focus",o,!0),ft(window,"scroll",i));return()=>{m(),f(),window.scrollTo(c,u)}}function Fi(e,t,r){let s=e.style[t];return e.style[t]=r,()=>{e.style[t]=s}}function ft(e,t,r,s){return e.addEventListener(t,r,s),()=>{e.removeEventListener(t,r,s)}}function mr(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=ls(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let s=r.getBoundingClientRect().top,a=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const i=r.getBoundingClientRect().bottom+Ai;o>i&&(r.scrollTop+=a-s)}e=r.parentElement}}function Rn(e){return e instanceof HTMLInputElement&&!$i.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Wi(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Vi(...e){return t=>e.forEach(r=>Wi(r,t))}function cs(...e){return l.useCallback(Vi(...e),e)}const ds=new WeakMap;function le(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([a,o])=>{if(a.startsWith("--")){e.style.setProperty(a,o);return}s[a]=e.style[a],e.style[a]=o}),!r&&ds.set(e,s)}function Hi(e,t){if(!e||!(e instanceof HTMLElement))return;let r=ds.get(e);r&&(e.style[t]=r[t])}const ce=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Bt(e,t){if(!e)return null;const r=window.getComputedStyle(e),s=r.transform||r.webkitTransform||r.mozTransform;let a=s.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[ce(t)?13:12]):(a=s.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[ce(t)?5:4]):null)}function _i(e){return 8*(Math.log(e+1)-2)}function hn(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function qi(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const Q={DURATION:.5,EASE:[.32,.72,0,1]},us=.4,Yi=.25,Gi=100,fs=8,Xe=16,En=26,pn="vaul-dragging";function ms(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function Xi({defaultProp:e,onChange:t}){const r=N.useState(e),[s]=r,a=N.useRef(s),o=ms(t);return N.useEffect(()=>{a.current!==s&&(o(s),a.current=s)},[s,a,o]),r}function hs({prop:e,defaultProp:t,onChange:r=()=>{}}){const[s,a]=Xi({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:s,c=ms(r),u=N.useCallback(m=>{if(o){const d=typeof m=="function"?m(e):m;d!==e&&c(d)}else a(m)},[o,e,a,c]);return[i,u]}function Ki({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:s,overlayRef:a,fadeFromIndex:o,onSnapPointChange:i,direction:c="bottom",container:u,snapToSequentialPoint:m}){const[f,d]=hs({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[p,g]=N.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);N.useEffect(()=>{function w(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const y=N.useMemo(()=>f===(r==null?void 0:r[r.length-1])||null,[r,f]),x=N.useMemo(()=>r==null?void 0:r.findIndex(w=>w===f),[r,f]),b=r&&r.length>0&&(o||o===0)&&!Number.isNaN(o)&&r[o]===f||!r,v=N.useMemo(()=>{const w=u?{width:u.getBoundingClientRect().width,height:u.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=r==null?void 0:r.map(k=>{const z=typeof k=="string";let S=0;if(z&&(S=parseInt(k,10)),ce(c)){const B=z?S:p?k*w.height:0;return p?c==="bottom"?w.height-B:-w.height+B:B}const $=z?S:p?k*w.width:0;return p?c==="right"?w.width-$:-w.width+$:$}))!=null?E:[]},[r,p,u]),C=N.useMemo(()=>x!==null?v==null?void 0:v[x]:null,[v,x]),j=N.useCallback(w=>{var E;const k=(E=v==null?void 0:v.findIndex(z=>z===w))!=null?E:null;i(k),le(s.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:ce(c)?`translate3d(0, ${w}px, 0)`:`translate3d(${w}px, 0, 0)`}),v&&k!==v.length-1&&k!==o&&k<o?le(a.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"0"}):le(a.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"1"}),d(r==null?void 0:r[Math.max(k,0)])},[s.current,r,v,o,a,d]);N.useEffect(()=>{if(f||e){var w;const E=(w=r==null?void 0:r.findIndex(k=>k===e||k===f))!=null?w:-1;v&&E!==-1&&typeof v[E]=="number"&&j(v[E])}},[f,e,r,v,j]);function h({draggedDistance:w,closeDrawer:E,velocity:k,dismissible:z}){if(o===void 0)return;const S=c==="bottom"||c==="right"?(C??0)-w:(C??0)+w,$=x===o-1,B=x===0,H=w>0;if($&&le(a.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`}),!m&&k>2&&!H){z?E():j(v[0]);return}if(!m&&k>2&&H&&v&&r){j(v[r.length-1]);return}const X=v==null?void 0:v.reduce((F,be)=>typeof F!="number"||typeof be!="number"?F:Math.abs(be-S)<Math.abs(F-S)?be:F),pe=ce(c)?window.innerHeight:window.innerWidth;if(k>us&&Math.abs(w)<pe*.4){const F=H?1:-1;if(F>0&&y){j(v[r.length-1]);return}if(B&&F<0&&z&&E(),x===null)return;j(v[x+F]);return}j(X)}function R({draggedDistance:w}){if(C===null)return;const E=c==="bottom"||c==="right"?C-w:C+w;(c==="bottom"||c==="right")&&E<v[v.length-1]||(c==="top"||c==="left")&&E>v[v.length-1]||le(s.current,{transform:ce(c)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function T(w,E){if(!r||typeof x!="number"||!v||o===void 0)return null;const k=x===o-1;if(x>=o&&E)return 0;if(k&&!E)return 1;if(!b&&!k)return null;const S=k?x+1:x-1,$=k?v[S]-v[S-1]:v[S+1]-v[S],B=w/Math.abs($);return k?1-B:B}return{isLastSnapPoint:y,activeSnapPoint:f,shouldFade:b,getPercentageDragged:T,setActiveSnapPoint:d,activeSnapPointIndex:x,onRelease:h,onDrag:R,snapPointsOffset:v}}const Zi=()=>()=>{};function Ji(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:s,noBodyStyles:a}=at(),o=N.useRef(null),i=l.useMemo(()=>document.body.style.backgroundColor,[]);function c(){return(window.innerWidth-En)/window.innerWidth}N.useEffect(()=>{if(t&&r){o.current&&clearTimeout(o.current);const u=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!u)return;qi(s&&!a?hn(document.body,{background:"black"}):Zi,hn(u,{transformOrigin:ce(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Q.EASE.join(",")})`}));const m=hn(u,{borderRadius:`${fs}px`,overflow:"hidden",...ce(e)?{transform:`scale(${c()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${c()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{m(),o.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},Q.DURATION*1e3)}}},[t,r,i])}let mt=null;function Qi({isOpen:e,modal:t,nested:r,hasBeenOpened:s,preventScrollRestoration:a,noBodyStyles:o}){const[i,c]=N.useState(()=>typeof window<"u"?window.location.href:""),u=N.useRef(0),m=N.useCallback(()=>{if(ur()&&mt===null&&e&&!o){mt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:p}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-u.current}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=p-window.innerHeight;g&&u.current>=p&&(document.body.style.top=`${-(u.current+g)}px`)}),300)}},[e]),f=N.useCallback(()=>{if(ur()&&mt!==null&&!o){const d=-parseInt(document.body.style.top,10),p=-parseInt(document.body.style.left,10);Object.assign(document.body.style,mt),window.requestAnimationFrame(()=>{if(a&&i!==window.location.href){c(window.location.href);return}window.scrollTo(p,d)}),mt=null}},[i]);return N.useEffect(()=>{function d(){u.current=window.scrollY}return d(),window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]),N.useEffect(()=>{r||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&m(),t||window.setTimeout(()=>{f()},500)):f())},[e,s,i,t,r,m,f]),{restorePositionSetting:f}}function ps({open:e,onOpenChange:t,children:r,onDrag:s,onRelease:a,snapPoints:o,shouldScaleBackground:i=!1,setBackgroundColorOnScale:c=!0,closeThreshold:u=Yi,scrollLockTimeout:m=Gi,dismissible:f=!0,handleOnly:d=!1,fadeFromIndex:p=o&&o.length-1,activeSnapPoint:g,setActiveSnapPoint:y,fixed:x,modal:b=!0,onClose:v,nested:C,noBodyStyles:j,direction:h="bottom",defaultOpen:R=!1,disablePreventScroll:T=!0,snapToSequentialPoint:w=!1,preventScrollRestoration:E=!1,repositionInputs:k=!0,onAnimationEnd:z,container:S,autoFocus:$=!1}){var B,H;const[X=!1,pe]=hs({defaultProp:R,prop:e,onChange:I=>{t==null||t(I),!I&&!C&&Jt(),setTimeout(()=>{z==null||z(I)},Q.DURATION*1e3),I&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),I||(document.body.style.pointerEvents="auto")}}),[F,be]=N.useState(!1),[fe,Ne]=N.useState(!1),[D,O]=N.useState(!1),P=N.useRef(null),_=N.useRef(null),K=N.useRef(null),J=N.useRef(null),Be=N.useRef(null),ye=N.useRef(!1),Se=N.useRef(null),U=N.useRef(0),De=N.useRef(!1),Ce=N.useRef(0),M=N.useRef(null),Re=N.useRef(((B=M.current)==null?void 0:B.getBoundingClientRect().height)||0),Ue=N.useRef(((H=M.current)==null?void 0:H.getBoundingClientRect().width)||0),Oe=N.useRef(0),kt=N.useCallback(I=>{o&&I===Pe.length-1&&(_.current=new Date)},[]),{activeSnapPoint:It,activeSnapPointIndex:Fe,setActiveSnapPoint:ke,onRelease:Je,snapPointsOffset:Pe,onDrag:Mt,shouldFade:ot,getPercentageDragged:Zt}=Ki({snapPoints:o,activeSnapPointProp:g,setActiveSnapPointProp:y,drawerRef:M,fadeFromIndex:p,overlayRef:P,onSnapPointChange:kt,direction:h,container:S,snapToSequentialPoint:w});Bi({isDisabled:!X||fe||!b||D||!F||!k||!T});const{restorePositionSetting:Jt}=Qi({isOpen:X,modal:b,nested:C,hasBeenOpened:F,preventScrollRestoration:E,noBodyStyles:j});function Ie(){return(window.innerWidth-En)/window.innerWidth}function _e(I){var W,q;!f&&!o||M.current&&!M.current.contains(I.target)||(Re.current=((W=M.current)==null?void 0:W.getBoundingClientRect().height)||0,Ue.current=((q=M.current)==null?void 0:q.getBoundingClientRect().width)||0,Ne(!0),K.current=new Date,is()&&window.addEventListener("touchend",()=>ye.current=!1,{once:!0}),I.target.setPointerCapture(I.pointerId),U.current=ce(h)?I.pageY:I.pageX)}function qe(I,W){var q,Y;let A=I;const G=(q=window.getSelection())==null?void 0:q.toString(),V=M.current?Bt(M.current,h):null,ee=new Date;if(A.hasAttribute("data-vaul-no-drag")||A.closest("[data-vaul-no-drag]"))return!1;if(h==="right"||h==="left")return!0;if(_.current&&ee.getTime()-_.current.getTime()<500)return!1;if(V!==null&&(h==="bottom"?V>0:V<0))return!0;if(G&&G.length>0)return!1;if(ee.getTime()-((Y=Be.current)==null?void 0:Y.getTime())<m&&V===0||W)return Be.current=ee,!1;for(;A;){if(A.scrollHeight>A.clientHeight){if(A.scrollTop!==0)return Be.current=new Date,!1;if(A.getAttribute("role")==="dialog")return!0}A=A.parentNode}return!0}function At(I){if(M.current&&fe){const W=h==="bottom"||h==="right"?1:-1,q=(U.current-(ce(h)?I.pageY:I.pageX))*W,Y=q>0,A=o&&!f&&!Y;if(A&&Fe===0)return;const G=Math.abs(q),V=document.querySelector("[data-vaul-drawer-wrapper]"),ee=h==="bottom"||h==="top"?Re.current:Ue.current;let Z=G/ee;const ne=Zt(G,Y);if(ne!==null&&(Z=ne),A&&Z>=1||!ye.current&&!qe(I.target,Y))return;if(M.current.classList.add(pn),ye.current=!0,le(M.current,{transition:"none"}),le(P.current,{transition:"none"}),o&&Mt({draggedDistance:q}),Y&&!o){const me=_i(q),te=Math.min(me*-1,0)*W;le(M.current,{transform:ce(h)?`translate3d(0, ${te}px, 0)`:`translate3d(${te}px, 0, 0)`});return}const oe=1-Z;if((ot||p&&Fe===p-1)&&(s==null||s(I,Z),le(P.current,{opacity:`${oe}`,transition:"none"},!0)),V&&P.current&&i){const me=Math.min(Ie()+Z*(1-Ie()),1),te=8-Z*8,Me=Math.max(0,14-Z*14);le(V,{borderRadius:`${te}px`,transform:ce(h)?`scale(${me}) translate3d(0, ${Me}px, 0)`:`scale(${me}) translate3d(${Me}px, 0, 0)`,transition:"none"},!0)}if(!o){const me=G*W;le(M.current,{transform:ce(h)?`translate3d(0, ${me}px, 0)`:`translate3d(${me}px, 0, 0)`})}}}N.useEffect(()=>{var I;function W(){if(!M.current||!k)return;const q=document.activeElement;if(Rn(q)||De.current){var Y;const A=((Y=window.visualViewport)==null?void 0:Y.height)||0,G=window.innerHeight;let V=G-A;const ee=M.current.getBoundingClientRect().height||0,Z=ee>G*.8;Oe.current||(Oe.current=ee);const ne=M.current.getBoundingClientRect().top;if(Math.abs(Ce.current-V)>60&&(De.current=!De.current),o&&o.length>0&&Pe&&Fe){const oe=Pe[Fe]||0;V+=oe}if(Ce.current=V,ee>A||De.current){const oe=M.current.getBoundingClientRect().height;let me=oe;oe>A&&(me=A-(Z?ne:En)),x?M.current.style.height=`${oe-Math.max(V,0)}px`:M.current.style.height=`${Math.max(me,A-ne)}px`}else M.current.style.height=`${Oe.current}px`;o&&o.length>0&&!De.current?M.current.style.bottom="0px":M.current.style.bottom=`${Math.max(V,0)}px`}}return(I=window.visualViewport)==null||I.addEventListener("resize",W),()=>{var q;return(q=window.visualViewport)==null?void 0:q.removeEventListener("resize",W)}},[Fe,o,Pe]);function we(I){Qt(),v==null||v(),I||pe(!1),setTimeout(()=>{o&&ke(o[0])},Q.DURATION*1e3)}function it(){if(!M.current)return;const I=document.querySelector("[data-vaul-drawer-wrapper]"),W=Bt(M.current,h);le(M.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`}),le(P.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"1"}),i&&W&&W>0&&X&&le(I,{borderRadius:`${fs}px`,overflow:"hidden",...ce(h)?{transform:`scale(${Ie()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ie()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Q.EASE.join(",")})`},!0)}function Qt(){!fe||!M.current||(M.current.classList.remove(pn),ye.current=!1,Ne(!1),J.current=new Date)}function en(I){if(!fe||!M.current)return;M.current.classList.remove(pn),ye.current=!1,Ne(!1),J.current=new Date;const W=Bt(M.current,h);if(!qe(I.target,!1)||!W||Number.isNaN(W)||K.current===null)return;const q=J.current.getTime()-K.current.getTime(),Y=U.current-(ce(h)?I.pageY:I.pageX),A=Math.abs(Y)/q;if(A>.05&&(O(!0),setTimeout(()=>{O(!1)},200)),o){Je({draggedDistance:Y*(h==="bottom"||h==="right"?1:-1),closeDrawer:we,velocity:A,dismissible:f}),a==null||a(I,!0);return}if(h==="bottom"||h==="right"?Y>0:Y<0){it(),a==null||a(I,!0);return}if(A>us){we(),a==null||a(I,!1);return}var G;const V=Math.min((G=M.current.getBoundingClientRect().height)!=null?G:0,window.innerHeight);var ee;const Z=Math.min((ee=M.current.getBoundingClientRect().width)!=null?ee:0,window.innerWidth),ne=h==="left"||h==="right";if(Math.abs(W)>=(ne?Z:V)*u){we(),a==null||a(I,!1);return}a==null||a(I,!0),it()}N.useEffect(()=>(X&&(le(document.documentElement,{scrollBehavior:"auto"}),_.current=new Date),()=>{Hi(document.documentElement,"scrollBehavior")}),[X]);function lt(I){const W=I?(window.innerWidth-Xe)/window.innerWidth:1,q=I?-Xe:0;Se.current&&window.clearTimeout(Se.current),le(M.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:`scale(${W}) translate3d(0, ${q}px, 0)`}),!I&&M.current&&(Se.current=setTimeout(()=>{const Y=Bt(M.current,h);le(M.current,{transition:"none",transform:ce(h)?`translate3d(0, ${Y}px, 0)`:`translate3d(${Y}px, 0, 0)`})},500))}function Ot(I,W){if(W<0)return;const q=(window.innerWidth-Xe)/window.innerWidth,Y=q+W*(1-q),A=-Xe+W*Xe;le(M.current,{transform:ce(h)?`scale(${Y}) translate3d(0, ${A}px, 0)`:`scale(${Y}) translate3d(${A}px, 0, 0)`,transition:"none"})}function tn(I,W){const q=ce(h)?window.innerHeight:window.innerWidth,Y=W?(q-Xe)/q:1,A=W?-Xe:0;W&&le(M.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:ce(h)?`scale(${Y}) translate3d(0, ${A}px, 0)`:`scale(${Y}) translate3d(${A}px, 0, 0)`})}return N.createElement(Os,{defaultOpen:R,onOpenChange:I=>{!f&&!I||(I?be(!0):we(!0),pe(I))},open:X},N.createElement(os.Provider,{value:{activeSnapPoint:It,snapPoints:o,setActiveSnapPoint:ke,drawerRef:M,overlayRef:P,onOpenChange:t,onPress:_e,onRelease:en,onDrag:At,dismissible:f,handleOnly:d,isOpen:X,isDragging:fe,shouldFade:ot,closeDrawer:we,onNestedDrag:Ot,onNestedOpenChange:lt,onNestedRelease:tn,keyboardIsOpen:De,modal:b,snapPointsOffset:Pe,direction:h,shouldScaleBackground:i,setBackgroundColorOnScale:c,noBodyStyles:j,container:S,autoFocus:$}},r))}const gs=N.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:s,onRelease:a,shouldFade:o,isOpen:i,modal:c}=at(),u=cs(t,r),m=s&&s.length>0;return c?N.createElement(Es,{onMouseUp:a,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":i&&m?"true":"false","data-vaul-snap-points-overlay":i&&o?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});gs.displayName="Drawer.Overlay";const xs=N.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...s},a){const{drawerRef:o,onPress:i,onRelease:c,onDrag:u,keyboardIsOpen:m,snapPointsOffset:f,modal:d,isOpen:p,direction:g,snapPoints:y,container:x,handleOnly:b,autoFocus:v}=at(),[C,j]=N.useState(!1),h=cs(a,o),R=N.useRef(null),T=N.useRef(null),w=N.useRef(!1),E=y&&y.length>0;Ji();const k=(S,$,B=0)=>{if(w.current)return!0;const H=Math.abs(S.y),X=Math.abs(S.x),pe=X>H,F=["bottom","right"].includes($)?1:-1;if($==="left"||$==="right"){if(!(S.x*F<0)&&X>=0&&X<=B)return pe}else if(!(S.y*F<0)&&H>=0&&H<=B)return!pe;return w.current=!0,!0};N.useEffect(()=>{E&&window.requestAnimationFrame(()=>{j(!0)})},[]);function z(S){R.current=null,w.current=!1,c(S)}return N.createElement(Ts,{"data-vaul-drawer-direction":g,"data-vaul-drawer":"","data-vaul-delayed-snap-points":C?"true":"false","data-vaul-snap-points":p&&E?"true":"false","data-vaul-custom-container":x?"true":"false",...s,ref:h,style:f&&f.length>0?{"--snap-point-height":`${f[0]}px`,...t}:t,onPointerDown:S=>{b||(s.onPointerDown==null||s.onPointerDown.call(s,S),R.current={x:S.pageX,y:S.pageY},i(S))},onOpenAutoFocus:S=>{r==null||r(S),v||S.preventDefault()},onPointerDownOutside:S=>{if(e==null||e(S),!d||S.defaultPrevented){S.preventDefault();return}m.current&&(m.current=!1)},onFocusOutside:S=>{if(!d){S.preventDefault();return}},onPointerMove:S=>{if(T.current=S,b||(s.onPointerMove==null||s.onPointerMove.call(s,S),!R.current))return;const $=S.pageY-R.current.y,B=S.pageX-R.current.x,H=S.pointerType==="touch"?10:2;k({x:B,y:$},g,H)?u(S):(Math.abs(B)>H||Math.abs($)>H)&&(R.current=null)},onPointerUp:S=>{s.onPointerUp==null||s.onPointerUp.call(s,S),R.current=null,w.current=!1,c(S)},onPointerOut:S=>{s.onPointerOut==null||s.onPointerOut.call(s,S),z(T.current)},onContextMenu:S=>{s.onContextMenu==null||s.onContextMenu.call(s,S),z(T.current)}})});xs.displayName="Drawer.Content";const el=250,tl=120,vs=N.forwardRef(function({preventCycle:e=!1,children:t,...r},s){const{closeDrawer:a,isDragging:o,snapPoints:i,activeSnapPoint:c,setActiveSnapPoint:u,dismissible:m,handleOnly:f,isOpen:d,onPress:p,onDrag:g}=at(),y=N.useRef(null),x=N.useRef(!1);function b(){if(x.current){j();return}window.setTimeout(()=>{v()},tl)}function v(){if(o||e||x.current){j();return}if(j(),(!i||i.length===0)&&m){a();return}if(c===i[i.length-1]&&m){a();return}const R=i.findIndex(w=>w===c);if(R===-1)return;const T=i[R+1];u(T)}function C(){y.current=window.setTimeout(()=>{x.current=!0},el)}function j(){window.clearTimeout(y.current),x.current=!1}return N.createElement("div",{onClick:b,onPointerCancel:j,onPointerDown:h=>{f&&p(h),C()},onPointerMove:h=>{f&&g(h)},ref:s,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},N.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});vs.displayName="Drawer.Handle";function nl({onDrag:e,onOpenChange:t,...r}){const{onNestedDrag:s,onNestedOpenChange:a,onNestedRelease:o}=at();if(!s)throw new Error("Drawer.NestedRoot must be placed in another drawer");return N.createElement(ps,{nested:!0,onClose:()=>{a(!1)},onDrag:(i,c)=>{s(i,c),e==null||e(i,c)},onOpenChange:i=>{i&&a(i)},onRelease:o,...r})}function rl(e){const t=at(),{container:r=t.container,...s}=e;return N.createElement(Ps,{container:r,...s})}const $e={Root:ps,NestedRoot:nl,Content:xs,Overlay:gs,Trigger:ks,Portal:rl,Handle:vs,Close:Is,Title:Ms,Description:As},bs=({shouldScaleBackground:e=!0,...t})=>n.jsx($e.Root,{shouldScaleBackground:e,...t});bs.displayName="Drawer";const sl=$e.Portal,al=$e.Close,ys=l.forwardRef(({className:e,...t},r)=>n.jsx($e.Overlay,{ref:r,className:re("fixed inset-0 z-50 bg-black/80",e),...t}));ys.displayName=$e.Overlay.displayName;const ws=l.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(sl,{children:[n.jsx(ys,{}),n.jsxs($e.Content,{ref:s,className:re("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...r,children:[n.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));ws.displayName="DrawerContent";const js=({className:e,...t})=>n.jsx("div",{className:re("grid gap-1.5 p-4 text-center sm:text-left",e),...t});js.displayName="DrawerHeader";const Ns=({className:e,...t})=>n.jsx("div",{className:re("mt-auto flex flex-col gap-2 p-4",e),...t});Ns.displayName="DrawerFooter";const Ss=l.forwardRef(({className:e,...t},r)=>n.jsx($e.Title,{ref:r,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));Ss.displayName=$e.Title.displayName;const Cs=l.forwardRef(({className:e,...t},r)=>n.jsx($e.Description,{ref:r,className:re("text-sm text-muted-foreground",e),...t}));Cs.displayName=$e.Description.displayName;function ol({open:e,onOpenChange:t,hiddenWidgets:r,onAddWidget:s}){return n.jsx(bs,{open:e,onOpenChange:t,children:n.jsxs(ws,{children:[n.jsxs(js,{children:[n.jsx(Ss,{children:"Agregar Widgets"}),n.jsx(Cs,{children:"Selecciona los widgets que deseas agregar al dashboard"})]}),n.jsx("div",{className:"px-4 pb-4 max-h-[60vh] overflow-y-auto",children:r.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"Todos los widgets estn visibles en el dashboard"})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(a=>{const o=a.icon;return n.jsxs(se,{className:"hover:border-primary transition-colors",children:[n.jsx(ge,{className:"pb-3",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:n.jsx(o,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm",children:a.title}),n.jsx(Ys,{className:"text-xs mt-1",children:a.description})]})]})})}),n.jsx(ve,{className:"pt-0",children:n.jsxs(ae,{size:"sm",className:"w-full",onClick:()=>{s(a.id),r.length===1&&t(!1)},children:[n.jsx(et,{className:"h-4 w-4 mr-2"}),"Agregar"]})})]},a.id)})})}),n.jsx(Ns,{children:n.jsx(al,{asChild:!0,children:n.jsx(ae,{variant:"outline",children:"Cerrar"})})})]})})}function il({metrics:e}){const t=(o,i)=>{if(i===0)return{value:0,isPositive:!0};const c=o/i*100;return{value:Math.abs(Number(c.toFixed(1))),isPositive:c>=0}},r=t(e.negativeUnits+e.positiveUnits,e.totalSystemUnits),s=t(e.negativeUnits,e.totalSystemUnits),a=t(e.positiveUnits,e.totalSystemUnits);return n.jsx(pa,{items:[{id:"net",label:"Diferencia Neta",value:e.totalStock,color:e.totalStock<0?"text-destructive":e.totalStock>0?"text-success":"text-foreground",icon:Ft,prefix:"$",trend:r},{id:"negative",label:"Negativo Total",value:e.negativeStock,color:"text-destructive",icon:An,prefix:"$",trend:s},{id:"positive",label:"Positivo Total",value:e.positiveStock,color:"text-success",icon:tt,prefix:"$",trend:a}]})}function ll({activeProducts:e}){return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Productos Activos"}),n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[(()=>{const t=new Intl.NumberFormat("es-AR").format(e);let r="text-3xl";return t.length>8?r="text-xl":t.length>6&&(r="text-2xl"),n.jsx("div",{className:`${r} font-bold`,children:n.jsx(Ir,{value:e})})})(),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total en base de datos"})]})]})}function cl(){return n.jsxs(se,{className:"p-6 h-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Resumen de Inventario"}),n.jsx("button",{className:"text-sm text-muted-foreground hover:text-foreground",children:"Ver detalles"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Productos en Stock"}),n.jsx("span",{className:"text-sm font-medium",children:"85%"})]}),n.jsx(sn,{value:85})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Productos con Bajo Stock"}),n.jsx("span",{className:"text-sm font-medium text-warning",children:"12%"})]}),n.jsx(sn,{value:12,variant:"warning"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Productos Agotados"}),n.jsx("span",{className:"text-sm font-medium text-destructive",children:"3%"})]}),n.jsx(sn,{value:3,variant:"destructive"})]})]})]})}function dl(){return n.jsxs(se,{className:"p-6 h-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Alertas de Inventario"}),n.jsx("span",{className:"px-3 py-1 bg-warning/10 text-warning text-xs font-medium rounded-full",children:"3 Activas"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx(gt,{className:"w-5 h-5 text-warning mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Stock bajo en Sucursal Palermo II"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"15 productos necesitan reabastecimiento"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx(gt,{className:"w-5 h-5 text-warning mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Inventario cclico pendiente"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sucursal Microcentro - Vence en 2 das"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx(gt,{className:"w-5 h-5 text-destructive mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Diferencia significativa detectada"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sucursal Belgrano III - Revisar urgente"})]})]})]})]})}function ul({inventories:e,onDateClick:t,onAddClick:r,onViewCalendar:s}){return n.jsxs(se,{className:"p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Prximos Inventarios"})}),n.jsxs("div",{className:"flex gap-2",children:[s&&n.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:s,title:"Ver Calendario Completo",children:n.jsx(Ma,{className:"h-4 w-4"})}),r&&n.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,title:"Programar Nuevo",children:n.jsx(et,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No hay inventarios prximos"}),r&&n.jsxs(ae,{variant:"outline",size:"sm",onClick:r,children:[n.jsx(et,{className:"w-3 h-3 mr-2"}),"Programar"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex justify-end mb-2",children:n.jsxs("span",{className:"px-3 py-1 bg-primary/10 text-primary text-xs font-medium rounded-full",children:[e.length," Programados"]})}),e.map((a,o)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg group hover:bg-muted transition-colors cursor-pointer",onClick:()=>t(a.iso),children:[n.jsx(Pr,{className:"w-5 h-5 text-primary mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-foreground",children:[a.branch," - ",a.sector]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.date})]})]},o))]})})]})}const hr=8;function fl({branches:e}){const{selectBranch:t,user:r}=Mn(),[s,a]=l.useState(""),[o,i]=l.useState(!1),[c,u]=l.useState([]),[m,f]=l.useState(!0),[d,p]=l.useState({key:"progress",direction:"descending"});l.useEffect(()=>{(async()=>{f(!0);try{const R=await xt.getBranchesSummary();u(R)}catch(R){console.error("Failed to load branch summaries",R)}finally{f(!1)}})()},[]);const g=l.useMemo(()=>c.filter(h=>h.branchName.toLowerCase().includes(s.toLowerCase())),[c,s]),y=l.useMemo(()=>{let h=[...g];return d.key&&h.sort((R,T)=>{const w=R[d.key],E=T[d.key];return w<E?d.direction==="ascending"?-1:1:w>E?d.direction==="ascending"?1:-1:0}),h},[g,d]),x=h=>{let R="ascending";d.key===h&&d.direction==="ascending"&&(R="descending"),p({key:h,direction:R})},b=o?y:y.slice(0,hr),v=h=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(h),C=h=>{t&&(t(h),window.scrollTo({top:0,behavior:"smooth"}))},j=h=>(r==null?void 0:r.branchName)===h;return n.jsx(vt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full",children:n.jsxs(se,{className:"p-6 overflow-hidden border-t-4 border-t-primary shadow-md",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[n.jsx(tt,{className:"w-6 h-6 text-primary"}),"Monitor de Sucursales"]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Estado en tiempo real de inventarios cclicos y cumplimiento."})]}),n.jsxs("div",{className:"relative w-full md:w-72",children:[n.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Wt,{placeholder:"Buscar sucursal...",value:s,onChange:h=>a(h.target.value),className:"pl-10 h-10 bg-muted/50 border-0 focus-visible:ring-1 focus-visible:ring-primary"})]})]}),n.jsx("div",{className:"rounded-xl border bg-card/50 overflow-hidden",children:n.jsxs(xa,{children:[n.jsx(va,{className:"bg-muted/40 hover:bg-muted/50 transition-colors",children:n.jsxs(an,{children:[n.jsx(Ve,{className:"w-[200px] cursor-pointer",onClick:()=>x("branchName"),children:n.jsxs("div",{className:"flex items-center font-semibold text-foreground",children:["Sucursal",n.jsx(Yn,{className:"ml-2 h-3 w-3 opacity-50"})]})}),n.jsx(Ve,{className:"text-center cursor-pointer hidden md:table-cell",onClick:()=>x("deploymentDate"),children:"Fecha Inicio"}),n.jsx(Ve,{className:"text-center hidden lg:table-cell",children:"Vuelta"}),n.jsx(Ve,{className:"text-center hidden lg:table-cell",children:"Obj. Mensual"}),n.jsx(Ve,{className:"text-center cursor-pointer",onClick:()=>x("progress"),children:n.jsxs("div",{className:"flex items-center justify-center font-semibold text-foreground",children:["% Avance",n.jsx(Yn,{className:"ml-2 h-3 w-3 opacity-50"})]})}),n.jsx(Ve,{className:"text-center hidden md:table-cell",children:"Un. Inventario"}),n.jsx(Ve,{className:"text-center cursor-pointer hidden md:table-cell",onClick:()=>x("differenceUnits"),children:"Diferencia"}),n.jsx(Ve,{className:"text-right cursor-pointer",onClick:()=>x("adjustmentsValue"),children:"$ Ajustes"}),n.jsx(Ve,{className:"text-center w-[120px]",children:"Status"})]})}),n.jsx(ba,{children:m?Array.from({length:5}).map((h,R)=>n.jsxs(an,{children:[n.jsx(ie,{children:n.jsx("div",{className:"h-5 w-32 bg-muted rounded animate-pulse"})}),n.jsx(ie,{className:"hidden md:table-cell",children:n.jsx("div",{className:"h-5 w-20 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{className:"hidden lg:table-cell",children:n.jsx("div",{className:"h-5 w-10 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{className:"hidden lg:table-cell",children:n.jsx("div",{className:"h-5 w-12 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{children:n.jsx("div",{className:"h-5 w-16 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{className:"hidden md:table-cell",children:n.jsx("div",{className:"h-5 w-16 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{className:"hidden md:table-cell",children:n.jsx("div",{className:"h-5 w-16 bg-muted rounded animate-pulse mx-auto"})}),n.jsx(ie,{className:"text-right",children:n.jsx("div",{className:"h-5 w-24 bg-muted rounded animate-pulse ml-auto"})}),n.jsx(ie,{children:n.jsx("div",{className:"h-6 w-20 bg-muted rounded-full animate-pulse mx-auto"})})]},R)):b.length>0?b.map((h,R)=>n.jsxs(vt.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:R*.05},onClick:()=>C(h.branchName),className:re("group cursor-pointer hover:bg-muted/50 transition-all border-b last:border-0",j(h.branchName)&&"bg-primary/5 hover:bg-primary/10 border-l-4 border-l-primary"),children:[n.jsxs(ie,{className:"font-medium text-foreground relative",children:[j(h.branchName)&&n.jsx(vt.div,{layoutId:"active-indicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-primary"}),h.branchName]}),n.jsx(ie,{className:"text-center text-muted-foreground text-sm hidden md:table-cell",children:h.deploymentDate}),n.jsxs(ie,{className:"text-center text-muted-foreground text-sm hidden lg:table-cell",children:[h.cyclicRound,""]}),n.jsx(ie,{className:"text-center text-muted-foreground text-sm hidden lg:table-cell",children:h.monthlyGoal}),n.jsx(ie,{className:"text-center",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("span",{className:re("font-bold text-sm",h.progress>=h.monthlyGoal?"text-green-600":"text-foreground"),children:[h.progress,"%"]}),n.jsx("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden mt-1",children:n.jsx("div",{className:re("h-full rounded-full transition-all",h.progress>=100?"bg-green-500":"bg-primary"),style:{width:`${Math.min(h.progress,100)}%`}})})]})}),n.jsx(ie,{className:"text-center font-mono text-sm hidden md:table-cell",children:h.inventoryUnits}),n.jsx(ie,{className:"text-center font-mono text-sm hidden md:table-cell",children:n.jsxs("span",{className:h.differenceUnits===0?"text-muted-foreground":h.differenceUnits>0?"text-green-600":"text-red-600",children:[h.differenceUnits>0?"+":"",h.differenceUnits]})}),n.jsx(ie,{className:"text-right font-mono text-sm",children:n.jsx("span",{className:h.adjustmentsValue===0?"text-muted-foreground":h.adjustmentsValue>0?"text-green-600":"text-red-600",children:v(h.adjustmentsValue)})}),n.jsx(ie,{className:"text-center",children:h.status==="controlado"?n.jsxs(Te,{variant:"outline",className:"font-normal border bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30",children:[n.jsx(Xs,{className:"w-3 h-3 mr-1"})," FINALIZADA"]}):h.status==="por_controlar"?n.jsxs(Te,{variant:"outline",className:"font-normal border bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30",children:[n.jsx(Dt,{className:"w-3 h-3 mr-1"})," EN PROCESO"]}):n.jsxs(Te,{variant:"outline",className:"font-normal border bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30",children:[n.jsx(gt,{className:"w-3 h-3 mr-1"})," PENDIENTE"]})})]},h.branchName)):n.jsx(an,{children:n.jsx(ie,{colSpan:9,className:"h-24 text-center text-muted-foreground",children:"No se encontraron sucursales con esa bsqueda."})})})]})}),y.length>hr&&n.jsx("div",{className:"mt-4 flex justify-center",children:n.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>i(!o),className:"text-muted-foreground hover:text-foreground",children:o?"Mostrar menos":`Ver todas las sucursales (${y.length})`})})]})})}function ml({completedCount:e,totalCount:t}){const r=t>0?Math.round(e/t*100):0,s=()=>r>=80?"text-success":r>=50?"text-warning":"text-destructive";return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Progreso"}),n.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:`text-xl font-bold ${s()}`,children:[r,"%"]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," de ",t," completados"]}),n.jsx(Er,{value:r,className:"mt-2"})]})]})}function hl({criticalCount:e,outOfStockCount:t}){const r=e>0||t>0;return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Crticos"}),n.jsx(Cr,{className:`h-4 w-4 ${r?"text-destructive":"text-muted-foreground"}`})]}),n.jsxs(ve,{children:[n.jsx("div",{className:`text-xl font-bold ${r?"text-destructive":"text-foreground"}`,children:e}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Productos con stock bajo"}),t>0&&n.jsxs(Te,{variant:"destructive",className:"mt-2",children:[t," agotados"]})]})]})}function pl({totalValue:e,changePercentage:t}){const r=t!==void 0&&t>=0;return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium text-muted-foreground",children:"Valor Total"}),n.jsx(Ft,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-xl font-bold",children:["$",n.jsx(Ir,{value:e})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Valor de inventario"}),t!==void 0&&n.jsxs("div",{className:`flex items-center gap-1 mt-2 text-xs ${r?"text-success":"text-destructive"}`,children:[r?n.jsx(tt,{className:"h-3 w-3"}):n.jsx(An,{className:"h-3 w-3"}),n.jsxs("span",{children:[Math.abs(t).toFixed(1),"% vs mes anterior"]})]})]})]})}function gl({activeCount:e,activeBranches:t}){return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Activos"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"}),e>0&&n.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-success rounded-full animate-pulse"})]})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-xl font-bold",children:e}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Usuarios trabajando"}),t.length>0&&n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[t.slice(0,2).map((r,s)=>n.jsx(Te,{variant:"secondary",className:"text-xs",children:r},s)),t.length>2&&n.jsxs(Te,{variant:"secondary",className:"text-xs",children:["+",t.length-2]})]})]})]})}function xl({pendingCount:e,urgentCount:t}){return n.jsxs(se,{className:"h-full flex flex-col justify-between",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Pendientes"}),n.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:`text-xl font-bold ${e>0?"text-warning":"text-foreground"}`,children:e}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Inventarios sin completar"}),t>0&&n.jsxs(Te,{variant:"destructive",className:"mt-2",children:[t," urgentes"]})]})]})}function vl({data:e=[]}){const[t,r]=l.useState("7d"),s=[{date:"01/12",negative:-1200,positive:800},{date:"02/12",negative:-950,positive:1100},{date:"03/12",negative:-1500,positive:900},{date:"04/12",negative:-800,positive:1300},{date:"05/12",negative:-1100,positive:950},{date:"06/12",negative:-900,positive:1200},{date:"07/12",negative:-1300,positive:1e3}],a=e.length>0?e:s;return n.jsxs(se,{className:"h-full",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Tendencias"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ae,{variant:t==="7d"?"default":"outline",size:"sm",onClick:()=>r("7d"),children:"7 das"}),n.jsx(ae,{variant:t==="30d"?"default":"outline",size:"sm",onClick:()=>r("30d"),children:"30 das"})]})]}),n.jsx(ve,{children:n.jsx(Mr,{width:"100%",height:200,children:n.jsxs(ya,{data:a,children:[n.jsx(wa,{strokeDasharray:"3 3"}),n.jsx(ja,{dataKey:"date",fontSize:12}),n.jsx(Na,{fontSize:12}),n.jsx(Ar,{}),n.jsx(Sa,{}),n.jsx(Gn,{type:"monotone",dataKey:"negative",stroke:"hsl(var(--destructive))",name:"Negativo",strokeWidth:2}),n.jsx(Gn,{type:"monotone",dataKey:"positive",stroke:"hsl(var(--success))",name:"Positivo",strokeWidth:2})]})})})]})}function bl({products:e=[]}){const t=[{name:"Ibuprofeno 600mg",ean:"7798140250685",difference:-45,value:-2250,type:"negative"},{name:"Paracetamol 500mg",ean:"7798140250692",difference:32,value:1600,type:"positive"},{name:"Amoxicilina 500mg",ean:"7798140250708",difference:-28,value:-1680,type:"negative"},{name:"Omeprazol 20mg",ean:"7798140250715",difference:25,value:1500,type:"positive"},{name:"Losartn 50mg",ean:"7798140250722",difference:-20,value:-1200,type:"negative"}],r=e.length>0?e:t;return n.jsxs(se,{className:"h-full",children:[n.jsxs(ge,{className:"pb-3",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Top Diferencias"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Productos con mayores discrepancias"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-3",children:r.map((s,a)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium",children:s.name}),n.jsx(Te,{variant:s.type==="negative"?"destructive":"default",className:"text-xs",children:s.type==="negative"?"Faltante":"Sobrante"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["EAN: ",s.ean]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`flex items-center gap-1 ${s.type==="negative"?"text-destructive":"text-success"}`,children:[s.type==="negative"?n.jsx(An,{className:"h-3 w-3"}):n.jsx(tt,{className:"h-3 w-3"}),n.jsx("span",{className:"text-sm font-semibold",children:Math.abs(s.difference)})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",Math.abs(s.value)]})]}),n.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",children:n.jsx(ga,{className:"h-4 w-4"})})]})]},a))})})]})}function yl({activities:e=[]}){const t=[{id:"1",type:"completed",title:"Inventario Farmacia completado",branch:"Belgrano IV",timestamp:"Hace 5 minutos",user:"Juan Prez"},{id:"2",type:"adjusted",title:"Ajustes realizados en Perfumera",branch:"Recoleta",timestamp:"Hace 15 minutos",user:"Mara Gonzlez"},{id:"3",type:"imported",title:"Inventario importado",branch:"Palermo II",timestamp:"Hace 1 hora",user:"Carlos Rodrguez"},{id:"4",type:"completed",title:"Pre-conteo finalizado",branch:"Microcentro",timestamp:"Hace 2 horas",user:"Ana Martnez"}],r=e.length>0?e:t,s=o=>{switch(o){case"completed":return n.jsx(Rr,{className:"h-4 w-4 text-success"});case"adjusted":return n.jsx(Ba,{className:"h-4 w-4 text-warning"});case"imported":return n.jsx(Dr,{className:"h-4 w-4 text-primary"})}},a=o=>{switch(o){case"completed":return"Completado";case"adjusted":return"Ajustado";case"imported":return"Importado"}};return n.jsxs(se,{className:"h-full",children:[n.jsxs(ge,{className:"pb-3",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Actividad Reciente"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"ltimas acciones realizadas"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.map((o,i)=>n.jsxs("div",{className:"relative",children:[i<r.length-1&&n.jsx("div",{className:"absolute left-2 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"relative z-10 mt-1 rounded-full bg-background p-1 border",children:s(o.type)}),n.jsxs("div",{className:"flex-1 pb-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:o.title}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.branch,"  ",o.user]})]}),n.jsx(Te,{variant:"secondary",className:"text-xs",children:a(o.type)})]}),n.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[n.jsx(Dt,{className:"h-3 w-3"}),n.jsx("span",{children:o.timestamp})]})]})]})]},o.id))})})]})}const He=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];function wl({data:e=[]}){const t=[{name:"Farmacia",value:450,color:He[0]},{name:"Perfumera",value:280,color:He[1]},{name:"Higiene",value:180,color:He[2]},{name:"Bebs",value:120,color:He[3]},{name:"Otros",value:90,color:He[4]}],r=e.length>0?e:t,s=r.reduce((a,o)=>a+o.value,0);return n.jsxs(se,{className:"h-full",children:[n.jsxs(ge,{className:"pb-3",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Distribucin por Categora"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Productos por categora"})]}),n.jsxs(ve,{children:[n.jsx(Mr,{width:"100%",height:200,children:n.jsxs(Ca,{children:[n.jsx(Da,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:o})=>`${a} ${(o*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((a,o)=>n.jsx(Ra,{fill:a.color||He[o%He.length]},`cell-${o}`))}),n.jsx(Ar,{})]})}),n.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:r.map((a,o)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color||He[o%He.length]}}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.name,": ",a.value," (",(a.value/s*100).toFixed(1),"%)"]})]},o))})]})]})}function jl({goals:e=[]}){const t=[{title:"Inventarios Completados",current:45,target:60,badge:"75%"},{title:"Productos Controlados",current:1250,target:1500,badge:"83%"},{title:"Diferencias Resueltas",current:28,target:35,badge:"80%"}],r=e.length>0?e:t;return n.jsxs(se,{className:"h-full",children:[n.jsx(ge,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Objetivos del Mes"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Progreso hacia metas"})]}),n.jsx(Tr,{className:"h-5 w-5 text-primary"})]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.map((s,a)=>{const o=Math.round(s.current/s.target*100),i=o>=100;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:s.title}),i&&n.jsx(ka,{className:"h-4 w-4 text-success"})]}),n.jsxs(Te,{variant:i?"default":"secondary",children:[s.current,"/",s.target]})]}),n.jsx(Er,{value:o,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[o,"% completado"]})]},a)})})})]})}function Nl({isOnline:e=!0,pendingCount:t=0,lastSync:r="Hace 5 minutos",onSync:s}){return n.jsxs(se,{className:"h-full",children:[n.jsx(ge,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Sincronizacin"}),e?n.jsx(kr,{className:"h-5 w-5 text-success"}):n.jsx(Ks,{className:"h-5 w-5 text-destructive"})]})}),n.jsxs(ve,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Estado de Conexin"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e?"Conectado":"Sin conexin"})]}),n.jsx(Te,{variant:e?"default":"destructive",children:e?"Online":"Offline"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Datos Pendientes"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t>0?`${t} elementos`:"Todo sincronizado"})]}),t>0?n.jsx(Te,{variant:"warning",children:t}):n.jsx(Rr,{className:"h-5 w-5 text-success"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(Dt,{className:"h-3 w-3"}),n.jsxs("span",{children:["ltima sincronizacin: ",r]})]}),n.jsxs(ae,{className:"w-full",variant:t>0?"default":"outline",onClick:s,disabled:!e,children:[n.jsx(Zs,{className:"h-4 w-4 mr-2"}),t>0?"Sincronizar Ahora":"Actualizar"]})]})]})}function Sl({actions:e=[]}){const t=[{title:"Nuevo Pre-Conteo",description:"Iniciar nuevo pre-conteo",icon:et,onClick:()=>console.log("Nuevo Pre-Conteo"),variant:"default"},{title:"Importar Inventario",description:"Cargar desde Excel",icon:Dr,onClick:()=>console.log("Importar"),variant:"outline"},{title:"Ver Reportes",description:"Anlisis y estadsticas",icon:Sr,onClick:()=>console.log("Reportes"),variant:"outline"},{title:"Exportar Datos",description:"Descargar informacin",icon:Js,onClick:()=>console.log("Exportar"),variant:"outline"},{title:"Configuracin",description:"Ajustes del sistema",icon:Qs,onClick:()=>console.log("Configuracin"),variant:"secondary"}],r=e.length>0?e:t;return n.jsxs(se,{className:"h-full",children:[n.jsxs(ge,{className:"pb-3",children:[n.jsx(xe,{className:"text-lg font-semibold",children:"Acciones Rpidas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Tareas frecuentes"})]}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.map((s,a)=>{const o=s.icon;return n.jsxs(ae,{variant:s.variant||"outline",className:"h-auto flex-col items-start p-4 gap-2",onClick:s.onClick,children:[n.jsx(o,{className:"h-5 w-5"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm font-medium",children:s.title}),n.jsx("p",{className:"text-xs text-muted-foreground font-normal",children:s.description})]})]},a)})})})]})}function Cl({assignedDays:e=0,daysRemaining:t=0,totalProgress:r=0,monthlyProgress:s=[],isEditable:a=!1,onEdit:o}){const i=e>0?Math.ceil(e/30):3,c=Array.from({length:i});return n.jsxs(se,{className:"h-full flex flex-col overflow-hidden relative group/card",children:[n.jsxs(ge,{className:"flex flex-row items-center justify-between space-y-0 px-5 pt-4 pb-2",children:[n.jsx(xe,{className:"text-sm font-medium",children:"Plazo de Inventario"}),n.jsxs("div",{className:"flex items-center gap-2",children:[a&&n.jsx("button",{onPointerDown:u=>u.stopPropagation(),onClick:u=>{u.stopPropagation(),o==null||o()},className:"relative z-50 text-muted-foreground hover:text-primary transition-colors opacity-0 group-hover/card:opacity-100 cursor-pointer",title:"Configurar plazo",children:n.jsx(wn,{className:"h-4 w-4"})}),!a&&n.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]})]}),n.jsxs(ve,{className:"flex flex-col justify-between flex-1 px-5 pb-4 pt-1 gap-4",children:[n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:e>0?e:"-"}),n.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Das Asignados"})]}),n.jsx("div",{className:"h-8 w-px bg-border/60 mx-2 mb-1"}),n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:e>0?t:"-"}),n.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide text-right",children:"Das Restantes"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Avance Global"}),n.jsxs("span",{className:"text-sm font-bold text-primary",children:[r,"%"]})]}),n.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${i}, 1fr)`},children:c.map((u,m)=>{const f=s[m]||0,d=e===0;return n.jsxs("div",{className:"space-y-1.5 group",children:[n.jsx("div",{className:"h-2 w-full bg-muted/50 rounded-full overflow-hidden relative",children:n.jsx("div",{className:re("h-full bg-primary transition-all duration-500 rounded-full",d&&"w-0"),style:{width:d?"0%":`${Math.min(f,100)}%`}})}),n.jsx("div",{className:"text-[10px] text-center text-muted-foreground font-medium",children:d?"-":`${f}%`})]},m)})})]})]})]})}const Dl=e=>{const t=Math.min(120,Math.max(0,e*1.2));return{background:`linear-gradient(135deg, hsl(${t}, 85%, 60%), hsl(${t}, 90%, 40%))`,color:"white"}};function Rl(){const{user:e}=Mn(),[t,r]=l.useState([]),[s,a]=l.useState(null),[o,i]=l.useState(!0);l.useEffect(()=>{const u=async()=>{if(!(e!=null&&e.branchSheet)){i(!1);return}try{const f=await ta(e.branchSheet),d=await xt.getAllCyclicInventories(e.branchSheet)||[],p=new Map(d.map(C=>[C.labName,C.status])),g={Farmacia:{total:0,controlled:0},Perfumera:{total:0,controlled:0},Accesorios:{total:0,controlled:0},Varios:{total:0,controlled:0}};let y=0,x=0;f.forEach(C=>{let j="Varios";const h=C.category.toUpperCase();h==="MEDICAMENTOS"?j="Farmacia":h==="PERFUMERIA"?j="Perfumera":h==="ACCESORIOS"&&(j="Accesorios");const T=p.get(C.name)==="controlado";g[j]?(g[j].total+=1,T&&(g[j].controlled+=1)):(g.Varios.total+=1,T&&(g.Varios.controlled+=1)),y+=1,T&&(x+=1)});const b=Object.entries(g).map(([C,j])=>{const h=j.total>0?Math.round(j.controlled/j.total*100):0;return{name:C,totalItems:j.total,controlledItems:j.controlled,percentage:h,pendingPercentage:100-h}}),v=y>0?Math.round(x/y*100):0;a({name:"Global",totalItems:y,controlledItems:x,percentage:v,pendingPercentage:100-v}),r(b)}catch(f){console.error("Error loading category progress:",f)}finally{i(!1)}};u();const m=setInterval(u,3e4);return()=>clearInterval(m)},[e]);const c=[...t].sort((u,m)=>u.percentage-m.percentage);return o?n.jsx(se,{className:"h-full flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.jsxs(se,{className:"h-full flex flex-col border-border/50 shadow-sm bg-card/50 backdrop-blur-sm",children:[n.jsx(ge,{className:"pb-2 px-4 pt-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(xe,{className:"text-base font-semibold tracking-tight",children:"Progreso de Inventario"}),n.jsxs("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full",children:[s==null?void 0:s.totalItems," Laboratorios"]})]})}),n.jsx(ve,{className:"flex-1 p-4 pt-2",children:n.jsxs("div",{className:"grid grid-cols-12 gap-3 h-full",children:[n.jsx("div",{className:"col-span-7 h-full",children:n.jsxs("div",{className:"h-full rounded-xl bg-muted/30 border border-border/50 p-5 flex flex-col justify-between relative overflow-hidden group hover:bg-muted/50 transition-colors",children:[n.jsx("div",{className:"flex justify-between items-start z-10",children:n.jsx("div",{className:"p-2 bg-background/50 backdrop-blur rounded-lg",children:n.jsx(ea,{className:"h-5 w-5 text-muted-foreground"})})}),n.jsxs("div",{className:"z-10",children:[n.jsxs("h3",{className:"text-4xl font-bold tracking-tighter text-foreground mb-1",children:[s==null?void 0:s.percentage,"%"]}),n.jsx("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"AVANCE TOTAL"})]}),n.jsx("div",{className:"absolute -right-4 -bottom-4 w-32 h-32 bg-foreground/5 rounded-full blur-3xl group-hover:bg-foreground/10 transition-colors"})]})}),n.jsx("div",{className:"col-span-5 grid grid-cols-1 grid-rows-4 gap-2 h-full",children:c.map(u=>n.jsxs("div",{className:"relative overflow-hidden rounded-lg p-3 flex items-center justify-between transition-all hover:scale-[1.02] cursor-pointer group shadow-sm",style:Dl(u.percentage),children:[n.jsxs("div",{className:"z-10 flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase text-white/90 tracking-wider",children:u.name}),n.jsxs("span",{className:"text-lg font-bold text-white drop-shadow-sm",children:[u.percentage,"%"]})]}),n.jsx("div",{className:"z-10 text-right",children:n.jsxs("span",{className:"text-[10px] font-medium text-white/90 bg-black/20 px-1.5 py-0.5 rounded backdrop-blur-sm",children:[u.controlledItems,"/",u.totalItems]})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-shimmer"})]},u.name))})]})})]})}const El={admin:["VIEW_ADMIN_DASHBOARD","MANAGE_INVENTORY_CONFIG","VIEW_BRANCH_MONITOR","EDIT_SETTINGS","IMPERSONATE_BRANCH"],branch:[]};function gn(e,t){return e?(El[e.role]||[]).includes(t):!1}const pr=Fs,gr=Ws,Tn=l.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(xr,{ref:s,className:re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(zs,{asChild:!0,children:n.jsx(zr,{className:"h-4 w-4 opacity-50"})})]}));Tn.displayName=xr.displayName;const Ds=l.forwardRef(({className:e,...t},r)=>n.jsx(vr,{ref:r,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Oa,{className:"h-4 w-4"})}));Ds.displayName=vr.displayName;const Rs=l.forwardRef(({className:e,...t},r)=>n.jsx(br,{ref:r,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(zr,{className:"h-4 w-4"})}));Rs.displayName=br.displayName;const kn=l.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(Ls,{children:n.jsxs(yr,{ref:a,className:re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(Ds,{}),n.jsx($s,{className:re("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(Rs,{})]})}));kn.displayName=yr.displayName;const Tl=l.forwardRef(({className:e,...t},r)=>n.jsx(wr,{ref:r,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Tl.displayName=wr.displayName;const pt=l.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(jr,{ref:s,className:re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Bs,{children:n.jsx(Ea,{className:"h-4 w-4"})})}),n.jsx(Us,{children:t})]}));pt.displayName=jr.displayName;const kl=l.forwardRef(({className:e,...t},r)=>n.jsx(Nr,{ref:r,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));kl.displayName=Nr.displayName;const In={async getEvents(e,t=!1){let r=rn.from("inventory_events").select("*").order("date",{ascending:!0});!t&&e&&(r=r.eq("branch_name",e));const{data:s,error:a}=await r;return a?(console.error("Error fetching events:",a),[]):s||[]},async addEvent(e){const{data:t,error:r}=await rn.from("inventory_events").insert([e]).select().single();return r?(console.error("Error adding event:",r),null):t},async deleteEvent(e){const{error:t}=await rn.from("inventory_events").delete().eq("id",e);return t?(console.error("Error deleting event:",t),!1):!0}};function Il({open:e,onOpenChange:t,onEventAdded:r}){const[s,a]=l.useState(!1),[o,i]=l.useState(""),[c,u]=l.useState(""),[m,f]=l.useState("Farmacia"),[d,p]=l.useState(new Date().toISOString().slice(0,10)),g=async y=>{if(y.preventDefault(),!c||!d){Ke.error("Sucursal y fecha son requeridas");return}a(!0);try{const x=await In.addEvent({title:o||`Inventario ${c}`,branch_name:c,sector:m,date:d});x?(Ke.success("Evento agregado correctamente"),r(x),t(!1),i(""),u(""),f("Farmacia")):Ke.error("Error al crear el evento")}catch(x){console.error(x),Ke.error("Error inesperado")}finally{a(!1)}};return n.jsx(xn,{open:e,onOpenChange:t,children:n.jsxs(vn,{className:"sm:max-w-[425px]",children:[n.jsx(bn,{children:n.jsx(yn,{children:"Programar Inventario"})}),n.jsxs("form",{onSubmit:g,className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{htmlFor:"branch",children:"Sucursal"}),n.jsxs(pr,{value:c,onValueChange:u,children:[n.jsx(Tn,{children:n.jsx(gr,{placeholder:"Seleccionar sucursal"})}),n.jsx(kn,{className:"max-h-[200px]",children:na.map(y=>n.jsx(pt,{value:y,children:y},y))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{htmlFor:"sector",children:"Sector"}),n.jsxs(pr,{value:m,onValueChange:f,children:[n.jsx(Tn,{children:n.jsx(gr,{placeholder:"Seleccionar sector"})}),n.jsxs(kn,{children:[n.jsx(pt,{value:"Farmacia",children:"Farmacia"}),n.jsx(pt,{value:"Perfumera",children:"Perfumera"}),n.jsx(pt,{value:"General",children:"General"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{htmlFor:"date",children:"Fecha"}),n.jsx(Wt,{id:"date",type:"date",value:d,onChange:y=>p(y.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{htmlFor:"title",children:"Ttulo (Opcional)"}),n.jsx(Wt,{id:"title",placeholder:"Ej. Inventario Anual",value:o,onChange:y=>i(y.target.value)})]}),n.jsxs(ra,{className:"pt-4",children:[n.jsx(ae,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsxs(ae,{type:"submit",disabled:s,children:[s&&n.jsx(Ta,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar Evento"]})]})]})]})})}const Ml=[{name:"Belgrano IV",address:"Av. Cabildo 2040",zonal:"Zona Norte",email:"belgrano4@farmaplus.com"},{name:"Recoleta",address:"Av. Santa Fe 1860",zonal:"Zona Centro",email:"recoleta@farmaplus.com"},{name:"Palermo II",address:"Av. Las Heras 3520",zonal:"Zona Norte",email:"palermo2@farmaplus.com"},{name:"Microcentro",address:"Florida 520",zonal:"Zona Centro",email:"microcentro@farmaplus.com"},{name:"Belgrano III",address:"Av. Cabildo 1520",zonal:"Zona Norte",email:"belgrano3@farmaplus.com"},{name:"Villa Urquiza II",address:"Av. Triunvirato 4280",zonal:"Zona Norte",email:"villaurquiza2@farmaplus.com"}],Al={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Ol={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};function ac(){const{user:e}=Mn(),{visibleWidgets:t,hiddenWidgets:r,isEditMode:s,setIsEditMode:a,reorderWidgets:o,toggleWidgetVisibility:i,resetLayout:c}=ki(e==null?void 0:e.branchName),[u,m]=l.useState(!1),f=no(Zn(Fn,{activationConstraint:{distance:8}}),Zn(Bn,{coordinateGetter:Di})),d=l.useMemo(()=>t.filter(D=>D.type==="branches-table"?gn(e,"VIEW_BRANCH_MONITOR"):!0),[t,e]),p=D=>{const{active:O,over:P}=D;P&&O.id!==P.id&&o(O.id,P.id)},[g,y]=l.useState({totalStock:0,activeProducts:0,negativeStock:0,positiveStock:0,negativeUnits:0,positiveUnits:0,totalSystemUnits:0}),[x,b]=l.useState(!1),[v,C]=l.useState(new Date),[j,h]=l.useState([]),[R,T]=l.useState(!1);l.useState(""),l.useState(""),l.useState(""),l.useState(new Date().toISOString().slice(0,10));const[w,E]=l.useState(0),[k,z]=l.useState(!1),[S,$]=l.useState(""),[B,H]=l.useState(90),[X,pe]=l.useState(0);Ei("(min-width: 768px)"),l.useEffect(()=>{(async()=>{if(e!=null&&e.branchName){const O=await xt.getBranchConfig(e.branchName);E(O)}})()},[e]),l.useEffect(()=>{(async()=>{let O=0;try{O=await sa()}catch(P){console.error("Error fetching product count:",P)}if(!(e!=null&&e.branchSheet)){y({totalStock:0,activeProducts:O,negativeStock:0,positiveStock:0,negativeUnits:0,positiveUnits:0,totalSystemUnits:0});return}try{const _=(await xt.getAllCyclicInventories(e.branchSheet)).reduce((K,J)=>({negativeStock:K.negativeStock+J.negativeValue,positiveStock:K.positiveStock+J.positiveValue,totalStock:K.totalStock+J.differenceValue,negativeUnits:K.negativeUnits+J.negativeUnits,positiveUnits:K.positiveUnits+J.positiveUnits,totalSystemUnits:K.totalSystemUnits+J.totalSystemUnits}),{negativeStock:0,positiveStock:0,totalStock:0,negativeUnits:0,positiveUnits:0,totalSystemUnits:0});y({totalStock:_.totalStock,activeProducts:O,negativeStock:_.negativeStock,positiveStock:_.positiveStock,negativeUnits:_.negativeUnits,positiveUnits:_.positiveUnits,totalSystemUnits:_.totalSystemUnits})}catch(P){console.error("Error loading metrics:",P)}})()},[e]);const F=()=>{const D=new Date().getHours();return D>=6&&D<12?"Buenos das":D>=12&&D<20?"Buenas tardes":"Buenas noches"};l.useEffect(()=>{(async()=>{if(!e)return;const O=e.role==="admin",_=(await In.getEvents(e.branchName,O)).map(K=>({id:K.id,title:K.title,branch:K.branch_name,sector:K.sector,date:K.date}));h(_)})()},[e]);const be=D=>{const O=D.toISOString().slice(0,10);return j.filter(P=>P.date===O)},fe=D=>{const O=D?new Date(D):new Date;C(O),b(!0)},Ne=D=>{switch(D){case"metrics-carousel":return n.jsx(il,{metrics:g});case"active-products":return n.jsx(ll,{activeProducts:g.activeProducts});case"inventory-summary":return n.jsx(cl,{});case"inventory-alerts":return n.jsx(dl,{});case"upcoming-inventories":const O=j.filter(P=>new Date(P.date)>=new Date).sort((P,_)=>new Date(P.date).getTime()-new Date(_.date).getTime()).slice(0,5).map(P=>({branch:P.branch,sector:P.sector,date:new Date(P.date).toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"}),iso:P.date}));return n.jsx(ul,{inventories:O,onDateClick:fe,onViewCalendar:()=>b(!0),onAddClick:(e==null?void 0:e.role)==="admin"?()=>{b(!0),T(!0)}:void 0});case"branches-table":return gn(e,"VIEW_BRANCH_MONITOR")?n.jsx(fl,{branches:Ml}):null;case"inventory-progress":return n.jsx(ml,{completedCount:3,totalCount:10});case"critical-products":return n.jsx(hl,{criticalCount:15,outOfStockCount:3});case"total-stock-value":return n.jsx(pl,{totalValue:g.totalStock,changePercentage:5.2});case"active-users":return n.jsx(gl,{activeCount:5,activeBranches:["Belgrano IV","Recoleta","Palermo II"]});case"pending-inventories":return n.jsx(xl,{pendingCount:7,urgentCount:2});case"trends-chart":return n.jsx(vl,{});case"top-products":return n.jsx(bl,{});case"activity-timeline":return n.jsx(yl,{});case"category-distribution":return n.jsx(wl,{});case"monthly-goals":return n.jsx(jl,{});case"sync-status":return n.jsx(Nl,{isOnline:navigator.onLine,pendingCount:0});case"quick-actions":return n.jsx(Sl,{});case"countdown":return n.jsx(Cl,{assignedDays:w,daysRemaining:w,totalProgress:0,monthlyProgress:[],isEditable:gn(e,"MANAGE_INVENTORY_CONFIG"),onEdit:()=>z(!0)});case"category-progress":return n.jsx(Rl,{});default:return null}};return n.jsxs(vt.div,{className:"pt-3 pb-6 px-6 space-y-6",variants:Al,initial:"hidden",animate:"show",children:[n.jsxs(vt.div,{variants:Ol,className:"space-y-1",children:[n.jsx("div",{className:"text-muted-foreground text-xs font-normal",children:new Date().toLocaleDateString("es-AR",{weekday:"long",month:"short",day:"2-digit",year:"numeric"})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-2xl font-medium tracking-tight text-foreground",children:[F(),", ",(e==null?void 0:e.branchName)||"Sucursal"," "]}),n.jsxs("div",{className:"flex gap-2",children:[s&&n.jsxs(n.Fragment,{children:[n.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>m(!0),disabled:r.length===0,children:[n.jsx(et,{className:"h-4 w-4 mr-2"}),"Agregar Widget"]}),n.jsxs(ae,{variant:"outline",size:"sm",onClick:c,children:[n.jsx($a,{className:"h-4 w-4 mr-2"}),"Resetear"]})]}),n.jsxs(ae,{variant:s?"default":"outline",size:"sm",onClick:()=>a(!s),children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),s?"Guardar":"Editar Dashboard"]})]})]})]}),n.jsx(ai,{sensors:f,collisionDetection:so,onDragEnd:p,children:n.jsxs(gi,{items:d.map(D=>D.id),strategy:Vn,children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.filter(D=>D.size==="small").slice(0,4).map(D=>n.jsx(un,{widget:D,isEditMode:s,onRemove:()=>i(D.id),children:Ne(D.type)},D.id))}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.filter(D=>D.size==="large").map(D=>n.jsx(un,{widget:D,isEditMode:s,onRemove:()=>i(D.id),children:Ne(D.type)},D.id))}),n.jsx("div",{className:"space-y-6",children:d.filter(D=>D.size==="full").map(D=>n.jsx(un,{widget:D,isEditMode:s,onRemove:()=>i(D.id),children:Ne(D.type)},D.id))})]})}),n.jsx(ol,{open:u,onOpenChange:m,hiddenWidgets:r,onAddWidget:i}),n.jsx(xn,{open:x,onOpenChange:b,children:n.jsxs(vn,{className:"w-[1200px] max-w-[95vw] h-[85vh] flex flex-col p-6 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(bn,{children:n.jsx(yn,{className:"text-2xl font-bold",children:"Calendario de Inventarios"})}),(e==null?void 0:e.role)==="admin"&&n.jsxs(ae,{onClick:()=>T(!0),children:[n.jsx(et,{className:"mr-2 h-4 w-4"}),"Programar Nuevo"]})]}),n.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[n.jsx("div",{className:"flex-1 overflow-auto pr-2",children:n.jsx(Ti,{events:j,selected:v,onSelect:C})}),n.jsxs("div",{className:"w-80 border-l pl-6 flex flex-col gap-4 overflow-hidden",children:[n.jsx("h3",{className:"font-semibold text-lg text-primary",children:v.toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"})}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:be(v).length===0?n.jsx("div",{className:"text-center py-10 text-muted-foreground bg-muted/30 rounded-lg border border-dashed",children:n.jsx("p",{children:"No hay inventarios programados para hoy."})}):be(v).map(D=>n.jsxs("div",{className:"p-4 bg-card border rounded-lg shadow-sm hover:shadow-md transition-shadow group relative",children:[(e==null?void 0:e.role)==="admin"&&n.jsxs("button",{onClick:async O=>{O.stopPropagation(),confirm("Eliminar este evento?")&&(await In.deleteEvent(D.id),h(P=>P.filter(_=>_.id!==D.id)),Ke.success("Evento eliminado"))},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 p-1 hover:bg-destructive/10 text-destructive rounded",children:[n.jsx("span",{className:"sr-only",children:"Eliminar"}),"x"]}),n.jsx("div",{className:"font-bold text-lg text-primary mb-1",children:D.branch}),n.jsx("div",{className:"text-sm font-medium text-foreground",children:D.title}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1 capitalize",children:D.sector})]},D.id))})]})]})]})}),n.jsx(Il,{open:R,onOpenChange:T,onEventAdded:D=>{const O={id:D.id,title:D.title,branch:D.branch_name,sector:D.sector,date:D.date};h(P=>[...P,O])}}),n.jsx(xn,{open:k,onOpenChange:D=>{if(z(D),D){const O=w||90,_=[180,150,120,90].find(K=>K<=O)||90;$((e==null?void 0:e.branchName)||""),H(_),pe(Math.max(0,O-_))}},children:n.jsxs(vn,{className:"max-w-md",children:[n.jsx(bn,{children:n.jsx(yn,{children:"Configurar Plazo de Inventario"})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{className:"text-muted-foreground",children:"Sucursal Seleccionada"}),n.jsx("div",{className:"text-lg font-semibold border p-3 rounded-md bg-muted/50",children:(e==null?void 0:e.branchName)||"Sin sucursal asignada"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ze,{children:"Das Base"}),n.jsx("div",{className:"grid grid-cols-4 gap-3",children:[90,120,150,180].map(D=>n.jsx("button",{onClick:()=>H(D),className:re("flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all",B===D?"border-primary bg-primary/10 text-primary font-bold":"border-muted hover:border-primary/50 text-muted-foreground"),children:n.jsx("span",{className:"text-xl",children:D})},D))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ze,{children:"Prroga (Das adicionales)"}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx(Wt,{type:"number",placeholder:"0",className:"text-lg font-medium",value:X,onChange:D=>pe(Number(D.target.value)),min:0}),n.jsxs("div",{className:"text-sm text-muted-foreground text-nowrap",children:["Total: ",n.jsx("span",{className:"font-bold text-foreground mx-1 text-lg",children:B+X})," das"]})]})]}),n.jsx(ae,{className:"w-full mt-2",onClick:async()=>{if(!(e!=null&&e.branchName))return;const D=B+X;try{await xt.saveBranchConfig(e.branchName,D),Ke.success(`Plazo actualizado a ${D} das`),z(!1),E(D)}catch{Ke.error("Error al guardar")}},children:"Guardar Configuracin"})]})]})})]})}export{ac as default};
