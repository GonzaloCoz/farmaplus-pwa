import{j as e,z as ie,A as ce,B as le,E as de,G as me,H as ue,J as $e,K as Re}from"./ui-vendor-lsEhpTbO.js";import{r as n,u as We}from"./react-vendor-ylmX0jv_.js";import{c as qe,a as S,A as xe,g as L,P as U,B as w,E as Ue,q as Ge,r as Me,t as Je,v as Qe,x as Ye,F as Ke,G as Z,y as a,H as Ve,J as ee,K as Xe,L as _e,M as Ze,N as te,O as et,Q as se,V as tt,W as st,n as ae,Y as at,Z as ne,_ as nt}from"./index-1c3AkQgr.js";import{I as H}from"./input-DGHgnDec.js";import{C as rt,B as ot}from"./BarcodeScanner-7LIVkTMr.js";import{P as it}from"./ProductSearchInput-CQHrtzhB.js";import{S as ct,P as lt}from"./SwipeableItem-BT4X_7Lu.js";import{A as fe,m as $}from"./animation-DZFErbwn.js";import{C as re}from"./CounterAnimation-GIE2m9HH.js";import{A as dt,E as mt}from"./jspdf.es.min-DmqGAYPP.js";import{J as oe}from"./JsBarcode-BPRqDEDi.js";import{F as ut}from"./FabMenu-cuhjzm7A.js";import{W as xt}from"./wifi-rA5dJOcJ.js";import{P as ft}from"./plus-f2DofuDP.js";import"./utils-CUsTgaRG.js";import"./excel-uoQkVabA.js";import"./scanner-D4NToCeH.js";import"./switch-cuAmLmzr.js";import"./label-DEhWlb8z.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=qe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),gt=$e,ht=Re,pe=n.forwardRef(({className:r,...o},s)=>e.jsx(ie,{className:S("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o,ref:s}));pe.displayName=ie.displayName;const ge=n.forwardRef(({className:r,...o},s)=>e.jsxs(ht,{children:[e.jsx(pe,{}),e.jsx(ce,{ref:s,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o})]}));ge.displayName=ce.displayName;const he=({className:r,...o})=>e.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",r),...o});he.displayName="AlertDialogHeader";const ye=({className:r,...o})=>e.jsx("div",{className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...o});ye.displayName="AlertDialogFooter";const je=n.forwardRef(({className:r,...o},s)=>e.jsx(le,{ref:s,className:S("text-lg font-semibold",r),...o}));je.displayName=le.displayName;const Ne=n.forwardRef(({className:r,...o},s)=>e.jsx(de,{ref:s,className:S("text-sm text-muted-foreground",r),...o}));Ne.displayName=de.displayName;const ve=n.forwardRef(({className:r,...o},s)=>e.jsx(me,{ref:s,className:S(xe(),r),...o}));ve.displayName=me.displayName;const be=n.forwardRef(({className:r,...o},s)=>e.jsx(ue,{ref:s,className:S(xe({variant:"outline"}),"mt-2 sm:mt-0",r),...o}));be.displayName=ue.displayName;function yt({items:r,onUpdate:o,onDelete:s}){const[u,j]=n.useState(null),[p,x]=n.useState(""),[m,c]=n.useState(null),h=i=>{j(i.id),x(i.quantity.toString())},N=()=>{if(u&&p){const i=parseInt(p,10);i>0&&(o(u,i),j(null),x(""))}},v=()=>{j(null),x("")},E=()=>{m&&(s(m),c(null))};return r.length===0?e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No hay productos agregados aún"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Escanea o busca productos para comenzar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:e.jsx(fe,{mode:"popLayout",children:r.map((i,l)=>e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:l*.05},layout:!0,children:e.jsx(ct,{className:"mb-3",onEdit:()=>h(i),onDelete:()=>c(i.id),children:e.jsx(L,{className:"p-4 hover:shadow-md transition-shadow border-0 rounded-none sm:rounded-xl sm:border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg flex-shrink-0",children:e.jsx(U,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-foreground truncate",children:i.productName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-mono",children:["EAN: ",i.ean]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{className:"w-3 h-3 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[i.quantity," uds."]})]})]}),i.synced===0&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-2 px-2 py-0.5 bg-warning/10 text-warning text-xs rounded-full",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-warning rounded-full"}),"Pendiente de sincronizar"]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 flex-shrink-0",children:[e.jsx(w,{size:"sm",variant:"ghost",onClick:()=>h(i),className:"hover:bg-primary hover:text-primary-foreground",children:e.jsx(lt,{className:"w-4 h-4"})}),e.jsx(w,{size:"sm",variant:"ghost",onClick:()=>c(i.id),className:"hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(Ue,{className:"w-4 h-4"})})]})]})})})},i.id))})}),e.jsx(Ge,{open:u!==null,onOpenChange:i=>!i&&v(),children:e.jsxs(Me,{children:[e.jsx(Je,{children:e.jsx(Qe,{children:"Editar Cantidad"})}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Nueva cantidad"}),e.jsx(H,{type:"number",min:"1",value:p,onChange:i=>x(i.target.value),onKeyDown:i=>{i.key==="Enter"&&N()},placeholder:"Ingresa la cantidad",autoFocus:!0})]})}),e.jsxs(Ye,{children:[e.jsx(w,{variant:"outline",onClick:v,children:"Cancelar"}),e.jsx(w,{onClick:N,disabled:!p||parseInt(p)<=0,children:"Guardar"})]})]})}),e.jsx(gt,{open:m!==null,onOpenChange:i=>!i&&c(null),children:e.jsxs(ge,{children:[e.jsxs(he,{children:[e.jsx(je,{children:"¿Eliminar producto?"}),e.jsx(Ne,{children:"Esta acción no se puede deshacer. El producto será eliminado del pre-conteo."})]}),e.jsxs(ye,{children:[e.jsx(be,{children:"Cancelar"}),e.jsx(ve,{onClick:E,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})})]})}function jt(){const[r,o]=n.useState([]),[s,u]=n.useState(null),[j,p]=n.useState(!0);n.useEffect(()=>{(async()=>{try{await et();const d=await Z();if(d){u(d);const f=await te(d.sector);o(f)}}catch(d){console.error("Error initializing pre-count:",d),a.error("Error al inicializar el sistema de pre-conteo")}finally{p(!1)}})()},[]);const x=r.length,m=r.reduce((l,d)=>l+d.quantity,0);n.useEffect(()=>{s&&!s.endTime&&Ke(s.id,{totalProducts:x,totalUnits:m}).catch(l=>{console.error("Error updating session:",l)})},[s,x,m]);const c=n.useCallback(async l=>{try{if(p(!0),await Z()){a.error("Ya existe una sesión activa. Por favor, finalízala primero.");return}const f=await Ve(l);u(f),o([]),a.success(`Sesión iniciada para el sector: ${l}`)}catch(d){console.error("Error starting session:",d),a.error("Error al iniciar la sesión")}finally{p(!1)}},[]),h=n.useCallback(async(l,d,f)=>{if(!s){a.error("No hay una sesión activa");return}if(f<=0){a.error("La cantidad debe ser mayor a 0");return}try{const y=r.find(C=>C.ean===l);if(y){const C=y.quantity+f;await ee(y.id,{quantity:C}),o(I=>I.map(A=>A.id===y.id?{...A,quantity:C,synced:0}:A)),a.success(`Cantidad actualizada: ${d} (+${f})`)}else{const C=await Xe({sector:s.sector,ean:l,productName:d,quantity:f});o(I=>[...I,C]),a.success(`Producto agregado: ${d}`)}}catch(y){console.error("Error adding item:",y),a.error("Error al agregar el producto")}},[s,r]),N=n.useCallback(async(l,d)=>{if(d<=0){a.error("La cantidad debe ser mayor a 0");return}try{await ee(l,{quantity:d}),o(f=>f.map(y=>y.id===l?{...y,quantity:d,synced:0}:y)),a.success("Cantidad actualizada")}catch(f){console.error("Error updating item:",f),a.error("Error al actualizar el producto")}},[]),v=n.useCallback(async l=>{try{await _e(l),o(d=>d.filter(f=>f.id!==l)),a.success("Producto eliminado")}catch(d){console.error("Error removing item:",d),a.error("Error al eliminar el producto")}},[]),E=n.useCallback(async()=>{if(!s){a.error("No hay una sesión activa");return}try{await Ze(s.id),u(null),o([]),a.success("Sesión finalizada correctamente")}catch(l){console.error("Error finishing session:",l),a.error("Error al finalizar la sesión")}},[s]),i=n.useCallback(async()=>{if(s)try{const l=await te(s.sector);o(l)}catch(l){console.error("Error refreshing items:",l),a.error("Error al actualizar los productos")}},[s]);return{items:r,session:s,totalProducts:x,totalUnits:m,isLoading:j,startSession:c,addItem:h,updateItem:N,removeItem:v,finishSession:E,refreshItems:i}}function Nt(){const[r,o]=n.useState(navigator.onLine),[s,u]=n.useState(!1),[j,p]=n.useState(0);n.useEffect(()=>{const c=()=>{o(!0),a.success("Conexión restaurada",{description:"Los datos se sincronizarán automáticamente"}),m()},h=()=>{o(!1),a.warning("Sin conexión",{description:"Los datos se guardarán localmente"})};return window.addEventListener("online",c),window.addEventListener("offline",h),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",h)}},[]);const x=n.useCallback(async()=>{try{const c=await se();p(c.length)}catch(c){console.error("Error counting unsynced items:",c)}},[]);n.useEffect(()=>{x();const c=setInterval(x,3e4);return()=>clearInterval(c)},[x]);const m=n.useCallback(async()=>{if(!r){a.error("No hay conexión a internet");return}if(!s)try{u(!0);const c=await se();if(c.length===0){a.info("No hay datos pendientes de sincronización");return}console.log("Syncing items:",c),await new Promise(N=>setTimeout(N,1e3));const h=c.map(N=>N.id);await tt(h),await x(),a.success("Sincronización completada",{description:`${c.length} productos sincronizados`})}catch(c){console.error("Error syncing data:",c),a.error("Error al sincronizar datos",{description:"Se reintentará automáticamente"})}finally{u(!1)}},[r,s,x]);return n.useEffect(()=>{if(r&&j>0&&!s){const c=setTimeout(()=>{m()},2e3);return()=>clearTimeout(c)}},[r,j,s,m]),{isOnline:r,isSyncing:s,unsyncedCount:j,syncNow:m}}function Wt(){const r=We(),[o,s]=n.useState("config"),[u,j]=n.useState(""),[p,x]=n.useState(!1),[m,c]=n.useState(""),[h,N]=n.useState("1"),[v,E]=n.useState(null),{items:i,session:l,totalProducts:d,totalUnits:f,isLoading:y,startSession:C,addItem:I,updateItem:A,removeItem:we,finishSession:Ce}=jt(),{isOnline:G,isSyncing:M,unsyncedCount:J,syncNow:Se}=Nt(),Q=async()=>{if(!u.trim()){a.error("Por favor, ingresa el nombre del sector");return}await C(u.trim()),s("counting")},Ee=async t=>{try{const g=await ne(t);g?(E(g),c(t),a.success(`Producto encontrado: ${g.name}`)):(c(t),a.warning("Producto no encontrado en la base de datos",{description:"Puedes agregarlo manualmente"}))}catch(g){console.error("Error fetching product:",g),a.error("Error al buscar el producto")}},Pe=t=>{E(t),c(t.ean)},ke=async()=>{if(!m.trim()){a.error("Por favor, ingresa o escanea un código EAN");return}const t=parseInt(h,10);if(isNaN(t)||t<=0){a.error("Por favor, ingresa una cantidad válida");return}let g=v==null?void 0:v.name;if(!g)try{const k=await ne(m.trim());k&&(g=k.name)}catch(k){console.error("Error fetching product by EAN:",k)}g||(g=`Producto ${m}`),await I(m,g,t),c(""),N("1"),E(null)},ze=async()=>{if(i.length===0){a.error("No hay productos para finalizar");return}await Ce(),r("/stock")},De=()=>{if(i.length===0){a.error("No hay productos para exportar");return}try{const t=new mt,g=t.internal.pageSize.getWidth(),k=t.internal.pageSize.getHeight(),b=10,R=3,W=3,F=(g-b*2-W*(R-1))/R,O=28;let z=b,P=b+15;t.setFontSize(14),t.text(`Pre-Conteo: ${u}`,b,b+5),t.setFontSize(8),t.text(`Fecha: ${new Date().toLocaleDateString()}`,g-b-30,b+5),i.forEach((T,Fe)=>{P+O>k-b&&(t.addPage(),P=b),t.setDrawColor(200),t.setLineWidth(.1),t.roundedRect(z,P,F,O,2,2,"S");const Y=F-4,Le=z+2,Oe=P+5;t.setFontSize(9),t.setFont("helvetica","bold");let B=T.productName;if(t.getTextWidth(B)>Y){const D=Math.floor(Y/2);B=B.substring(0,D)+"..."}t.text(B,Le,Oe);const Te=F*.65,Be=15,K=z+2,V=P+8,q=document.createElement("canvas");try{const D={displayValue:!0,fontSize:14,fontOptions:"bold",margin:0,height:40,width:2,background:"#ffffff",lineColor:"#000000",textMargin:0};try{oe(q,T.ean,{...D,format:"EAN13"})}catch{oe(q,T.ean,{...D,format:"CODE128"})}const He=q.toDataURL("image/png");t.addImage(He,"PNG",K,V,Te,Be)}catch(D){console.error("Error generating barcode:",D),t.setFontSize(8),t.setTextColor(255,0,0),t.text("Error Barcode",K,V+10),t.setTextColor(0,0,0)}const X=z+F-2,_=P+O-6;t.setFontSize(24),t.setFont("helvetica","bold"),t.text(T.quantity.toString(),X,_,{align:"right"}),t.setFontSize(6),t.setFont("helvetica","normal"),t.setTextColor(100),t.text("CANT",X,_-10,{align:"right"}),t.setTextColor(0),(Fe+1)%R===0?(z=b,P+=O+W):z+=F+W});const Ae=`PreConteo_${u}_${new Date().toISOString().split("T")[0]}.pdf`;t.save(Ae),a.success("PDF generado correctamente")}catch(t){console.error("Error generating PDF:",t),a.error("Error al generar el PDF")}},Ie=async()=>{await nt([{ean:"7790001234567",name:"Shampoo Dove 400ml",cost:850,salePrice:1200},{ean:"7790002345678",name:"Acondicionador Pantene 300ml",cost:920,salePrice:1350},{ean:"7790003456789",name:"Jabón Dove 90g",cost:180,salePrice:280},{ean:"7790004567890",name:"Desodorante Rexona 150ml",cost:650,salePrice:950},{ean:"7790005678901",name:"Crema Dental Colgate 90g",cost:420,salePrice:620},{ean:"7790006789012",name:"Enjuague Bucal Listerine 500ml",cost:1100,salePrice:1580},{ean:"7790007890123",name:"Papel Higiénico Elite x4",cost:890,salePrice:1250},{ean:"7790008901234",name:"Toallas Femeninas Always x8",cost:520,salePrice:780},{ean:"7790009012345",name:"Pañales Pampers M x30",cost:3200,salePrice:4500},{ean:"7790010123456",name:"Algodón Estrella 100g",cost:280,salePrice:420}]),a.success("Productos de ejemplo cargados")};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Cargando..."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs($.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-start sm:items-center justify-between gap-4 flex-col sm:flex-row",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>o==="config"?r("/stock"):s("config"),className:"flex-shrink-0",children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Pre-Conteo Sucursal"}),l&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Sector: ",e.jsx("span",{className:"font-semibold text-foreground",children:l.sector})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:G?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-success/10 text-success rounded-full text-sm",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium hidden sm:inline",children:"En línea"})]}):e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-warning/10 text-warning rounded-full text-sm",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium hidden sm:inline",children:"Sin conexión"})]})})]}),e.jsx(fe,{mode:"wait",children:o==="config"?e.jsx($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"max-w-2xl mx-auto",children:e.jsx(L,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-4 bg-primary/10 rounded-2xl mb-4",children:e.jsx(U,{className:"w-12 h-12 text-primary"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-foreground mb-2",children:"Configuración del Pre-Conteo"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Ingresa el nombre del sector o estantería que vas a contar"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nombre del Sector / Estantería *"}),e.jsx(H,{type:"text",value:u,onChange:t=>j(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Q()},placeholder:"Ej: Bebidas, Perfumería, Góndola 1, etc.",className:"text-base sm:text-lg",autoFocus:!0})]}),e.jsx(w,{onClick:Q,disabled:!u.trim(),className:"w-full",size:"lg",children:"Comenzar Pre-Conteo"}),e.jsx(w,{onClick:Ie,variant:"outline",className:"w-full",size:"sm",children:"Cargar productos de ejemplo"})]})]})})},"config"):e.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4 sm:space-y-6",children:[e.jsx(L,{className:"p-6 sm:p-8 bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20 elevation-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Llevas"}),e.jsx("div",{className:"text-5xl sm:text-6xl font-bold text-primary mb-2",children:e.jsx(re,{value:d})}),e.jsxs("p",{className:"text-xl sm:text-2xl font-semibold text-foreground",children:[d===1?"producto":"productos"," pre-contados"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Total de unidades: ",e.jsx("span",{className:"font-semibold text-foreground",children:e.jsx(re,{value:f})})]})]})}),e.jsxs(L,{className:"p-4 sm:p-6 elevation-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground mb-4",children:"Agregar Producto"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(w,{onClick:()=>x(!0),className:"w-full",size:"lg",variant:"default",children:[e.jsx(rt,{className:"w-5 h-5 mr-2"}),"Escanear Código de Barras"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"O busca manualmente"})})]}),e.jsx(it,{onSelect:Pe,placeholder:"Buscar producto por nombre o EAN..."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Código EAN"}),e.jsx(H,{type:"text",value:m,onChange:t=>c(t.target.value),placeholder:"Ingresa el código EAN"}),v&&e.jsxs("p",{className:"text-sm text-success mt-1 flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),v.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cantidad"}),e.jsx(H,{type:"number",min:"1",value:h,onChange:t=>N(t.target.value),placeholder:"Cantidad"})]}),e.jsxs(w,{onClick:ke,disabled:!m.trim()||!h,className:"w-full",size:"lg",children:[e.jsx(ft,{className:"w-5 h-5 mr-2"}),"Guardar y Siguiente"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:["Productos Agregados (",d,")"]}),J>0&&e.jsx(w,{onClick:Se,disabled:!G||M,variant:"outline",size:"sm",className:"flex-shrink-0",children:M?"Sincronizando...":`Sincronizar (${J})`})]}),e.jsx(yt,{items:i,onUpdate:A,onDelete:we})]})]},"counting")})]}),i.length>0&&o==="counting"&&e.jsx(ut,{actions:[{label:"Finalizar",icon:e.jsx(ae,{className:"w-5 h-5"}),onClick:ze,variant:"default",color:"bg-primary text-primary-foreground"},{label:"Exportar PDF",icon:e.jsx(at,{className:"w-5 h-5"}),onClick:De,variant:"secondary"}]}),e.jsx(ot,{open:p,onOpenChange:x,onScan:Ee},p?"open":"closed")]})}export{Wt as default};
