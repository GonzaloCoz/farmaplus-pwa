import{j as e,p as _e,G as ce,H as De,q as He,J as v,K as Me,M as Le,N as Ie,Q as Be,U as Ae,V as ze,W as Ue,X as Fe,Y as $e,Z as de,_ as Ve,$ as ue,a0 as me,a1 as qe,a2 as fe,a3 as Ge,a4 as pe,a5 as he,a6 as Ke,a7 as We,a8 as xe}from"./ui-vendor-DRrTorv9.js";import{r as n,g as Je,u as Ye}from"./react-vendor-DdjUaGoS.js";import{c as S,o as y,B as j,D as Xe,h as Qe,i as Ze,j as et,N as tt,v as P,V as rt}from"./index-DmgfIT01.js";import{I as oe}from"./input-hk0yPGID.js";import{L as at}from"./label-gFGSqa09.js";import{a as ot}from"./JsBarcode-B9pOLHC9.js";import{p as st}from"./chart-vendor-NOlrPRrG.js";import{T as nt,a as it,b as se,c as z,d as lt,e as U}from"./table-CLoR89-X.js";import{C as ct}from"./check-Cv2bWqVW.js";import{B as dt}from"./badge-DwCaL2_Z.js";import{m as ut}from"./animation-CcVxqPrn.js";import{A as mt}from"./arrow-left-DR4nFpsi.js";import{S as ne}from"./search-DvLV0TiT.js";import"./utils-CUsTgaRG.js";import"./excel-uoQkVabA.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=S("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=S("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=S("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=S("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=S("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=S("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=S("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),$="barcode-history",vt=8,yt=()=>{const[r,t]=n.useState([]);return n.useEffect(()=>{const i=localStorage.getItem($);if(i)try{t(JSON.parse(i))}catch(l){console.error("Error loading history:",l)}},[]),{history:r,addToHistory:i=>{const l={code:i,timestamp:Date.now()};t(h=>{const m=h.filter(g=>g.code!==i),u=[l,...m].slice(0,vt);return localStorage.setItem($,JSON.stringify(u)),u})},clearHistory:()=>{t([]),localStorage.removeItem($)}}};function T(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(a){return typeof a}:T=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},T(r)}var k=X(n),bt=X(ot),d=X(st);function X(r){return r&&r.__esModule?r:{default:r}}function jt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(r,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function wt(r,t,a){return t&&Nt(r.prototype,t),r}function Ct(r,t){return t&&(T(t)==="object"||typeof t=="function")?t:ve(r)}function G(r){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},G(r)}function ve(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function St(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&K(r,t)}function K(r,t){return K=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},K(r,t)}var W,V=k.default.version.split(/[.-]/);V[0]==="0"&&(V[1]==="13"||V[1]==="12")?W=function(t){return t.getDOMNode()}:W=function(t){return t};var Q=function(r){St(t,r);function t(a){var o;return jt(this,t),o=Ct(this,G(t).call(this,a)),o.renderElementRef=k.default.createRef(),o.update=o.update.bind(ve(o)),o}return wt(t,[{key:"shouldComponentUpdate",value:function(o){var i=this;return Object.keys(t.propTypes).some(function(l){return i.props[l]!==o[l]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var o=W(this.renderElementRef.current);try{new bt.default(o,this.props.value,Object.assign({text:this.props.text||this.props.value},this.props))}catch(i){window.console.error(i)}}},{key:"render",value:function(){var o=this.props,i=o.id,l=o.className;if(this.props.renderer==="svg")return k.default.createElement("svg",{ref:this.renderElementRef,id:i,className:l});if(this.props.renderer==="canvas")return k.default.createElement("canvas",{ref:this.renderElementRef,id:i,className:l});if(this.props.renderer==="img")return k.default.createElement("img",{ref:this.renderElementRef,id:i,className:l})}}]),t}(k.default.Component);Q.propTypes={value:d.default.string.isRequired,text:d.default.string,renderer:d.default.string,format:d.default.string,width:d.default.number,height:d.default.number,displayValue:d.default.bool,fontOptions:d.default.string,font:d.default.string,textAlign:d.default.string,textPosition:d.default.string,textMargin:d.default.number,fontSize:d.default.number,background:d.default.string,lineColor:d.default.string,margin:d.default.number,marginTop:d.default.number,marginBottom:d.default.number,marginLeft:d.default.number,marginRight:d.default.number,id:d.default.string,className:d.default.string,ean128:d.default.bool};Q.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var kt=Q;const Pt=Je(kt);function Et({value:r}){return e.jsx("div",{className:"flex justify-center",children:e.jsx(Pt,{value:r,format:"CODE128",width:2,height:80,displayValue:!0,fontOptions:"bold",fontSize:18,background:"transparent",lineColor:"hsl(var(--foreground))"})})}var q,H="HoverCard",[ye,or]=_e(H,[ce]),M=ce(),[Rt,Z]=ye(H),be=r=>{const{__scopeHoverCard:t,children:a,open:o,defaultOpen:i,onOpenChange:l,openDelay:h=700,closeDelay:m=300}=r,u=M(t),g=n.useRef(0),f=n.useRef(0),N=n.useRef(!1),x=n.useRef(!1),[b,c]=ze({prop:o,defaultProp:i??!1,onChange:l,caller:H}),w=n.useCallback(()=>{clearTimeout(f.current),g.current=window.setTimeout(()=>c(!0),h)},[h,c]),C=n.useCallback(()=>{clearTimeout(g.current),!N.current&&!x.current&&(f.current=window.setTimeout(()=>c(!1),m))},[m,c]),L=n.useCallback(()=>c(!1),[c]);return n.useEffect(()=>()=>{clearTimeout(g.current),clearTimeout(f.current)},[]),e.jsx(Rt,{scope:t,open:b,onOpenChange:c,onOpen:w,onClose:C,onDismiss:L,hasSelectionRef:N,isPointerDownOnContentRef:x,children:e.jsx(Ue,{...u,children:a})})};be.displayName=H;var je="HoverCardTrigger",Ne=n.forwardRef((r,t)=>{const{__scopeHoverCard:a,...o}=r,i=Z(je,a),l=M(a);return e.jsx(De,{asChild:!0,...l,children:e.jsx(He.a,{"data-state":i.open?"open":"closed",...o,ref:t,onPointerEnter:v(r.onPointerEnter,D(i.onOpen)),onPointerLeave:v(r.onPointerLeave,D(i.onClose)),onFocus:v(r.onFocus,i.onOpen),onBlur:v(r.onBlur,i.onClose),onTouchStart:v(r.onTouchStart,h=>h.preventDefault())})})});Ne.displayName=je;var Ot="HoverCardPortal",[sr,Tt]=ye(Ot,{forceMount:void 0}),_="HoverCardContent",we=n.forwardRef((r,t)=>{const a=Tt(_,r.__scopeHoverCard),{forceMount:o=a.forceMount,...i}=r,l=Z(_,r.__scopeHoverCard);return e.jsx(Me,{present:o||l.open,children:e.jsx(_t,{"data-state":l.open?"open":"closed",...i,onPointerEnter:v(r.onPointerEnter,D(l.onOpen)),onPointerLeave:v(r.onPointerLeave,D(l.onClose)),ref:t})})});we.displayName=_;var _t=n.forwardRef((r,t)=>{const{__scopeHoverCard:a,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:h,...m}=r,u=Z(_,a),g=M(a),f=n.useRef(null),N=Le(t,f),[x,b]=n.useState(!1);return n.useEffect(()=>{if(x){const c=document.body;return q=c.style.userSelect||c.style.webkitUserSelect,c.style.userSelect="none",c.style.webkitUserSelect="none",()=>{c.style.userSelect=q,c.style.webkitUserSelect=q}}},[x]),n.useEffect(()=>{if(f.current){const c=()=>{b(!1),u.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var C;((C=document.getSelection())==null?void 0:C.toString())!==""&&(u.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",c),()=>{document.removeEventListener("pointerup",c),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!1}}},[u.isPointerDownOnContentRef,u.hasSelectionRef]),n.useEffect(()=>{f.current&&Mt(f.current).forEach(w=>w.setAttribute("tabindex","-1"))}),e.jsx(Ie,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:v(l,c=>{c.preventDefault()}),onDismiss:u.onDismiss,children:e.jsx(Be,{...g,...m,onPointerDown:v(m.onPointerDown,c=>{c.currentTarget.contains(c.target)&&b(!0),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!0}),ref:N,style:{...m.style,userSelect:x?"text":void 0,WebkitUserSelect:x?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),Dt="HoverCardArrow",Ht=n.forwardRef((r,t)=>{const{__scopeHoverCard:a,...o}=r,i=M(a);return e.jsx(Ae,{...i,...o,ref:t})});Ht.displayName=Dt;function D(r){return t=>t.pointerType==="touch"?void 0:r()}function Mt(r){const t=[],a=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;a.nextNode();)t.push(a.currentNode);return t}var Lt=be,It=Ne,Ce=we;const Bt=Lt,At=It,Se=n.forwardRef(({className:r,align:t="center",sideOffset:a=4,...o},i)=>e.jsx(Ce,{ref:i,align:t,sideOffset:a,className:y("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o}));Se.displayName=Ce.displayName;function zt({ean:r,name:t,children:a}){const[o,i]=n.useState(null);n.useState(!1);const[l,h]=n.useState(!1),[m,u]=n.useState(!1);return n.useEffect(()=>{if(m&&!o){const f=`https://tse2.mm.bing.net/th?q=${encodeURIComponent(t)}&w=300&h=300&c=7&rs=1&p=0`;i(f)}},[m,t]),e.jsxs(Bt,{open:m,onOpenChange:u,children:[e.jsx(At,{asChild:!0,children:e.jsx("div",{className:"cursor-help decoration-dotted underline-offset-4",children:a})}),e.jsxs(Se,{className:"w-64 p-0 overflow-hidden bg-white",side:"right",children:[e.jsxs("div",{className:"relative aspect-square flex items-center justify-center bg-gray-50",children:[o?e.jsx("img",{src:o,alt:t,className:"w-full h-full object-contain p-2",onError:()=>h(!0)}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(xt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"text-xs",children:"Cargando..."})]}),l&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50 text-muted-foreground p-4 text-center",children:[e.jsx(ht,{className:"h-8 w-8 opacity-50"}),e.jsx("span",{className:"text-xs",children:"No se pudo cargar la imagen"})]})]}),e.jsxs("div",{className:"p-3 border-t bg-gray-50/50",children:[e.jsx("p",{className:"text-xs font-medium truncate",children:t}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Búsqueda por nombre (Bing)"})]})]})]})}const ie=Fe,le=$e,J=n.forwardRef(({className:r,children:t,...a},o)=>e.jsxs(de,{ref:o,className:y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...a,children:[t,e.jsx(Ve,{asChild:!0,children:e.jsx(ge,{className:"h-4 w-4 opacity-50"})})]}));J.displayName=de.displayName;const ke=n.forwardRef(({className:r,...t},a)=>e.jsx(ue,{ref:a,className:y("flex cursor-default items-center justify-center py-1",r),...t,children:e.jsx(ft,{className:"h-4 w-4"})}));ke.displayName=ue.displayName;const Pe=n.forwardRef(({className:r,...t},a)=>e.jsx(me,{ref:a,className:y("flex cursor-default items-center justify-center py-1",r),...t,children:e.jsx(ge,{className:"h-4 w-4"})}));Pe.displayName=me.displayName;const Y=n.forwardRef(({className:r,children:t,position:a="popper",...o},i)=>e.jsx(qe,{children:e.jsxs(fe,{ref:i,className:y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a,...o,children:[e.jsx(ke,{}),e.jsx(Ge,{className:y("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Pe,{})]})}));Y.displayName=fe.displayName;const Ut=n.forwardRef(({className:r,...t},a)=>e.jsx(pe,{ref:a,className:y("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...t}));Ut.displayName=pe.displayName;const E=n.forwardRef(({className:r,children:t,...a},o)=>e.jsxs(he,{ref:o,className:y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ke,{children:e.jsx(ct,{className:"h-4 w-4"})})}),e.jsx(We,{children:t})]}));E.displayName=he.displayName;const Ft=n.forwardRef(({className:r,...t},a)=>e.jsx(xe,{ref:a,className:y("-mx-1 my-1 h-px bg-muted",r),...t}));Ft.displayName=xe.displayName;function nr(){const r=Ye(),[t,a]=n.useState([]),[o,i]=n.useState(!0),[l,h]=n.useState(""),[m,u]=n.useState("all"),[g,f]=n.useState(!1),[N,x]=n.useState(""),[b,c]=n.useState(""),[w,C]=n.useState(null),[L,ee]=n.useState(null),{history:I,addToHistory:Ee,clearHistory:Re}=yt();n.useEffect(()=>{(async()=>{try{i(!0);const p=await rt();a(p)}catch(p){console.error("Error loading products:",p),P.error("Error al cargar los productos")}finally{i(!1)}})()},[]);const te=n.useMemo(()=>{const s=new Set(t.map(p=>p.laboratory).filter(Boolean));return Array.from(s).sort()},[t]),R=n.useMemo(()=>t.filter(s=>{const p=l.toLowerCase(),O=s.name.toLowerCase().includes(p)||s.ean.includes(p),A=m==="all"||s.laboratory===m;return O&&A}),[t,l,m]),B=s=>{const p=s.trim();if(!p||!/^\d+$/.test(p)){P.error("Por favor, ingresa un código numérico válido.");return}const O=t.find(A=>A.ean===p);C(O?O.name:null),c(p),ee(p)},re=()=>{const s=N.trim();if(!s){P.error("El campo de código está vacío.");return}B(s),Ee(s),P.success("Código de barras generado correctamente")},Oe=s=>{x(s),B(s)},ae=()=>{x(""),c(""),C(null),ee(null)},Te=s=>{x(s.ean),B(s.ean),f(!0)};return e.jsxs(ut.div,{className:"flex flex-col h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsxs("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur border-b px-4 h-16 flex items-center justify-between shrink-0 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"md:hidden",children:e.jsx(mt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Productos"}),e.jsxs("p",{className:"text-xs text-muted-foreground hidden sm:block",children:[t.length," productos registrados"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end max-w-3xl",children:[e.jsx("div",{className:"hidden md:block w-48",children:e.jsxs(ie,{value:m,onValueChange:u,children:[e.jsx(J,{className:"h-9",children:e.jsx(le,{placeholder:"Laboratorio"})}),e.jsxs(Y,{children:[e.jsx(E,{value:"all",children:"Todos los laboratorios"}),te.map(s=>e.jsx(E,{value:s,children:s},s))]})]})}),e.jsxs("div",{className:"relative w-full max-w-xs sm:max-w-sm",children:[e.jsx(ne,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{type:"search",placeholder:"Buscar por nombre o EAN...",value:l,onChange:s=>h(s.target.value),className:"pl-9 h-9 bg-muted/50 border-0"})]}),e.jsxs(j,{variant:"secondary",size:"sm",className:"gap-2 flex-shrink-0",onClick:()=>f(!0),children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generador"})]})]})]}),e.jsx("div",{className:"p-4 md:hidden bg-background border-b flex gap-2 overflow-x-auto",children:e.jsxs(ie,{value:m,onValueChange:u,children:[e.jsx(J,{className:"h-9 w-full",children:e.jsx(le,{placeholder:"Filtrar por Laboratorio"})}),e.jsxs(Y,{children:[e.jsx(E,{value:"all",children:"Todos los laboratorios"}),te.map(s=>e.jsx(E,{value:s,children:s},s))]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4 sm:p-6",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-card shadow-sm",children:[o?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{children:"Cargando productos..."})]}):R.length>0?e.jsxs(nt,{children:[e.jsx(it,{className:"bg-muted/50",children:e.jsxs(se,{children:[e.jsx(z,{className:"w-[140px]",children:"EAN"}),e.jsx(z,{children:"Producto"}),e.jsx(z,{className:"hidden md:table-cell",children:"Laboratorio"})]})}),e.jsx(lt,{children:R.slice(0,100).map(s=>e.jsxs(se,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Te(s),children:[e.jsx(U,{className:"font-mono text-primary font-medium",children:s.ean}),e.jsxs(U,{children:[e.jsx(zt,{ean:s.ean,name:s.name,children:e.jsx("div",{className:"font-medium hover:underline decoration-dotted underline-offset-4 w-fit",children:s.name})}),e.jsx("div",{className:"md:hidden text-xs text-muted-foreground mt-1",children:s.laboratory||"Sin laboratorio"})]}),e.jsx(U,{className:"hidden md:table-cell",children:s.laboratory?e.jsx(dt,{variant:"outline",className:"font-normal",children:s.laboratory}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})})]},s.ean))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-muted-foreground",children:[e.jsx(ne,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{children:"No se encontraron productos."}),m!=="all"&&e.jsx(j,{variant:"link",onClick:()=>u("all"),className:"mt-2",children:"Limpiar filtros"})]}),!o&&R.length>100&&e.jsx("div",{className:"p-4 text-center border-t bg-muted/20",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Mostrando 100 de ",R.length," resultados."]})})]})}),e.jsx(Xe,{open:g,onOpenChange:s=>{f(s),s||ae()},children:e.jsxs(Qe,{className:"sm:max-w-3xl p-0 max-h-[90vh] overflow-y-auto gap-0 rounded-xl",children:[e.jsxs(Ze,{className:"p-6 border-b bg-muted/30",children:[e.jsxs(et,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Generar EAN manualmente"]}),e.jsx(tt,{children:"Ingresa un código, selecciónalo del historial o haz clic en la tabla para generar."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 divide-y md:divide-y-0 md:divide-x",children:[e.jsx("div",{className:"p-6 flex flex-col justify-center items-center min-h-[300px] bg-background",children:b?e.jsxs("div",{id:"barcode-to-print",className:"w-full text-center space-y-6",children:[e.jsx("div",{children:w?e.jsx("h3",{className:"text-lg font-semibold leading-tight",children:w}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Producto no encontrado en la base de datos."})}),e.jsx("div",{className:"p-4 bg-white rounded-lg inline-block shadow-sm border",children:e.jsx(Et,{value:b})}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(j,{size:"sm",variant:"outline",onClick:async()=>{await navigator.clipboard.writeText(b),P.success("Código copiado")},children:[e.jsx(pt,{className:"w-4 h-4 mr-2"})," Copiar"]}),e.jsxs(j,{size:"sm",variant:"outline",onClick:()=>window.print(),children:[e.jsx(gt,{className:"w-4 h-4 mr-2"})," Imprimir"]})]})]}):e.jsxs("div",{className:"text-center space-y-2 text-muted-foreground",children:[e.jsx(F,{className:"w-12 h-12 mx-auto opacity-20"}),e.jsx("p",{children:"Selecciona un producto o ingresa un código"})]})}),e.jsxs("div",{className:"p-6 bg-muted/10 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary"}),"Historial Reciente"]}),I.length>0&&e.jsx(j,{variant:"ghost",size:"sm",onClick:Re,className:"h-6 text-xs text-muted-foreground hover:text-destructive px-2",children:"Borrar todo"})]}),I.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[250px] overflow-y-auto pr-2",children:I.slice(0,8).map(s=>e.jsxs("button",{onClick:()=>Oe(s.code),className:`text-left px-3 py-2 rounded-md text-sm font-mono transition-colors flex items-center justify-between group ${L===s.code?"bg-primary text-primary-foreground":"bg-background border hover:border-primary/50"}`,children:[e.jsx("span",{children:s.code}),e.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[10px]",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},s.timestamp))}):e.jsx("div",{className:"text-center py-10 text-xs text-muted-foreground border-2 border-dashed rounded-lg",children:"Sin historial reciente"})]})]}),e.jsx("div",{className:"p-6 bg-muted/30 border-t",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2 flex-1 w-full",children:[e.jsx(at,{htmlFor:"ean-code",children:"Código manual"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{id:"ean-code",value:N,onChange:s=>x(s.target.value.replace(/\D/g,"")),onKeyDown:s=>{s.key==="Enter"&&re()},placeholder:"Ej: 7791234567890",className:"font-mono"}),e.jsx(j,{onClick:re,children:"Generar"})]})]}),e.jsx(j,{variant:"ghost",onClick:ae,children:"Limpiar"})]})})]})})]})}export{nr as default};
