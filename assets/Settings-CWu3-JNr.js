import{j as e,K as H,M as se,N as B,Q as ae,U as te,W as ne,O as $,a as W,b as re,c as U,D as q,d as ie,f as ce,e as oe}from"./ui-vendor-BThK-wRW.js";import{r as t}from"./react-vendor-CodVchXk.js";import{c as g,p as o,X as le,Q as de,H as me,B as j,W as he,u as l,C as b,d as v,e as w,Y as S,f as k,r as ue,Z as xe,$ as fe,a0 as pe,L as je}from"./index-NZoOjXQK.js";import{L as C}from"./label-BEdNu0rH.js";import{W as Q,C as ge}from"./wifi-HGTGcaVU.js";import{I as ye}from"./input-DRl-gkqf.js";import{r as Ne,u as be}from"./excel-uoQkVabA.js";import"./utils-CUsTgaRG.js";import"./animation-BITtOU9j.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=g("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=g("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=g("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=g("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),E=t.forwardRef(({className:s,...a},n)=>e.jsx(H,{className:o("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",s),...a,ref:n,children:e.jsx(se,{className:o("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));E.displayName=H.displayName;const G=t.forwardRef(({className:s,...a},n)=>e.jsxs(B,{ref:n,className:o("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(ae,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(te,{className:"absolute h-full bg-primary"})}),e.jsx(ne,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));G.displayName=B.displayName;const Ce=ie,Ee=ce,ze=oe,Z=t.forwardRef(({className:s,...a},n)=>e.jsx($,{className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:n}));Z.displayName=$.displayName;const Ie=de("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_=t.forwardRef(({side:s="right",className:a,children:n,...i},d)=>e.jsxs(ze,{children:[e.jsx(Z,{}),e.jsxs(W,{ref:d,className:o(Ie({side:s}),a),...i,children:[n,e.jsxs(re,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_.displayName=W.displayName;const F=({className:s,...a})=>e.jsx("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",s),...a});F.displayName="SheetHeader";const K=t.forwardRef(({className:s,...a},n)=>e.jsx(U,{ref:n,className:o("text-lg font-semibold text-foreground",s),...a}));K.displayName=U.displayName;const Ae=t.forwardRef(({className:s,...a},n)=>e.jsx(q,{ref:n,className:o("text-sm text-muted-foreground",s),...a}));Ae.displayName=q.displayName;function Le({children:s}){const[a,n]=t.useState(!1),[i,d]=t.useState(navigator.onLine),[c,y]=t.useState([]),[u,x]=t.useState(!1);t.useEffect(()=>{const r=()=>d(!0),h=()=>d(!1);window.addEventListener("online",r),window.addEventListener("offline",h),m();const N=setInterval(m,5e3);return()=>{window.removeEventListener("online",r),window.removeEventListener("offline",h),clearInterval(N)}},[]);const m=async()=>{try{const r=await me();y(r)}catch(r){console.error("Error loading unsynced items",r)}},z=async()=>{if(!i){l.error("No hay conexión a internet");return}x(!0);try{await new Promise(r=>setTimeout(r,2e3)),l.success("Sincronización completada (Simulada)"),await m()}catch{l.error("Error al sincronizar")}finally{x(!1)}};return e.jsxs(Ce,{open:a,onOpenChange:n,children:[e.jsx(Ee,{asChild:!0,children:s||e.jsxs(j,{variant:"ghost",size:"icon",className:"relative",children:[i?c.length>0?e.jsx(O,{className:"h-5 w-5 text-warning"}):e.jsx(O,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(ve,{className:"h-5 w-5 text-destructive"}),c.length>0&&e.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-destructive animate-pulse"})]})}),e.jsxs(_,{side:"bottom",className:"h-[50vh] rounded-t-3xl",children:[e.jsx(F,{className:"mb-6",children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:o("h-5 w-5",u&&"animate-spin")}),"Centro de Sincronización"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:o("p-4 rounded-xl border flex items-center justify-between",i?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[i?e.jsx(Q,{className:"h-5 w-5 text-success"}):e.jsx(he,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i?"Conectado":"Sin conexión"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i?"Listo para sincronizar":"Los cambios se guardarán localmente"})]})]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Pendientes de subida (",c.length,")"]}),c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(ge,{className:"h-12 w-12 mb-2 opacity-20"}),e.jsx("p",{children:"Todo está sincronizado"})]}):e.jsxs("div",{className:"space-y-2 max-h-[150px] overflow-auto",children:[c.slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg text-sm",children:[e.jsx("span",{className:"truncate max-w-[200px]",children:r.productName}),e.jsxs("span",{className:"font-mono text-xs",children:[r.quantity," un."]})]},r.id)),c.length>5&&e.jsxs("p",{className:"text-xs text-center text-muted-foreground pt-2",children:["+ ",c.length-5," más..."]})]})]}),e.jsx(j,{className:"w-full",size:"lg",onClick:z,disabled:!i||c.length===0||u,children:u?"Sincronizando...":"Sincronizar Ahora"})]})]})]})}function Ue(){const[s,a]=t.useState(!0),[n,i]=t.useState(!1),[d,c]=t.useState(!0),[y,u]=t.useState([50]),[x,m]=t.useState(!1),z=async()=>{if(confirm("¿Estás seguro de que deseas borrar todos los datos locales? Esta acción no se puede deshacer."))try{await fe(),l.success("Datos locales eliminados correctamente"),window.location.reload()}catch{l.error("Error al eliminar datos")}},r=async h=>{var P;const N=(P=h.target.files)==null?void 0:P[0];if(N){m(!0);try{const I=await N.arrayBuffer(),R=Ne(I),X=R.SheetNames[0],Y=R.Sheets[X],A=be.sheet_to_json(Y,{header:"A"}),f=[];for(let L=1;L<A.length;L++){const D=A[L],M=D.D,T=D.O,V=D.Q;if(!M||!V)continue;const J=String(M).trim(),ee=T?String(T).trim():void 0;String(V).trim().split("-").map(p=>p.trim()).filter(p=>p.length>0).forEach(p=>{f.push({ean:p,name:J,cost:0,salePrice:0,laboratory:ee,category:""})})}if(f.length===0){l.error("No se encontraron productos válidos. Verifica las columnas (D=Producto, Q=EAN).");return}confirm(`Se encontraron ${f.length} códigos EAN (de ${A.length-1} filas). ¿Deseas reemplazar la base de datos actual?`)&&(await pe(),await je(f),l.success(`${f.length} productos importados correctamente.`)),h.target.value=""}catch(I){console.error("Error importing products:",I),l.error("Error al importar el archivo. Asegúrate de que sea un Excel válido.")}finally{m(!1)}}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 p-6 pb-24",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Configuración"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Personaliza tu experiencia en Farmaplus PWA."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5 text-primary"}),e.jsx(w,{children:"Inventario y Escáner"})]}),e.jsx(S,{children:"Configuración del lector de código de barras y feedback."})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{className:"text-base",children:"Vibración (Haptics)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vibrar al escanear correctamente un producto."})]}),e.jsx(E,{checked:s,onCheckedChange:a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{className:"text-base",children:"Sonidos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reproducir sonido de confirmación."})]}),e.jsx(E,{checked:n,onCheckedChange:i})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{children:"Sensibilidad del Escáner"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[y,"%"]})]}),e.jsx(G,{value:y,onValueChange:u,max:100,step:10,className:"w-full"})]})]})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-primary"}),e.jsx(w,{children:"Sincronización"})]}),e.jsx(S,{children:"Gestión de datos offline y subida."})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{className:"text-base",children:"Sincronización Automática"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subir cambios automáticamente cuando haya conexión."})]}),e.jsx(E,{checked:d,onCheckedChange:c})]}),e.jsx("div",{className:"pt-2",children:e.jsx(Le,{children:e.jsxs(j,{variant:"outline",className:"w-full justify-start",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Abrir Centro de Sincronización"]})})})]})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-primary"}),e.jsx(w,{children:"Base de Datos de Productos"})]}),e.jsx(S,{children:"Gestiona el catálogo de productos local."})]}),e.jsx(k,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border rounded-lg bg-muted/30 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",children:"Importar Productos desde Excel"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:'Actualiza la base de datos con un archivo .xlsx. El archivo debe tener columnas "EAN" y "Descripcion".'}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ye,{type:"file",accept:".xlsx, .xls",onChange:r,disabled:x,className:"cursor-pointer"})}),x&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 animate-pulse",children:"Procesando archivo..."})]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs(j,{variant:"destructive",className:"w-full sm:w-auto",onClick:z,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Borrar datos locales y caché"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Utiliza esto si experimentas problemas con la aplicación. Se borrarán los datos no sincronizados."})]})]})})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),e.jsx(w,{children:"Sistema"})]}),e.jsx(S,{children:"Información de la versión y mantenimiento."})]}),e.jsx(k,{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Versión de la App"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"v1.2.0 (Build 2025.11.24)"})]}),e.jsx(j,{variant:"outline",size:"sm",disabled:!0,children:"Actualizada"})]})})]})]})]})}export{Ue as default};
