import{j as t,aa as dt,ab as Xt,ac as ct,ad as ut,ae as Qt,af as ft,ag as Zt,ah as mt,ai as ht,aj as Jt,ak as ea,al as xt,am as ta,an as aa}from"./ui-vendor-CwIRxpyq.js";import{r as y,u as na}from"./react-vendor-ylmX0jv_.js";import{c as ve,b as F,N as Ge,y as ra,aB as vt,v as sa,F as pt,G as yt,H as gt,J as bt,K as Nt,a5 as jt,h as $,Q as wt,B as I,X as oa,P as la,u as ia,x as G,i as ie,m as de,T as we,p as ce,S as da,R as Xe,O as Qe,af as ca}from"./index-CRCrhKU4.js";import{I as Dt}from"./input-DJmmUFgp.js";import{T as _t,a as Ct,b as X,c as Q}from"./tabs-BekFzWPa.js";import{F as ua}from"./FabMenu-BXg2alHK.js";import{L as Y}from"./label-BdVcOHK8.js";import{h as O,l as De,g as W,d as U,s as L,e as pe,m as Ee,k as B,n as te,i as We,o as kt,q as Ie,r as fa,u as ma,v as Oe,w as ha,x as xa,y as _e,z as Ze,A as Mt,B as va,C as pa,D as St,b as Pt,E as Re,a as Ae,F as ya,G as ga,f as E,H as Tt,I as ba,J as Je,K as Na,L as Be,M as et,N as ja,O as tt}from"./utils-DNiwW225.js";import{C as Fe}from"./chevron-left-LKOD8GbL.js";import{e as ne,C as ae}from"./es-bGAlbXQo.js";import{P as Et,a as It,b as Ot,u as wa}from"./popover-SUEyWvjx.js";import{C as Ft}from"./check-BnCQlVy3.js";import{F as Da}from"./file-spreadsheet-BRph_jhK.js";import{E as _a}from"./jspdf.es.min-DpSV_vF0.js";import{u as Ce,w as Ca}from"./excel-uoQkVabA.js";import{F as ka}from"./filter-BqnHSyi8.js";import{g as Ma,p as Sa,u as Pa}from"./expirationDB-_X_jzNjL.js";import{A as Ta,m as at}from"./animation-DbfETv0H.js";import"./plus-csKbdJUo.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=ve("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ve("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var j=function(){return j=Object.assign||function(n){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},j.apply(this,arguments)};function Oa(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function Lt(e,n,r){for(var a=0,s=n.length,l;a<s;a++)(l||!(a in n))&&(l||(l=Array.prototype.slice.call(n,0,a)),l[a]=n[a]);return e.concat(l||Array.prototype.slice.call(n))}function re(e){return e.mode==="multiple"}function se(e){return e.mode==="range"}function ye(e){return e.mode==="single"}var Fa={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function La(e,n){return E(e,"LLLL y",n)}function Wa(e,n){return E(e,"d",n)}function Ra(e,n){return E(e,"LLLL",n)}function Aa(e){return"".concat(e)}function Ba(e,n){return E(e,"cccccc",n)}function Ha(e,n){return E(e,"yyyy",n)}var Va=Object.freeze({__proto__:null,formatCaption:La,formatDay:Wa,formatMonthCaption:Ra,formatWeekNumber:Aa,formatWeekdayName:Ba,formatYearCaption:Ha}),za=function(e,n,r){return E(e,"do MMMM (EEEE)",r)},Ya=function(){return"Month: "},Ua=function(){return"Go to next month"},$a=function(){return"Go to previous month"},qa=function(e,n){return E(e,"cccc",n)},Ka=function(e){return"Week n. ".concat(e)},Ga=function(){return"Year: "},Xa=Object.freeze({__proto__:null,labelDay:za,labelMonthDropdown:Ya,labelNext:Ua,labelPrevious:$a,labelWeekNumber:Ka,labelWeekday:qa,labelYearDropdown:Ga});function Qa(){var e="buttons",n=Fa,r=ha,a={},s={},l=1,o={},i=new Date;return{captionLayout:e,classNames:n,formatters:Va,labels:Xa,locale:r,modifiersClassNames:a,modifiers:s,numberOfMonths:l,styles:o,today:i,mode:"default"}}function Za(e){var n=e.fromYear,r=e.toYear,a=e.fromMonth,s=e.toMonth,l=e.fromDate,o=e.toDate;return a?l=L(a):n&&(l=new Date(n,0,1)),s?o=pe(s):r&&(o=new Date(r,11,31)),{fromDate:l?Ee(l):void 0,toDate:o?Ee(o):void 0}}var Wt=y.createContext(void 0);function Ja(e){var n,r=e.initialProps,a=Qa(),s=Za(r),l=s.fromDate,o=s.toDate,i=(n=r.captionLayout)!==null&&n!==void 0?n:a.captionLayout;i!=="buttons"&&(!l||!o)&&(i="buttons");var d;(ye(r)||re(r)||se(r))&&(d=r.onSelect);var u=j(j(j({},a),r),{captionLayout:i,classNames:j(j({},a.classNames),r.classNames),components:j({},r.components),formatters:j(j({},a.formatters),r.formatters),fromDate:l,labels:j(j({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:j(j({},a.modifiers),r.modifiers),modifiersClassNames:j(j({},a.modifiersClassNames),r.modifiersClassNames),onSelect:d,styles:j(j({},a.styles),r.styles),toDate:o});return t.jsx(Wt.Provider,{value:u,children:e.children})}function k(){var e=y.useContext(Wt);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Rt(e){var n=k(),r=n.locale,a=n.classNames,s=n.styles,l=n.formatters.formatCaption;return t.jsx("div",{className:a.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:l(e.displayMonth,{locale:r})})}function en(e){return t.jsx("svg",j({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:t.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function At(e){var n,r,a=e.onChange,s=e.value,l=e.children,o=e.caption,i=e.className,d=e.style,u=k(),c=(r=(n=u.components)===null||n===void 0?void 0:n.IconDropdown)!==null&&r!==void 0?r:en;return t.jsxs("div",{className:i,style:d,children:[t.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),t.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:a,children:l}),t.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,t.jsx(c,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function tn(e){var n,r=k(),a=r.fromDate,s=r.toDate,l=r.styles,o=r.locale,i=r.formatters.formatMonthCaption,d=r.classNames,u=r.components,c=r.labels.labelMonthDropdown;if(!a)return t.jsx(t.Fragment,{});if(!s)return t.jsx(t.Fragment,{});var x=[];if(xa(a,s))for(var h=L(a),v=a.getMonth();v<=s.getMonth();v++)x.push(_e(h,v));else for(var h=L(new Date),v=0;v<=11;v++)x.push(_e(h,v));var f=function(b){var D=Number(b.target.value),_=_e(L(e.displayMonth),D);e.onChange(_)},N=(n=u==null?void 0:u.Dropdown)!==null&&n!==void 0?n:At;return t.jsx(N,{name:"months","aria-label":c(),className:d.dropdown_month,style:l.dropdown_month,onChange:f,value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:o}),children:x.map(function(b){return t.jsx("option",{value:b.getMonth(),children:i(b,{locale:o})},b.getMonth())})})}function an(e){var n,r=e.displayMonth,a=k(),s=a.fromDate,l=a.toDate,o=a.locale,i=a.styles,d=a.classNames,u=a.components,c=a.formatters.formatYearCaption,x=a.labels.labelYearDropdown,h=[];if(!s)return t.jsx(t.Fragment,{});if(!l)return t.jsx(t.Fragment,{});for(var v=s.getFullYear(),f=l.getFullYear(),N=v;N<=f;N++)h.push(Ze(Mt(new Date),N));var b=function(_){var w=Ze(L(r),Number(_.target.value));e.onChange(w)},D=(n=u==null?void 0:u.Dropdown)!==null&&n!==void 0?n:At;return t.jsx(D,{name:"years","aria-label":x(),className:d.dropdown_year,style:i.dropdown_year,onChange:b,value:r.getFullYear(),caption:c(r,{locale:o}),children:h.map(function(_){return t.jsx("option",{value:_.getFullYear(),children:c(_,{locale:o})},_.getFullYear())})})}function nn(e,n){var r=y.useState(e),a=r[0],s=r[1],l=n===void 0?a:n;return[l,s]}function rn(e){var n=e.month,r=e.defaultMonth,a=e.today,s=n||r||a||new Date,l=e.toDate,o=e.fromDate,i=e.numberOfMonths,d=i===void 0?1:i;if(l&&te(l,s)<0){var u=-1*(d-1);s=B(l,u)}return o&&te(s,o)<0&&(s=o),L(s)}function sn(){var e=k(),n=rn(e),r=nn(n,e.month),a=r[0],s=r[1],l=function(o){var i;if(!e.disableNavigation){var d=L(o);s(d),(i=e.onMonthChange)===null||i===void 0||i.call(e,d)}};return[a,l]}function on(e,n){for(var r=n.reverseMonths,a=n.numberOfMonths,s=L(e),l=L(B(s,a)),o=te(l,s),i=[],d=0;d<o;d++){var u=B(s,d);i.push(u)}return r&&(i=i.reverse()),i}function ln(e,n){if(!n.disableNavigation){var r=n.toDate,a=n.pagedNavigation,s=n.numberOfMonths,l=s===void 0?1:s,o=a?l:1,i=L(e);if(!r)return B(i,o);var d=te(r,e);if(!(d<l))return B(i,o)}}function dn(e,n){if(!n.disableNavigation){var r=n.fromDate,a=n.pagedNavigation,s=n.numberOfMonths,l=s===void 0?1:s,o=a?l:1,i=L(e);if(!r)return B(i,-o);var d=te(i,r);if(!(d<=0))return B(i,-o)}}var Bt=y.createContext(void 0);function cn(e){var n=k(),r=sn(),a=r[0],s=r[1],l=on(a,n),o=ln(a,n),i=dn(a,n),d=function(x){return l.some(function(h){return We(x,h)})},u=function(x,h){d(x)||(h&&kt(x,h)?s(B(x,1+n.numberOfMonths*-1)):s(x))},c={currentMonth:a,displayMonths:l,goToMonth:s,goToDate:u,previousMonth:i,nextMonth:o,isDateDisplayed:d};return t.jsx(Bt.Provider,{value:c,children:e.children})}function oe(){var e=y.useContext(Bt);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function rt(e){var n,r=k(),a=r.classNames,s=r.styles,l=r.components,o=oe().goToMonth,i=function(c){o(B(c,e.displayIndex?-e.displayIndex:0))},d=(n=l==null?void 0:l.CaptionLabel)!==null&&n!==void 0?n:Rt,u=t.jsx(d,{id:e.id,displayMonth:e.displayMonth});return t.jsxs("div",{className:a.caption_dropdowns,style:s.caption_dropdowns,children:[t.jsx("div",{className:a.vhidden,children:u}),t.jsx(tn,{onChange:i,displayMonth:e.displayMonth}),t.jsx(an,{onChange:i,displayMonth:e.displayMonth})]})}function un(e){return t.jsx("svg",j({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function fn(e){return t.jsx("svg",j({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:t.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var xe=y.forwardRef(function(e,n){var r=k(),a=r.classNames,s=r.styles,l=[a.button_reset,a.button];e.className&&l.push(e.className);var o=l.join(" "),i=j(j({},s.button_reset),s.button);return e.style&&Object.assign(i,e.style),t.jsx("button",j({},e,{ref:n,type:"button",className:o,style:i}))});function mn(e){var n,r,a=k(),s=a.dir,l=a.locale,o=a.classNames,i=a.styles,d=a.labels,u=d.labelPrevious,c=d.labelNext,x=a.components;if(!e.nextMonth&&!e.previousMonth)return t.jsx(t.Fragment,{});var h=u(e.previousMonth,{locale:l}),v=[o.nav_button,o.nav_button_previous].join(" "),f=c(e.nextMonth,{locale:l}),N=[o.nav_button,o.nav_button_next].join(" "),b=(n=x==null?void 0:x.IconRight)!==null&&n!==void 0?n:fn,D=(r=x==null?void 0:x.IconLeft)!==null&&r!==void 0?r:un;return t.jsxs("div",{className:o.nav,style:i.nav,children:[!e.hidePrevious&&t.jsx(xe,{name:"previous-month","aria-label":h,className:v,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?t.jsx(b,{className:o.nav_icon,style:i.nav_icon}):t.jsx(D,{className:o.nav_icon,style:i.nav_icon})}),!e.hideNext&&t.jsx(xe,{name:"next-month","aria-label":f,className:N,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?t.jsx(D,{className:o.nav_icon,style:i.nav_icon}):t.jsx(b,{className:o.nav_icon,style:i.nav_icon})})]})}function st(e){var n=k().numberOfMonths,r=oe(),a=r.previousMonth,s=r.nextMonth,l=r.goToMonth,o=r.displayMonths,i=o.findIndex(function(f){return We(e.displayMonth,f)}),d=i===0,u=i===o.length-1,c=n>1&&(d||!u),x=n>1&&(u||!d),h=function(){a&&l(a)},v=function(){s&&l(s)};return t.jsx(mn,{displayMonth:e.displayMonth,hideNext:c,hidePrevious:x,nextMonth:s,previousMonth:a,onPreviousClick:h,onNextClick:v})}function hn(e){var n,r=k(),a=r.classNames,s=r.disableNavigation,l=r.styles,o=r.captionLayout,i=r.components,d=(n=i==null?void 0:i.CaptionLabel)!==null&&n!==void 0?n:Rt,u;return s?u=t.jsx(d,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=t.jsx(rt,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=t.jsxs(t.Fragment,{children:[t.jsx(rt,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),t.jsx(st,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=t.jsxs(t.Fragment,{children:[t.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(st,{displayMonth:e.displayMonth,id:e.id})]}),t.jsx("div",{className:a.caption,style:l.caption,children:u})}function xn(e){var n=k(),r=n.footer,a=n.styles,s=n.classNames.tfoot;return r?t.jsx("tfoot",{className:s,style:a.tfoot,children:t.jsx("tr",{children:t.jsx("td",{colSpan:8,children:r})})}):t.jsx(t.Fragment,{})}function vn(e,n,r){for(var a=r?Re(new Date):Ae(new Date,{locale:e,weekStartsOn:n}),s=[],l=0;l<7;l++){var o=W(a,l);s.push(o)}return s}function pn(){var e=k(),n=e.classNames,r=e.styles,a=e.showWeekNumber,s=e.locale,l=e.weekStartsOn,o=e.ISOWeek,i=e.formatters.formatWeekdayName,d=e.labels.labelWeekday,u=vn(s,l,o);return t.jsxs("tr",{style:r.head_row,className:n.head_row,children:[a&&t.jsx("td",{style:r.head_cell,className:n.head_cell}),u.map(function(c,x){return t.jsx("th",{scope:"col",className:n.head_cell,style:r.head_cell,"aria-label":d(c,{locale:s}),children:i(c,{locale:s})},x)})]})}function yn(){var e,n=k(),r=n.classNames,a=n.styles,s=n.components,l=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:pn;return t.jsx("thead",{style:a.head,className:r.head,children:t.jsx(l,{})})}function gn(e){var n=k(),r=n.locale,a=n.formatters.formatDay;return t.jsx(t.Fragment,{children:a(e.date,{locale:r})})}var He=y.createContext(void 0);function bn(e){if(!re(e.initialProps)){var n={selected:void 0,modifiers:{disabled:[]}};return t.jsx(He.Provider,{value:n,children:e.children})}return t.jsx(Nn,{initialProps:e.initialProps,children:e.children})}function Nn(e){var n=e.initialProps,r=e.children,a=n.selected,s=n.min,l=n.max,o=function(u,c,x){var h,v;(h=n.onDayClick)===null||h===void 0||h.call(n,u,c,x);var f=!!(c.selected&&s&&(a==null?void 0:a.length)===s);if(!f){var N=!!(!c.selected&&l&&(a==null?void 0:a.length)===l);if(!N){var b=a?Lt([],a):[];if(c.selected){var D=b.findIndex(function(_){return O(u,_)});b.splice(D,1)}else b.push(u);(v=n.onSelect)===null||v===void 0||v.call(n,b,u,c,x)}}},i={disabled:[]};a&&i.disabled.push(function(u){var c=l&&a.length>l-1,x=a.some(function(h){return O(h,u)});return!!(c&&!x)});var d={selected:a,onDayClick:o,modifiers:i};return t.jsx(He.Provider,{value:d,children:r})}function Ve(){var e=y.useContext(He);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function jn(e,n){var r=n||{},a=r.from,s=r.to;return a&&s?O(s,e)&&O(a,e)?void 0:O(s,e)?{from:s,to:void 0}:O(a,e)?void 0:Ie(a,e)?{from:e,to:s}:{from:a,to:e}:s?Ie(e,s)?{from:s,to:e}:{from:e,to:s}:a?kt(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}var ze=y.createContext(void 0);function wn(e){if(!se(e.initialProps)){var n={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return t.jsx(ze.Provider,{value:n,children:e.children})}return t.jsx(Dn,{initialProps:e.initialProps,children:e.children})}function Dn(e){var n=e.initialProps,r=e.children,a=n.selected,s=a||{},l=s.from,o=s.to,i=n.min,d=n.max,u=function(v,f,N){var b,D;(b=n.onDayClick)===null||b===void 0||b.call(n,v,f,N);var _=jn(v,a);(D=n.onSelect)===null||D===void 0||D.call(n,_,v,f,N)},c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(c.range_start=[l],o?(c.range_end=[o],O(l,o)||(c.range_middle=[{after:l,before:o}])):c.range_end=[l]):o&&(c.range_start=[o],c.range_end=[o]),i&&(l&&!o&&c.disabled.push({after:De(l,i-1),before:W(l,i-1)}),l&&o&&c.disabled.push({after:l,before:W(l,i-1)}),!l&&o&&c.disabled.push({after:De(o,i-1),before:W(o,i-1)})),d){if(l&&!o&&(c.disabled.push({before:W(l,-d+1)}),c.disabled.push({after:W(l,d-1)})),l&&o){var x=U(o,l)+1,h=d-x;c.disabled.push({before:De(l,h)}),c.disabled.push({after:W(o,h)})}!l&&o&&(c.disabled.push({before:W(o,-d+1)}),c.disabled.push({after:W(o,d-1)}))}return t.jsx(ze.Provider,{value:{selected:a,onDayClick:u,modifiers:c},children:r})}function Ye(){var e=y.useContext(ze);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function fe(e){return Array.isArray(e)?Lt([],e):e!==void 0?[e]:[]}function _n(e){var n={};return Object.entries(e).forEach(function(r){var a=r[0],s=r[1];n[a]=fe(s)}),n}var H;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(H||(H={}));var Cn=H.Selected,z=H.Disabled,kn=H.Hidden,Mn=H.Today,Me=H.RangeEnd,Se=H.RangeMiddle,Pe=H.RangeStart,Sn=H.Outside;function Pn(e,n,r){var a,s=(a={},a[Cn]=fe(e.selected),a[z]=fe(e.disabled),a[kn]=fe(e.hidden),a[Mn]=[e.today],a[Me]=[],a[Se]=[],a[Pe]=[],a[Sn]=[],a);return e.fromDate&&s[z].push({before:e.fromDate}),e.toDate&&s[z].push({after:e.toDate}),re(e)?s[z]=s[z].concat(n.modifiers[z]):se(e)&&(s[z]=s[z].concat(r.modifiers[z]),s[Pe]=r.modifiers[Pe],s[Se]=r.modifiers[Se],s[Me]=r.modifiers[Me]),s}var Ht=y.createContext(void 0);function Tn(e){var n=k(),r=Ve(),a=Ye(),s=Pn(n,r,a),l=_n(n.modifiers),o=j(j({},s),l);return t.jsx(Ht.Provider,{value:o,children:e.children})}function Vt(){var e=y.useContext(Ht);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function En(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function In(e){return!!(e&&typeof e=="object"&&"from"in e)}function On(e){return!!(e&&typeof e=="object"&&"after"in e)}function Fn(e){return!!(e&&typeof e=="object"&&"before"in e)}function Ln(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Wn(e,n){var r,a=n.from,s=n.to;if(a&&s){var l=U(s,a)<0;l&&(r=[s,a],a=r[0],s=r[1]);var o=U(e,a)>=0&&U(s,e)>=0;return o}return s?O(s,e):a?O(a,e):!1}function Rn(e){return Tt(e)}function An(e){return Array.isArray(e)&&e.every(Tt)}function Bn(e,n){return n.some(function(r){if(typeof r=="boolean")return r;if(Rn(r))return O(e,r);if(An(r))return r.includes(e);if(In(r))return Wn(e,r);if(Ln(r))return r.dayOfWeek.includes(e.getDay());if(En(r)){var a=U(r.before,e),s=U(r.after,e),l=a>0,o=s<0,i=Ie(r.before,r.after);return i?o&&l:l||o}return On(r)?U(e,r.after)>0:Fn(r)?U(r.before,e)>0:typeof r=="function"?r(e):!1})}function Ue(e,n,r){var a=Object.keys(n).reduce(function(l,o){var i=n[o];return Bn(e,i)&&l.push(o),l},[]),s={};return a.forEach(function(l){return s[l]=!0}),r&&!We(e,r)&&(s.outside=!0),s}function Hn(e,n){for(var r=L(e[0]),a=pe(e[e.length-1]),s,l,o=r;o<=a;){var i=Ue(o,n),d=!i.disabled&&!i.hidden;if(!d){o=W(o,1);continue}if(i.selected)return o;i.today&&!l&&(l=o),s||(s=o),o=W(o,1)}return l||s}var Vn=365;function zt(e,n){var r=n.moveBy,a=n.direction,s=n.context,l=n.modifiers,o=n.retry,i=o===void 0?{count:0,lastFocused:e}:o,d=s.weekStartsOn,u=s.fromDate,c=s.toDate,x=s.locale,h={day:W,week:Oe,month:B,year:ba,startOfWeek:function(b){return s.ISOWeek?Re(b):Ae(b,{locale:x,weekStartsOn:d})},endOfWeek:function(b){return s.ISOWeek?St(b):Pt(b,{locale:x,weekStartsOn:d})}},v=h[r](e,a==="after"?1:-1);a==="before"&&u?v=va([u,v]):a==="after"&&c&&(v=pa([c,v]));var f=!0;if(l){var N=Ue(v,l);f=!N.disabled&&!N.hidden}return f?v:i.count>Vn?i.lastFocused:zt(v,{moveBy:r,direction:a,context:s,modifiers:l,retry:j(j({},i),{count:i.count+1})})}var Yt=y.createContext(void 0);function zn(e){var n=oe(),r=Vt(),a=y.useState(),s=a[0],l=a[1],o=y.useState(),i=o[0],d=o[1],u=Hn(n.displayMonths,r),c=s??(i&&n.isDateDisplayed(i))?i:u,x=function(){d(s),l(void 0)},h=function(b){l(b)},v=k(),f=function(b,D){if(s){var _=zt(s,{moveBy:b,direction:D,context:v,modifiers:r});O(s,_)||(n.goToDate(_,s),h(_))}},N={focusedDay:s,focusTarget:c,blur:x,focus:h,focusDayAfter:function(){return f("day","after")},focusDayBefore:function(){return f("day","before")},focusWeekAfter:function(){return f("week","after")},focusWeekBefore:function(){return f("week","before")},focusMonthBefore:function(){return f("month","before")},focusMonthAfter:function(){return f("month","after")},focusYearBefore:function(){return f("year","before")},focusYearAfter:function(){return f("year","after")},focusStartOfWeek:function(){return f("startOfWeek","before")},focusEndOfWeek:function(){return f("endOfWeek","after")}};return t.jsx(Yt.Provider,{value:N,children:e.children})}function $e(){var e=y.useContext(Yt);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Yn(e,n){var r=Vt(),a=Ue(e,r,n);return a}var qe=y.createContext(void 0);function Un(e){if(!ye(e.initialProps)){var n={selected:void 0};return t.jsx(qe.Provider,{value:n,children:e.children})}return t.jsx($n,{initialProps:e.initialProps,children:e.children})}function $n(e){var n=e.initialProps,r=e.children,a=function(l,o,i){var d,u,c;if((d=n.onDayClick)===null||d===void 0||d.call(n,l,o,i),o.selected&&!n.required){(u=n.onSelect)===null||u===void 0||u.call(n,void 0,l,o,i);return}(c=n.onSelect)===null||c===void 0||c.call(n,l,l,o,i)},s={selected:n.selected,onDayClick:a};return t.jsx(qe.Provider,{value:s,children:r})}function Ut(){var e=y.useContext(qe);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function qn(e,n){var r=k(),a=Ut(),s=Ve(),l=Ye(),o=$e(),i=o.focusDayAfter,d=o.focusDayBefore,u=o.focusWeekAfter,c=o.focusWeekBefore,x=o.blur,h=o.focus,v=o.focusMonthBefore,f=o.focusMonthAfter,N=o.focusYearBefore,b=o.focusYearAfter,D=o.focusStartOfWeek,_=o.focusEndOfWeek,w=function(g){var p,S,A,K;ye(r)?(p=a.onDayClick)===null||p===void 0||p.call(a,e,n,g):re(r)?(S=s.onDayClick)===null||S===void 0||S.call(s,e,n,g):se(r)?(A=l.onDayClick)===null||A===void 0||A.call(l,e,n,g):(K=r.onDayClick)===null||K===void 0||K.call(r,e,n,g)},C=function(g){var p;h(e),(p=r.onDayFocus)===null||p===void 0||p.call(r,e,n,g)},M=function(g){var p;x(),(p=r.onDayBlur)===null||p===void 0||p.call(r,e,n,g)},V=function(g){var p;(p=r.onDayMouseEnter)===null||p===void 0||p.call(r,e,n,g)},ge=function(g){var p;(p=r.onDayMouseLeave)===null||p===void 0||p.call(r,e,n,g)},be=function(g){var p;(p=r.onDayPointerEnter)===null||p===void 0||p.call(r,e,n,g)},q=function(g){var p;(p=r.onDayPointerLeave)===null||p===void 0||p.call(r,e,n,g)},le=function(g){var p;(p=r.onDayTouchCancel)===null||p===void 0||p.call(r,e,n,g)},Ne=function(g){var p;(p=r.onDayTouchEnd)===null||p===void 0||p.call(r,e,n,g)},je=function(g){var p;(p=r.onDayTouchMove)===null||p===void 0||p.call(r,e,n,g)},m=function(g){var p;(p=r.onDayTouchStart)===null||p===void 0||p.call(r,e,n,g)},P=function(g){var p;(p=r.onDayKeyUp)===null||p===void 0||p.call(r,e,n,g)},R=function(g){var p;switch(g.key){case"ArrowLeft":g.preventDefault(),g.stopPropagation(),r.dir==="rtl"?i():d();break;case"ArrowRight":g.preventDefault(),g.stopPropagation(),r.dir==="rtl"?d():i();break;case"ArrowDown":g.preventDefault(),g.stopPropagation(),u();break;case"ArrowUp":g.preventDefault(),g.stopPropagation(),c();break;case"PageUp":g.preventDefault(),g.stopPropagation(),g.shiftKey?N():v();break;case"PageDown":g.preventDefault(),g.stopPropagation(),g.shiftKey?b():f();break;case"Home":g.preventDefault(),g.stopPropagation(),D();break;case"End":g.preventDefault(),g.stopPropagation(),_();break}(p=r.onDayKeyDown)===null||p===void 0||p.call(r,e,n,g)},T={onClick:w,onFocus:C,onBlur:M,onKeyDown:R,onKeyUp:P,onMouseEnter:V,onMouseLeave:ge,onPointerEnter:be,onPointerLeave:q,onTouchCancel:le,onTouchEnd:Ne,onTouchMove:je,onTouchStart:m};return T}function Kn(){var e=k(),n=Ut(),r=Ve(),a=Ye(),s=ye(e)?n.selected:re(e)?r.selected:se(e)?a.selected:void 0;return s}function Gn(e){return Object.values(H).includes(e)}function Xn(e,n){var r=[e.classNames.day];return Object.keys(n).forEach(function(a){var s=e.modifiersClassNames[a];if(s)r.push(s);else if(Gn(a)){var l=e.classNames["day_".concat(a)];l&&r.push(l)}}),r}function Qn(e,n){var r=j({},e.styles.day);return Object.keys(n).forEach(function(a){var s;r=j(j({},r),(s=e.modifiersStyles)===null||s===void 0?void 0:s[a])}),r}function Zn(e,n,r){var a,s,l,o=k(),i=$e(),d=Yn(e,n),u=qn(e,d),c=Kn(),x=!!(o.onDayClick||o.mode!=="default");y.useEffect(function(){var V;d.outside||i.focusedDay&&x&&O(i.focusedDay,e)&&((V=r.current)===null||V===void 0||V.focus())},[i.focusedDay,e,r,x,d.outside]);var h=Xn(o,d).join(" "),v=Qn(o,d),f=!!(d.outside&&!o.showOutsideDays||d.hidden),N=(l=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&l!==void 0?l:gn,b=t.jsx(N,{date:e,displayMonth:n,activeModifiers:d}),D={style:v,className:h,children:b,role:"gridcell"},_=i.focusTarget&&O(i.focusTarget,e)&&!d.outside,w=i.focusedDay&&O(i.focusedDay,e),C=j(j(j({},D),(a={disabled:d.disabled,role:"gridcell"},a["aria-selected"]=d.selected,a.tabIndex=w||_?0:-1,a)),u),M={isButton:x,isHidden:f,activeModifiers:d,selectedDays:c,buttonProps:C,divProps:D};return M}function Jn(e){var n=y.useRef(null),r=Zn(e.date,e.displayMonth,n);return r.isHidden?t.jsx("div",{role:"gridcell"}):r.isButton?t.jsx(xe,j({name:"day",ref:n},r.buttonProps)):t.jsx("div",j({},r.divProps))}function er(e){var n=e.number,r=e.dates,a=k(),s=a.onWeekNumberClick,l=a.styles,o=a.classNames,i=a.locale,d=a.labels.labelWeekNumber,u=a.formatters.formatWeekNumber,c=u(Number(n),{locale:i});if(!s)return t.jsx("span",{className:o.weeknumber,style:l.weeknumber,children:c});var x=d(Number(n),{locale:i}),h=function(v){s(n,r,v)};return t.jsx(xe,{name:"week-number","aria-label":x,className:o.weeknumber,style:l.weeknumber,onClick:h,children:c})}function tr(e){var n,r,a=k(),s=a.styles,l=a.classNames,o=a.showWeekNumber,i=a.components,d=(n=i==null?void 0:i.Day)!==null&&n!==void 0?n:Jn,u=(r=i==null?void 0:i.WeekNumber)!==null&&r!==void 0?r:er,c;return o&&(c=t.jsx("td",{className:l.cell,style:s.cell,children:t.jsx(u,{number:e.weekNumber,dates:e.dates})})),t.jsxs("tr",{className:l.row,style:s.row,children:[c,e.dates.map(function(x){return t.jsx("td",{className:l.cell,style:s.cell,role:"presentation",children:t.jsx(d,{displayMonth:e.displayMonth,date:x})},fa(x))})]})}function ot(e,n,r){for(var a=r!=null&&r.ISOWeek?St(n):Pt(n,r),s=r!=null&&r.ISOWeek?Re(e):Ae(e,r),l=U(a,s),o=[],i=0;i<=l;i++)o.push(W(s,i));var d=o.reduce(function(u,c){var x=r!=null&&r.ISOWeek?ya(c):ga(c,r),h=u.find(function(v){return v.weekNumber===x});return h?(h.dates.push(c),u):(u.push({weekNumber:x,dates:[c]}),u)},[]);return d}function ar(e,n){var r=ot(L(e),pe(e),n);if(n!=null&&n.useFixedWeeks){var a=ma(e,n);if(a<6){var s=r[r.length-1],l=s.dates[s.dates.length-1],o=Oe(l,6-a),i=ot(Oe(l,1),o,n);r.push.apply(r,i)}}return r}function nr(e){var n,r,a,s=k(),l=s.locale,o=s.classNames,i=s.styles,d=s.hideHead,u=s.fixedWeeks,c=s.components,x=s.weekStartsOn,h=s.firstWeekContainsDate,v=s.ISOWeek,f=ar(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:l,weekStartsOn:x,firstWeekContainsDate:h}),N=(n=c==null?void 0:c.Head)!==null&&n!==void 0?n:yn,b=(r=c==null?void 0:c.Row)!==null&&r!==void 0?r:tr,D=(a=c==null?void 0:c.Footer)!==null&&a!==void 0?a:xn;return t.jsxs("table",{id:e.id,className:o.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!d&&t.jsx(N,{}),t.jsx("tbody",{className:o.tbody,style:i.tbody,children:f.map(function(_){return t.jsx(b,{displayMonth:e.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),t.jsx(D,{displayMonth:e.displayMonth})]})}function rr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sr=rr()?y.useLayoutEffect:y.useEffect,Te=!1,or=0;function lt(){return"react-day-picker-".concat(++or)}function lr(e){var n,r=e??(Te?lt():null),a=y.useState(r),s=a[0],l=a[1];return sr(function(){s===null&&l(lt())},[]),y.useEffect(function(){Te===!1&&(Te=!0)},[]),(n=e??s)!==null&&n!==void 0?n:void 0}function ir(e){var n,r,a=k(),s=a.dir,l=a.classNames,o=a.styles,i=a.components,d=oe().displayMonths,u=lr(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),c=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,x=[l.month],h=o.month,v=e.displayIndex===0,f=e.displayIndex===d.length-1,N=!v&&!f;s==="rtl"&&(n=[v,f],f=n[0],v=n[1]),v&&(x.push(l.caption_start),h=j(j({},h),o.caption_start)),f&&(x.push(l.caption_end),h=j(j({},h),o.caption_end)),N&&(x.push(l.caption_between),h=j(j({},h),o.caption_between));var b=(r=i==null?void 0:i.Caption)!==null&&r!==void 0?r:hn;return t.jsxs("div",{className:x.join(" "),style:h,children:[t.jsx(b,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),t.jsx(nr,{id:c,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function dr(e){var n=k(),r=n.classNames,a=n.styles;return t.jsx("div",{className:r.months,style:a.months,children:e.children})}function cr(e){var n,r,a=e.initialProps,s=k(),l=$e(),o=oe(),i=y.useState(!1),d=i[0],u=i[1];y.useEffect(function(){s.initialFocus&&l.focusTarget&&(d||(l.focus(l.focusTarget),u(!0)))},[s.initialFocus,d,l.focus,l.focusTarget,l]);var c=[s.classNames.root,s.className];s.numberOfMonths>1&&c.push(s.classNames.multiple_months),s.showWeekNumber&&c.push(s.classNames.with_weeknumber);var x=j(j({},s.styles.root),s.style),h=Object.keys(a).filter(function(f){return f.startsWith("data-")}).reduce(function(f,N){var b;return j(j({},f),(b={},b[N]=a[N],b))},{}),v=(r=(n=a.components)===null||n===void 0?void 0:n.Months)!==null&&r!==void 0?r:dr;return t.jsx("div",j({className:c.join(" "),style:x,dir:s.dir,id:s.id,nonce:a.nonce,title:a.title,lang:a.lang},h,{children:t.jsx(v,{children:o.displayMonths.map(function(f,N){return t.jsx(ir,{displayIndex:N,displayMonth:f},N)})})}))}function ur(e){var n=e.children,r=Oa(e,["children"]);return t.jsx(Ja,{initialProps:r,children:t.jsx(cn,{children:t.jsx(Un,{initialProps:r,children:t.jsx(bn,{initialProps:r,children:t.jsx(wn,{initialProps:r,children:t.jsx(Tn,{children:t.jsx(zn,{children:n})})})})})})})}function fr(e){return t.jsx(ur,j({},e,{children:t.jsx(cr,{initialProps:e})}))}function Ke({className:e,classNames:n,showOutsideDays:r=!0,...a}){return t.jsx(fr,{showOutsideDays:r,locale:ne,className:F("p-0",e),classNames:{months:"flex flex-col sm:flex-row space-y-2 sm:space-x-2 sm:space-y-0",month:"space-y-2",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-semibold",nav:"space-x-1 flex items-center",nav_button:F(Ge({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-60 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.75rem]",row:"flex w-full",cell:"h-8 w-8 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:F(Ge({variant:"ghost"}),"h-8 w-8 p-0 text-[0.8rem] font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground ring-1 ring-accent/60",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({...s})=>t.jsx(Fe,{className:"h-4 w-4"}),IconRight:({...s})=>t.jsx(ra,{className:"h-4 w-4"})},...a})}Ke.displayName="Calendar";const me=ta,he=aa,Z=y.forwardRef(({className:e,children:n,...r},a)=>t.jsxs(dt,{ref:a,className:F("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[n,t.jsx(Xt,{asChild:!0,children:t.jsx(vt,{className:"h-4 w-4 opacity-50"})})]}));Z.displayName=dt.displayName;const $t=y.forwardRef(({className:e,...n},r)=>t.jsx(ct,{ref:r,className:F("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(sa,{className:"h-4 w-4"})}));$t.displayName=ct.displayName;const qt=y.forwardRef(({className:e,...n},r)=>t.jsx(ut,{ref:r,className:F("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(vt,{className:"h-4 w-4"})}));qt.displayName=ut.displayName;const J=y.forwardRef(({className:e,children:n,position:r="popper",...a},s)=>t.jsx(Qt,{children:t.jsxs(ft,{ref:s,className:F("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[t.jsx($t,{}),t.jsx(Zt,{className:F("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),t.jsx(qt,{})]})}));J.displayName=ft.displayName;const mr=y.forwardRef(({className:e,...n},r)=>t.jsx(mt,{ref:r,className:F("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));mr.displayName=mt.displayName;const ee=y.forwardRef(({className:e,children:n,...r},a)=>t.jsxs(ht,{ref:a,className:F("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Jt,{children:t.jsx(Ft,{className:"h-4 w-4"})})}),t.jsx(ea,{children:n})]}));ee.displayName=ht.displayName;const hr=y.forwardRef(({className:e,...n},r)=>t.jsx(xt,{ref:r,className:F("-mx-1 my-1 h-px bg-muted",e),...n}));hr.displayName=xt.displayName;const xr=[{value:"active",label:"Pendientes (Activos)"},{value:"sold",label:"Vendido / Promo"},{value:"transfer",label:"Inter-Sucursal"},{value:"return",label:"Devolución"},{value:"destroyed",label:"Destrucción"}];function vr({isOpen:e,onClose:n,onConfirm:r}){const[a,s]=y.useState("pdf"),[l,o]=y.useState("day"),[i,d]=y.useState(new Date),[u,c]=y.useState(void 0),[x,h]=y.useState(new Date().getMonth().toString()),[v,f]=y.useState(new Date().getFullYear().toString()),[N,b]=y.useState(["all"]);y.useEffect(()=>{e&&(s("pdf"),o("day"),d(new Date),c(void 0),h(new Date().getMonth().toString()),f(new Date().getFullYear().toString()),b(["all"]))},[e]);const D=w=>{if(w==="all"){b(["all"]);return}let C=N.filter(M=>M!=="all");N.includes(w)?C=C.filter(M=>M!==w):C.push(w),C.length===0?b(["all"]):b(C)},_=()=>{let w,C;if(l==="day")w=Ee(i),C=u?Je(u):Je(i);else if(l==="month"){const M=new Date(parseInt(v),parseInt(x),1);w=L(M),C=pe(M)}else{const M=new Date(parseInt(v),0,1);w=Mt(M),C=Na(M)}r({format:a,rangeType:l,dateRange:{from:w,to:C},selectedStatuses:N}),n()};return t.jsx(pt,{open:e,onOpenChange:w=>!w&&n(),children:t.jsxs(yt,{className:"sm:max-w-[500px] p-0 overflow-hidden gap-0",children:[t.jsxs(gt,{className:"px-6 pt-6 pb-4",children:[t.jsx(bt,{children:"Exportar Reporte"}),t.jsx(Nt,{children:"Configura el rango de fechas y filtros."})]}),t.jsxs("div",{className:"px-6 py-2 space-y-6",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:`flex flex-1 items-center justify-center p-3 rounded-lg border cursor-pointer transition-all gap-2 ${a==="pdf"?"border-primary bg-primary/5 text-primary":"border-border text-muted-foreground hover:bg-muted/50"}`,onClick:()=>s("pdf"),children:[t.jsx(jt,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"PDF"})]}),t.jsxs("div",{className:`flex flex-1 items-center justify-center p-3 rounded-lg border cursor-pointer transition-all gap-2 ${a==="excel"?"border-green-600 bg-green-50 text-green-700":"border-border text-muted-foreground hover:bg-muted/50"}`,onClick:()=>s("excel"),children:[t.jsx(Da,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Excel"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Y,{className:"text-sm font-medium",children:"Rango de Tiempo"}),t.jsxs(_t,{value:l,onValueChange:w=>o(w),className:"w-full",children:[t.jsxs(Ct,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[t.jsx(X,{value:"day",children:"Día"}),t.jsx(X,{value:"month",children:"Mes"}),t.jsx(X,{value:"year",children:"Año"})]}),t.jsxs("div",{className:"mt-4 min-h-[80px]",children:[t.jsx(Q,{value:"day",className:"space-y-4 m-0",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{className:"text-xs text-muted-foreground",children:"Fecha Inicio"}),t.jsx(it,{date:i,setDate:w=>w&&d(w)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{className:"text-xs text-muted-foreground",children:"Fecha Fin (Opcional)"}),t.jsx(it,{date:u,setDate:c,placeholder:"Solo un día"})]})]})}),t.jsx(Q,{value:"month",className:"space-y-4 m-0",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{className:"text-xs text-muted-foreground",children:"Mes"}),t.jsxs(me,{value:x,onValueChange:h,children:[t.jsx(Z,{children:t.jsx(he,{})}),t.jsx(J,{children:Array.from({length:12}).map((w,C)=>t.jsx(ee,{value:C.toString(),children:E(new Date(2024,C,1),"MMMM",{locale:ne})},C))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{className:"text-xs text-muted-foreground",children:"Año"}),t.jsxs(me,{value:v,onValueChange:f,children:[t.jsx(Z,{children:t.jsx(he,{})}),t.jsx(J,{children:Array.from({length:5}).map((w,C)=>{const M=new Date().getFullYear()-C;return t.jsx(ee,{value:M.toString(),children:M},M)})})]})]})]})}),t.jsx(Q,{value:"year",className:"space-y-4 m-0",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{className:"text-xs text-muted-foreground",children:"Seleccionar Año"}),t.jsxs(me,{value:v,onValueChange:f,children:[t.jsx(Z,{children:t.jsx(he,{})}),t.jsx(J,{children:Array.from({length:5}).map((w,C)=>{const M=new Date().getFullYear()-C;return t.jsx(ee,{value:M.toString(),children:M},M)})})]})]})})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Y,{className:"text-sm font-medium",children:"Categorías (Estado)"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx($,{variant:N.includes("all")?"default":"outline",className:`cursor-pointer ${N.includes("all")?"bg-primary hover:bg-primary/90":"hover:bg-muted"}`,onClick:()=>D("all"),children:"Todos"}),xr.map(w=>t.jsx($,{variant:N.includes(w.value)?"default":"outline",className:`cursor-pointer ${N.includes(w.value)?"bg-primary hover:bg-primary/90":"hover:bg-muted"}`,onClick:()=>D(w.value),children:w.label},w.value))]})]})]}),t.jsxs(wt,{className:"px-6 py-4 bg-muted/20 border-t mt-4 gap-2 sm:gap-0",children:[t.jsx(I,{variant:"outline",onClick:n,className:"w-full sm:w-auto",children:"Cancelar"}),t.jsx(I,{onClick:_,className:"w-full sm:w-auto bg-primary text-primary-foreground hover:bg-primary/90",children:"Generar Reporte"})]})]})})}function it({date:e,setDate:n,placeholder:r="Seleccionar fecha"}){return t.jsxs(Et,{children:[t.jsx(It,{asChild:!0,children:t.jsxs(I,{variant:"outline",className:F("w-full justify-start text-left font-normal",!e&&"text-muted-foreground"),children:[t.jsx(ae,{className:"mr-2 h-4 w-4"}),e?E(e,"PPP",{locale:ne}):t.jsx("span",{children:r})]})}),t.jsx(Ot,{className:"w-auto p-0",children:t.jsx(Ke,{mode:"single",selected:e,onSelect:n,initialFocus:!0})})]})}const pr=(e,n,r)=>{const a=yr(e,n);n.format==="pdf"?gr(a,n,r):br(a,n,r)},yr=(e,n)=>{const r=[],{from:a,to:s}=n.dateRange;return e.forEach(l=>{l.batches.forEach(o=>{const i=o.status||"active";if(!(n.selectedStatuses.includes("all")||n.selectedStatuses.includes(i)))return;let u=!1;if(o.actionDate){const c=Be(o.actionDate/1e3);et(c,{start:a,end:s})&&(u=!0)}else i==="active"&&et(new Date,{start:a,end:s})&&(u=!0);u&&r.push({productName:l.productName,ean:l.ean,batchNumber:o.batchNumber,expirationDate:o.expirationDate,quantity:o.quantity,status:i,actionDate:o.actionDate,destinationBranch:o.destinationBranch,plexShipmentNumber:o.plexShipmentNumber,branchName:l.branchName})})}),r},gr=(e,n,r)=>{const a=new _a,s=a.internal.pageSize.width,l=a.internal.pageSize.height;let o=20;a.setFillColor(63,81,181),a.rect(0,0,s,40,"F"),a.setTextColor(255,255,255),a.setFontSize(22),a.setFont("helvetica","bold"),a.text("Reporte de Control de Vencimientos",15,20),a.setFontSize(12),a.setFont("helvetica","normal"),a.text(`Sucursal: ${r}`,15,30),a.text(`Generado: ${E(new Date,"dd/MM/yyyy HH:mm",{locale:ne})}`,s-70,30),o=50,a.setTextColor(50,50,50),a.setFontSize(14),a.setFont("helvetica","bold"),a.text("Resumen del Reporte",15,o),o+=10;const i=e.length,d=e.reduce((f,N)=>f+N.quantity,0);a.setFontSize(10),a.setFont("helvetica","normal");const u=E(n.dateRange.from,"dd/MM/yy"),c=E(n.dateRange.to,"dd/MM/yy");a.text(`Periodo: ${u} - ${c} (${Nr(n.rangeType)})`,15,o);const x=n.selectedStatuses.includes("all")?"Todos":n.selectedStatuses.map(f=>Le(f)).join(", "),h=a.splitTextToSize(`Estados: ${x}`,s-100);a.text(h,80,o),o+=h.length*5+2,a.text(`Total Ítems: ${i}`,15,o),a.text(`Total Unidades: ${d}`,80,o),o+=15;const v=f=>{a.setFillColor(240,240,240),a.rect(15,f,s-30,10,"F"),a.setTextColor(0,0,0),a.setFont("helvetica","bold"),a.setFontSize(9),a.text("Producto",20,f+7),a.text("Lote / Venc",90,f+7),a.text("Cant",130,f+7),a.text("Estado",150,f+7),a.text("Detalle",185,f+7)};v(o),o+=12,a.setFont("helvetica","normal"),a.setFontSize(8),e.forEach((f,N)=>{o>l-20&&(a.addPage(),o=20,v(o),o+=12);const b=f.productName.length>35?f.productName.substring(0,32)+"...":f.productName;N%2===1&&(a.setFillColor(250,250,250),a.rect(15,o-6,s-30,10,"F")),a.text(b,20,o),a.text(`${f.batchNumber} - ${f.expirationDate}`,90,o),a.text(`${f.quantity}`,130,o),a.text(Le(f.status),150,o);let D="-";f.status==="transfer"?D=f.destinationBranch||"Inter-Sucursal":f.actionDate&&(D=E(Be(f.actionDate/1e3),"dd/MM/yy")),a.text(D,185,o),o+=8,f.plexShipmentNumber&&(o>l-20&&(a.addPage(),o=20),a.setFontSize(7),a.setTextColor(100,100,100),a.text(`Plex: ${f.plexShipmentNumber}`,185,o-4),a.setFontSize(8),a.setTextColor(0,0,0))}),a.save(`Reporte_Vencimientos_${r}_${E(new Date,"yyyyMMdd")}.pdf`)},br=(e,n,r)=>{const a=e.map(o=>({Producto:o.productName,EAN:o.ean,Lote:o.batchNumber,Vencimiento:o.expirationDate,Cantidad:o.quantity,Estado:Le(o.status),"Fecha Acción":o.actionDate?E(Be(o.actionDate/1e3),"dd/MM/yyyy HH:mm"):"-","Sucursal Destino":o.destinationBranch||"-","Nº Envío Plex":o.plexShipmentNumber||"-","Sucursal Origen":o.branchName})),s=Ce.json_to_sheet(a),l=Ce.book_new();Ce.book_append_sheet(l,s,"Reporte"),Ca(l,`Control_Vencimientos_${r}.xlsx`)},Nr=e=>{switch(e){case"day":return"Día/Rango";case"month":return"Mes";case"year":return"Año";default:return"Personalizado"}},Le=e=>{switch(e){case"active":return"Pendiente";case"sold":return"Vendido";case"transfer":return"Transferido";case"return":return"Devolución";case"destroyed":return"Destrucción";case"all":return"Todos";default:return e}};function jr({onFilterChange:e,activeFilters:n}){const[r,a]=y.useState(!1),[s,l]=y.useState("grid"),o=[{value:"active",label:"Activo",color:"bg-green-500"},{value:"sold",label:"Vendido",color:"bg-blue-500"},{value:"transfer",label:"Transferido",color:"bg-purple-500"},{value:"return",label:"Devolución",color:"bg-orange-500"},{value:"destroyed",label:"Destruido",color:"bg-red-500"}],i=n.status.length>0||n.date!==void 0,d=f=>{const N=n.status;let b;N.includes(f)?b=N.filter(D=>D!==f):b=[...N,f],e({...n,status:b})},u=f=>{e({...n,date:f})},c=()=>{e({status:[],date:void 0}),a(!1),l("grid")},x=()=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>l("grid"),className:"h-8 px-2 -ml-2",children:[t.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Volver"]}),t.jsx("span",{className:"text-sm font-medium",children:"Estado"})]}),t.jsx("div",{className:"grid gap-1",children:o.map(f=>{const N=n.status.includes(f.value);return t.jsxs("div",{className:F("flex items-center justify-between p-2 rounded-md cursor-pointer transition-colors text-sm",N?"bg-primary/10 text-primary font-medium":"hover:bg-muted"),onClick:()=>d(f.value),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:F("w-2 h-2 rounded-full",f.color)}),t.jsx("span",{children:f.label})]}),N&&t.jsx(Ft,{className:"w-4 h-4"})]},f.value)})})]}),h=()=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>l("grid"),className:"h-8 px-2 -ml-2",children:[t.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Volver"]}),t.jsx("span",{className:"text-sm font-medium",children:"Fecha"})]}),t.jsx(Ke,{mode:"single",selected:n.date,onSelect:u,className:"rounded-md border shadow-sm",locale:ne})]}),v=()=>t.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1",children:[t.jsxs(I,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2 hover:bg-primary/5 hover:border-primary/50 transition-all border-dashed",onClick:()=>l("date"),children:[t.jsx(ae,{className:"w-8 h-8 text-muted-foreground"}),t.jsx("span",{className:"text-xs font-medium",children:"Fecha"}),n.date&&t.jsx($,{variant:"secondary",className:"text-[10px] h-5 px-1",children:"1 activo"})]}),t.jsxs(I,{variant:"outline",className:"h-24 flex flex-col items-center justify-center gap-2 hover:bg-primary/5 hover:border-primary/50 transition-all border-dashed",onClick:()=>l("status"),children:[t.jsx(Ea,{className:"w-8 h-8 text-muted-foreground"}),t.jsx("span",{className:"text-xs font-medium",children:"Estado"}),n.status.length>0&&t.jsxs($,{variant:"secondary",className:"text-[10px] h-5 px-1",children:[n.status.length," activos"]})]})]});return t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(Et,{open:r,onOpenChange:f=>{a(f),f||l("grid")},children:[t.jsx(It,{asChild:!0,children:t.jsxs(I,{variant:"outline",size:"sm",className:"h-9 border-dashed",children:[t.jsx(ka,{className:"w-4 h-4 mr-2"}),"Filtros",i&&t.jsx($,{variant:"secondary",className:"ml-2 h-5 w-5 p-0 flex items-center justify-center rounded-full bg-primary text-primary-foreground text-[10px]",children:n.status.length+(n.date?1:0)})]})}),t.jsxs(Ot,{className:"w-[300px] p-4",align:"start",children:[i&&s==="grid"&&t.jsx("div",{className:"mb-2 flex justify-end",children:t.jsxs(I,{variant:"ghost",size:"sm",onClick:c,className:"h-6 px-2 text-[10px] text-muted-foreground hover:text-destructive",children:["Limpiar todo",t.jsx(oa,{className:"w-3 h-3 ml-1"})]})}),s==="grid"&&t.jsx(v,{}),s==="status"&&t.jsx(x,{}),s==="date"&&t.jsx(h,{})]})]})})}function wr({isOpen:e,onClose:n,onConfirm:r,batch:a,branches:s}){const[l,o]=y.useState(""),[i,d]=y.useState(""),[u,c]=y.useState("");y.useEffect(()=>{e&&(o(""),d(""),c(""))},[e]);const x=()=>{if(!l){c("Debes seleccionar una sucursal de destino");return}if(!i.trim()){c("El número de envío Plex es obligatorio");return}r(l,i),n()};return a?t.jsx(pt,{open:e,onOpenChange:h=>!h&&n(),children:t.jsxs(yt,{className:"sm:max-w-[500px]",children:[t.jsxs(gt,{children:[t.jsxs(bt,{className:"flex items-center gap-2",children:[t.jsx(Ia,{className:"w-5 h-5 text-blue-600"}),"Transferencia Inter-Sucursal"]}),t.jsx(Nt,{children:"Complete los datos del envío para registrar la transferencia."})]}),t.jsxs("div",{className:"grid gap-6 py-4",children:[t.jsxs("div",{className:"bg-muted/40 p-4 rounded-lg space-y-3 border border-border/50",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:a.productName}),t.jsxs("p",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:["EAN: ",a.ean]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(nt,{className:"w-3.5 h-3.5"}),t.jsxs("span",{className:"text-xs",children:["Lote: ",t.jsx("span",{className:"font-medium text-foreground",children:a.batchNumber})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(ae,{className:"w-3.5 h-3.5"}),t.jsxs("span",{className:"text-xs",children:["Venc: ",t.jsx("span",{className:"font-medium text-foreground",children:a.expirationDate})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(la,{className:"w-3.5 h-3.5"}),t.jsxs("span",{className:"text-xs",children:["Cant: ",t.jsxs("span",{className:"font-medium text-foreground",children:[a.quantity," un."]})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"branch",children:"Sucursal de Destino"}),t.jsxs(me,{value:l,onValueChange:o,children:[t.jsx(Z,{id:"branch",children:t.jsx(he,{placeholder:"Seleccionar sucursal..."})}),t.jsx(J,{className:"max-h-[200px]",children:s.map(h=>t.jsx(ee,{value:h,children:h},h))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Y,{htmlFor:"plex",className:"flex items-center justify-between",children:["Número de Envío Plex",t.jsx($,{variant:"outline",className:"text-[10px] h-5",children:"Obligatorio"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(nt,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),t.jsx(Dt,{id:"plex",placeholder:"Ingrese el número de envío...",value:i,onChange:h=>d(h.target.value),className:"pl-9"})]}),t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Este número es requerido para la trazabilidad en el sistema."})]}),u&&t.jsx("p",{className:"text-xs text-destructive font-medium bg-destructive/10 p-2 rounded",children:u})]})]}),t.jsxs(wt,{children:[t.jsx(I,{variant:"outline",onClick:n,children:"Cancelar"}),t.jsx(I,{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Confirmar Transferencia"})]})]})}):null}function zr(){const{user:e}=ia();na(),wa();const[n,r]=y.useState([]),[a,s]=y.useState([]),[l,o]=y.useState(""),[i,d]=y.useState("pending"),[u,c]=y.useState(!0),[x,h]=y.useState(!1),[v,f]=y.useState(null),[N,b]=y.useState(!1),[D,_]=y.useState({status:[],date:void 0}),w=m=>{e!=null&&e.branchName&&pr(n,m,e.branchName)};y.useEffect(()=>{C()},[e==null?void 0:e.branchName]);const C=async()=>{c(!0);try{const m=await Ma(e==null?void 0:e.branchName);r(m),M(m)}catch(m){console.error("Error loading analyzed data",m),G.error("Error","No se pudieron cargar los datos")}finally{c(!1)}},M=m=>{const P=[],R=new Date;m.forEach(T=>{T.batches.forEach(g=>{let p;const S=g.expirationDate.split("/");let A=parseInt(S[S.length-1]);A<100&&(A+=2e3),S.length===2?p=new Date(A,parseInt(S[0]),0):p=new Date(A,parseInt(S[1])-1,parseInt(S[0]));const K=ja(p,R),Kt=B(R,K),Gt=tt(p,Kt);P.push({...g,itemId:T.id,productName:T.productName,ean:T.ean,daysUntilExpiry:tt(p,R),monthsUntilExpiry:K,remainingDays:Gt})})}),P.sort((T,g)=>T.daysUntilExpiry-g.daysUntilExpiry),s(P)},V=async(m,P)=>{if(P==="transfer"){f(m),h(!0);return}await be(m,P)},ge=async(m,P)=>{if(v){try{const R=n.find(T=>T.id===v.itemId);if(!R)return;await Sa(R,v,m,P),G.success("Transferencia Exitosa",`Producto transferido a ${m}`),C()}catch(R){console.error("Error processing transfer:",R),G.error("Error","Falló la transferencia")}h(!1),f(null)}},be=async(m,P,R={})=>{try{const T=n.find(S=>S.id===m.itemId);if(!T)return;const g=T.batches.map(S=>S.batchNumber===m.batchNumber&&S.expirationDate===m.expirationDate?{...S,status:P,actionDate:Date.now(),...R}:S);await Pa(T.id,{batches:g}),r(S=>S.map(A=>A.id===T.id?{...A,batches:g}:A)),M(n.map(S=>S.id===T.id?{...S,batches:g}:S));const p={sold:"Marcado como Vendido/Promo",transfer:"Marcado para Transferencia",return:"Marcado para Devolución",destroyed:"Marcado para Destrucción"};G.success("Acción registrada",p[P]),C()}catch(T){console.error("Error updating batch",T),G.error("Error","No se pudo actualizar el estado")}},q=a.filter(m=>{const P=m.productName.toLowerCase().includes(l.toLowerCase())||m.batchNumber.toLowerCase().includes(l.toLowerCase());return i==="pending"?P&&(!m.status||m.status==="active"):P&&m.status&&m.status!=="active"}),le=m=>m<0||m<30?"text-red-600 dark:text-red-400 border-red-500/30 bg-red-500/10":m<60?"text-amber-600 dark:text-amber-400 border-amber-500/30 bg-amber-500/20":"text-emerald-600 dark:text-emerald-400 border-emerald-500/30 bg-emerald-500/10",Ne=m=>{switch(m){case"sold":return t.jsx(ce,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"transfer":return t.jsx(Xe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"return":return t.jsx(ke,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"});case"destroyed":return t.jsx(Qe,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return t.jsx(we,{className:"w-4 h-4 text-muted-foreground"})}},je=(m,P)=>{switch(m){case"sold":return"Vendido / Promo";case"transfer":return P!=null&&P.destinationBranch?`Transferido a ${P.destinationBranch}`:"Inter-Sucursal";case"return":return"Devolución";case"destroyed":return"Destrucción";default:return"Pendiente"}};return t.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8 space-y-6 pb-24",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(ie,{className:"bg-card/50 backdrop-blur-sm border-muted/50",children:t.jsxs(de,{className:"p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:["Críticos (","<","30d)"]}),t.jsx("h3",{className:"text-xl font-bold text-destructive",children:a.filter(m=>(!m.status||m.status==="active")&&m.daysUntilExpiry<30).length})]}),t.jsx("div",{className:"p-2 bg-destructive/10 rounded-full",children:t.jsx(we,{className:"w-4 h-4 text-destructive"})})]})}),t.jsx(ie,{className:"bg-card/50 backdrop-blur-sm border-muted/50",children:t.jsxs(de,{className:"p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Próximos (30-60d)"}),t.jsx("h3",{className:"text-xl font-bold text-warning",children:a.filter(m=>(!m.status||m.status==="active")&&m.daysUntilExpiry>=30&&m.daysUntilExpiry<60).length})]}),t.jsx("div",{className:"p-2 bg-warning/10 rounded-full",children:t.jsx(ae,{className:"w-4 h-4 text-warning"})})]})})]}),t.jsxs(_t,{value:i,onValueChange:m=>d(m),className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 bg-card p-1.5 rounded-xl border border-border/40 shadow-sm",children:[t.jsxs(Ct,{className:"grid w-full sm:w-[400px] grid-cols-2",children:[t.jsxs(X,{value:"pending",className:"gap-2 h-9 text-xs",children:[t.jsx(we,{className:"w-3.5 h-3.5"}),"Pendientes",t.jsx($,{variant:"secondary",className:"ml-1 h-4 px-1 min-w-[18px] justify-center text-[10px]",children:a.filter(m=>!m.status||m.status==="active").length})]}),t.jsxs(X,{value:"resolved",className:"gap-2 h-9 text-xs",children:[t.jsx(ce,{className:"w-3.5 h-3.5"}),"Resueltos"]})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[t.jsx(jr,{activeFilters:D,onFilterChange:_}),t.jsxs("div",{className:"relative flex-1 md:w-64",children:[t.jsx(da,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),t.jsx(Dt,{placeholder:"Buscar producto o lote...",value:l,onChange:m=>o(m.target.value),className:"pl-9 h-9 bg-muted/50 border-muted-foreground/20"})]})]})]}),t.jsx(Q,{value:"pending",className:"space-y-4 data-[state=inactive]:hidden focus-visible:outline-none",children:t.jsx(Ta,{mode:"popLayout",children:q.length===0?t.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-12 text-center space-y-4 border-2 border-dashed border-muted rounded-xl bg-muted/5",children:[t.jsx("div",{className:"p-4 bg-background rounded-full shadow-sm",children:t.jsx(ce,{className:"w-8 h-8 text-success"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold",children:"¡Todo al día!"}),t.jsx("p",{className:"text-muted-foreground max-w-sm mt-1",children:"No tienes productos pendientes de revisión con tus criterios de búsqueda."})]})]}):t.jsx("div",{className:"grid gap-3",children:q.map(m=>t.jsx(at.div,{layout:!0,initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:t.jsx(ie,{className:`overflow-hidden border-l-4 ${le(m.daysUntilExpiry).split(" ")[1]} transition-colors hover:bg-muted/5 group`,children:t.jsx(de,{className:"p-0",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[t.jsxs("div",{className:"flex-1 py-3 px-4 flex items-center gap-4 min-w-0",children:[t.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-base leading-tight truncate",title:m.productName,children:m.productName}),t.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1 font-mono",children:[t.jsxs("span",{className:"bg-muted px-2 py-0.5 rounded text-[10px] border border-border/40 font-medium",children:["EAN: ",m.ean]}),t.jsx("span",{className:"text-border/40",children:"•"}),t.jsxs("span",{className:"text-[10px] opacity-80",children:["Lote: ",m.batchNumber]})]})]}),t.jsxs("div",{className:"flex items-center gap-5 text-xs pl-0.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground/90",children:[t.jsx(ae,{className:"w-3.5 h-3.5 opacity-70"}),t.jsxs("span",{children:["Venc: ",t.jsx("span",{className:"font-medium text-foreground",children:m.expirationDate})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground/90",children:[t.jsx(ke,{className:"w-3.5 h-3.5 opacity-70"}),t.jsxs("span",{children:["Stock: ",t.jsxs("span",{className:"font-medium text-foreground",children:[m.quantity," un."]})]})]})]})]}),t.jsxs("div",{className:`flex flex-col items-center justify-center flex-shrink-0 px-4 py-1.5 min-w-[170px] rounded-xl border ${le(m.daysUntilExpiry)} select-none bg-background/40 backdrop-blur-sm shadow-sm`,children:[t.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] opacity-60 mb-0.5 leading-none",children:m.monthsUntilExpiry<=0?Math.abs(m.daysUntilExpiry)===0?"HOY":"VENCE EN":"TIEMPO RESTANTE"}),t.jsx("div",{className:"flex items-baseline justify-center gap-1 leading-none",children:m.monthsUntilExpiry<=0?t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl font-black tracking-tight",children:Math.abs(m.daysUntilExpiry)}),t.jsx("span",{className:"text-[8px] uppercase font-bold tracking-wider opacity-50 mt-0.5",children:"Días"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl font-black tracking-tight",children:m.monthsUntilExpiry}),t.jsx("span",{className:"text-[8px] uppercase font-bold tracking-wider opacity-50 mt-0.5",children:"Meses"})]}),m.remainingDays>0&&t.jsx("span",{className:"text-xl font-thin opacity-20 mx-2",children:"/"}),m.remainingDays>0&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl font-black tracking-tight",children:m.remainingDays}),t.jsx("span",{className:"text-[8px] uppercase font-bold tracking-wider opacity-50 mt-0.5",children:"Días"})]})]})})]})]}),t.jsxs("div",{className:"w-full md:w-auto p-2 md:pr-4 flex flex-row gap-1 md:gap-2 justify-center md:justify-end opacity-80 group-hover:opacity-100 transition-opacity",children:[t.jsx(ue,{label:"Vendido / Promoción",children:t.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-success/10 hover:text-success hover:scale-105 active:scale-95 transition-all text-muted-foreground/70",onClick:()=>V(m,"sold"),children:t.jsx(ce,{className:"w-4 h-4"})})}),t.jsx(ue,{label:"Inter-Sucursal",children:t.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-blue-500/10 hover:text-blue-500 hover:scale-105 active:scale-95 transition-all text-muted-foreground/70",onClick:()=>V(m,"transfer"),children:t.jsx(Xe,{className:"w-4 h-4"})})}),t.jsx(ue,{label:"Devolución",children:t.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-warning/10 hover:text-warning hover:scale-105 active:scale-95 transition-all text-muted-foreground/70",onClick:()=>V(m,"return"),children:t.jsx(ke,{className:"w-4 h-4"})})}),t.jsx(ue,{label:"Destrucción",children:t.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-destructive/10 hover:text-destructive hover:scale-105 active:scale-95 transition-all text-muted-foreground/70",onClick:()=>V(m,"destroyed"),children:t.jsx(Qe,{className:"w-4 h-4"})})})]})]})})})},`${m.itemId}-${m.batchNumber}`))})})}),t.jsx(Q,{value:"resolved",className:"space-y-4",children:t.jsxs("div",{className:"grid gap-3",children:[q.map(m=>t.jsx(ie,{className:"bg-muted/30 opacity-75 hover:opacity-100 transition-opacity",children:t.jsxs(de,{className:"p-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-background rounded-full shadow-sm border",children:Ne(m.status)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold line-through text-muted-foreground text-sm",children:m.productName}),t.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[t.jsx("span",{children:m.batchNumber}),t.jsx("span",{children:"•"}),t.jsx("span",{className:"font-medium text-foreground",children:je(m.status,m)})]})]})]}),t.jsxs("div",{className:"text-right text-[10px] text-muted-foreground",children:[t.jsx("p",{children:"Acción realizada"}),t.jsx("p",{className:"font-mono",children:m.actionDate?E(m.actionDate,"dd/MM/yyyy HH:mm"):"-"}),m.plexShipmentNumber&&t.jsxs("p",{className:"font-mono text-[9px] text-blue-500 mt-1",children:["Plex: ",m.plexShipmentNumber]})]})]})},`${m.itemId}-${m.batchNumber}`)),q.length===0&&t.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay items resueltos."})]})})]}),t.jsx(wr,{isOpen:x,onClose:()=>h(!1),onConfirm:ge,batch:v,branches:ca}),t.jsx(ua,{actions:[{label:"Exportar Reporte",icon:t.jsx(jt,{className:"w-5 h-5"}),onClick:()=>b(!0),variant:"secondary"}]}),t.jsx(vr,{isOpen:N,onClose:()=>b(!1),onConfirm:w})]})}function ue({label:e,children:n}){return t.jsxs("div",{className:"relative group/tooltip",children:[n,t.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:[e,t.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-popover"})]})]})}export{zr as default};
