const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DJOyAhcW.js","assets/ui-vendor-CDeHCoCT.js","assets/react-vendor-ylmX0jv_.js","assets/cyclicInventoryService-CQDQ737-.js","assets/trending-up-DAk7262J.js","assets/permissions-B8fFzo_0.js","assets/clock-ChbqCT-J.js","assets/history-CvgmQddQ.js","assets/target-DLbcoXhl.js","assets/wifi-CJ81zKGK.js","assets/calendar-CquGndSq.js","assets/auditService-DZqFkZac.js","assets/utils-B3_ieZWp.js","assets/animation-b3c-J9zS.js","assets/excel-uoQkVabA.js","assets/AnimatedCard-DO1OEZet.js","assets/dropdown-menu-CrIn5pYW.js","assets/circle-CMyczGQm.js","assets/input-BBxKqSGF.js","assets/AnimatedProgressBar-B1rSqfSu.js","assets/plus-B5gctVKY.js","assets/chevron-left-BOfAYgOd.js","assets/es-DzSx4Un2.js","assets/rotate-ccw-D6LrGB4I.js","assets/expirationDB-BFyqtfL7.js","assets/arrow-right-DpMjf9DB.js","assets/progress-QrTCqD_g.js","assets/CounterAnimation-D0rflmzZ.js","assets/label-PbGot-Z7.js","assets/select-BRcGlYup.js","assets/loader-circle-X6qRBHih.js","assets/table-D5_bpSso.js","assets/chart-vendor-D3hk2TXZ.js","assets/eye-B4lXTvBl.js","assets/Stock-5nK6BrAb.js","assets/PreCount-BZd5gJxz.js","assets/AnimatedCounter-CcA9GhX_.js","assets/scanner-D4NToCeH.js","assets/Calculator-D8mevdfy.js","assets/switch-vdTz39Ex.js","assets/trash-2-94VVF7R_.js","assets/barcode-C0Le__ud.js","assets/pencil-CoFmPVDG.js","assets/jspdf.es.min-ChP86j0r.js","assets/JsBarcode-BPRqDEDi.js","assets/FabMenu-iLG-m5bR.js","assets/calculator-BYj25CJ8.js","assets/StockImport-BlP-hXmT.js","assets/file-spreadsheet-CbgJOwhb.js","assets/save-CZ4jDeAJ.js","assets/ExpirationControl-BrMAWyl9.js","assets/popover-DUdJB9qh.js","assets/CyclicInventory-pgWixXhf.js","assets/database-B5Eox3RQ.js","assets/CyclicInventoryDetail-EHvGC-Gw.js","assets/tabs-Dre5pp-W.js","assets/ProductImageHover-DmtF6qsf.js","assets/circle-help-UZRnXOHl.js","assets/PageHeader-DFhk-L31.js","assets/CyclicInventoryDetail-DB0Q8XAf.css","assets/Products-CdEgqQzm.js","assets/Reports-Bi0l57qK.js","assets/html2canvas.esm-CBrSDip1.js","assets/map-pin-_YP6rinx.js","assets/Settings-DIFd6jp_.js","assets/shield-DbBtf0LE.js","assets/lock-XoAQ0LkV.js","assets/Profile-CDcDTTKF.js","assets/M3ComponentsDemo-ByWPs3Mi.js","assets/filter-Dx5TivZm.js","assets/AnimationsDemo-CmBDs3Og.js","assets/Login-DL_cUc-9.js","assets/NotFound-C1CxUoFu.js","assets/AdminBranches-BWP2gPXr.js","assets/SmartAnalystPage-RjJDa_8W.js","assets/AdminAudit-DqbFvDIB.js"])))=>i.map(i=>d[i]);
var jl=Object.defineProperty;var ia=r=>{throw TypeError(r)};var El=(r,e,t)=>e in r?jl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var oa=(r,e,t)=>El(r,typeof e!="symbol"?e+"":e,t),Ds=(r,e,t)=>e.has(r)||ia("Cannot "+t);var S=(r,e,t)=>(Ds(r,e,"read from private field"),t?t.call(r):e.get(r)),Q=(r,e,t)=>e.has(r)?ia("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),V=(r,e,t,s)=>(Ds(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),Te=(r,e,t)=>(Ds(r,e,"access private method"),t);var Qr=(r,e,t,s)=>({set _(n){V(r,e,n,t)},get _(){return S(r,e,s)}});import{j as l,C as wi,P as Tl,R as Cl,T as Rl,O as Ss,a as ks,b as bi,c as An,D as In,d as $n,e as Dn,S as Ol,_ as I,t as Nl,f as js,g as Pl,h as xi,I as _i,F as Si,u as lr,i as Tt,k as Ar}from"./ui-vendor-CDeHCoCT.js";import{a as Al,r as p,N as ki,c as y,b as Il,e as $l,u as Ln,f as ji,L as Dl,O as Ll,M as Ul,h as Bl,i as we,j as Ei}from"./react-vendor-ylmX0jv_.js";import{t as Ml,c as Ti}from"./utils-B3_ieZWp.js";import{m as De,A as Un}from"./animation-b3c-J9zS.js";import{r as Ci,u as Ri}from"./excel-uoQkVabA.js";function ql(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in r)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var sn={},la=Al;sn.createRoot=la.createRoot,sn.hydrateRoot=la.hydrateRoot;const Fl="modulepreload",zl=function(r){return"/farmaplus-pwa/"+r},ca={},ke=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=zl(c),c in ca)return;ca[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Fl,u||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return n.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};var Es=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ts=typeof window>"u"||"Deno"in globalThis;function Xe(){}function Vl(r,e){return typeof r=="function"?r(e):r}function Hl(r){return typeof r=="number"&&r>=0&&r!==1/0}function Wl(r,e){return Math.max(r+(e||0)-Date.now(),0)}function nn(r,e){return typeof r=="function"?r(e):r}function Kl(r,e){return typeof r=="function"?r(e):r}function ua(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:a,queryKey:i,stale:o}=r;if(i){if(s){if(e.queryHash!==Bn(i,e.options))return!1}else if(!$r(e.queryKey,i))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||n&&n!==e.state.fetchStatus||a&&!a(e))}function da(r,e){const{exact:t,status:s,predicate:n,mutationKey:a}=r;if(a){if(!e.options.mutationKey)return!1;if(t){if(Ir(e.options.mutationKey)!==Ir(a))return!1}else if(!$r(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Bn(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ir)(r)}function Ir(r){return JSON.stringify(r,(e,t)=>an(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function $r(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>$r(r[t],e[t])):!1}function Oi(r,e){if(r===e)return r;const t=ha(r)&&ha(e);if(t||an(r)&&an(e)){const s=t?r:Object.keys(r),n=s.length,a=t?e:Object.keys(e),i=a.length,o=t?[]:{},c=new Set(s);let u=0;for(let d=0;d<i;d++){const m=t?d:a[d];(!t&&c.has(m)||t)&&r[m]===void 0&&e[m]===void 0?(o[m]=void 0,u++):(o[m]=Oi(r[m],e[m]),o[m]===r[m]&&r[m]!==void 0&&u++)}return n===i&&u===n?r:o}return e}function ha(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function an(r){if(!fa(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!fa(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function fa(r){return Object.prototype.toString.call(r)==="[object Object]"}function Gl(r){return new Promise(e=>{setTimeout(e,r)})}function Jl(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Oi(r,e):e}function Ql(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function Yl(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Mn=Symbol();function Ni(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Mn?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var qt,xt,dr,di,Xl=(di=class extends Es{constructor(){super();Q(this,qt);Q(this,xt);Q(this,dr);V(this,dr,e=>{if(!Ts&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){S(this,xt)||this.setEventListener(S(this,dr))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,xt))==null||e.call(this),V(this,xt,void 0))}setEventListener(e){var t;V(this,dr,e),(t=S(this,xt))==null||t.call(this),V(this,xt,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){S(this,qt)!==e&&(V(this,qt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof S(this,qt)=="boolean"?S(this,qt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qt=new WeakMap,xt=new WeakMap,dr=new WeakMap,di),Pi=new Xl,hr,_t,fr,hi,Zl=(hi=class extends Es{constructor(){super();Q(this,hr,!0);Q(this,_t);Q(this,fr);V(this,fr,e=>{if(!Ts&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){S(this,_t)||this.setEventListener(S(this,fr))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,_t))==null||e.call(this),V(this,_t,void 0))}setEventListener(e){var t;V(this,fr,e),(t=S(this,_t))==null||t.call(this),V(this,_t,e(this.setOnline.bind(this)))}setOnline(e){S(this,hr)!==e&&(V(this,hr,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return S(this,hr)}},hr=new WeakMap,_t=new WeakMap,fr=new WeakMap,hi),ps=new Zl;function ec(){let r,e;const t=new Promise((n,a)=>{r=n,e=a});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function tc(r){return Math.min(1e3*2**r,3e4)}function Ai(r){return(r??"online")==="online"?ps.isOnline():!0}var Ii=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Ls(r){return r instanceof Ii}function $i(r){let e=!1,t=0,s=!1,n;const a=ec(),i=g=>{var v;s||(f(new Ii(g)),(v=r.abort)==null||v.call(r))},o=()=>{e=!0},c=()=>{e=!1},u=()=>Pi.isFocused()&&(r.networkMode==="always"||ps.isOnline())&&r.canRun(),d=()=>Ai(r.networkMode)&&r.canRun(),m=g=>{var v;s||(s=!0,(v=r.onSuccess)==null||v.call(r,g),n==null||n(),a.resolve(g))},f=g=>{var v;s||(s=!0,(v=r.onError)==null||v.call(r,g),n==null||n(),a.reject(g))},h=()=>new Promise(g=>{var v;n=_=>{(s||u())&&g(_)},(v=r.onPause)==null||v.call(r)}).then(()=>{var g;n=void 0,s||(g=r.onContinue)==null||g.call(r)}),w=()=>{if(s)return;let g;const v=t===0?r.initialPromise:void 0;try{g=v??r.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(m).catch(_=>{var T;if(s)return;const j=r.retry??(Ts?0:3),b=r.retryDelay??tc,k=typeof b=="function"?b(t,_):b,N=j===!0||typeof j=="number"&&t<j||typeof j=="function"&&j(t,_);if(e||!N){f(_);return}t++,(T=r.onFail)==null||T.call(r,t,_),Gl(k).then(()=>u()?void 0:h()).then(()=>{e?f(_):w()})})};return{promise:a,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?w():h().then(w),a)}}var rc=r=>setTimeout(r,0);function sc(){let r=[],e=0,t=o=>{o()},s=o=>{o()},n=rc;const a=o=>{e?r.push(o):n(()=>{t(o)})},i=()=>{const o=r;r=[],o.length&&n(()=>{s(()=>{o.forEach(c=>{t(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||i()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var Pe=sc(),Ft,fi,Di=(fi=class{constructor(){Q(this,Ft)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hl(this.gcTime)&&V(this,Ft,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Ts?1/0:5*60*1e3))}clearGcTimeout(){S(this,Ft)&&(clearTimeout(S(this,Ft)),V(this,Ft,void 0))}},Ft=new WeakMap,fi),mr,zt,We,Vt,Re,Mr,Ht,et,ct,mi,nc=(mi=class extends Di{constructor(e){super();Q(this,et);Q(this,mr);Q(this,zt);Q(this,We);Q(this,Vt);Q(this,Re);Q(this,Mr);Q(this,Ht);V(this,Ht,!1),V(this,Mr,e.defaultOptions),this.setOptions(e.options),this.observers=[],V(this,Vt,e.client),V(this,We,S(this,Vt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,V(this,mr,ic(this.options)),this.state=e.state??S(this,mr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=S(this,Re))==null?void 0:e.promise}setOptions(e){this.options={...S(this,Mr),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,We).remove(this)}setData(e,t){const s=Jl(this.state.data,e,this.options);return Te(this,et,ct).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){Te(this,et,ct).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=S(this,Re))==null?void 0:s.promise;return(n=S(this,Re))==null||n.cancel(e),t?t.then(Xe).catch(Xe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,mr))}isActive(){return this.observers.some(e=>Kl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>nn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Wl(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,Re))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,Re))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),S(this,We).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(S(this,Re)&&(S(this,Ht)?S(this,Re).cancel({revert:!0}):S(this,Re).cancelRetry()),this.scheduleGc()),S(this,We).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,et,ct).call(this,{type:"invalidate"})}fetch(e,t){var u,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(S(this,Re))return S(this,Re).continueRetry(),S(this,Re).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,n=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(V(this,Ht,!0),s.signal)})},a=()=>{const f=Ni(this.options,t),w=(()=>{const g={client:S(this,Vt),queryKey:this.queryKey,meta:this.meta};return n(g),g})();return V(this,Ht,!1),this.options.persister?this.options.persister(f,w,this):f(w)},o=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:S(this,Vt),state:this.state,fetchFn:a};return n(f),f})();(u=this.options.behavior)==null||u.onFetch(o,this),V(this,zt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Te(this,et,ct).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=f=>{var h,w,g,v;Ls(f)&&f.silent||Te(this,et,ct).call(this,{type:"error",error:f}),Ls(f)||((w=(h=S(this,We).config).onError)==null||w.call(h,f,this),(v=(g=S(this,We).config).onSettled)==null||v.call(g,this.state.data,f,this)),this.scheduleGc()};return V(this,Re,$i({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var h,w,g,v;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(_){c(_);return}(w=(h=S(this,We).config).onSuccess)==null||w.call(h,f,this),(v=(g=S(this,We).config).onSettled)==null||v.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,h)=>{Te(this,et,ct).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{Te(this,et,ct).call(this,{type:"pause"})},onContinue:()=>{Te(this,et,ct).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),S(this,Re).start()}},mr=new WeakMap,zt=new WeakMap,We=new WeakMap,Vt=new WeakMap,Re=new WeakMap,Mr=new WeakMap,Ht=new WeakMap,et=new WeakSet,ct=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ac(s.data,this.options),fetchMeta:e.meta??null};case"success":return V(this,zt,void 0),{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Ls(n)&&n.revert&&S(this,zt)?{...S(this,zt),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Pe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,We).notify({query:this,type:"updated",action:e})})},mi);function ac(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ai(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ic(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var at,pi,oc=(pi=class extends Es{constructor(e={}){super();Q(this,at);this.config=e,V(this,at,new Map)}build(e,t,s){const n=t.queryKey,a=t.queryHash??Bn(n,t);let i=this.get(a);return i||(i=new nc({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){S(this,at).has(e.queryHash)||(S(this,at).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=S(this,at).get(e.queryHash);t&&(e.destroy(),t===e&&S(this,at).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Pe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return S(this,at).get(e)}getAll(){return[...S(this,at).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ua(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>ua(e,s)):t}notify(e){Pe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Pe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Pe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},at=new WeakMap,pi),it,Ne,Wt,ot,wt,gi,lc=(gi=class extends Di{constructor(e){super();Q(this,ot);Q(this,it);Q(this,Ne);Q(this,Wt);this.mutationId=e.mutationId,V(this,Ne,e.mutationCache),V(this,it,[]),this.state=e.state||cc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,it).includes(e)||(S(this,it).push(e),this.clearGcTimeout(),S(this,Ne).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){V(this,it,S(this,it).filter(t=>t!==e)),this.scheduleGc(),S(this,Ne).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,it).length||(this.state.status==="pending"?this.scheduleGc():S(this,Ne).remove(this))}continue(){var e;return((e=S(this,Wt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,o,c,u,d,m,f,h,w,g,v,_,j,b,k,N,T,E,L;const t=()=>{Te(this,ot,wt).call(this,{type:"continue"})};V(this,Wt,$i({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(O,X)=>{Te(this,ot,wt).call(this,{type:"failed",failureCount:O,error:X})},onPause:()=>{Te(this,ot,wt).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,Ne).canRun(this)}));const s=this.state.status==="pending",n=!S(this,Wt).canStart();try{if(s)t();else{Te(this,ot,wt).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(a=S(this,Ne).config).onMutate)==null?void 0:i.call(a,e,this));const X=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,e));X!==this.state.context&&Te(this,ot,wt).call(this,{type:"pending",context:X,variables:e,isPaused:n})}const O=await S(this,Wt).start();return await((d=(u=S(this,Ne).config).onSuccess)==null?void 0:d.call(u,O,e,this.state.context,this)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,O,e,this.state.context)),await((w=(h=S(this,Ne).config).onSettled)==null?void 0:w.call(h,O,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,O,null,e,this.state.context)),Te(this,ot,wt).call(this,{type:"success",data:O}),O}catch(O){try{throw await((j=(_=S(this,Ne).config).onError)==null?void 0:j.call(_,O,e,this.state.context,this)),await((k=(b=this.options).onError)==null?void 0:k.call(b,O,e,this.state.context)),await((T=(N=S(this,Ne).config).onSettled)==null?void 0:T.call(N,void 0,O,this.state.variables,this.state.context,this)),await((L=(E=this.options).onSettled)==null?void 0:L.call(E,void 0,O,e,this.state.context)),O}finally{Te(this,ot,wt).call(this,{type:"error",error:O})}}finally{S(this,Ne).runNext(this)}}},it=new WeakMap,Ne=new WeakMap,Wt=new WeakMap,ot=new WeakSet,wt=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Pe.batch(()=>{S(this,it).forEach(s=>{s.onMutationUpdate(e)}),S(this,Ne).notify({mutation:this,type:"updated",action:e})})},gi);function cc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dt,tt,qr,vi,uc=(vi=class extends Es{constructor(e={}){super();Q(this,dt);Q(this,tt);Q(this,qr);this.config=e,V(this,dt,new Set),V(this,tt,new Map),V(this,qr,0)}build(e,t,s){const n=new lc({mutationCache:this,mutationId:++Qr(this,qr)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){S(this,dt).add(e);const t=Yr(e);if(typeof t=="string"){const s=S(this,tt).get(t);s?s.push(e):S(this,tt).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(S(this,dt).delete(e)){const t=Yr(e);if(typeof t=="string"){const s=S(this,tt).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&S(this,tt).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yr(e);if(typeof t=="string"){const s=S(this,tt).get(t),n=s==null?void 0:s.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=Yr(e);if(typeof t=="string"){const n=(s=S(this,tt).get(t))==null?void 0:s.find(a=>a!==e&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pe.batch(()=>{S(this,dt).forEach(e=>{this.notify({type:"removed",mutation:e})}),S(this,dt).clear(),S(this,tt).clear()})}getAll(){return Array.from(S(this,dt))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>da(t,s))}findAll(e={}){return this.getAll().filter(t=>da(e,t))}notify(e){Pe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Pe.batch(()=>Promise.all(e.map(t=>t.continue().catch(Xe))))}},dt=new WeakMap,tt=new WeakMap,qr=new WeakMap,vi);function Yr(r){var e;return(e=r.options.scope)==null?void 0:e.id}function ma(r){return{onFetch:(e,t)=>{var d,m,f,h,w;const s=e.options,n=(f=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,a=((h=e.state.data)==null?void 0:h.pages)||[],i=((w=e.state.data)==null?void 0:w.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=Ni(e.options,e.fetchOptions),j=async(b,k,N)=>{if(g)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:k,direction:N?"backward":"forward",meta:e.options.meta};return v(P),P})(),L=await _(E),{maxPages:O}=e.options,X=N?Yl:Ql;return{pages:X(b.pages,L,O),pageParams:X(b.pageParams,k,O)}};if(n&&a.length){const b=n==="backward",k=b?dc:pa,N={pages:a,pageParams:i},T=k(s,N);o=await j(N,T,b)}else{const b=r??a.length;do{const k=c===0?i[0]??s.initialPageParam:pa(s,o);if(c>0&&k==null)break;o=await j(o,k),c++}while(c<b)}return o};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function pa(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function dc(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var fe,St,kt,pr,gr,jt,vr,yr,yi,hc=(yi=class{constructor(r={}){Q(this,fe);Q(this,St);Q(this,kt);Q(this,pr);Q(this,gr);Q(this,jt);Q(this,vr);Q(this,yr);V(this,fe,r.queryCache||new oc),V(this,St,r.mutationCache||new uc),V(this,kt,r.defaultOptions||{}),V(this,pr,new Map),V(this,gr,new Map),V(this,jt,0)}mount(){Qr(this,jt)._++,S(this,jt)===1&&(V(this,vr,Pi.subscribe(async r=>{r&&(await this.resumePausedMutations(),S(this,fe).onFocus())})),V(this,yr,ps.subscribe(async r=>{r&&(await this.resumePausedMutations(),S(this,fe).onOnline())})))}unmount(){var r,e;Qr(this,jt)._--,S(this,jt)===0&&((r=S(this,vr))==null||r.call(this),V(this,vr,void 0),(e=S(this,yr))==null||e.call(this),V(this,yr,void 0))}isFetching(r){return S(this,fe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return S(this,St).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=S(this,fe).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=S(this,fe).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(nn(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return S(this,fe).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=S(this,fe).get(s.queryHash),a=n==null?void 0:n.state.data,i=Vl(e,a);if(i!==void 0)return S(this,fe).build(this,s).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return Pe.batch(()=>S(this,fe).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=S(this,fe).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=S(this,fe);Pe.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=S(this,fe);return Pe.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=Pe.batch(()=>S(this,fe).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(Xe).catch(Xe)}invalidateQueries(r,e={}){return Pe.batch(()=>(S(this,fe).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=Pe.batch(()=>S(this,fe).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let a=n.fetch(void 0,t);return t.throwOnError||(a=a.catch(Xe)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Xe)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=S(this,fe).build(this,e);return t.isStaleByTime(nn(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Xe).catch(Xe)}fetchInfiniteQuery(r){return r.behavior=ma(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Xe).catch(Xe)}ensureInfiniteQueryData(r){return r.behavior=ma(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return ps.isOnline()?S(this,St).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,fe)}getMutationCache(){return S(this,St)}getDefaultOptions(){return S(this,kt)}setDefaultOptions(r){V(this,kt,r)}setQueryDefaults(r,e){S(this,pr).set(Ir(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...S(this,pr).values()],t={};return e.forEach(s=>{$r(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){S(this,gr).set(Ir(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...S(this,gr).values()],t={};return e.forEach(s=>{$r(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...S(this,kt).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Bn(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Mn&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...S(this,kt).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){S(this,fe).clear(),S(this,St).clear()}},fe=new WeakMap,St=new WeakMap,kt=new WeakMap,pr=new WeakMap,gr=new WeakMap,jt=new WeakMap,vr=new WeakMap,yr=new WeakMap,yi),fc=p.createContext(void 0),mc=({client:r,children:e})=>(p.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),l.jsx(fc.Provider,{value:r,children:e}));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Li=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=p.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...o},c)=>p.createElement("svg",{ref:c,...gc,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Li("lucide",n),...o},[...i.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(r,e)=>{const t=p.forwardRef(({className:s,...n},a)=>p.createElement(vc,{ref:a,iconNode:e,className:Li(`lucide-${pc(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Y("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Y("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Y("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Y("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Y("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Y("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Y("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Y("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Y("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Y("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Y("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=Y("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Y("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Y("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Y("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Y("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function q(...r){return Ml(Ti(r))}function ln({className:r,...e}){return l.jsx(ki,{...e,className:({isActive:t,isPending:s})=>q(typeof r=="function"?r({isActive:t,isPending:s}):r)})}const Pc=Tl,vs=Cl,ys=Rl,Dr=p.forwardRef(({className:r,sideOffset:e=4,...t},s)=>l.jsx(wi,{ref:s,sideOffset:e,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Dr.displayName=wi.displayName;const Gi="data:image/svg+xml,%3csvg%20version='1.2'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20575%20575'%20width='575'%20height='575'%3e%3cstyle%3e.a{fill:%230c5697}.b{fill:%23eb072c}%3c/style%3e%3cpath%20class='a'%20d='m231%201.2c-47.7%2010.1-89.2%2029.5-125.5%2058.5-52.5%2042-90.1%20103.3-103.1%20168.3-2.1%2010.6-2.4%2013.4-1.5%2016.8%201.4%205.1%206%209.8%2010.9%2011.2%202.1%200.5%2014.4%201%2027.8%201h24.1l0.6-10.4c0.9-14.4%203.3-20.3%2011.1-28.2%206.7-6.7%2012.7-9.6%2023.8-11.4%203.7-0.6%2027.5-1%2057.6-1h51.2v-58.8c0-32.4%200.4-61.3%201-64.5%202.1-12.8%2010.5-24.2%2021.8-29.5%204.8-2.3%207.4-2.8%2016-3l10.2-0.4v-19c0-17.5-0.2-19.3-2.1-22.8-4-7.2-11.8-9.4-23.9-6.8z'/%3e%3cpath%20class='a'%20d='m326%202.2c-7.2%205-7.5%205.8-7.8%2027.8l-0.3%2019.8%2010.8%200.4c10%200.3%2011.3%200.6%2017.1%203.7%207.9%204.3%2015.3%2012.3%2018.4%2019.9l2.3%205.7%200.3%2063.2%200.3%2063.3h51.2c28.3%200%2054.3%200.5%2058.2%201%2014%202%2025.2%2010%2030.8%2021.9%202.7%205.6%203.1%207.9%203.5%2017.3l0.5%2010.8h25.1c24.1%200%2025.4-0.1%2029.6-2.3%206.4-3.1%209.2-8.4%208.7-15.7-0.7-8.3-5.3-27.6-10.1-42.3-26.3-80.5-87-146.2-165.1-178.6-21-8.8-55-18.1-65.9-18.1-2.8%200-5.4%200.8-7.6%202.2z'/%3e%3cpath%20class='b'%20d='m238.5%2068.9c-2.2%201-5.2%203.1-6.7%204.7-6%206.4-5.8%203.9-5.8%2080.4v70h-62.9c-67.4%200-67%200-74.3%205.1-5.8%204.2-6.8%208.2-6.8%2028.6v18.3h97%2097v-104.5-104.5h-16.7c-14.2%200-17.4%200.3-20.8%201.9z'/%3e%3cpath%20class='b'%20d='m299%20171.5v104.5h97%2097v-18.4c0-10.7-0.5-19.7-1.1-21.3-1.4-3.8-4.6-7.1-9.4-9.6-3.9-2.2-4.9-2.2-68.5-2.7l-64.5-0.5-0.5-71.6-0.5-71.5-2.7-4.1c-1.7-2.6-4.5-5-7.9-6.7-5.1-2.5-6-2.6-22.1-2.6h-16.8z'/%3e%3cpath%20class='b'%20d='m82%20317c0%2019.7%200.6%2022.4%205.6%2027.2%206.9%206.5%204.5%206.3%2074.6%206.6l63.8%200.3%200.2%2071.3%200.3%2071.2%202.7%204.2c1.5%202.2%204.8%205.3%207.4%206.8%204.6%202.7%205%202.7%2021.8%202.8l17.1%200.1%200.3-104.3%200.2-104.2h-97-97z'/%3e%3cpath%20class='b'%20d='m299%20402.9c0%2082.2%200.3%20104%201.3%20104.3%200.6%200.3%208.4%200.4%2017.2%200.3%2017.3-0.2%2021.2-1.2%2026.1-6.7%205.6-6.1%205.4-2.8%205.4-79.2v-70.5l63.8-0.3c63.2-0.3%2063.7-0.3%2068.2-2.5%205.8-2.8%207.3-4.1%209.9-8.3%201.9-3.2%202.1-4.9%202.1-22.3v-18.7h-97-97z'/%3e%3cpath%20class='a'%20d='m7.9%20320.3c-4.9%203.2-8.2%2010-7.5%2015.6%201.3%209.6%206%2028.5%2011%2043.6%2014.6%2043.9%2037%2080.1%2070.5%20113.6%2035%2034.9%2072.1%2057.4%20120.1%2072.8%207.7%202.4%2029.6%207.7%2036.1%208.6%206%200.9%2012.6-1.9%2016-6.6%202.3-3.3%202.4-4.1%202.7-23l0.3-19.6-9.9-0.5c-12-0.6-18.6-3.3-26.5-10.7-6.3-6-10.4-13.5-11.7-21.7-0.6-3.3-1-31.5-1-65.2v-59.2h-54.3c-60%200-61.2-0.1-71.6-6.3-12.2-7.3-18-19.7-18.1-38.5v-5.2h-26.4c-25.6%200-26.4%200.1-29.7%202.3z'/%3e%3cpath%20class='a'%20d='m510.8%20328.2c-0.6%2012.6-3%2019.6-9.3%2026.5-2.3%202.7-6.5%206.1-9.2%207.6-10.3%205.6-11.9%205.7-71%205.7h-54.2l-0.3%2063.7-0.3%2063.8-3.2%206.7c-4%208.5-10.6%2015.1-19%2019-5.6%202.6-8.1%203.2-16.4%203.6l-9.9%200.5v18.1c0%2020.6%201.1%2024.9%207.2%2028.6%205.3%203.2%208.6%203.3%2021.6%200.6%20100.9-20.8%20183.1-93.5%20216.6-191.6%205.9-17.1%2010.9-38.1%2011-46.2%200.1-7.4-1.4-10.5-7.4-14.6-3.2-2.1-4-2.2-29.5-2.2h-26.3z'/%3e%3c/svg%3e",Ji=$n,Ac=Dn,Qi=p.forwardRef(({className:r,...e},t)=>l.jsx(Ss,{ref:t,className:q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));Qi.displayName=Ss.displayName;const Vn=p.forwardRef(({className:r,children:e,...t},s)=>l.jsxs(Ac,{children:[l.jsx(Qi,{}),l.jsxs(ks,{ref:s,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,l.jsxs(bi,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[l.jsx(Fr,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vn.displayName=ks.displayName;const Yi=({className:r,...e})=>l.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Yi.displayName="DialogHeader";const Ic=({className:r,...e})=>l.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});Ic.displayName="DialogFooter";const Xi=p.forwardRef(({className:r,...e},t)=>l.jsx(An,{ref:t,className:q("text-lg font-semibold leading-none tracking-tight",r),...e}));Xi.displayName=An.displayName;const $c=p.forwardRef(({className:r,...e},t)=>l.jsx(In,{ref:t,className:q("text-sm text-muted-foreground",r),...e}));$c.displayName=In.displayName;const va=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,ya=Ti,Zi=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return ya(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:a}=e,i=Object.keys(n).map(u=>{const d=t==null?void 0:t[u],m=a==null?void 0:a[u];if(d===null)return null;const f=va(d)||va(m);return n[u][f]}),o=t&&Object.entries(t).reduce((u,d)=>{let[m,f]=d;return f===void 0||(u[m]=f),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:m,className:f,...h}=d;return Object.entries(h).every(w=>{let[g,v]=w;return Array.isArray(v)?v.includes({...a,...o}[g]):{...a,...o}[g]===v})?[...u,m,f]:u},[]);return ya(r,i,c,t==null?void 0:t.class,t==null?void 0:t.className)},Dc=Zi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-full px-3",lg:"h-11 rounded-full px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Fe=p.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},a)=>{const i=s?Ol:"button";return l.jsx(i,{className:q(Dc({variant:e,size:t,className:r})),ref:a,...n})});Fe.displayName="Button";var Lc=r=>{switch(r){case"success":return Mc;case"info":return Fc;case"warning":return qc;case"error":return zc;default:return null}},Uc=Array(12).fill(0),Bc=({visible:r,className:e})=>y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},y.createElement("div",{className:"sonner-spinner"},Uc.map((t,s)=>y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Mc=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qc=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Fc=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zc=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Vc=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Hc=()=>{let[r,e]=y.useState(document.hidden);return y.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},cn=1,Wc=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...s}=r,n=typeof(r==null?void 0:r.id)=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:cn++,a=this.toasts.find(o=>o.id===n),i=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),a?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...r,id:n,title:t}),{...o,...r,id:n,dismissible:i,title:t}):o):this.addToast({title:t,...s,dismissible:i,id:n}),n},this.dismiss=r=>(this.dismissedToasts.add(r),r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=r instanceof Promise?r:r(),n=t!==void 0,a,i=s.then(async c=>{if(a=["resolve",c],y.isValidElement(c))n=!1,this.create({id:t,type:"default",message:c});else if(Gc(c)&&!c.ok){n=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:u,description:d})}else if(e.success!==void 0){n=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){n=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:u,description:d})}}).finally(()=>{var c;n&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),o=()=>new Promise((c,u)=>i.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(r,e)=>{let t=(e==null?void 0:e.id)||cn++;return this.create({jsx:r(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},$e=new Wc,Kc=(r,e)=>{let t=(e==null?void 0:e.id)||cn++;return $e.addToast({title:r,...e,id:t}),t},Gc=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",Jc=Kc,Qc=()=>$e.toasts,Yc=()=>$e.getActiveToasts(),ws=Object.assign(Jc,{success:$e.success,info:$e.info,warning:$e.warning,error:$e.error,custom:$e.custom,message:$e.message,promise:$e.promise,dismiss:$e.dismiss,loading:$e.loading},{getHistory:Qc,getToasts:Yc});function Xc(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}Xc(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xr(r){return r.label!==void 0}var Zc=3,eu="32px",tu="16px",wa=4e3,ru=356,su=14,nu=20,au=200;function Je(...r){return r.filter(Boolean).join(" ")}function iu(r){let[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var ou=r=>{var e,t,s,n,a,i,o,c,u,d,m;let{invert:f,toast:h,unstyled:w,interacting:g,setHeights:v,visibleToasts:_,heights:j,index:b,toasts:k,expanded:N,removeToast:T,defaultRichColors:E,closeButton:L,style:O,cancelButtonStyle:X,actionButtonStyle:P,className:ee="",descriptionClassName:ie="",duration:te,position:oe,gap:pe,loadingIcon:re,expandByDefault:Oe,classNames:F,icons:ge,closeButtonAriaLabel:ft="Close toast",pauseWhenPageIsHidden:x}=r,[C,A]=y.useState(null),[R,K]=y.useState(null),[U,ce]=y.useState(!1),[le,Be]=y.useState(!1),[He,Jt]=y.useState(!1),[z,Hr]=y.useState(!1),[Wr,Qt]=y.useState(!1),[Ps,_r]=y.useState(0),[Rt,Sr]=y.useState(0),Ot=y.useRef(h.duration||te||wa),mt=y.useRef(null),lt=y.useRef(null),Kr=b===0,As=b+1<=_,Ie=h.type,Ke=h.dismissible!==!1,Is=h.className||"",Gr=h.descriptionClassName||"",Yt=y.useMemo(()=>j.findIndex($=>$.toastId===h.id)||0,[j,h.id]),Nt=y.useMemo(()=>{var $;return($=h.closeButton)!=null?$:L},[h.closeButton,L]),kr=y.useMemo(()=>h.duration||te||wa,[h.duration,te]),jr=y.useRef(0),pt=y.useRef(0),Jr=y.useRef(0),gt=y.useRef(null),[$s,B]=oe.split("-"),Z=y.useMemo(()=>j.reduce(($,W,J)=>J>=Yt?$:$+W.height,0),[j,Yt]),se=Hc(),ne=h.invert||f,G=Ie==="loading";pt.current=y.useMemo(()=>Yt*pe+Z,[Yt,Z]),y.useEffect(()=>{Ot.current=kr},[kr]),y.useEffect(()=>{ce(!0)},[]),y.useEffect(()=>{let $=lt.current;if($){let W=$.getBoundingClientRect().height;return Sr(W),v(J=>[{toastId:h.id,height:W,position:h.position},...J]),()=>v(J=>J.filter(ve=>ve.toastId!==h.id))}},[v,h.id]),y.useLayoutEffect(()=>{if(!U)return;let $=lt.current,W=$.style.height;$.style.height="auto";let J=$.getBoundingClientRect().height;$.style.height=W,Sr(J),v(ve=>ve.find(he=>he.toastId===h.id)?ve.map(he=>he.toastId===h.id?{...he,height:J}:he):[{toastId:h.id,height:J,position:h.position},...ve])},[U,h.title,h.description,v,h.id]);let me=y.useCallback(()=>{Be(!0),_r(pt.current),v($=>$.filter(W=>W.toastId!==h.id)),setTimeout(()=>{T(h)},au)},[h,T,v,pt]);y.useEffect(()=>{if(h.promise&&Ie==="loading"||h.duration===1/0||h.type==="loading")return;let $;return N||g||x&&se?(()=>{if(Jr.current<jr.current){let W=new Date().getTime()-jr.current;Ot.current=Ot.current-W}Jr.current=new Date().getTime()})():Ot.current!==1/0&&(jr.current=new Date().getTime(),$=setTimeout(()=>{var W;(W=h.onAutoClose)==null||W.call(h,h),me()},Ot.current)),()=>clearTimeout($)},[N,g,h,Ie,x,se,me]),y.useEffect(()=>{h.delete&&me()},[me,h.delete]);function je(){var $,W,J;return ge!=null&&ge.loading?y.createElement("div",{className:Je(F==null?void 0:F.loader,($=h==null?void 0:h.classNames)==null?void 0:$.loader,"sonner-loader"),"data-visible":Ie==="loading"},ge.loading):re?y.createElement("div",{className:Je(F==null?void 0:F.loader,(W=h==null?void 0:h.classNames)==null?void 0:W.loader,"sonner-loader"),"data-visible":Ie==="loading"},re):y.createElement(Bc,{className:Je(F==null?void 0:F.loader,(J=h==null?void 0:h.classNames)==null?void 0:J.loader),visible:Ie==="loading"})}return y.createElement("li",{tabIndex:0,ref:lt,className:Je(ee,Is,F==null?void 0:F.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Ie],(t=h==null?void 0:h.classNames)==null?void 0:t[Ie]),"data-sonner-toast":"","data-rich-colors":(s=h.richColors)!=null?s:E,"data-styled":!(h.jsx||h.unstyled||w),"data-mounted":U,"data-promise":!!h.promise,"data-swiped":Wr,"data-removed":le,"data-visible":As,"data-y-position":$s,"data-x-position":B,"data-index":b,"data-front":Kr,"data-swiping":He,"data-dismissible":Ke,"data-type":Ie,"data-invert":ne,"data-swipe-out":z,"data-swipe-direction":R,"data-expanded":!!(N||Oe&&U),style:{"--index":b,"--toasts-before":b,"--z-index":k.length-b,"--offset":`${le?Ps:pt.current}px`,"--initial-height":Oe?"auto":`${Rt}px`,...O,...h.style},onDragEnd:()=>{Jt(!1),A(null),gt.current=null},onPointerDown:$=>{G||!Ke||(mt.current=new Date,_r(pt.current),$.target.setPointerCapture($.pointerId),$.target.tagName!=="BUTTON"&&(Jt(!0),gt.current={x:$.clientX,y:$.clientY}))},onPointerUp:()=>{var $,W,J,ve;if(z||!Ke)return;gt.current=null;let he=Number((($=lt.current)==null?void 0:$.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Me=Number(((W=lt.current)==null?void 0:W.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nt=new Date().getTime()-((J=mt.current)==null?void 0:J.getTime()),Ge=C==="x"?he:Me,vt=Math.abs(Ge)/nt;if(Math.abs(Ge)>=nu||vt>.11){_r(pt.current),(ve=h.onDismiss)==null||ve.call(h,h),K(C==="x"?he>0?"right":"left":Me>0?"down":"up"),me(),Hr(!0),Qt(!1);return}Jt(!1),A(null)},onPointerMove:$=>{var W,J,ve,he;if(!gt.current||!Ke||((W=window.getSelection())==null?void 0:W.toString().length)>0)return;let Me=$.clientY-gt.current.y,nt=$.clientX-gt.current.x,Ge=(J=r.swipeDirections)!=null?J:iu(oe);!C&&(Math.abs(nt)>1||Math.abs(Me)>1)&&A(Math.abs(nt)>Math.abs(Me)?"x":"y");let vt={x:0,y:0};C==="y"?(Ge.includes("top")||Ge.includes("bottom"))&&(Ge.includes("top")&&Me<0||Ge.includes("bottom")&&Me>0)&&(vt.y=Me):C==="x"&&(Ge.includes("left")||Ge.includes("right"))&&(Ge.includes("left")&&nt<0||Ge.includes("right")&&nt>0)&&(vt.x=nt),(Math.abs(vt.x)>0||Math.abs(vt.y)>0)&&Qt(!0),(ve=lt.current)==null||ve.style.setProperty("--swipe-amount-x",`${vt.x}px`),(he=lt.current)==null||he.style.setProperty("--swipe-amount-y",`${vt.y}px`)}},Nt&&!h.jsx?y.createElement("button",{"aria-label":ft,"data-disabled":G,"data-close-button":!0,onClick:G||!Ke?()=>{}:()=>{var $;me(),($=h.onDismiss)==null||$.call(h,h)},className:Je(F==null?void 0:F.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(a=ge==null?void 0:ge.close)!=null?a:Vc):null,h.jsx||p.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:y.createElement(y.Fragment,null,Ie||h.icon||h.promise?y.createElement("div",{"data-icon":"",className:Je(F==null?void 0:F.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||je():null,h.type!=="loading"?h.icon||(ge==null?void 0:ge[Ie])||Lc(Ie):null):null,y.createElement("div",{"data-content":"",className:Je(F==null?void 0:F.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},y.createElement("div",{"data-title":"",className:Je(F==null?void 0:F.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?y.createElement("div",{"data-description":"",className:Je(ie,Gr,F==null?void 0:F.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),p.isValidElement(h.cancel)?h.cancel:h.cancel&&Xr(h.cancel)?y.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||X,onClick:$=>{var W,J;Xr(h.cancel)&&Ke&&((J=(W=h.cancel).onClick)==null||J.call(W,$),me())},className:Je(F==null?void 0:F.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,p.isValidElement(h.action)?h.action:h.action&&Xr(h.action)?y.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:$=>{var W,J;Xr(h.action)&&((J=(W=h.action).onClick)==null||J.call(W,$),!$.defaultPrevented&&me())},className:Je(F==null?void 0:F.actionButton,(m=h==null?void 0:h.classNames)==null?void 0:m.actionButton)},h.action.label):null))};function ba(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function lu(r,e){let t={};return[r,e].forEach((s,n)=>{let a=n===1,i=a?"--mobile-offset":"--offset",o=a?tu:eu;function c(u){["top","right","bottom","left"].forEach(d=>{t[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?t[`${i}-${u}`]=o:t[`${i}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):c(o)}),t}var cu=p.forwardRef(function(r,e){let{invert:t,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:c,mobileOffset:u,theme:d="light",richColors:m,duration:f,style:h,visibleToasts:w=Zc,toastOptions:g,dir:v=ba(),gap:_=su,loadingIcon:j,icons:b,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:N}=r,[T,E]=y.useState([]),L=y.useMemo(()=>Array.from(new Set([s].concat(T.filter(x=>x.position).map(x=>x.position)))),[T,s]),[O,X]=y.useState([]),[P,ee]=y.useState(!1),[ie,te]=y.useState(!1),[oe,pe]=y.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=y.useRef(null),Oe=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=y.useRef(null),ge=y.useRef(!1),ft=y.useCallback(x=>{E(C=>{var A;return(A=C.find(R=>R.id===x.id))!=null&&A.delete||$e.dismiss(x.id),C.filter(({id:R})=>R!==x.id)})},[]);return y.useEffect(()=>$e.subscribe(x=>{if(x.dismiss){E(C=>C.map(A=>A.id===x.id?{...A,delete:!0}:A));return}setTimeout(()=>{Il.flushSync(()=>{E(C=>{let A=C.findIndex(R=>R.id===x.id);return A!==-1?[...C.slice(0,A),{...C[A],...x},...C.slice(A+1)]:[x,...C]})})})}),[]),y.useEffect(()=>{if(d!=="system"){pe(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?pe("dark"):pe("light")),typeof window>"u")return;let x=window.matchMedia("(prefers-color-scheme: dark)");try{x.addEventListener("change",({matches:C})=>{pe(C?"dark":"light")})}catch{x.addListener(({matches:A})=>{try{pe(A?"dark":"light")}catch(R){console.error(R)}})}},[d]),y.useEffect(()=>{T.length<=1&&ee(!1)},[T]),y.useEffect(()=>{let x=C=>{var A,R;n.every(K=>C[K]||C.code===K)&&(ee(!0),(A=re.current)==null||A.focus()),C.code==="Escape"&&(document.activeElement===re.current||(R=re.current)!=null&&R.contains(document.activeElement))&&ee(!1)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),y.useEffect(()=>{if(re.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,ge.current=!1)}},[re.current]),y.createElement("section",{ref:e,"aria-label":`${k} ${Oe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((x,C)=>{var A;let[R,K]=x.split("-");return T.length?y.createElement("ol",{key:x,dir:v==="auto"?ba():v,tabIndex:-1,ref:re,className:o,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":R,"data-lifted":P&&T.length>1&&!a,"data-x-position":K,style:{"--front-toast-height":`${((A=O[0])==null?void 0:A.height)||0}px`,"--width":`${ru}px`,"--gap":`${_}px`,...h,...lu(c,u)},onBlur:U=>{ge.current&&!U.currentTarget.contains(U.relatedTarget)&&(ge.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||ge.current||(ge.current=!0,F.current=U.relatedTarget)},onMouseEnter:()=>ee(!0),onMouseMove:()=>ee(!0),onMouseLeave:()=>{ie||ee(!1)},onDragEnd:()=>ee(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||te(!0)},onPointerUp:()=>te(!1)},T.filter(U=>!U.position&&C===0||U.position===x).map((U,ce)=>{var le,Be;return y.createElement(ou,{key:U.id,icons:b,index:ce,toast:U,defaultRichColors:m,duration:(le=g==null?void 0:g.duration)!=null?le:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:w,closeButton:(Be=g==null?void 0:g.closeButton)!=null?Be:i,interacting:ie,position:x,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ft,toasts:T.filter(He=>He.position==U.position),heights:O.filter(He=>He.position==U.position),setHeights:X,expandByDefault:a,gap:_,loadingIcon:j,expanded:P,pauseWhenPageIsHidden:N,swipeDirections:r.swipeDirections})})):null}))});const uu={success:Bi,error:Ui,warning:Hi,info:on},du={success:{border:"border-l-green-500",icon:"text-green-500",progress:"bg-green-500",text_color:"text-green-500"},error:{border:"border-l-red-500",icon:"text-red-500",progress:"bg-red-500",text_color:"text-red-500"},warning:{border:"border-l-yellow-500",icon:"text-yellow-500",progress:"bg-yellow-500",text_color:"text-yellow-500"},info:{border:"border-l-blue-500",icon:"text-blue-500",progress:"bg-blue-500",text_color:"text-blue-500"}};function hu({id:r,type:e,title:t,message:s,onDismiss:n,duration:a=15e3,action:i}){const[o,c]=p.useState(!1),[u,d]=p.useState(!1),[m,f]=p.useState(a),[h,w]=p.useState(!0),g=p.useRef(null),v=uu[e],_=du[e],j=()=>{w(!1),setTimeout(()=>n(r),300)};p.useEffect(()=>{if(u||!h){g.current&&clearInterval(g.current);return}const N=Date.now(),T=m;return g.current=setInterval(()=>{const E=Date.now()-N,L=T-E;L<=0?(f(0),j(),g.current&&clearInterval(g.current)):f(L)},100),()=>{g.current&&clearInterval(g.current)}},[u,h]);const b=Math.ceil(m/1e3),k=m/a*100;return l.jsxs(De.div,{layout:!0,initial:{opacity:0,x:50,scale:.95},animate:{opacity:h?1:0,x:h?0:20,scale:h?1:.95,height:h?"auto":0,marginBottom:h?0:-10},transition:{type:"spring",stiffness:400,damping:30,opacity:{duration:.2},height:{duration:.3,delay:h?0:.1}},className:q("pointer-events-auto relative flex flex-col overflow-hidden rounded-xl border bg-background shadow-lg","w-[360px]"),children:[l.jsxs("div",{className:"flex w-full items-start gap-3 px-4 pt-3 pb-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx(v,{className:q("h-5 w-5",_.icon)})}),l.jsxs("div",{className:"flex-1 flex flex-col-reverse min-w-0",children:[l.jsx(Un,{initial:!1,children:o&&s&&l.jsx(De.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{height:{duration:.3,ease:[.4,0,.2,1]},opacity:{duration:.25,ease:"easeInOut"}},className:"overflow-hidden",children:l.jsx(De.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.3,ease:[.4,0,.2,1],delay:.05},className:"text-sm text-muted-foreground",children:l.jsxs("div",{className:"pt-3 pb-1 leading-relaxed",children:[s,i&&l.jsx("div",{className:"mt-3",children:l.jsx("button",{onClick:i.onClick,className:"rounded-md border px-3 py-1.5 text-xs font-medium hover:bg-muted transition-colors",children:i.label})})]})})})}),l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("h3",{className:"font-semibold text-[15px] leading-snug text-foreground flex-1 min-w-0 break-words",children:t}),l.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0 -mt-1",children:[s&&l.jsx("button",{onClick:()=>c(!o),className:"rounded-full p-1.5 hover:bg-muted/80 text-muted-foreground transition-colors","aria-label":o?"Contraer mensaje":"Expandir mensaje",children:o?l.jsx(kc,{className:"h-4 w-4"}):l.jsx(_c,{className:"h-4 w-4"})}),l.jsx("button",{onClick:j,className:"rounded-full p-1.5 hover:bg-muted/80 text-muted-foreground transition-colors","aria-label":"Cerrar notificacin",children:l.jsx(Fr,{className:"h-4 w-4"})})]})]})]})]}),l.jsxs("div",{className:"relative bg-muted/30 px-4 py-2.5 text-[11px] text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[l.jsxs("span",{className:"tabular-nums",children:["Este mensaje se cerrar en ",l.jsx("span",{className:"font-semibold text-foreground inline-block min-w-[8px] text-center",children:b})," segundos."]}),l.jsx("button",{onClick:()=>d(!0),disabled:u,className:q("font-medium transition-all whitespace-nowrap outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 rounded-sm px-1 -mx-1",u?"text-primary cursor-default":"text-foreground hover:underline decoration-foreground/50 underline-offset-2 cursor-pointer"),children:u?"Pausado":"Clic para detener"})]}),l.jsx("div",{className:"absolute bottom-0 left-0 h-[3px] w-full bg-transparent overflow-hidden",children:l.jsx("div",{className:q("h-full transition-all duration-100 ease-linear",_.progress),style:{width:`${k}%`}})})]})]})}const fu=5e3,Zr=r=>(e,t,s)=>{const n=(s==null?void 0:s.duration)||fu,a=[t,s==null?void 0:s.description].filter(Boolean).join(`

`);ws.custom(i=>l.jsx(hu,{id:i,type:r,title:e,message:a,onDismiss:o=>ws.dismiss(o),duration:n,action:s==null?void 0:s.action}),{duration:1/0,id:s==null?void 0:s.id})},ht={success:Zr("success"),error:Zr("error"),warning:Zr("warning"),info:Zr("info"),dismiss:ws.dismiss},Bt=class Bt{constructor(){}static getInstance(){return Bt.instance||(Bt.instance=new Bt),Bt.instance}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}getPermissionStatus(){return this.isSupported()?Notification.permission:"denied"}async requestPermission(){return this.isSupported()?Notification.permission==="granted"?"granted":Notification.permission!=="denied"?await Notification.requestPermission():Notification.permission:(console.warn("Notificaciones no soportadas en este navegador"),"denied")}async showNotification(e){if(await this.requestPermission()!=="granted"){console.warn("Permiso de notificaciones denegado");return}const s={icon:"/logo.png",badge:"/logo.png",vibrate:[200,100,200],...e};"serviceWorker"in navigator&&navigator.serviceWorker.controller?await(await navigator.serviceWorker.ready).showNotification(e.title,s):new Notification(e.title,s)}scheduleEventNotification(e,t,s){const n=new Date,a=Math.floor((e.getTime()-n.getTime())/(1e3*60*60*24));a===3&&this.showNotification({title:" Evento prximo",body:`${t} - En 3 das`,tag:`event-${s}-3days`,data:{eventId:s,type:"event-reminder"}}),a===1&&this.showNotification({title:" Evento maana",body:`${t} - Maana`,tag:`event-${s}-1day`,data:{eventId:s,type:"event-reminder"}}),a===0&&this.showNotification({title:" Evento hoy",body:`${t} - Hoy`,tag:`event-${s}-today`,data:{eventId:s,type:"event-reminder"}})}async notifyDiscrepancy(e,t){await this.showNotification({title:" Discrepancia importante",body:`${e}: Diferencia de ${t} unidades`,tag:"inventory-discrepancy",data:{type:"discrepancy",productName:e,difference:t}})}async notifyUpcomingInventory(e,t,s){const n=s.toLocaleDateString("es-AR",{day:"numeric",month:"long"});await this.showNotification({title:" Inventario programado",body:`${e} - ${t} el ${n}`,tag:"upcoming-inventory",data:{type:"inventory-reminder",branch:e,sector:t,date:s.toISOString()}})}};oa(Bt,"instance");let un=Bt;const Xt=un.getInstance(),mu=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Hn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class xa extends Hn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _a extends Hn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sa extends Hn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(dn||(dn={}));class pu{constructor(e,{headers:t={},customFetch:s,region:n=dn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=mu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return I(this,arguments,void 0,function*(t,s={}){var n;try{const{headers:a,method:i,body:o,signal:c}=s;let u={},{region:d}=s;d||(d=this.region);const m=new URL(`${this.url}/${t}`);d&&d!=="any"&&(u["x-region"]=d,m.searchParams.set("forceFunctionRegion",d));let f;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(u["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(u["Content-Type"]="application/json",f=JSON.stringify(o)):f=o;const h=yield this.fetch(m.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:f,signal:c}).catch(_=>{throw _.name==="AbortError"?_:new xa(_)}),w=h.headers.get("x-relay-error");if(w&&w==="true")throw new _a(h);if(!h.ok)throw new Sa(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield h.json():g==="application/octet-stream"||g==="application/pdf"?v=yield h.blob():g==="text/event-stream"?v=h:g==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new xa(a)}:{data:null,error:a,response:a instanceof Sa||a instanceof _a?a.context:void 0}}})}}var Ae={};const wr=$l(Nl);var es={},ts={},rs={},ss={},ns={},as={},ka;function eo(){if(ka)return as;ka=1,Object.defineProperty(as,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return as.default=r,as}var ja;function to(){if(ja)return ns;ja=1,Object.defineProperty(ns,"__esModule",{value:!0});const e=wr.__importDefault(eo());class t{constructor(n){var a,i;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(a=n.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=n.signal,this.isMaybeSingle=(i=n.isMaybeSingle)!==null&&i!==void 0?i:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=new Headers(this.headers),this.headers.set(n,a),this}then(n,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,m,f;let h=null,w=null,g=null,v=c.status,_=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?w=N:w=JSON.parse(N))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),k=(m=c.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&k&&k.length>1&&(g=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(h={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,g=null,v=406,_="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const b=await c.text();try{h=JSON.parse(b),Array.isArray(h)&&c.status===404&&(w=[],h=null,v=200,_="OK")}catch{c.status===404&&b===""?(v=204,_="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((f=h==null?void 0:h.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,v=200,_="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:w,count:g,status:v,statusText:_}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,m;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(m=c==null?void 0:c.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(n,a)}returns(){return this}overrideTypes(){return this}}return ns.default=t,ns}var Ea;function ro(){if(Ea)return ss;Ea=1,Object.defineProperty(ss,"__esModule",{value:!0});const e=wr.__importDefault(to());class t extends e.default{select(n){let a=!1;const i=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:a=!0,nullsFirst:i,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${n}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,a,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(u,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:a=!1,settings:i=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const m=[n?"analyze":null,a?"verbose":null,i?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return ss.default=t,ss}var Ta;function Wn(){if(Ta)return rs;Ta=1,Object.defineProperty(rs,"__esModule",{value:!0});const e=wr.__importDefault(ro()),t=new RegExp("[,()]");class s extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${d}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return rs.default=s,rs}var Ca;function so(){if(Ca)return ts;Ca=1,Object.defineProperty(ts,"__esModule",{value:!0});const e=wr.__importDefault(Wn());class t{constructor(n,{headers:a={},schema:i,fetch:o}){this.url=n,this.headers=new Headers(a),this.schema=i,this.fetch=o}select(n,a){const{head:i=!1,count:o}=a??{},c=i?"HEAD":"GET";let u=!1;const d=(n??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:a,defaultToNull:i=!0}={}){var o;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(u.length>0){const d=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:a,ignoreDuplicates:i=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(m.length>0){const f=[...new Set(m)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:a}={}){var i;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:n}={}){var a;const i="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return ts.default=t,ts}var Ra;function gu(){if(Ra)return es;Ra=1,Object.defineProperty(es,"__esModule",{value:!0});const r=wr,e=r.__importDefault(so()),t=r.__importDefault(Wn());class s{constructor(a,{headers:i={},schema:o,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=o,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:o=!1,get:c=!1,count:u}={}){var d;let m;const f=new URL(`${this.url}/rpc/${a}`);let h;o||c?(m=o?"HEAD":"GET",Object.entries(i).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{f.searchParams.append(g,v)})):(m="POST",h=i);const w=new Headers(this.headers);return u&&w.set("Prefer",`count=${u}`),new t.default({method:m,url:f,headers:w,schema:this.schemaName,body:h,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return es.default=s,es}Object.defineProperty(Ae,"__esModule",{value:!0});var no=Ae.PostgrestError=po=Ae.PostgrestBuilder=fo=Ae.PostgrestTransformBuilder=uo=Ae.PostgrestFilterBuilder=lo=Ae.PostgrestQueryBuilder=io=Ae.PostgrestClient=void 0;const br=wr,ao=br.__importDefault(gu());var io=Ae.PostgrestClient=ao.default;const oo=br.__importDefault(so());var lo=Ae.PostgrestQueryBuilder=oo.default;const co=br.__importDefault(Wn());var uo=Ae.PostgrestFilterBuilder=co.default;const ho=br.__importDefault(ro());var fo=Ae.PostgrestTransformBuilder=ho.default;const mo=br.__importDefault(to());var po=Ae.PostgrestBuilder=mo.default;const go=br.__importDefault(eo());no=Ae.PostgrestError=go.default;var vo=Ae.default={PostgrestClient:ao.default,PostgrestQueryBuilder:oo.default,PostgrestFilterBuilder:co.default,PostgrestTransformBuilder:ho.default,PostgrestBuilder:mo.default,PostgrestError:go.default};const vu=ql({__proto__:null,get PostgrestBuilder(){return po},get PostgrestClient(){return io},get PostgrestError(){return no},get PostgrestFilterBuilder(){return uo},get PostgrestQueryBuilder(){return lo},get PostgrestTransformBuilder(){return fo},default:vo},[Ae]),{PostgrestClient:yu,PostgrestQueryBuilder:Np,PostgrestFilterBuilder:Pp,PostgrestTransformBuilder:Ap,PostgrestBuilder:Ip,PostgrestError:$p}=vo||vu;class wu{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bu="2.80.0",xu=`realtime-js/${bu}`,_u="1.0.0",hn=1e4,Su=1e3,ku=100;var Or;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Or||(Or={}));var be;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(be||(be={}));var rt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(rt||(rt={}));var fn;(function(r){r.websocket="websocket"})(fn||(fn={}));var Lt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Lt||(Lt={}));class ju{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=s.decode(e.slice(i,i+n));i=i+n;const c=s.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class yo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ae||(ae={}));const Oa=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,i)=>(a[i]=Eu(i,r,e,n),a),{}):{}},Eu=(r,e,t,s)=>{const n=e.find(o=>o.name===r),a=n==null?void 0:n.type,i=t[r];return a&&!s.includes(a)?wo(a,i):mn(i)},wo=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Ou(e,t)}switch(r){case ae.bool:return Tu(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return Cu(e);case ae.json:case ae.jsonb:return Ru(e);case ae.timestamp:return Nu(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return mn(e);default:return mn(e)}},mn=r=>r,Tu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Cu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Ru=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Ou=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(o=>wo(e,o))}return r},Nu=r=>typeof r=="string"?r.replace(" ","T"):r,bo=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Us{constructor(e,t,s={},n=hn){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Na;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Na||(Na={}));class Nr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nr.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=Nr.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Nr.syncDiff(this.state,n,a,i),o())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),o={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const m=a[u];if(m){const f=d.map(v=>v.presence_ref),h=m.map(v=>v.presence_ref),w=d.filter(v=>h.indexOf(v.presence_ref)<0),g=m.filter(v=>f.indexOf(v.presence_ref)<0);w.length>0&&(o[u]=w),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const m=e[o].map(h=>h.presence_ref),f=d.filter(h=>m.indexOf(h.presence_ref)<0);e[o].unshift(...f)}s(o,d,c)}),this.map(i,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(m=>m.presence_ref);u=u.filter(m=>d.indexOf(m.presence_ref)<0),e[o]=u,n(o,u,c),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pa;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Pa||(Pa={}));var Pr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Pr||(Pr={}));var ut;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class Kn{constructor(e,t={config:{}},s){var n,a;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Us(this,rt.join,this.params,this.timeout),this.rejoinTimer=new yo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Nr(this),this.broadcastEndpointURL=bo(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:i,presence:o,private:c}}=this.params,u=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[Pr.PRESENCE]&&this.bindings[Pr.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(ut.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(ut.CLOSED)),this.updateJoinPayload(Object.assign({config:f},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var w;if(this.socket.setAuth(),h===void 0){e==null||e(ut.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,_=[];for(let j=0;j<v;j++){const b=g[j],{filter:{event:k,schema:N,table:T,filter:E}}=b,L=h&&h[j];if(L&&L.event===k&&L.schema===N&&L.table===T&&L.filter===E)_.push(Object.assign(Object.assign({},b),{id:L.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ut.SUBSCRIBED);return}}).receive("error",h=>{this.state=be.errored,e==null||e(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===be.joined&&e===Pr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var n;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,o,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Us(this,rt.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=be.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Us(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ku){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=rt;if(s&&[o,c,u,d].indexOf(i)>=0&&s!==this._joinRef())return;let f=this._onMessage(i,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var w,g,v;return((w=h.filter)===null||w===void 0?void 0:w.event)==="*"||((v=(g=h.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===i}).map(h=>h.callback(f,s)):(a=this.bindings[i])===null||a===void 0||a.filter(h=>{var w,g,v,_,j,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in h){const k=h.id,N=(w=h.filter)===null||w===void 0?void 0:w.event;return k&&((g=t.ids)===null||g===void 0?void 0:g.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(j=(_=h==null?void 0:h.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return k==="*"||k===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===i}).map(h=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:g,table:v,commit_timestamp:_,type:j,errors:b}=w;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:_,eventType:j,new:{},old:{},errors:b}),this._getPayloadRecords(w))}h.callback(f,s)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Kn.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rt.close,{},e)}_onError(e){this._on(rt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Oa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Oa(e.columns,e.old_record)),t}}const Bs=()=>{},is={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pu=[1e3,2e3,5e3,1e4],Au=1e4,Iu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $u{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hn,this.transport=null,this.heartbeatIntervalMs=is.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bs,this.ref=0,this.reconnectTimer=null,this.logger=Bs,this.conn=null,this.sendBuffer=[],this.serializer=new ju,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${fn.websocket}`,this.httpEndpoint=bo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_u}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Or.connecting:return Lt.Connecting;case Or.open:return Lt.Open;case Or.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Kn(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Su,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},is.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:a,ref:i}=t,o=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${n} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,a,i)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Iu],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:xu};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(rt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new yo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},is.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,a,i,o,c,u,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:hn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:is.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Bs,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>Pu[m-1]||Au,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(m,f)=>f(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Gn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ue(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Du extends Gn{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pn extends Gn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Jn=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Lu=()=>Response,gn=r=>{if(Array.isArray(r))return r.map(t=>gn(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=gn(s)}),e},Uu=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ms=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},Bu=(r,e,t)=>I(void 0,void 0,void 0,function*(){const s=yield Lu();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const a=r.status||500,i=(n==null?void 0:n.statusCode)||a+"";e(new Du(Ms(n),a,i))}).catch(n=>{e(new pn(Ms(n),n))}):e(new pn(Ms(r),r))}),Mu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?n:(Uu(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function zr(r,e,t,s,n,a){return I(this,void 0,void 0,function*(){return new Promise((i,o)=>{r(t,Mu(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Bu(c,o,s))})})}function Lr(r,e,t,s){return I(this,void 0,void 0,function*(){return zr(r,"GET",e,t,s)})}function Ze(r,e,t,s,n){return I(this,void 0,void 0,function*(){return zr(r,"POST",e,s,n,t)})}function vn(r,e,t,s,n){return I(this,void 0,void 0,function*(){return zr(r,"PUT",e,s,n,t)})}function qu(r,e,t,s){return I(this,void 0,void 0,function*(){return zr(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Qn(r,e,t,s,n){return I(this,void 0,void 0,function*(){return zr(r,"DELETE",e,s,n,t)})}class Fu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return I(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ue(e))return{data:null,error:e};throw e}})}}var xo;class zu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[xo]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fu(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return I(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ue(e))return{data:null,error:e};throw e}})}}xo=Symbol.toStringTag;const Vu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Aa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hu{constructor(e,t={},s,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Jn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,n){return I(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Aa),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=s,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),m=yield(e=="PUT"?vn:Ze)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:o},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ue(a))return{data:null,error:a};throw a}})}upload(e,t,s){return I(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return I(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:Aa.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const m=yield vn(this.fetch,o.toString(),c,{headers:d});return{data:{path:a,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return I(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const a=yield Ze(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),o=i.searchParams.get("token");if(!o)throw new Gn("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}})}update(e,t,s){return I(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return I(this,void 0,void 0,function*(){try{return{data:yield Ze(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}copy(e,t,s){return I(this,void 0,void 0,function*(){try{return{data:{path:(yield Ze(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return I(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Ze(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return I(this,void 0,void 0,function*(){try{const n=yield Ze(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=a?`?${a}`:"",o=this._getFinalPath(e),c=()=>Lr(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new zu(c,this.shouldThrowOnError)}info(e){return I(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Lr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:gn(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}})}exists(e){return I(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield qu(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ue(s)&&s instanceof pn){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return I(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}list(e,t,s){return I(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Vu),t),{prefix:e||""});return{data:yield Ze(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}listV2(e,t){return I(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ze(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const _o="2.80.0",So={"X-Client-Info":`storage-js/${_o}`};class Wu{constructor(e,t={},s,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},So),t),this.fetch=Jn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return I(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Lr(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}getBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}createBucket(e){return I(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Ze(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return I(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}})}emptyBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ze(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Ku{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},So),t),this.fetch=Jn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ze(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}listBuckets(e){return I(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),n=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Lr(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ue(t))return{data:null,error:t};throw t}})}}const Yn={"X-Client-Info":`storage-js/${_o}`,"Content-Type":"application/json"};class ko extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ze(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class qs extends ko{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gu extends ko{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Ia;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ia||(Ia={}));const Xn=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ju=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},$a=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Qu=(r,e,t)=>I(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const n=r.status||500,a=r;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";e(new qs($a(i),n,o))}).catch(()=>{const i=n+"",o=a.statusText||`HTTP ${n} error`;e(new qs(o,n,i))});else{const i=n+"",o=a.statusText||`HTTP ${n} error`;e(new qs(o,n,i))}}else e(new Gu($a(r),r))}),Yu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return s?(Ju(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),t)):n};function Xu(r,e,t,s,n,a){return I(this,void 0,void 0,function*(){return new Promise((i,o)=>{r(t,Yu(e,s,n,a)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>Qu(c,o,s))})})}function Ve(r,e,t,s,n){return I(this,void 0,void 0,function*(){return Xu(r,"POST",e,s,n,t)})}class Zu{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yn),t),this.fetch=Xn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}getIndex(e,t){return I(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}})}listIndexes(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return I(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}})}}class ed{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yn),t),this.fetch=Xn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return I(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ve(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}getVectors(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}listVectors(e){return I(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ve(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}queryVectors(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}deleteVectors(e){return I(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ve(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}}class td{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yn),t),this.fetch=Xn(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}getBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}listBuckets(){return I(this,arguments,void 0,function*(e={}){try{return{data:yield Ve(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}})}}class rd extends td{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new sd(this.url,this.headers,e,this.fetch)}}class sd extends Zu{constructor(e,t,s,n){super(e,t,n),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return I(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return I(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return I(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return I(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new nd(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class nd extends ed{constructor(e,t,s,n,a){super(e,t,a),this.vectorBucketName=s,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return I(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return I(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return I(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return I(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return I(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ad extends Wu{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new Hu(this.url,this.headers,e,this.fetch)}get vectors(){return new rd(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ku(this.url+"/iceberg",this.headers,this.fetch)}}const id="2.80.0";let Rr="";typeof Deno<"u"?Rr="deno":typeof document<"u"?Rr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rr="react-native":Rr="node";const od={"X-Client-Info":`supabase-js-${Rr}/${id}`},ld={headers:od},cd={schema:"public"},ud={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dd={},hd=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),fd=()=>Headers,md=(r,e,t)=>{const s=hd(t),n=fd();return async(a,i)=>{var o;const c=(o=await e())!==null&&o!==void 0?o:r;let u=new n(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:u}))}};function pd(r){return r.endsWith("/")?r:r+"/"}function gd(r,e){var t,s;const{db:n,auth:a,realtime:i,global:o}=r,{db:c,auth:u,realtime:d,global:m}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}function vd(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pd(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const jo="2.80.0",nr=30*1e3,yn=3,Fs=yn*nr,yd="http://localhost:9999",wd="supabase.auth.token",bd={"X-Client-Info":`gotrue-js/${jo}`},wn="X-Supabase-Api-Version",Eo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xd=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_d=10*60*1e3;class Ur extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function D(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Sd extends Ur{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function kd(r){return D(r)&&r.name==="AuthApiError"}class Ut extends Ur{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ct extends Ur{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Qe extends Ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jd(r){return D(r)&&r.name==="AuthSessionMissingError"}class Zt extends Ct{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class os extends Ct{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ls extends Ct{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ed(r){return D(r)&&r.name==="AuthImplicitGrantRedirectError"}class Da extends Ct{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bn extends Ct{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zs(r){return D(r)&&r.name==="AuthRetryableFetchError"}class La extends Ct{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class xn extends Ct{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ua=` 	
\r=`.split(""),Td=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ua.length;e+=1)r[Ua[e].charCodeAt(0)]=-2;for(let e=0;e<bs.length;e+=1)r[bs[e].charCodeAt(0)]=e;return r})();function Ba(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(bs[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(bs[s]),e.queuedBits-=6}}function To(r,e,t){const s=Td[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Ma(r){const e=[],t=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=i=>{Od(i,s,t)};for(let i=0;i<r.length;i+=1)To(r.charCodeAt(i),n,a);return e.join("")}function Cd(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Rd(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Cd(s,e)}}function Od(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cr(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)To(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Nd(r){const e=[];return Rd(r,t=>e.push(t)),new Uint8Array(e)}function Mt(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>Ba(n,t,s)),Ba(null,t,s),e.join("")}function Pd(r){return Math.round(Date.now()/1e3)+r}function Ad(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ce=()=>typeof window<"u"&&typeof document<"u",Pt={tested:!1,writable:!1},Co=()=>{if(!Ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pt.tested)return Pt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Pt.tested=!0,Pt.writable=!0}catch{Pt.tested=!0,Pt.writable=!1}return Pt.writable};function Id(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ro=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),$d=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ar=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},At=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},yt=async(r,e)=>{await r.removeItem(e)};class Rs{constructor(){this.promise=new Rs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Rs.promiseConstructor=Promise;function Vs(r){const e=r.split(".");if(e.length!==3)throw new xn("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!xd.test(e[s]))throw new xn("JWT not in base64url format");return{header:JSON.parse(Ma(e[0])),payload:JSON.parse(Ma(e[1])),signature:cr(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dd(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ld(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function Ud(r){return("0"+r.toString(16)).substr(-2)}function Bd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Ud).join("")}async function Md(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function qd(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Md(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function er(r,e,t=!1){const s=Bd();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await ar(r,`${e}-code-verifier`,n);const a=await qd(s);return[a,s===a?"plain":"s256"]}const Fd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zd(r){const e=r.headers.get(wn);if(!e||!e.match(Fd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vd(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Hd(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tr(r){if(!Wd.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hs(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kd(r,e){return new Proxy(r,{get:(t,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,n)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,n)}})}function qa(r){return JSON.parse(JSON.stringify(r))}const Dt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Gd=[502,503,504];async function Fa(r){var e;if(!$d(r))throw new bn(Dt(r),0);if(Gd.includes(r.status))throw new bn(Dt(r),r.status);let t;try{t=await r.json()}catch(a){throw new Ut(Dt(a),a)}let s;const n=zd(r);if(n&&n.getTime()>=Eo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new La(Dt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new La(Dt(t),r.status,t.weak_password.reasons);throw new Sd(Dt(t),r.status||500,s)}const Jd=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function M(r,e,t,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[wn]||(a[wn]=Eo["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Qd(r,e,t+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Qd(r,e,t,s,n,a){const i=Jd(e,s,n,a);let o;try{o=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new bn(Dt(c),0)}if(o.ok||await Fa(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Fa(c)}}function Ye(r){var e;let t=null;Zd(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Pd(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function za(r){const e=Ye(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function bt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Yd(r){return{data:r,error:null}}function Xd(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,i=js(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:o,user:c},error:null}}function Va(r){return r}function Zd(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ws=["global","local","others"];class eh{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ro(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ws[0]){if(Ws.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ws.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:bt})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=js(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Xd,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(D(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bt})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Va});if(d.error)throw d.error;const m=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(w.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){tr(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bt})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){tr(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:bt})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){tr(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:bt})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){tr(e.userId);try{const{data:t,error:s}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteFactor(e){tr(e.userId),tr(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,n,a,i,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Va});if(d.error)throw d.error;const m=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,h=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(w.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(D(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await M(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await M(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(D(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await M(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}}function Ha(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const rr={debug:!!(globalThis&&Co()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Oo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class th extends Oo{}async function rh(r,e,t){rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),rr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new th(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(rr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function sh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function No(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function nh(r){return parseInt(r,16)}function ah(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function ih(r){var e;const{chainId:t,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:c,resources:u,scheme:d,uri:m,version:f}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const h=No(r.address),w=d?`${d}://${s}`:s,g=r.statement?`${r.statement}
`:"",v=`${w} wants you to sign in with your Ethereum account:
${h}

${g}`;let _=`URI: ${m}
Version: ${f}
Chain ID: ${t}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(n&&(_+=`
Expiration Time: ${n.toISOString()}`),o&&(_+=`
Not Before: ${o.toISOString()}`),c&&(_+=`
Request ID: ${c}`),u){let j=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);j+=`
- ${b}`}_+=j}return`${v}
${_}`}class ye extends Error{constructor({message:e,code:t,cause:s,name:n}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=n??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class xs extends ye{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function oh({error:r,options:e}){var t,s,n;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new ye({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(Po(i)){if(a.rp.id!==i)return new ye({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function lh({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new ye({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(Po(s)){if(t.rpId!==s)return new ye({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class ch{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const uh=new ch;function dh(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,n=js(r,["challenge","user","excludeCredentials"]),a=cr(e).buffer,i=Object.assign(Object.assign({},t),{id:cr(t.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:i});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:cr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function hh(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=js(r,["challenge","allowCredentials"]),n=cr(e).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let i=0;i<t.length;i++){const o=t[i];a.allowCredentials[i]=Object.assign(Object.assign({},o),{id:cr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function fh(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:Mt(new Uint8Array(r.response.attestationObject)),clientDataJSON:Mt(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mh(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),n=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Mt(new Uint8Array(n.authenticatorData)),clientDataJSON:Mt(new Uint8Array(n.clientDataJSON)),signature:Mt(new Uint8Array(n.signature)),userHandle:n.userHandle?Mt(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Po(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Wa(){var r,e;return!!(Ce()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function ph(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",e)}:{data:null,error:new xs("Empty credential response",e)}}catch(e){return{data:null,error:oh({error:e,options:r})}}}async function gh(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",e)}:{data:null,error:new xs("Empty credential response",e)}}catch(e){return{data:null,error:lh({error:e,options:r})}}}const vh={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},yh={userVerification:"preferred",hints:["security-key"]};function _s(...r){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),t=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of r)if(n)for(const a in n){const i=n[a];if(i!==void 0)if(Array.isArray(i))s[a]=i;else if(t(i))s[a]=i;else if(e(i)){const o=s[a];e(o)?s[a]=_s(o,i):s[a]=_s(i)}else s[a]=i}return s}function wh(r,e){return _s(vh,r,e||{})}function bh(r,e){return _s(yh,r,e||{})}class xh{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:n},a){try{const{data:i,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!i)return{data:null,error:o};const c=n??uh.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=wh(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:m}=await ph({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:m}}case"request":{const u=bh(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:m}=await gh(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:m}}}}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new Ut("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}},a){if(!t)return{data:null,error:new Ur("rpId is required for WebAuthn authentication")};try{if(!Wa())return{data:null,error:new Ut("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:n},{request:a});if(!i)return{data:null,error:o};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:s,credential_response:c.credential_response}})}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new Ut("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n},a){if(!t)return{data:null,error:new Ur("rpId is required for WebAuthn registration")};try{if(!Wa())return{data:null,error:new Ut("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(d=>{var m;return(m=d.data)===null||m===void 0?void 0:m.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:n},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new Ut("Unexpected error in register",i)}}}}sh();const _h={url:yd,storageKey:wd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ka(r,e,t){return await t()}const sr={};class Br{get jwks(){var e,t;return(t=(e=sr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=sr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},_h),e);if(this.storageKey=a.storageKey,this.instanceID=(t=Br.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Br.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ce()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new eh({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ro(a.fetch),this.lock=a.lock||Ka,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ce()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=rh:this.lock=Ka,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xh(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Co()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ha(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ha(this.memoryStorage)),Ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jo}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(Ce()&&(t=Id(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),Ce()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Ed(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return D(t)?this._returnResult({error:t}):this._returnResult({error:new Ut("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ye}),{data:i,error:o}=a;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(D(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:d,password:m,options:f}=e;let h=null,w=null;this.flowType==="pkce"&&([h,w]=await er(this.storage,this.storageKey)),a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:m,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:w},xform:Ye})}else if("phone"in e){const{phone:d,password:m,options:f}=e;a=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ye})}else throw new os("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(D(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:o}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:za})}else if("phone"in e){const{phone:a,password:i,options:o}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:za})}else throw new os("You must provide either an email or phone number and a password");const{data:s,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const a=new Zt;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(D(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,n,a,i,o,c,u,d,m,f;let h,w;if("message"in e)h=e.message,w=e.signature;else{const{chain:g,wallet:v,statement:_,options:j}=e;let b;if(Ce())if(typeof v=="object")b=v;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")b=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const k=new URL((t=j==null?void 0:j.url)!==null&&t!==void 0?t:window.location.href),N=await b.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=No(N[0]);let E=(s=j==null?void 0:j.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!E){const O=await b.request({method:"eth_chainId"});E=nh(O)}const L={domain:k.host,address:T,statement:_,uri:k.href,version:"1",chainId:E,nonce:(n=j==null?void 0:j.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(i=(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=j==null?void 0:j.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=ih(L),w=await b.request({method:"personal_sign",params:[ah(h),T]})}try{const{data:g,error:v}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ye});if(v)throw v;if(!g||!g.session||!g.user){const _=new Zt;return this._returnResult({data:{user:null,session:null},error:_})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(D(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var t,s,n,a,i,o,c,u,d,m,f,h;let w,g;if("message"in e)w=e.message,g=e.signature;else{const{chain:v,wallet:_,statement:j,options:b}=e;let k;if(Ce())if(typeof _=="object")k=_;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=_}const N=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),j?{statement:j}:null));let E;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")E=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)E=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)w=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((m=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(w),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:v,error:_}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Mt(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Ye});if(_)throw _;if(!v||!v.session||!v.user){const j=new Zt;return this._returnResult({data:{user:null,session:null},error:j})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(D(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const t=await At(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ye});if(await yt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const o=new Zt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(D(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,o=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ye}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Zt;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(t){if(D(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await er(this.storage,this.storageKey));const{error:m}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new os("You must provide either an email or phone number.")}catch(o){if(D(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:o}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Ye});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(n){if(D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;this.flowType==="pkce"&&([a,i]=await er(this.storage,this.storageKey));const o=await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Yd});return this._returnResult(o)}catch(a){if(D(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Qe;const{error:n}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(D(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await M(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:o}=await M(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:o})}throw new os("You must provide either an email or phone number and a type")}catch(t){if(D(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await At(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Fs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const i=await At(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Hs()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=Kd(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bt}):await this._useSession(async t=>{var s,n,a;const{data:i,error:o}=t;if(o)throw o;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qe}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:bt})})}catch(t){if(D(t))return jd(t)&&(await this._removeSession(),await yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Qe;const i=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await er(this.storage,this.storageKey));const{data:u,error:d}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:i.access_token,xform:bt});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(s){if(D(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qe;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:i}=Vs(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(D(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Qe;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(D(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ce())throw new ls("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ls(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Da("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ls("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Da("No code detected.");const{data:j,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!i||!u)throw new ls("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(o);let f=d+m;c&&(f=parseInt(c));const h=f-d;h*1e3<=nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${m}s`);const w=f-m;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:g,error:v}=await this._getUser(a);if(v)throw v;const _={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:m,expires_at:f,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(s){if(D(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await At(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return this._returnResult({error:a});const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:o}=await this.admin.signOut(i,e);if(o&&!(kd(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Ad(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await er(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(D(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,o,c,u,d;const{data:m,error:f}=a;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return Ce()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(D(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:n,data:{session:a}}=t;if(n)throw n;const{options:i,provider:o,token:c,access_token:u,nonce:d}=e,m=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Ye}),{data:f,error:h}=m;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Zt}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(n){if(D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Ld(async n=>(n>0&&await Dd(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ye})),(n,a)=>{const i=200*Math.pow(2,n);return a&&zs(a)&&Date.now()+i-s<nr})}catch(s){if(this._debug(t,"error",s),D(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ce()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await At(this.storage,this.storageKey);if(n&&this.userStorage){let i=await At(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ar(this.userStorage,this.storageKey+"-user",i)),n.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Hs()}else if(n&&!n.user&&!n.user){const i=await At(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await yt(this.storage,this.storageKey+"-user"),await ar(this.storage,this.storageKey,n)):n.user=Hs()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Fs;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Fs}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),zs(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:o}=await this._getUser(n.access_token);!o&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Rs;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Qe;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),D(a)){const i={data:null,error:a};return zs(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await ar(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const a=qa(n);await ar(this.storage,this.storageKey,a)}else{const n=qa(t);await ar(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await yt(this.storage,this.storageKey),await yt(this.storage,this.storageKey+"-code-verifier"),await yt(this.storage,this.storageKey+"-user"),this.userStorage&&await yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${nr}ms, refresh threshold is ${yn} ticks`),n<=yn&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Oo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await er(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?this._returnResult({data:null,error:a}):await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?fh(e.webauthn.credential_response):mh(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(i.error)return i;const{data:o}=i;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:dh(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:hh(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])n.all.push(a),a.status==="verified"&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Vs(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;return n?this._returnResult({data:null,error:n}):s?await M(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Qe})})}catch(t){if(D(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Qe});const i=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return i.data&&i.data.redirect_url&&Ce()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Qe});const i=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return i.data&&i.data.redirect_url&&Ce()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+_d>n)return s;const{data:a,error:i}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:h,error:w}=await this.getSession();if(w||!h.session)return this._returnResult({data:null,error:w});s=h.session.access_token}const{header:n,payload:a,signature:i,raw:{header:o,payload:c}}=Vs(s);t!=null&&t.allowExpired||Vd(a.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:a,header:n,signature:i},error:null}}const d=Hd(n.alg),m=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,i,Nd(`${o}.${c}`)))throw new xn("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}}Br.nextInstanceID={};const Sh=Br;class kh extends Sh{constructor(e){super(e)}}class jh{constructor(e,t,s){var n,a,i;this.supabaseUrl=e,this.supabaseKey=t;const o=vd(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:cd,realtime:dd,auth:Object.assign(Object.assign({},ud),{storageKey:c}),global:ld},d=gd(s??{},u);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=md(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new yu(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ad(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new pu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,userStorage:a,storageKey:i,flowType:o,lock:c,debug:u,throwOnError:d},m,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kh({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),m),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,userStorage:a,flowType:o,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new $u(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Eh=(r,e,t)=>new jh(r,e,t);function Th(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Th()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ch="https://nqrwqrmigaknitmvlokp.supabase.co",Rh="sb_publishable_JQ1KlkFCoM1LG5_FWPJk5g_n_jzHifZ",Ee=Eh(Ch,Rh,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Oh=[{username:"azanovello",name:"Andres Zanovello",role:"mod"},{username:"cmcgarva",name:"Christian Mac Garva",role:"mod"},{username:"druiz",name:"Diego Ruiz",role:"mod"},{username:"emendoza",name:"Javier Mendoza",role:"mod"},{username:"jparedes",name:"Javier Paredes",role:"mod"},{username:"jarredondo",name:"Jorge Arredondo",role:"mod"}],Zn=["Belgrano VI","Barracas","Recoleta","Recoleta III","Recoleta IV","Recoleta V","Beccar","Belgrano IV","Belgrano","Belgrano II","Belgrano III","Belgrano VII","Belgrano VIII","Belgrano V","Berazategui","Berazategui II","Caballito","Caballito II","Caballito III","Caballito IV","Chacarita","Devoto","Flores","Las Caitas","Microcentro","Microcentro II","Nuez","Palermo","Palermo II","Palermo III","Parque Centenario","Parque Patricios","Pilar","Pompeya","Quilmes","Recoleta II","Retiro","devoto II","Retiro II","San Isidro I","San Isidro II","San Miguel","Tribunales","Villa Ballester","Villa Ballester II","Villa Crespo","Villa del Parque","Villa del Parque II","Villa Luro","Villa Urquiza","Villa Urquiza II","Villa Urquiza III","Ramos Mejia","Ramos Mejia II","Ramos Mejia III","Gonzales Catan","Gonzales Catan II","Gonzales Catan III","Padua","Mercedes","Morn","Saladillo"];Zn.map(r=>({username:r.toLowerCase().replace(/\s+/g,""),name:`Farmacia ${r}`,role:"branch"}));const Ao=p.createContext(void 0);function Nh({children:r}){const[e,t]=p.useState(null),[s,n]=p.useState(!0);p.useEffect(()=>{const d=localStorage.getItem("farmaplus_user");d&&t(JSON.parse(d)),n(!1)},[]);const a=async(d,m)=>{var g;if(m&&m!=="farmaplus")return!1;const f=d.toLowerCase().trim().replace(/\s+/g,"");try{const{data:v,error:_}=await Ee.from("profiles").select(`
                    *,
                    branches (
                        name
                    )
                `).ilike("username",f).maybeSingle();if(v&&!_){const j=v;if(j.active===!1&&j.username.toLowerCase()!=="gcoz")return ht.error("Acceso Denegado","Tu cuenta se encuentra inactiva. Contacta al administrador (gcoz)."),!1;const b=((g=v.branches)==null?void 0:g.name)||void 0,k={id:v.id,username:v.username,name:v.full_name||v.username,role:v.role||"admin",branchName:b||"Casa Central",branchSheet:b||"Casa Central",permissions:j.permissions||[]};return i(k),!0}}catch(v){console.error("Error fetching user from Supabase:",v)}const h=Oh.find(v=>v.username===f);if(h){const v={id:`mod_${f}`,username:f,name:h.name,role:"mod",branchName:"Zona No Asignada",branchSheet:"Zona No Asignada",permissions:[]};return i(v),!0}const w=Zn.find(v=>v.toLowerCase().replace(/\s+/g,"")===f);if(w){const v={id:`branch_${f}`,username:f,name:`Farmacia ${w}`,role:"branch",branchName:w,branchSheet:w,permissions:[]};return i(v),!0}return!1},i=d=>{t(d),localStorage.setItem("farmaplus_user",JSON.stringify(d))},o=d=>{if(!e)return;const m={...e,branchName:d,branchSheet:d};i(m),ht.success("Sucursal Seleccionada",`Ahora ests visualizando los datos de: ${d}`)},c=()=>{if(!e)return;const d={...e,branchName:"Casa Central",branchSheet:"Casa Central"};i(d),ht.info("Vista Restaurada","Has regresado a la vista de Administrador.")},u=()=>{t(null),localStorage.removeItem("farmaplus_user"),ht.info("Sesin Cerrada","Has cerrado sesin correctamente.")};return l.jsx(Ao.Provider,{value:{user:e,login:a,selectBranch:o,clearBranchSelection:c,logout:u,isLoading:s},children:r})}function ea(){const r=p.useContext(Ao);if(r===void 0)throw new Error("useUser must be used within a UserProvider");return r}const Ga={async send(r,e){const{error:t}=await Ee.from("notifications").insert({user_id:r,...e});if(t)throw console.error("Error sending notification:",t),t},async markAsRead(r){const{error:e}=await Ee.from("notifications").update({is_read:!0}).eq("id",r);if(e)throw e},async markAllAsRead(){const{data:{user:r}}=await Ee.auth.getUser();if(!r)return;const{error:e}=await Ee.from("notifications").update({is_read:!0}).eq("user_id",r.id);if(e)throw e}},Io=p.createContext(void 0);function Ph({children:r}){const{user:e}=ea(),[t,s]=p.useState([]),[n,a]=p.useState(!0);p.useEffect(()=>{if(!(e!=null&&e.id)){s([]),a(!1);return}(async()=>{a(!0);const{data:m,error:f}=await Ee.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);f?console.error("Error loading notifications:",f):s(m),a(!1)})();const d=Ee.channel("notifications-changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},m=>{if(m.eventType==="INSERT"){const f=m.new;s(h=>[f,...h]),ws(f.title,{description:f.message,action:{label:"Ver",onClick:()=>console.log("Navigate to notif",f)}})}else if(m.eventType==="UPDATE"){const f=m.new;s(h=>h.map(w=>w.id===f.id?f:w))}}).subscribe();return()=>{Ee.removeChannel(d)}},[e]);const i=t.filter(u=>!u.is_read).length,o=async u=>{s(d=>d.map(m=>m.id===u?{...m,is_read:!0}:m));try{await Ga.markAsRead(u)}catch(d){console.error("Error marking as read",d)}},c=async()=>{s(u=>u.map(d=>({...d,is_read:!0})));try{await Ga.markAllAsRead()}catch(u){console.error("Error marking all as read",u)}};return l.jsx(Io.Provider,{value:{notifications:t,unreadCount:i,markAsRead:o,markAllAsRead:c,loading:n},children:r})}const Ah=()=>{const r=p.useContext(Io);if(r===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return r};function $o(){const[r,e]=p.useState(!1),{notifications:t,unreadCount:s,markAsRead:n,markAllAsRead:a}=Ah(),[i,o]=p.useState("default");p.useEffect(()=>{Xt.isSupported()&&o(Xt.getPermissionStatus())},[]);const c=async()=>{await a(),ht.success("Listo","Todas las notificaciones marcadas como ledas")},u=async()=>{const d=await Xt.requestPermission();o(d),d==="granted"?(ht.success("Notificaciones habilitadas","Ahora recibirs alertas de eventos prximos"),await Xt.showNotification({title:"Notificaciones activadas!",body:"Ahora recibirs alertas de eventos prximos"})):ht.error("Permiso denegado","No se pudo habilitar las notificaciones")};return l.jsxs(Ji,{open:r,onOpenChange:e,children:[l.jsx("div",{className:"inline-block relative",children:l.jsxs("button",{onClick:()=>e(!0),"aria-label":"Notificaciones",className:"inline-flex h-10 w-10 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[l.jsx(wc,{className:`w-4 h-4 ${s>0?"text-accent":"text-muted-foreground"}`}),s>0&&l.jsx("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 min-w-[18px] h-4 px-1.5 rounded-full bg-accent text-white text-xs font-medium flex items-center justify-center ring-1 ring-accent/60",role:"status","aria-label":`${s} notificaciones nuevas`,children:s})]})}),l.jsxs(Vn,{className:"w-[420px] p-0",children:[l.jsx(Yi,{className:"p-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Xi,{children:"Notificaciones"}),t.length>0&&s>0&&l.jsxs(Fe,{variant:"ghost",size:"sm",onClick:c,children:[l.jsx(xc,{className:"w-4 h-4 mr-2"}),"Marcar ledas"]})]})}),i!=="granted"&&Xt.isSupported()&&l.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[l.jsxs(Fe,{onClick:u,variant:"outline",size:"sm",className:"w-full",children:[l.jsx(ga,{className:"w-4 h-4 mr-2"}),"Habilitar notificaciones push"]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Recibe alertas de eventos prximos incluso cerrado"})]}),t.length>0?l.jsx("div",{className:"p-4 max-h-[400px] overflow-y-auto",children:l.jsx("ul",{className:"divide-y",children:t.map(d=>l.jsx("li",{className:`py-3 ${d.is_read?"":"bg-accent/5 -mx-4 px-4"}`,children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium",children:d.title}),l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:d.message}),l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(d.created_at).toLocaleDateString()})]}),!d.is_read&&l.jsx("div",{className:"h-2 w-2 rounded-full bg-accent mt-1 flex-shrink-0"})]})},d.id))})}):l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("p",{className:"text-muted-foreground mb-4",children:"No tienes notificaciones nuevas."}),i!=="granted"&&Xt.isSupported()&&l.jsxs(Fe,{onClick:u,variant:"outline",size:"sm",children:[l.jsx(ga,{className:"w-4 h-4 mr-2"}),"Habilitar notificaciones push"]})]})]})]})}function Do(){const[r,e]=p.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return p.useEffect(()=>{const s=document.documentElement;s.classList.remove("light","dark"),s.classList.add(r),localStorage.setItem("theme",r)},[r]),{theme:r,setTheme:e,toggleTheme:()=>{e(s=>s==="light"?"dark":"light")}}}function Ih(){const{theme:r,toggleTheme:e}=Do();return l.jsxs(De.button,{onClick:e,className:"relative flex items-center justify-center w-10 h-10 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Toggle theme",children:[l.jsx(De.div,{initial:!1,animate:{scale:r==="dark"?1:0,opacity:r==="dark"?1:0,rotate:r==="dark"?0:180},transition:{duration:.2},className:"absolute",children:l.jsx(qi,{className:"w-4 h-4"})}),l.jsx(De.div,{initial:!1,animate:{scale:r==="light"?1:0,opacity:r==="light"?1:0,rotate:r==="light"?0:-180},transition:{duration:.2},className:"absolute",children:l.jsx(Vi,{className:"w-4 h-4"})})]})}const $h=[{title:"Dashboard",url:"/",icon:Mi},{title:"Stock",url:"/stock",icon:zn},{title:"Inventarios Cclicos",url:"/cyclic-inventory",icon:qn},{title:"Productos",url:"/products",icon:Cs},{title:"Reportes",url:"/reports",icon:Fn}];function Dh({item:r,end:e}){return l.jsxs(vs,{children:[l.jsx(ys,{asChild:!0,children:l.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full",children:l.jsx(ln,{to:r.url,end:e,"aria-label":r.title,className:({isActive:t})=>q("flex h-full w-full items-center justify-center rounded-xl text-foreground/60 transition-all duration-200 hover:bg-muted hover:text-foreground hover:shadow-sm",t&&"bg-muted text-foreground shadow-sm"),children:l.jsx(r.icon,{className:"h-4 w-4 leading-none"})})})}),l.jsx(Dr,{side:"right",children:l.jsx("p",{children:r.title})})]})}function Lh(){return l.jsx(l.Fragment,{children:l.jsxs("aside",{className:"hidden lg:flex flex-col w-[72px] fixed inset-y-0 left-0 z-20 bg-transparent pt-6 pb-6",children:[l.jsx("div",{className:"flex h-16 items-center justify-center pl-2",children:l.jsx("img",{src:Gi,alt:"Logo Farmaplus",className:"h-10 w-10"})}),l.jsx("div",{className:"flex w-full justify-center pl-2 my-2",children:l.jsx("div",{className:"h-px w-8 bg-border/40"})}),l.jsx("nav",{className:"flex-1 overflow-auto py-2 flex flex-col items-center gap-3 pl-2",children:$h.map(r=>l.jsx(Dh,{item:r,end:r.url==="/"},r.title))}),l.jsx("div",{className:"flex w-full justify-center pl-2 my-2 mt-auto",children:l.jsx("div",{className:"h-px w-8 bg-border/40"})}),l.jsxs("nav",{className:"py-3 flex flex-col items-center gap-3 pl-2",children:[l.jsx(Ih,{}),l.jsx($o,{}),l.jsxs(vs,{children:[l.jsx(ys,{asChild:!0,children:l.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full",children:l.jsx(ln,{to:"/settings","aria-label":"Configuracin",className:({isActive:r})=>q("flex h-full w-full items-center justify-center rounded-xl text-foreground/60 transition-all duration-200 hover:bg-muted hover:text-foreground hover:shadow-sm",r&&"bg-muted text-foreground shadow-sm"),children:l.jsx(zi,{className:"h-4 w-4 leading-none"})})})}),l.jsx(Dr,{side:"right",children:l.jsx("p",{children:"Configuracin"})})]}),l.jsxs(vs,{children:[l.jsx(ys,{asChild:!0,children:l.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full",children:l.jsx(ln,{to:"/profile","aria-label":"Perfil",className:({isActive:r})=>q("flex h-full w-full items-center justify-center rounded-xl text-foreground/60 transition-all duration-200 hover:bg-muted hover:text-foreground hover:shadow-sm",r&&"bg-muted text-foreground shadow-sm"),children:l.jsx(Wi,{className:"h-4 w-4 leading-none"})})})}),l.jsx(Dr,{side:"right",children:l.jsx("p",{children:"Perfil"})})]})]})]})})}const Uh=[{to:"/",icon:Oc,label:"Dashboard"},{to:"/stock",icon:zn,label:"Stock"},{to:"/cyclic-inventory",icon:Fn,label:"Cclico"},{to:"/products",icon:Cs,label:"Productos"},{to:"/reports",icon:qn,label:"Reportes"}];function Bh(){return l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 w-full border-t bg-background/95 backdrop-blur-sm sm:hidden pb-[env(safe-area-inset-bottom)]",children:l.jsx("div",{className:"grid h-20 grid-cols-5 items-center justify-center text-xs",children:Uh.map(({to:r,icon:e,label:t})=>l.jsx(ki,{to:r,end:r==="/",className:({isActive:s})=>q("flex flex-col items-center justify-center gap-1 text-muted-foreground transition-colors",s&&"text-primary"),children:({isActive:s})=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative flex h-8 w-16 items-center justify-center",children:[l.jsx(De.div,{className:"absolute h-8 w-16 rounded-full bg-secondary",initial:{scale:0},animate:{scale:s?1:0},transition:{duration:.2,ease:[.2,0,0,1]}}),l.jsx(De.div,{animate:{scale:s?1.1:1,rotate:s?[0,-10,10,0]:0},transition:{duration:.3,ease:[.2,0,0,1]},children:l.jsx(e,{className:q("relative z-10 h-5 w-5",s&&"text-primary")})})]}),l.jsx(De.span,{className:"font-medium",animate:{scale:s?1.05:1},transition:{duration:.2},children:t})]})},r))})})}function Mh(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const Lo=y.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),xr=()=>{const r=y.useContext(Lo);if(!r)throw new Error("useDrawerContext must be used within a Drawer.Root");return r};Mh(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const qh=24,Fh=typeof window<"u"?p.useLayoutEffect:p.useEffect;function Ja(...r){return(...e)=>{for(let t of r)typeof t=="function"&&t(...e)}}function zh(){return ta(/^Mac/)}function Vh(){return ta(/^iPhone/)}function Qa(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Hh(){return ta(/^iPad/)||zh()&&navigator.maxTouchPoints>1}function Uo(){return Vh()||Hh()}function ta(r){return typeof window<"u"&&window.navigator!=null?r.test(window.navigator.platform):void 0}const Ks=typeof document<"u"&&window.visualViewport;function Ya(r){let e=window.getComputedStyle(r);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function Bo(r){for(Ya(r)&&(r=r.parentElement);r&&!Ya(r);)r=r.parentElement;return r||document.scrollingElement||document.documentElement}const Wh=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let cs=0,Gs;function Kh(r={}){let{isDisabled:e}=r;Fh(()=>{if(!e)return cs++,cs===1&&Uo()&&(Gs=Gh()),()=>{cs--,cs===0&&(Gs==null||Gs())}},[e])}function Gh(){let r,e=0,t=m=>{r=Bo(m.target),!(r===document.documentElement&&r===document.body)&&(e=m.changedTouches[0].pageY)},s=m=>{if(!r||r===document.documentElement||r===document.body){m.preventDefault();return}let f=m.changedTouches[0].pageY,h=r.scrollTop,w=r.scrollHeight-r.clientHeight;w!==0&&((h<=0&&f>e||h>=w&&f<e)&&m.preventDefault(),e=f)},n=m=>{let f=m.target;_n(f)&&f!==document.activeElement&&(m.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},a=m=>{let f=m.target;_n(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",Ks&&(Ks.height<window.innerHeight?requestAnimationFrame(()=>{Xa(f)}):Ks.addEventListener("resize",()=>Xa(f),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},o=window.pageXOffset,c=window.pageYOffset,u=Ja(Jh(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=Ja(Er(document,"touchstart",t,{passive:!1,capture:!0}),Er(document,"touchmove",s,{passive:!1,capture:!0}),Er(document,"touchend",n,{passive:!1,capture:!0}),Er(document,"focus",a,!0),Er(window,"scroll",i));return()=>{u(),d(),window.scrollTo(o,c)}}function Jh(r,e,t){let s=r.style[e];return r.style[e]=t,()=>{r.style[e]=s}}function Er(r,e,t,s){return r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}}function Xa(r){let e=document.scrollingElement||document.documentElement;for(;r&&r!==e;){let t=Bo(r);if(t!==document.documentElement&&t!==document.body&&t!==r){let s=t.getBoundingClientRect().top,n=r.getBoundingClientRect().top,a=r.getBoundingClientRect().bottom;const i=t.getBoundingClientRect().bottom+qh;a>i&&(t.scrollTop+=n-s)}r=t.parentElement}}function _n(r){return r instanceof HTMLInputElement&&!Wh.has(r.type)||r instanceof HTMLTextAreaElement||r instanceof HTMLElement&&r.isContentEditable}function Qh(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function Yh(...r){return e=>r.forEach(t=>Qh(t,e))}function Mo(...r){return p.useCallback(Yh(...r),r)}const qo=new WeakMap;function xe(r,e,t=!1){if(!r||!(r instanceof HTMLElement))return;let s={};Object.entries(e).forEach(([n,a])=>{if(n.startsWith("--")){r.style.setProperty(n,a);return}s[n]=r.style[n],r.style[n]=a}),!t&&qo.set(r,s)}function Xh(r,e){if(!r||!(r instanceof HTMLElement))return;let t=qo.get(r);t&&(r.style[e]=t[e])}const _e=r=>{switch(r){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return r}};function us(r,e){if(!r)return null;const t=window.getComputedStyle(r),s=t.transform||t.webkitTransform||t.mozTransform;let n=s.match(/^matrix3d\((.+)\)$/);return n?parseFloat(n[1].split(", ")[_e(e)?13:12]):(n=s.match(/^matrix\((.+)\)$/),n?parseFloat(n[1].split(", ")[_e(e)?5:4]):null)}function Zh(r){return 8*(Math.log(r+1)-2)}function Js(r,e){if(!r)return()=>{};const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function ef(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}const de={DURATION:.5,EASE:[.32,.72,0,1]},Fo=.4,tf=.25,rf=100,zo=8,It=16,Sn=26,Qs="vaul-dragging";function Vo(r){const e=y.useRef(r);return y.useEffect(()=>{e.current=r}),y.useMemo(()=>(...t)=>e.current==null?void 0:e.current.call(e,...t),[])}function sf({defaultProp:r,onChange:e}){const t=y.useState(r),[s]=t,n=y.useRef(s),a=Vo(e);return y.useEffect(()=>{n.current!==s&&(a(s),n.current=s)},[s,n,a]),t}function Ho({prop:r,defaultProp:e,onChange:t=()=>{}}){const[s,n]=sf({defaultProp:e,onChange:t}),a=r!==void 0,i=a?r:s,o=Vo(t),c=y.useCallback(u=>{if(a){const m=typeof u=="function"?u(r):u;m!==r&&o(m)}else n(u)},[a,r,n,o]);return[i,c]}function nf({activeSnapPointProp:r,setActiveSnapPointProp:e,snapPoints:t,drawerRef:s,overlayRef:n,fadeFromIndex:a,onSnapPointChange:i,direction:o="bottom",container:c,snapToSequentialPoint:u}){const[d,m]=Ho({prop:r,defaultProp:t==null?void 0:t[0],onChange:e}),[f,h]=y.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);y.useEffect(()=>{function E(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const w=y.useMemo(()=>d===(t==null?void 0:t[t.length-1])||null,[t,d]),g=y.useMemo(()=>t==null?void 0:t.findIndex(E=>E===d),[t,d]),v=t&&t.length>0&&(a||a===0)&&!Number.isNaN(a)&&t[a]===d||!t,_=y.useMemo(()=>{const E=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var L;return(L=t==null?void 0:t.map(O=>{const X=typeof O=="string";let P=0;if(X&&(P=parseInt(O,10)),_e(o)){const ie=X?P:f?O*E.height:0;return f?o==="bottom"?E.height-ie:-E.height+ie:ie}const ee=X?P:f?O*E.width:0;return f?o==="right"?E.width-ee:-E.width+ee:ee}))!=null?L:[]},[t,f,c]),j=y.useMemo(()=>g!==null?_==null?void 0:_[g]:null,[_,g]),b=y.useCallback(E=>{var L;const O=(L=_==null?void 0:_.findIndex(X=>X===E))!=null?L:null;i(O),xe(s.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:_e(o)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`}),_&&O!==_.length-1&&O!==a&&O<a?xe(n.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"0"}):xe(n.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"1"}),m(t==null?void 0:t[Math.max(O,0)])},[s.current,t,_,a,n,m]);y.useEffect(()=>{if(d||r){var E;const L=(E=t==null?void 0:t.findIndex(O=>O===r||O===d))!=null?E:-1;_&&L!==-1&&typeof _[L]=="number"&&b(_[L])}},[d,r,t,_,b]);function k({draggedDistance:E,closeDrawer:L,velocity:O,dismissible:X}){if(a===void 0)return;const P=o==="bottom"||o==="right"?(j??0)-E:(j??0)+E,ee=g===a-1,ie=g===0,te=E>0;if(ee&&xe(n.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`}),!u&&O>2&&!te){X?L():b(_[0]);return}if(!u&&O>2&&te&&_&&t){b(_[t.length-1]);return}const oe=_==null?void 0:_.reduce((re,Oe)=>typeof re!="number"||typeof Oe!="number"?re:Math.abs(Oe-P)<Math.abs(re-P)?Oe:re),pe=_e(o)?window.innerHeight:window.innerWidth;if(O>Fo&&Math.abs(E)<pe*.4){const re=te?1:-1;if(re>0&&w){b(_[t.length-1]);return}if(ie&&re<0&&X&&L(),g===null)return;b(_[g+re]);return}b(oe)}function N({draggedDistance:E}){if(j===null)return;const L=o==="bottom"||o==="right"?j-E:j+E;(o==="bottom"||o==="right")&&L<_[_.length-1]||(o==="top"||o==="left")&&L>_[_.length-1]||xe(s.current,{transform:_e(o)?`translate3d(0, ${L}px, 0)`:`translate3d(${L}px, 0, 0)`})}function T(E,L){if(!t||typeof g!="number"||!_||a===void 0)return null;const O=g===a-1;if(g>=a&&L)return 0;if(O&&!L)return 1;if(!v&&!O)return null;const P=O?g+1:g-1,ee=O?_[P]-_[P-1]:_[P+1]-_[P],ie=E/Math.abs(ee);return O?1-ie:ie}return{isLastSnapPoint:w,activeSnapPoint:d,shouldFade:v,getPercentageDragged:T,setActiveSnapPoint:m,activeSnapPointIndex:g,onRelease:k,onDrag:N,snapPointsOffset:_}}const af=()=>()=>{};function of(){const{direction:r,isOpen:e,shouldScaleBackground:t,setBackgroundColorOnScale:s,noBodyStyles:n}=xr(),a=y.useRef(null),i=p.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-Sn)/window.innerWidth}y.useEffect(()=>{if(e&&t){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;ef(s&&!n?Js(document.body,{background:"black"}):af,Js(c,{transformOrigin:_e(r)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${de.DURATION}s`,transitionTimingFunction:`cubic-bezier(${de.EASE.join(",")})`}));const u=Js(c,{borderRadius:`${zo}px`,overflow:"hidden",..._e(r)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),a.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},de.DURATION*1e3)}}},[e,t,i])}let Tr=null;function lf({isOpen:r,modal:e,nested:t,hasBeenOpened:s,preventScrollRestoration:n,noBodyStyles:a}){const[i,o]=y.useState(()=>typeof window<"u"?window.location.href:""),c=y.useRef(0),u=y.useCallback(()=>{if(Qa()&&Tr===null&&r&&!a){Tr={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:m,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-m}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=f-window.innerHeight;h&&c.current>=f&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[r]),d=y.useCallback(()=>{if(Qa()&&Tr!==null&&!a){const m=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Tr),window.requestAnimationFrame(()=>{if(n&&i!==window.location.href){o(window.location.href);return}window.scrollTo(f,m)}),Tr=null}},[i]);return y.useEffect(()=>{function m(){c.current=window.scrollY}return m(),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}},[]),y.useEffect(()=>{t||!s||(r?(!window.matchMedia("(display-mode: standalone)").matches&&u(),e||window.setTimeout(()=>{d()},500)):d())},[r,s,i,e,t,u,d]),{restorePositionSetting:d}}function Wo({open:r,onOpenChange:e,children:t,onDrag:s,onRelease:n,snapPoints:a,shouldScaleBackground:i=!1,setBackgroundColorOnScale:o=!0,closeThreshold:c=tf,scrollLockTimeout:u=rf,dismissible:d=!0,handleOnly:m=!1,fadeFromIndex:f=a&&a.length-1,activeSnapPoint:h,setActiveSnapPoint:w,fixed:g,modal:v=!0,onClose:_,nested:j,noBodyStyles:b,direction:k="bottom",defaultOpen:N=!1,disablePreventScroll:T=!0,snapToSequentialPoint:E=!1,preventScrollRestoration:L=!1,repositionInputs:O=!0,onAnimationEnd:X,container:P,autoFocus:ee=!1}){var ie,te;const[oe=!1,pe]=Ho({defaultProp:N,prop:r,onChange:B=>{e==null||e(B),!B&&!j&&Ie(),setTimeout(()=>{X==null||X(B)},de.DURATION*1e3),B&&!v&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),B||(document.body.style.pointerEvents="auto")}}),[re,Oe]=y.useState(!1),[F,ge]=y.useState(!1),[ft,x]=y.useState(!1),C=y.useRef(null),A=y.useRef(null),R=y.useRef(null),K=y.useRef(null),U=y.useRef(null),ce=y.useRef(!1),le=y.useRef(null),Be=y.useRef(0),He=y.useRef(!1),Jt=y.useRef(0),z=y.useRef(null),Hr=y.useRef(((ie=z.current)==null?void 0:ie.getBoundingClientRect().height)||0),Wr=y.useRef(((te=z.current)==null?void 0:te.getBoundingClientRect().width)||0),Qt=y.useRef(0),Ps=y.useCallback(B=>{a&&B===mt.length-1&&(A.current=new Date)},[]),{activeSnapPoint:_r,activeSnapPointIndex:Rt,setActiveSnapPoint:Sr,onRelease:Ot,snapPointsOffset:mt,onDrag:lt,shouldFade:Kr,getPercentageDragged:As}=nf({snapPoints:a,activeSnapPointProp:h,setActiveSnapPointProp:w,drawerRef:z,fadeFromIndex:f,overlayRef:C,onSnapPointChange:Ps,direction:k,container:P,snapToSequentialPoint:E});Kh({isDisabled:!oe||F||!v||ft||!re||!O||!T});const{restorePositionSetting:Ie}=lf({isOpen:oe,modal:v,nested:j,hasBeenOpened:re,preventScrollRestoration:L,noBodyStyles:b});function Ke(){return(window.innerWidth-Sn)/window.innerWidth}function Is(B){var Z,se;!d&&!a||z.current&&!z.current.contains(B.target)||(Hr.current=((Z=z.current)==null?void 0:Z.getBoundingClientRect().height)||0,Wr.current=((se=z.current)==null?void 0:se.getBoundingClientRect().width)||0,ge(!0),R.current=new Date,Uo()&&window.addEventListener("touchend",()=>ce.current=!1,{once:!0}),B.target.setPointerCapture(B.pointerId),Be.current=_e(k)?B.pageY:B.pageX)}function Gr(B,Z){var se,ne;let G=B;const me=(se=window.getSelection())==null?void 0:se.toString(),je=z.current?us(z.current,k):null,$=new Date;if(G.hasAttribute("data-vaul-no-drag")||G.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(A.current&&$.getTime()-A.current.getTime()<500)return!1;if(je!==null&&(k==="bottom"?je>0:je<0))return!0;if(me&&me.length>0)return!1;if($.getTime()-((ne=U.current)==null?void 0:ne.getTime())<u&&je===0||Z)return U.current=$,!1;for(;G;){if(G.scrollHeight>G.clientHeight){if(G.scrollTop!==0)return U.current=new Date,!1;if(G.getAttribute("role")==="dialog")return!0}G=G.parentNode}return!0}function Yt(B){if(z.current&&F){const Z=k==="bottom"||k==="right"?1:-1,se=(Be.current-(_e(k)?B.pageY:B.pageX))*Z,ne=se>0,G=a&&!d&&!ne;if(G&&Rt===0)return;const me=Math.abs(se),je=document.querySelector("[data-vaul-drawer-wrapper]"),$=k==="bottom"||k==="top"?Hr.current:Wr.current;let W=me/$;const J=As(me,ne);if(J!==null&&(W=J),G&&W>=1||!ce.current&&!Gr(B.target,ne))return;if(z.current.classList.add(Qs),ce.current=!0,xe(z.current,{transition:"none"}),xe(C.current,{transition:"none"}),a&&lt({draggedDistance:se}),ne&&!a){const he=Zh(se),Me=Math.min(he*-1,0)*Z;xe(z.current,{transform:_e(k)?`translate3d(0, ${Me}px, 0)`:`translate3d(${Me}px, 0, 0)`});return}const ve=1-W;if((Kr||f&&Rt===f-1)&&(s==null||s(B,W),xe(C.current,{opacity:`${ve}`,transition:"none"},!0)),je&&C.current&&i){const he=Math.min(Ke()+W*(1-Ke()),1),Me=8-W*8,nt=Math.max(0,14-W*14);xe(je,{borderRadius:`${Me}px`,transform:_e(k)?`scale(${he}) translate3d(0, ${nt}px, 0)`:`scale(${he}) translate3d(${nt}px, 0, 0)`,transition:"none"},!0)}if(!a){const he=me*Z;xe(z.current,{transform:_e(k)?`translate3d(0, ${he}px, 0)`:`translate3d(${he}px, 0, 0)`})}}}y.useEffect(()=>{var B;function Z(){if(!z.current||!O)return;const se=document.activeElement;if(_n(se)||He.current){var ne;const G=((ne=window.visualViewport)==null?void 0:ne.height)||0,me=window.innerHeight;let je=me-G;const $=z.current.getBoundingClientRect().height||0,W=$>me*.8;Qt.current||(Qt.current=$);const J=z.current.getBoundingClientRect().top;if(Math.abs(Jt.current-je)>60&&(He.current=!He.current),a&&a.length>0&&mt&&Rt){const ve=mt[Rt]||0;je+=ve}if(Jt.current=je,$>G||He.current){const ve=z.current.getBoundingClientRect().height;let he=ve;ve>G&&(he=G-(W?J:Sn)),g?z.current.style.height=`${ve-Math.max(je,0)}px`:z.current.style.height=`${Math.max(he,G-J)}px`}else z.current.style.height=`${Qt.current}px`;a&&a.length>0&&!He.current?z.current.style.bottom="0px":z.current.style.bottom=`${Math.max(je,0)}px`}}return(B=window.visualViewport)==null||B.addEventListener("resize",Z),()=>{var se;return(se=window.visualViewport)==null?void 0:se.removeEventListener("resize",Z)}},[Rt,a,mt]);function Nt(B){jr(),_==null||_(),B||pe(!1),setTimeout(()=>{a&&Sr(a[0])},de.DURATION*1e3)}function kr(){if(!z.current)return;const B=document.querySelector("[data-vaul-drawer-wrapper]"),Z=us(z.current,k);xe(z.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`}),xe(C.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"1"}),i&&Z&&Z>0&&oe&&xe(B,{borderRadius:`${zo}px`,overflow:"hidden",..._e(k)?{transform:`scale(${Ke()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ke()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${de.DURATION}s`,transitionTimingFunction:`cubic-bezier(${de.EASE.join(",")})`},!0)}function jr(){!F||!z.current||(z.current.classList.remove(Qs),ce.current=!1,ge(!1),K.current=new Date)}function pt(B){if(!F||!z.current)return;z.current.classList.remove(Qs),ce.current=!1,ge(!1),K.current=new Date;const Z=us(z.current,k);if(!Gr(B.target,!1)||!Z||Number.isNaN(Z)||R.current===null)return;const se=K.current.getTime()-R.current.getTime(),ne=Be.current-(_e(k)?B.pageY:B.pageX),G=Math.abs(ne)/se;if(G>.05&&(x(!0),setTimeout(()=>{x(!1)},200)),a){Ot({draggedDistance:ne*(k==="bottom"||k==="right"?1:-1),closeDrawer:Nt,velocity:G,dismissible:d}),n==null||n(B,!0);return}if(k==="bottom"||k==="right"?ne>0:ne<0){kr(),n==null||n(B,!0);return}if(G>Fo){Nt(),n==null||n(B,!1);return}var me;const je=Math.min((me=z.current.getBoundingClientRect().height)!=null?me:0,window.innerHeight);var $;const W=Math.min(($=z.current.getBoundingClientRect().width)!=null?$:0,window.innerWidth),J=k==="left"||k==="right";if(Math.abs(Z)>=(J?W:je)*c){Nt(),n==null||n(B,!1);return}n==null||n(B,!0),kr()}y.useEffect(()=>(oe&&(xe(document.documentElement,{scrollBehavior:"auto"}),A.current=new Date),()=>{Xh(document.documentElement,"scrollBehavior")}),[oe]);function Jr(B){const Z=B?(window.innerWidth-It)/window.innerWidth:1,se=B?-It:0;le.current&&window.clearTimeout(le.current),xe(z.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:`scale(${Z}) translate3d(0, ${se}px, 0)`}),!B&&z.current&&(le.current=setTimeout(()=>{const ne=us(z.current,k);xe(z.current,{transition:"none",transform:_e(k)?`translate3d(0, ${ne}px, 0)`:`translate3d(${ne}px, 0, 0)`})},500))}function gt(B,Z){if(Z<0)return;const se=(window.innerWidth-It)/window.innerWidth,ne=se+Z*(1-se),G=-It+Z*It;xe(z.current,{transform:_e(k)?`scale(${ne}) translate3d(0, ${G}px, 0)`:`scale(${ne}) translate3d(${G}px, 0, 0)`,transition:"none"})}function $s(B,Z){const se=_e(k)?window.innerHeight:window.innerWidth,ne=Z?(se-It)/se:1,G=Z?-It:0;Z&&xe(z.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:_e(k)?`scale(${ne}) translate3d(0, ${G}px, 0)`:`scale(${ne}) translate3d(${G}px, 0, 0)`})}return y.createElement($n,{defaultOpen:N,onOpenChange:B=>{!d&&!B||(B?Oe(!0):Nt(!0),pe(B))},open:oe},y.createElement(Lo.Provider,{value:{activeSnapPoint:_r,snapPoints:a,setActiveSnapPoint:Sr,drawerRef:z,overlayRef:C,onOpenChange:e,onPress:Is,onRelease:pt,onDrag:Yt,dismissible:d,handleOnly:m,isOpen:oe,isDragging:F,shouldFade:Kr,closeDrawer:Nt,onNestedDrag:gt,onNestedOpenChange:Jr,onNestedRelease:$s,keyboardIsOpen:He,modal:v,snapPointsOffset:mt,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:o,noBodyStyles:b,container:P,autoFocus:ee}},t))}const Ko=y.forwardRef(function({...r},e){const{overlayRef:t,snapPoints:s,onRelease:n,shouldFade:a,isOpen:i,modal:o}=xr(),c=Mo(e,t),u=s&&s.length>0;return o?y.createElement(Ss,{onMouseUp:n,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":i&&u?"true":"false","data-vaul-snap-points-overlay":i&&a?"true":"false",...r}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});Ko.displayName="Drawer.Overlay";const Go=y.forwardRef(function({onPointerDownOutside:r,style:e,onOpenAutoFocus:t,...s},n){const{drawerRef:a,onPress:i,onRelease:o,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,modal:m,isOpen:f,direction:h,snapPoints:w,container:g,handleOnly:v,autoFocus:_}=xr(),[j,b]=y.useState(!1),k=Mo(n,a),N=y.useRef(null),T=y.useRef(null),E=y.useRef(!1),L=w&&w.length>0;of();const O=(P,ee,ie=0)=>{if(E.current)return!0;const te=Math.abs(P.y),oe=Math.abs(P.x),pe=oe>te,re=["bottom","right"].includes(ee)?1:-1;if(ee==="left"||ee==="right"){if(!(P.x*re<0)&&oe>=0&&oe<=ie)return pe}else if(!(P.y*re<0)&&te>=0&&te<=ie)return!pe;return E.current=!0,!0};y.useEffect(()=>{L&&window.requestAnimationFrame(()=>{b(!0)})},[]);function X(P){N.current=null,E.current=!1,o(P)}return y.createElement(ks,{"data-vaul-drawer-direction":h,"data-vaul-drawer":"","data-vaul-delayed-snap-points":j?"true":"false","data-vaul-snap-points":f&&L?"true":"false","data-vaul-custom-container":g?"true":"false",...s,ref:k,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...e}:e,onPointerDown:P=>{v||(s.onPointerDown==null||s.onPointerDown.call(s,P),N.current={x:P.pageX,y:P.pageY},i(P))},onOpenAutoFocus:P=>{t==null||t(P),_||P.preventDefault()},onPointerDownOutside:P=>{if(r==null||r(P),!m||P.defaultPrevented){P.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:P=>{if(!m){P.preventDefault();return}},onPointerMove:P=>{if(T.current=P,v||(s.onPointerMove==null||s.onPointerMove.call(s,P),!N.current))return;const ee=P.pageY-N.current.y,ie=P.pageX-N.current.x,te=P.pointerType==="touch"?10:2;O({x:ie,y:ee},h,te)?c(P):(Math.abs(ie)>te||Math.abs(ee)>te)&&(N.current=null)},onPointerUp:P=>{s.onPointerUp==null||s.onPointerUp.call(s,P),N.current=null,E.current=!1,o(P)},onPointerOut:P=>{s.onPointerOut==null||s.onPointerOut.call(s,P),X(T.current)},onContextMenu:P=>{s.onContextMenu==null||s.onContextMenu.call(s,P),X(T.current)}})});Go.displayName="Drawer.Content";const cf=250,uf=120,Jo=y.forwardRef(function({preventCycle:r=!1,children:e,...t},s){const{closeDrawer:n,isDragging:a,snapPoints:i,activeSnapPoint:o,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:m,onPress:f,onDrag:h}=xr(),w=y.useRef(null),g=y.useRef(!1);function v(){if(g.current){b();return}window.setTimeout(()=>{_()},uf)}function _(){if(a||r||g.current){b();return}if(b(),(!i||i.length===0)&&u){n();return}if(o===i[i.length-1]&&u){n();return}const N=i.findIndex(E=>E===o);if(N===-1)return;const T=i[N+1];c(T)}function j(){w.current=window.setTimeout(()=>{g.current=!0},cf)}function b(){window.clearTimeout(w.current),g.current=!1}return y.createElement("div",{onClick:v,onPointerCancel:b,onPointerDown:k=>{d&&f(k),j()},onPointerMove:k=>{d&&h(k)},ref:s,"data-vaul-drawer-visible":m?"true":"false","data-vaul-handle":"","aria-hidden":"true",...t},y.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});Jo.displayName="Drawer.Handle";function df({onDrag:r,onOpenChange:e,...t}){const{onNestedDrag:s,onNestedOpenChange:n,onNestedRelease:a}=xr();if(!s)throw new Error("Drawer.NestedRoot must be placed in another drawer");return y.createElement(Wo,{nested:!0,onClose:()=>{n(!1)},onDrag:(i,o)=>{s(i,o),r==null||r(i,o)},onOpenChange:i=>{i&&n(i)},onRelease:a,...t})}function hf(r){const e=xr(),{container:t=e.container,...s}=r;return y.createElement(Dn,{container:t,...s})}const st={Root:Wo,NestedRoot:df,Content:Go,Overlay:Ko,Trigger:Pl,Portal:hf,Handle:Jo,Close:bi,Title:An,Description:In},Qo=({shouldScaleBackground:r=!0,...e})=>l.jsx(st.Root,{shouldScaleBackground:r,...e});Qo.displayName="Drawer";const ff=st.Trigger,mf=st.Portal,Dp=st.Close,Yo=p.forwardRef(({className:r,...e},t)=>l.jsx(st.Overlay,{ref:t,className:q("fixed inset-0 z-50 bg-black/80",r),...e}));Yo.displayName=st.Overlay.displayName;const Xo=p.forwardRef(({className:r,children:e,...t},s)=>l.jsxs(mf,{children:[l.jsx(Yo,{}),l.jsxs(st.Content,{ref:s,className:q("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",r),...t,children:[l.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]})]}));Xo.displayName="DrawerContent";const Zo=({className:r,...e})=>l.jsx("div",{className:q("grid gap-1.5 p-4 text-center sm:text-left",r),...e});Zo.displayName="DrawerHeader";const pf=({className:r,...e})=>l.jsx("div",{className:q("mt-auto flex flex-col gap-2 p-4",r),...e});pf.displayName="DrawerFooter";const el=p.forwardRef(({className:r,...e},t)=>l.jsx(st.Title,{ref:t,className:q("text-lg font-semibold leading-none tracking-tight",r),...e}));el.displayName=st.Title.displayName;const gf=p.forwardRef(({className:r,...e},t)=>l.jsx(st.Description,{ref:t,className:q("text-sm text-muted-foreground",r),...e}));gf.displayName=st.Description.displayName;const ra=p.forwardRef(({className:r,...e},t)=>l.jsx(xi,{ref:t,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));ra.displayName=xi.displayName;const vf=p.forwardRef(({className:r,...e},t)=>l.jsx(_i,{ref:t,className:q("aspect-square h-full w-full",r),...e}));vf.displayName=_i.displayName;const yf=p.forwardRef(({className:r,...e},t)=>l.jsx(Si,{ref:t,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...e}));yf.displayName=Si.displayName;const tl="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-user'%3e%3cpath%20d='M19%2021v-2a4%204%200%200%200-4-4H9a4%204%200%200%200-4%204v2'/%3e%3ccircle%20cx='12'%20cy='7'%20r='4'/%3e%3c/svg%3e";function wf({trigger:r}){const{theme:e,toggleTheme:t}=Do(),s=Ln(),[n,a]=p.useState(!1),i=o=>{a(!1),s(o)};return l.jsxs(Qo,{open:n,onOpenChange:a,children:[l.jsx(ff,{asChild:!0,children:r}),l.jsx(Xo,{children:l.jsxs("div",{className:"mx-auto w-full max-w-sm",children:[l.jsxs(Zo,{className:"flex flex-col items-center gap-4 pt-6 pb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx(ra,{className:"h-20 w-20 border-4 border-background shadow-xl bg-card",children:l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-muted-foreground",children:l.jsx("img",{src:tl,alt:"User",className:"h-10 w-10 opacity-70"})})}),l.jsx("div",{className:"absolute bottom-0 right-0 rounded-full bg-background p-1 shadow-sm",children:l.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary text-[10px] font-bold text-primary-foreground",children:"F"})})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx(el,{className:"text-xl font-semibold",children:"Gonzalo Coz"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"gonzzalocoz@gmail.com"})]}),l.jsx(Fe,{variant:"outline",className:"rounded-full px-6 h-8 text-xs",onClick:()=>i("/profile"),children:"Administrar tu Cuenta de Farmaplus"})]}),l.jsxs("div",{className:"p-4 space-y-2 pb-8",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.jsxs(Fe,{variant:"outline",className:"h-20 flex flex-col gap-2 rounded-xl border-muted-foreground/20 hover:bg-muted/50 hover:border-primary/50 transition-all",onClick:t,children:[e==="dark"?l.jsx(qi,{className:"h-6 w-6"}):l.jsx(Vi,{className:"h-6 w-6"}),l.jsxs("span",{className:"text-xs font-medium",children:["Tema ",e==="dark"?"Oscuro":"Claro"]})]}),l.jsxs(Fe,{variant:"outline",className:"h-20 flex flex-col gap-2 rounded-xl border-muted-foreground/20 hover:bg-muted/50 hover:border-primary/50 transition-all",onClick:()=>i("/settings"),children:[l.jsx(zi,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xs font-medium",children:"Configuracin"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs(Fe,{variant:"ghost",className:"w-full justify-start gap-3 h-12 rounded-xl",onClick:()=>i("/profile"),children:[l.jsx(Wi,{className:"h-5 w-5 text-muted-foreground"}),l.jsx("span",{children:"Tu Perfil"})]}),l.jsxs(Fe,{variant:"ghost",className:"w-full justify-start gap-3 h-12 rounded-xl text-destructive hover:text-destructive hover:bg-destructive/10",children:[l.jsx(Nc,{className:"h-5 w-5"}),l.jsx("span",{children:"Cerrar Sesin"})]})]}),l.jsx("div",{className:"pt-4 text-center",children:l.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Poltica de Privacidad  Trminos de Servicio"})})]})]})})]})}function bf(){const[r,e]=p.useState(!1);return Ln(),p.useEffect(()=>{const t=document.getElementById("main-content");if(!t)return;const s=()=>{e(t.scrollTop>10)};return t.addEventListener("scroll",s),()=>t.removeEventListener("scroll",s)},[]),l.jsx("header",{className:q("absolute top-0 left-0 right-0 z-40 w-full transition-all duration-300 lg:hidden",r?"bg-background/80 backdrop-blur-md shadow-sm border-b supports-[backdrop-filter]:bg-background/60":"bg-transparent border-b-0"),children:l.jsxs("div",{className:"flex h-16 items-center justify-between px-8",children:[l.jsx("div",{className:"flex items-center",children:l.jsx("img",{src:Gi,alt:"Farmaplus",className:"h-7 w-auto"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($o,{}),l.jsx(wf,{trigger:l.jsx("button",{className:"flex items-center justify-center h-12 w-12 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:l.jsx("div",{className:"p-0.5 rounded-full bg-gradient-to-tr from-blue-500 via-red-500 to-yellow-500",children:l.jsx(ra,{className:"h-8 w-8 border-2 border-background bg-card",children:l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-muted-foreground",children:l.jsx("img",{src:tl,alt:"User",className:"h-5 w-5 opacity-70"})})})})})})]})]})})}function xf(){return null}var Za=1,_f=.9,Sf=.8,kf=.17,Ys=.1,Xs=.999,jf=.9999,Ef=.99,Tf=/[\\\/_+.#"@\[\(\{&]/,Cf=/[\\\/_+.#"@\[\(\{&]/g,Rf=/[\s-]/,rl=/[\s-]/g;function kn(r,e,t,s,n,a,i){if(a===e.length)return n===r.length?Za:Ef;var o=`${n},${a}`;if(i[o]!==void 0)return i[o];for(var c=s.charAt(a),u=t.indexOf(c,n),d=0,m,f,h,w;u>=0;)m=kn(r,e,t,s,u+1,a+1,i),m>d&&(u===n?m*=Za:Tf.test(r.charAt(u-1))?(m*=Sf,h=r.slice(n,u-1).match(Cf),h&&n>0&&(m*=Math.pow(Xs,h.length))):Rf.test(r.charAt(u-1))?(m*=_f,w=r.slice(n,u-1).match(rl),w&&n>0&&(m*=Math.pow(Xs,w.length))):(m*=kf,n>0&&(m*=Math.pow(Xs,u-n))),r.charAt(u)!==e.charAt(a)&&(m*=jf)),(m<Ys&&t.charAt(u-1)===s.charAt(a+1)||s.charAt(a+1)===s.charAt(a)&&t.charAt(u-1)!==s.charAt(a))&&(f=kn(r,e,t,s,u+1,a+2,i),f*Ys>m&&(m=f*Ys)),m>d&&(d=m),u=t.indexOf(c,u+1);return i[o]=d,d}function ei(r){return r.toLowerCase().replace(rl," ")}function Of(r,e,t){return r=t&&t.length>0?`${r+" "+t.join(" ")}`:r,kn(r,e,ei(r),ei(e),0,0,{})}var Cr='[cmdk-group=""]',Zs='[cmdk-group-items=""]',Nf='[cmdk-group-heading=""]',sl='[cmdk-item=""]',ti=`${sl}:not([aria-disabled="true"])`,jn="cmdk-item-select",ir="data-value",Pf=(r,e,t)=>Of(r,e,t),nl=p.createContext(void 0),Vr=()=>p.useContext(nl),al=p.createContext(void 0),sa=()=>p.useContext(al),il=p.createContext(void 0),ol=p.forwardRef((r,e)=>{let t=or(()=>{var x,C;return{search:"",value:(C=(x=r.value)!=null?x:r.defaultValue)!=null?C:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=or(()=>new Set),n=or(()=>new Map),a=or(()=>new Map),i=or(()=>new Set),o=ll(r),{label:c,children:u,value:d,onValueChange:m,filter:f,shouldFilter:h,loop:w,disablePointerSelection:g=!1,vimBindings:v=!0,..._}=r,j=lr(),b=lr(),k=lr(),N=p.useRef(null),T=zf();Gt(()=>{if(d!==void 0){let x=d.trim();t.current.value=x,E.emit()}},[d]),Gt(()=>{T(6,ie)},[]);let E=p.useMemo(()=>({subscribe:x=>(i.current.add(x),()=>i.current.delete(x)),snapshot:()=>t.current,setState:(x,C,A)=>{var R,K,U,ce;if(!Object.is(t.current[x],C)){if(t.current[x]=C,x==="search")ee(),X(),T(1,P);else if(x==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let le=document.getElementById(k);le?le.focus():(R=document.getElementById(j))==null||R.focus()}if(T(7,()=>{var le;t.current.selectedItemId=(le=te())==null?void 0:le.id,E.emit()}),A||T(5,ie),((K=o.current)==null?void 0:K.value)!==void 0){let le=C??"";(ce=(U=o.current).onValueChange)==null||ce.call(U,le);return}}E.emit()}},emit:()=>{i.current.forEach(x=>x())}}),[]),L=p.useMemo(()=>({value:(x,C,A)=>{var R;C!==((R=a.current.get(x))==null?void 0:R.value)&&(a.current.set(x,{value:C,keywords:A}),t.current.filtered.items.set(x,O(C,A)),T(2,()=>{X(),E.emit()}))},item:(x,C)=>(s.current.add(x),C&&(n.current.has(C)?n.current.get(C).add(x):n.current.set(C,new Set([x]))),T(3,()=>{ee(),X(),t.current.value||P(),E.emit()}),()=>{a.current.delete(x),s.current.delete(x),t.current.filtered.items.delete(x);let A=te();T(4,()=>{ee(),(A==null?void 0:A.getAttribute("id"))===x&&P(),E.emit()})}),group:x=>(n.current.has(x)||n.current.set(x,new Set),()=>{a.current.delete(x),n.current.delete(x)}),filter:()=>o.current.shouldFilter,label:c||r["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:j,inputId:k,labelId:b,listInnerRef:N}),[]);function O(x,C){var A,R;let K=(R=(A=o.current)==null?void 0:A.filter)!=null?R:Pf;return x?K(x,t.current.search,C):0}function X(){if(!t.current.search||o.current.shouldFilter===!1)return;let x=t.current.filtered.items,C=[];t.current.filtered.groups.forEach(R=>{let K=n.current.get(R),U=0;K.forEach(ce=>{let le=x.get(ce);U=Math.max(le,U)}),C.push([R,U])});let A=N.current;oe().sort((R,K)=>{var U,ce;let le=R.getAttribute("id"),Be=K.getAttribute("id");return((U=x.get(Be))!=null?U:0)-((ce=x.get(le))!=null?ce:0)}).forEach(R=>{let K=R.closest(Zs);K?K.appendChild(R.parentElement===K?R:R.closest(`${Zs} > *`)):A.appendChild(R.parentElement===A?R:R.closest(`${Zs} > *`))}),C.sort((R,K)=>K[1]-R[1]).forEach(R=>{var K;let U=(K=N.current)==null?void 0:K.querySelector(`${Cr}[${ir}="${encodeURIComponent(R[0])}"]`);U==null||U.parentElement.appendChild(U)})}function P(){let x=oe().find(A=>A.getAttribute("aria-disabled")!=="true"),C=x==null?void 0:x.getAttribute(ir);E.setState("value",C||void 0)}function ee(){var x,C,A,R;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=s.current.size;return}t.current.filtered.groups=new Set;let K=0;for(let U of s.current){let ce=(C=(x=a.current.get(U))==null?void 0:x.value)!=null?C:"",le=(R=(A=a.current.get(U))==null?void 0:A.keywords)!=null?R:[],Be=O(ce,le);t.current.filtered.items.set(U,Be),Be>0&&K++}for(let[U,ce]of n.current)for(let le of ce)if(t.current.filtered.items.get(le)>0){t.current.filtered.groups.add(U);break}t.current.filtered.count=K}function ie(){var x,C,A;let R=te();R&&(((x=R.parentElement)==null?void 0:x.firstChild)===R&&((A=(C=R.closest(Cr))==null?void 0:C.querySelector(Nf))==null||A.scrollIntoView({block:"nearest"})),R.scrollIntoView({block:"nearest"}))}function te(){var x;return(x=N.current)==null?void 0:x.querySelector(`${sl}[aria-selected="true"]`)}function oe(){var x;return Array.from(((x=N.current)==null?void 0:x.querySelectorAll(ti))||[])}function pe(x){let C=oe()[x];C&&E.setState("value",C.getAttribute(ir))}function re(x){var C;let A=te(),R=oe(),K=R.findIndex(ce=>ce===A),U=R[K+x];(C=o.current)!=null&&C.loop&&(U=K+x<0?R[R.length-1]:K+x===R.length?R[0]:R[K+x]),U&&E.setState("value",U.getAttribute(ir))}function Oe(x){let C=te(),A=C==null?void 0:C.closest(Cr),R;for(;A&&!R;)A=x>0?qf(A,Cr):Ff(A,Cr),R=A==null?void 0:A.querySelector(ti);R?E.setState("value",R.getAttribute(ir)):re(x)}let F=()=>pe(oe().length-1),ge=x=>{x.preventDefault(),x.metaKey?F():x.altKey?Oe(1):re(1)},ft=x=>{x.preventDefault(),x.metaKey?pe(0):x.altKey?Oe(-1):re(-1)};return p.createElement(Tt.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:x=>{var C;(C=_.onKeyDown)==null||C.call(_,x);let A=x.nativeEvent.isComposing||x.keyCode===229;if(!(x.defaultPrevented||A))switch(x.key){case"n":case"j":{v&&x.ctrlKey&&ge(x);break}case"ArrowDown":{ge(x);break}case"p":case"k":{v&&x.ctrlKey&&ft(x);break}case"ArrowUp":{ft(x);break}case"Home":{x.preventDefault(),pe(0);break}case"End":{x.preventDefault(),F();break}case"Enter":{x.preventDefault();let R=te();if(R){let K=new Event(jn);R.dispatchEvent(K)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:Hf},c),Os(r,x=>p.createElement(al.Provider,{value:E},p.createElement(nl.Provider,{value:L},x))))}),Af=p.forwardRef((r,e)=>{var t,s;let n=lr(),a=p.useRef(null),i=p.useContext(il),o=Vr(),c=ll(r),u=(s=(t=c.current)==null?void 0:t.forceMount)!=null?s:i==null?void 0:i.forceMount;Gt(()=>{if(!u)return o.item(n,i==null?void 0:i.id)},[u]);let d=cl(n,a,[r.value,r.children,a],r.keywords),m=sa(),f=Et(T=>T.value&&T.value===d.current),h=Et(T=>u||o.filter()===!1?!0:T.search?T.filtered.items.get(n)>0:!0);p.useEffect(()=>{let T=a.current;if(!(!T||r.disabled))return T.addEventListener(jn,w),()=>T.removeEventListener(jn,w)},[h,r.onSelect,r.disabled]);function w(){var T,E;g(),(E=(T=c.current).onSelect)==null||E.call(T,d.current)}function g(){m.setState("value",d.current,!0)}if(!h)return null;let{disabled:v,value:_,onSelect:j,forceMount:b,keywords:k,...N}=r;return p.createElement(Tt.div,{ref:Ar(a,e),...N,id:n,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||o.getDisablePointerSelection()?void 0:g,onClick:v?void 0:w},r.children)}),If=p.forwardRef((r,e)=>{let{heading:t,children:s,forceMount:n,...a}=r,i=lr(),o=p.useRef(null),c=p.useRef(null),u=lr(),d=Vr(),m=Et(h=>n||d.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);Gt(()=>d.group(i),[]),cl(i,o,[r.value,r.heading,c]);let f=p.useMemo(()=>({id:i,forceMount:n}),[n]);return p.createElement(Tt.div,{ref:Ar(o,e),...a,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},t&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),Os(r,h=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},p.createElement(il.Provider,{value:f},h))))}),$f=p.forwardRef((r,e)=>{let{alwaysRender:t,...s}=r,n=p.useRef(null),a=Et(i=>!i.search);return!t&&!a?null:p.createElement(Tt.div,{ref:Ar(n,e),...s,"cmdk-separator":"",role:"separator"})}),Df=p.forwardRef((r,e)=>{let{onValueChange:t,...s}=r,n=r.value!=null,a=sa(),i=Et(u=>u.search),o=Et(u=>u.selectedItemId),c=Vr();return p.useEffect(()=>{r.value!=null&&a.setState("search",r.value)},[r.value]),p.createElement(Tt.input,{ref:e,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:n?r.value:i,onChange:u=>{n||a.setState("search",u.target.value),t==null||t(u.target.value)}})}),Lf=p.forwardRef((r,e)=>{let{children:t,label:s="Suggestions",...n}=r,a=p.useRef(null),i=p.useRef(null),o=Et(u=>u.selectedItemId),c=Vr();return p.useEffect(()=>{if(i.current&&a.current){let u=i.current,d=a.current,m,f=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let h=u.offsetHeight;d.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(m),f.unobserve(u)}}},[]),p.createElement(Tt.div,{ref:Ar(a,e),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:c.listId},Os(r,u=>p.createElement("div",{ref:Ar(i,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Uf=p.forwardRef((r,e)=>{let{open:t,onOpenChange:s,overlayClassName:n,contentClassName:a,container:i,...o}=r;return p.createElement($n,{open:t,onOpenChange:s},p.createElement(Dn,{container:i},p.createElement(Ss,{"cmdk-overlay":"",className:n}),p.createElement(ks,{"aria-label":r.label,"cmdk-dialog":"",className:a},p.createElement(ol,{ref:e,...o}))))}),Bf=p.forwardRef((r,e)=>Et(t=>t.filtered.count===0)?p.createElement(Tt.div,{ref:e,...r,"cmdk-empty":"",role:"presentation"}):null),Mf=p.forwardRef((r,e)=>{let{progress:t,children:s,label:n="Loading...",...a}=r;return p.createElement(Tt.div,{ref:e,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},Os(r,i=>p.createElement("div",{"aria-hidden":!0},i)))}),Le=Object.assign(ol,{List:Lf,Item:Af,Input:Df,Group:If,Separator:$f,Dialog:Uf,Empty:Bf,Loading:Mf});function qf(r,e){let t=r.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Ff(r,e){let t=r.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function ll(r){let e=p.useRef(r);return Gt(()=>{e.current=r}),e}var Gt=typeof window>"u"?p.useEffect:p.useLayoutEffect;function or(r){let e=p.useRef();return e.current===void 0&&(e.current=r()),e}function Et(r){let e=sa(),t=()=>r(e.snapshot());return p.useSyncExternalStore(e.subscribe,t,t)}function cl(r,e,t,s=[]){let n=p.useRef(),a=Vr();return Gt(()=>{var i;let o=(()=>{var u;for(let d of t){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():n.current}})(),c=s.map(u=>u.trim());a.value(r,o,c),(i=e.current)==null||i.setAttribute(ir,o),n.current=o}),n}var zf=()=>{let[r,e]=p.useState(),t=or(()=>new Map);return Gt(()=>{t.current.forEach(s=>s()),t.current=new Map},[r]),(s,n)=>{t.current.set(s,n),e({})}};function Vf(r){let e=r.type;return typeof e=="function"?e(r.props):"render"in e?e.render(r.props):r}function Os({asChild:r,children:e},t){return r&&p.isValidElement(e)?p.cloneElement(Vf(e),{ref:e.ref},t(e.props.children)):t(e)}var Hf={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ul=p.forwardRef(({className:r,...e},t)=>l.jsx(Le,{ref:t,className:q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...e}));ul.displayName=Le.displayName;const Wf=({children:r,className:e,...t})=>l.jsx(Ji,{...t,children:l.jsx(Vn,{className:q("overflow-hidden p-0 shadow-lg",e),children:l.jsx(ul,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:r})})}),dl=p.forwardRef(({className:r,...e},t)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(gs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(Le.Input,{ref:t,className:q("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...e})]}));dl.displayName=Le.Input.displayName;const hl=p.forwardRef(({className:r,...e},t)=>l.jsx(Le.List,{ref:t,className:q("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...e}));hl.displayName=Le.List.displayName;const fl=p.forwardRef((r,e)=>l.jsx(Le.Empty,{ref:e,className:"py-6 text-center text-sm",...r}));fl.displayName=Le.Empty.displayName;const hs=p.forwardRef(({className:r,...e},t)=>l.jsx(Le.Group,{ref:t,className:q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...e}));hs.displayName=Le.Group.displayName;const ml=p.forwardRef(({className:r,...e},t)=>l.jsx(Le.Separator,{ref:t,className:q("-mx-1 h-px bg-border",r),...e}));ml.displayName=Le.Separator.displayName;const fs=p.forwardRef(({className:r,...e},t)=>l.jsx(Le.Item,{ref:t,className:q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",r),...e}));fs.displayName=Le.Item.displayName;const En=(r,e)=>e.some(t=>r instanceof t);let ri,si;function Kf(){return ri||(ri=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gf(){return si||(si=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tn=new WeakMap,en=new WeakMap,Ns=new WeakMap;function Jf(r){const e=new Promise((t,s)=>{const n=()=>{r.removeEventListener("success",a),r.removeEventListener("error",i)},a=()=>{t(Kt(r.result)),n()},i=()=>{s(r.error),n()};r.addEventListener("success",a),r.addEventListener("error",i)});return Ns.set(e,r),e}function Qf(r){if(Tn.has(r))return;const e=new Promise((t,s)=>{const n=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",i),r.removeEventListener("abort",i)},a=()=>{t(),n()},i=()=>{s(r.error||new DOMException("AbortError","AbortError")),n()};r.addEventListener("complete",a),r.addEventListener("error",i),r.addEventListener("abort",i)});Tn.set(r,e)}let Cn={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Tn.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Kt(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pl(r){Cn=r(Cn)}function Yf(r){return Gf().includes(r)?function(...e){return r.apply(Rn(this),e),Kt(this.request)}:function(...e){return Kt(r.apply(Rn(this),e))}}function Xf(r){return typeof r=="function"?Yf(r):(r instanceof IDBTransaction&&Qf(r),En(r,Kf())?new Proxy(r,Cn):r)}function Kt(r){if(r instanceof IDBRequest)return Jf(r);if(en.has(r))return en.get(r);const e=Xf(r);return e!==r&&(en.set(r,e),Ns.set(e,r)),e}const Rn=r=>Ns.get(r);function Zf(r,e,{blocked:t,upgrade:s,blocking:n,terminated:a}={}){const i=indexedDB.open(r,e),o=Kt(i);return s&&i.addEventListener("upgradeneeded",c=>{s(Kt(i.result),c.oldVersion,c.newVersion,Kt(i.transaction),c)}),t&&i.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),n&&c.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const em=["get","getKey","getAll","getAllKeys","count"],tm=["put","add","delete","clear"],tn=new Map;function ni(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(tn.get(e))return tn.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,n=tm.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(n||em.includes(t)))return;const a=async function(i,...o){const c=this.transaction(i,n?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),n&&c.done]))[0]};return tn.set(e,a),a}pl(r=>({...r,get:(e,t,s)=>ni(e,t)||r.get(e,t,s),has:(e,t)=>!!ni(e,t)||r.has(e,t)}));const rm=["continue","continuePrimaryKey","advance"],ai={},On=new WeakMap,gl=new WeakMap,sm={get(r,e){if(!rm.includes(e))return r[e];let t=ai[e];return t||(t=ai[e]=function(...s){On.set(this,gl.get(this)[e](...s))}),t}};async function*nm(...r){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...r)),!e)return;e=e;const t=new Proxy(e,sm);for(gl.set(t,e),Ns.set(t,Rn(e));e;)yield t,e=await(On.get(t)||e.continue()),On.delete(t)}function ii(r,e){return e===Symbol.asyncIterator&&En(r,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&En(r,[IDBIndex,IDBObjectStore])}pl(r=>({...r,get(e,t,s){return ii(e,t)?nm:r.get(e,t,s)},has(e,t){return ii(e,t)||r.has(e,t)}}));async function na(r){const{error:e}=await Ee.from("products").upsert(r.map(t=>({ean:t.ean,name:t.name,laboratory:t.laboratory,category:t.category,cost:t.cost,sale_price:t.salePrice})),{onConflict:"ean"});if(e)throw console.error("Error adding products to Supabase:",e),e}async function am(){const r=["CONFIG_DAYS","CONFIG_START_DATE"];for(const e of r){const{data:t}=await Ee.from("products").select("id").eq("ean",e).maybeSingle();t||await na([{ean:e,name:e==="CONFIG_DAYS"?"Configuracin de Das":"Configuracin de Fecha Inicio",laboratory:"_CONFIG_",category:"SYSTEM",cost:0,salePrice:0,stock:0}])}}async function im(r,e=10){const t=r.trim();if(!t)return[];const{data:s,error:n}=await Ee.from("products").select("*").or(`name.ilike.%${t}%,ean.eq.${t}`).limit(e);return n?(console.error("Error searching products:",n),[]):s.map(a=>({ean:a.ean,name:a.name,cost:a.cost||0,salePrice:a.sale_price||0,category:a.category||void 0,laboratory:a.laboratory||void 0,stock:0}))}async function om(r){const{data:e,error:t}=await Ee.from("products").select("*").eq("ean",r).single();if(!(t||!e))return{ean:e.ean,name:e.name,cost:e.cost||0,salePrice:e.sale_price||0,category:e.category||void 0,laboratory:e.laboratory||void 0,stock:0}}async function vl(){const{data:r,error:e}=await Ee.from("products").select("*");return e?(console.error("Error getting all products:",e),[]):r.map(t=>({ean:t.ean,name:t.name,cost:t.cost||0,salePrice:t.sale_price||0,category:t.category||void 0,laboratory:t.laboratory||void 0,stock:0}))}async function lm(){const{count:r,error:e}=await Ee.from("products").select("*",{count:"exact",head:!0});return e?(console.error("Error getting product count:",e),0):r||0}async function yl(){try{const{count:r,error:e}=await Ee.from("products").select("*",{count:"exact",head:!0});if(e)throw e;if(r!==null&&r>0)return!1;console.log("Intentando cargar datos por defecto a Supabase...");const t=await fetch("default_products.xlsx");if(!t.ok)return console.log("No se encontr default_products.xlsx"),!1;const s=await t.arrayBuffer(),n=Ci(s),a=n.SheetNames[0],i=n.Sheets[a],o=Ri.sheet_to_json(i,{header:"A"}),c=[];for(let u=1;u<o.length;u++){const d=o[u],m=d.D,f=d.O,h=d.Q,w=d.J;if(!m||!h)continue;const g=String(m).trim(),v=f?String(f).trim():void 0;let _="";w&&(_=String(w).trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")),String(h).trim().split("-").map(k=>k.trim()).filter(k=>k.length>0).forEach(k=>{c.push({ean:k,name:g,cost:0,salePrice:0,laboratory:v,category:_,stock:0})})}if(c.length>0){for(let d=0;d<c.length;d+=1e3){const m=c.slice(d,d+1e3);await na(m),console.log(`Uploaded chunk ${d} - ${d+1e3}`)}return console.log(`${c.length} productos cargados a Supabase.`),!0}}catch(r){console.error("Error cargando datos por defecto:",r)}return!1}function cm(r){const e=Ri.sheet_to_json(r,{header:1});if(e.length<2)return[];const t=e[1],s=[];for(let n=0;n<t.length;n++){const a=String(t[n]).trim();if(a)for(let i=2;i<e.length;i++){const o=e[i];if(o&&o[n]){const c=String(o[n]).trim();c.length>0&&s.push({name:c.toUpperCase(),category:a.toUpperCase()})}}}return s}async function um(r){try{const{data:e,error:t}=await Ee.from("branch_laboratories").select("laboratory, category").eq("branch_name",r);return t?(console.error("Error loading laboratories from Supabase:",t),[]):e?e.map(s=>({name:s.laboratory.toUpperCase(),category:(s.category||"SIN CLASIFICAR").toUpperCase()})).sort((s,n)=>s.name.localeCompare(n.name)):[]}catch(e){return console.error("Critical error loading laboratories:",e),[]}}async function dm(){try{const r=await fetch("lab_sucu.xlsx");if(!r.ok)return{};const e=await r.arrayBuffer(),t=Ci(e),s={},n=new Map;t.SheetNames.forEach(a=>n.set(a.toLowerCase().trim(),a));for(const a of Zn){const i=n.get(a.toLowerCase().trim());if(i){const o=cm(t.Sheets[i]);s[a]=o.length}else s[a]=0}return s}catch(r){return console.error("Error getting all branch counts:",r),{}}}let rn;function Ue(){return rn||(rn=Zf("farmaplus-precount",1,{upgrade(r){r.createObjectStore("sessions",{keyPath:"id"}).createIndex("by-status","status");const t=r.createObjectStore("items",{keyPath:"id"});t.createIndex("by-session","sessionId"),t.createIndex("by-ean","ean")}})),rn}async function wl(){return Ue()}async function hm(r){const e=await Ue(),t={id:crypto.randomUUID(),sector:r,startTime:Date.now(),status:"active",totalProducts:0,totalUnits:0,errorCount:0};return await e.put("sessions",t),t}async function bl(){return(await Ue()).getAllFromIndex("sessions","by-status","active")}async function fm(r){const t=(await Ue()).transaction(["sessions","items"],"readwrite");await t.objectStore("sessions").delete(r);const s=t.objectStore("items"),n=await s.index("by-session").getAllKeys(r);for(const a of n)await s.delete(a);await t.done}async function aa(){const r=await bl();return r.length>0?r[0]:null}async function xl(r,e){const t=await Ue(),s=await t.get("sessions",r);s&&await t.put("sessions",{...s,...e})}async function mm(r){await xl(r,{status:"completed",endTime:Date.now()})}async function pm(r){const e=await Ue(),t=await aa();if(!t)throw new Error("No active session");const s={id:crypto.randomUUID(),sessionId:t.id,ean:r.ean,productName:r.productName,quantity:r.quantity,timestamp:Date.now(),synced:0};return await e.put("items",s),s}async function gm(r,e){const t=await Ue(),s=await t.get("items",r);s&&await t.put("items",{...s,...e})}async function vm(r){await(await Ue()).delete("items",r)}async function ym(r){const e=await Ue(),t=await aa();return!t||t.sector!==r?[]:e.getAllFromIndex("items","by-session",t.id)}async function _l(){return(await(await Ue()).getAll("items")).filter(t=>t.synced===0)}async function wm(r){const t=(await Ue()).transaction("items","readwrite"),s=t.objectStore("items");for(const n of r){const a=await s.get(n);a&&(a.synced=1,await s.put(a))}await t.done}async function bm(){const{error:r}=await Ee.from("products").delete().neq("id","00000000-0000-0000-0000-000000000000");if(r)throw console.error("Error clearing products:",r),r}async function xm(){try{const r=await Ue();await r.clear("sessions"),await r.clear("items")}catch(r){console.warn("Error clearing IndexedDB:",r)}localStorage.removeItem("farmaplus_user")}async function _m(){return(await Ue()).getAll("sessions")}async function Sm(r){return(await Ue()).getAllFromIndex("items","by-session",r.id)}const Lp=Object.freeze(Object.defineProperty({__proto__:null,addPreCountItem:pm,addProducts:na,clearAllData:xm,clearProducts:bm,createSession:hm,deletePreCountItem:vm,deleteSession:fm,endSession:mm,ensureConfigProduct:am,getActiveSession:aa,getActiveSessions:bl,getAllBranchLabCounts:dm,getAllProducts:vl,getAllSessions:_m,getLaboratoriesForBranch:um,getPreCountItemsBySector:ym,getProductByEAN:om,getProductCount:lm,getSessionItems:Sm,getUnsyncedItems:_l,initDB:wl,loadDefaultData:yl,markItemsAsSynced:wm,searchProducts:im,updatePreCountItem:gm,updateSession:xl},Symbol.toStringTag,{value:"Module"})),km=Zi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function jm({className:r,variant:e,...t}){return l.jsx("div",{className:q(km({variant:e}),r),...t})}const Em=[{id:"all",label:"Todo",icon:Rc},{id:"pages",label:"Pginas",icon:Cc},{id:"products",label:"Productos",icon:Cs},{id:"actions",label:"Acciones",icon:Tm}];function Tm({className:r}){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})}function Cm({open:r,onOpenChange:e}){const t=Ln(),[s,n]=p.useState([]),[a,i]=p.useState("all"),[o,c]=p.useState("");p.useEffect(()=>{r&&((async()=>{try{const h=await vl();n(h)}catch(h){console.error("Error loading search data:",h)}})(),i("all"),c(""))},[r]),p.useEffect(()=>{const f=h=>{h.key==="k"&&(h.metaKey||h.ctrlKey)&&(h.preventDefault(),e(!r))};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[r,e]);const u=f=>{e(!1),f()},d=p.useMemo(()=>o?s.filter(f=>f.description.toLowerCase().includes(o.toLowerCase())||f.ean.includes(o)).slice(0,50):s.slice(0,10),[s,o]),m=[{name:"Dashboard",path:"/",icon:Mi},{name:"Analista Inteligente",path:"/smart-analyst",icon:gs},{name:"Control de Vencimientos",path:"/expiration-control",icon:yc},{name:"Importar Inventario",path:"/stock",icon:zn},{name:"Inventarios Cclicos",path:"/cyclic-inventory",icon:qn},{name:"Productos",path:"/products",icon:Cs},{name:"Reportes",path:"/reports",icon:Fn}];return l.jsxs(Wf,{open:r,onOpenChange:e,className:"bg-background/80 backdrop-blur-xl border-border/50 shadow-2xl overflow-hidden sm:max-w-2xl",children:[l.jsxs("div",{className:"flex items-center border-b border-border/40 px-3","cmdk-input-wrapper":"",children:[l.jsx(gs,{className:"mr-2 h-5 w-5 shrink-0 opacity-50"}),l.jsx(dl,{placeholder:"Buscar en Farmaplus...",value:o,onValueChange:c,className:"flex h-14 w-full rounded-md bg-transparent py-3 text-base outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-none focus:ring-0"}),o&&l.jsxs(Fe,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full hover:bg-muted",onClick:()=>c(""),children:[l.jsx(Fr,{className:"w-3 h-3"}),l.jsx("span",{className:"sr-only",children:"Clear"})]}),l.jsx("div",{className:"ml-2 flex items-center gap-1",children:l.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:l.jsx("span",{className:"text-xs",children:"ESC"})})})]}),l.jsx("div",{className:"flex items-center gap-2 p-2 border-b border-border/40 bg-muted/20",children:Em.map(f=>l.jsxs("button",{onClick:()=>i(f.id),className:q("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all",a===f.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[l.jsx(f.icon,{className:"w-3.5 h-3.5"}),f.label]},f.id))}),l.jsxs(hl,{className:"max-h-[500px] p-2",children:[l.jsxs(fl,{className:"py-10 text-center text-sm text-muted-foreground",children:['No se encontraron resultados para "',o,'"']}),(a==="all"||a==="pages")&&l.jsx(hs,{heading:"Pginas",children:m.filter(f=>f.name.toLowerCase().includes(o.toLowerCase())).map(f=>l.jsxs(fs,{onSelect:()=>u(()=>t(f.path)),className:"aria-selected:bg-primary/10 aria-selected:text-primary",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border border-muted bg-background mr-3",children:l.jsx(f.icon,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-medium",children:f.name}),l.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Navegacin"})]})]},f.path))}),a==="all"&&l.jsx(ml,{className:"my-2"}),(a==="all"||a==="products")&&d.length>0&&l.jsx(hs,{heading:"Productos",children:d.map(f=>l.jsxs(fs,{onSelect:()=>u(()=>t(`/products?search=${f.ean}`)),className:"aria-selected:bg-primary/10 aria-selected:text-primary",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border border-muted bg-background mr-3",children:l.jsx(bc,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-medium truncate",children:f.description}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jm,{variant:"outline",className:"h-4 px-1 text-[9px] font-normal border-border/50 text-muted-foreground",children:f.ean}),l.jsx("span",{className:"text-[10px] text-muted-foreground",children:f.laboratory})]})]})]},f.ean))}),(a==="all"||a==="actions")&&l.jsx(hs,{heading:"Acciones",children:l.jsxs(fs,{onSelect:()=>u(()=>window.location.reload()),children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border border-muted bg-background mr-3",children:l.jsx(Fi,{className:"h-4 w-4"})}),l.jsx("span",{children:"Sincronizar Datos"})]})})]}),l.jsxs("div",{className:"flex items-center justify-between p-2 border-t border-border/40 bg-muted/20 text-[10px] text-muted-foreground px-4",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("kbd",{className:"font-sans",children:""})," navegar"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("kbd",{className:"font-sans",children:""})," seleccionar"]})]}),l.jsx("span",{children:"Farmaplus Super Search"})]})]})}const ds="farmaplus_offline_queue",ur={enqueue:(r,e)=>{const t=ur.getQueue(),s={id:crypto.randomUUID(),type:r,payload:e,timestamp:Date.now(),retryCount:0};return t.push(s),localStorage.setItem(ds,JSON.stringify(t)),s},getQueue:()=>{try{const r=localStorage.getItem(ds);return r?JSON.parse(r):[]}catch(r){return console.error("Error reading offline queue",r),[]}},remove:r=>{const t=ur.getQueue().filter(s=>s.id!==r);localStorage.setItem(ds,JSON.stringify(t))},clear:()=>{localStorage.removeItem(ds)},peek:()=>ur.getQueue()[0]};function Rm(){const[r,e]=p.useState(navigator.onLine?"idle":"offline"),[t,s]=p.useState(0),n=p.useCallback(async()=>{const o=ur.getQueue().length;try{const c=await _l();s(o+c.length)}catch(c){console.error("Error checking pre-count queue:",c),s(o)}},[]),a=async o=>(await new Promise(c=>setTimeout(c,1e3)),console.log(`Processing item ${o.id} of type ${o.type}`,o.payload),!0),i=p.useCallback(async()=>{if(!navigator.onLine){e("offline");return}const o=ur.getQueue();if(o.length===0){e("idle");return}e("syncing");let c=0,u=0;for(const d of o)try{await a(d),ur.remove(d.id),c++}catch(m){console.error(`Failed to process item ${d.id}`,m),u++}n(),u>0?(e("error"),ht.error("Error de sincronizacin",`Completada con ${u} errores`)):(e("idle"),c>0&&ht.success("Sincronizacin exitosa",`${c} elementos sincronizados`))},[n]);return p.useEffect(()=>{const o=()=>{e("idle"),i()},c=()=>e("offline");return window.addEventListener("online",o),window.addEventListener("offline",c),n(),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",c)}},[i,n]),{status:r,queueLength:t,sync:i}}function Om(){const{status:r,queueLength:e,sync:t}=Rm(),s=()=>r==="offline"?l.jsx(Ki,{className:"h-4 w-4"}):r==="syncing"?l.jsx(Fi,{className:"h-4 w-4 animate-spin"}):e>0?l.jsx(Ec,{className:"h-4 w-4"}):l.jsx(Bi,{className:"h-4 w-4"}),n=()=>r==="offline"?"Sin Conexin":r==="syncing"?"Sincronizando...":e>0?`${e} Pendientes`:"Sincronizado",a=()=>r==="offline"?"text-destructive":r==="syncing"?"text-blue-500":e>0?"text-orange-500":"text-success",i=()=>r==="offline"?"Sin conexin a internet":r==="syncing"?"Sincronizando datos...":e>0?`${e} elementos pendientes de sincronizacin`:"Todos los datos estn sincronizados";return l.jsxs(vs,{children:[l.jsx(ys,{asChild:!0,children:l.jsxs(Fe,{variant:"ghost",size:"sm",className:q("gap-2 h-9 px-3",r==="syncing"&&"cursor-wait"),onClick:t,disabled:r==="syncing"||r==="offline",children:[l.jsx("span",{className:q("transition-colors",a()),children:s()}),l.jsx("span",{className:"text-xs font-medium",children:n()}),e>0&&l.jsx("span",{className:"ml-1 flex h-5 w-5 items-center justify-center rounded-full bg-orange-500 text-[10px] font-bold text-white",children:e})]})}),l.jsx(Dr,{children:l.jsx("p",{children:i()})})]})}const Nm={dashboard:"Dashboard",stock:"Gestin de Stock","pre-count":"Pre-Conteo Sucursal","expiration-control":"Control de Vencimientos",import:"Importar Inventario","cyclic-inventory":"Inventarios Cclicos",products:"Productos",reports:"Reportes",settings:"Configuracin",profile:"Perfil",admin:"Admin",branches:"Sucursales","smart-analyst":"Analista Inteligente"};function Pm(){const[r,e]=p.useState(!1),s=ji().pathname.split("/").filter(Boolean),n=s.length>0?s.map((a,i)=>{const o=`/${s.slice(0,i+1).join("/")}`;return{title:Nm[a]||a.charAt(0).toUpperCase()+a.slice(1).replace("-"," "),path:o,isLast:i===s.length-1}}):[{title:"Dashboard",path:"/",isLast:!0}];return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"h-16 border-b border-border/40 bg-background/50 backdrop-blur-sm sticky top-0 z-30",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full px-6 flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center text-foreground",children:n.map((a,i)=>l.jsxs("div",{className:"flex items-center",children:[i>0&&l.jsx(Sc,{className:"h-4 w-4 mx-2 text-muted-foreground"}),a.isLast?l.jsx("span",{className:"text-sm font-semibold",children:a.title}):l.jsx(Dl,{to:a.path,className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:a.title})]},a.path))}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Om,{}),l.jsxs(Fe,{variant:"outline",className:"relative w-64 justify-start text-sm text-muted-foreground h-9 px-3",onClick:()=>e(!0),children:[l.jsx(gs,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Buscar todo..."}),l.jsx("div",{className:"absolute right-2.5 flex items-center gap-0.5 text-[10px] font-medium text-muted-foreground border border-border/50 rounded px-1.5 py-0.5 bg-background/50",children:l.jsx("span",{children:"Ctrl+K"})})]})]})]})}),l.jsx(Cm,{open:r,onOpenChange:e})]})}function Am(){return l.jsxs("div",{className:"flex h-screen w-full bg-muted/40 overflow-hidden",children:[l.jsx(Lh,{}),l.jsx("div",{className:"flex-1 h-full relative p-2 lg:ml-[72px]",children:l.jsxs("div",{className:"relative h-full w-full bg-background rounded-[2rem] shadow-md border border-border/50 overflow-hidden flex flex-col",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx(Pm,{})}),l.jsxs("main",{id:"main-content",className:"flex-1 overflow-y-auto w-full relative",children:[l.jsx("div",{className:"lg:hidden h-16"})," ",l.jsx("div",{className:"max-w-7xl mx-auto w-full",children:l.jsx(Ll,{})})]}),l.jsx("div",{className:"sticky bottom-0 z-10",children:l.jsx(Bh,{})}),l.jsx(bf,{}),l.jsx(xf,{})]})})]})}var oi=["light","dark"],Im="(prefers-color-scheme: dark)",$m=p.createContext(void 0),Dm={setTheme:r=>{},themes:[]},Lm=()=>{var r;return(r=p.useContext($m))!=null?r:Dm};p.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:a,value:i,attrs:o,nonce:c})=>{let u=a==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,m=n?oi.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,v=!0)=>{let _=i?i[w]:w,j=g?w+"|| ''":`'${_}'`,b="";return n&&v&&!g&&oi.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),t==="class"?g||_?b+=`c.add(${j})`:b+="null":_&&(b+=`d[s](n,${j})`),b},h=r?`!function(){${d}${f(r)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Im}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${m}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});const Sl=p.createContext(void 0),li="farmaplus_notification_preferences",ci={position:"bottom-right",reminderType:"center-only"};function Um({children:r}){const[e,t]=p.useState(()=>{const a=localStorage.getItem(li);if(a)try{return JSON.parse(a)}catch{return ci}return ci});p.useEffect(()=>{localStorage.setItem(li,JSON.stringify(e))},[e]);const s=a=>{t(i=>({...i,position:a}))},n=a=>{t(i=>({...i,reminderType:a}))};return l.jsx(Sl.Provider,{value:{preferences:e,setPosition:s,setReminderType:n},children:r})}function Bm(){const r=p.useContext(Sl);if(!r)throw new Error("useNotificationPreferences must be used within NotificationPreferencesProvider");return r}const Mm=({...r})=>{const{theme:e="system"}=Lm(),{preferences:t}=Bm();return l.jsx(cu,{theme:e,position:t.position,expand:!0,richColors:!1,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-transparent group-[.toaster]:text-foreground group-[.toaster]:border-0 group-[.toaster]:shadow-none p-0",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};function qm(){const[r,e]=p.useState(navigator.onLine);return p.useEffect(()=>{const t=()=>{e(!0),console.log(" Conexin restaurada")},s=()=>{e(!1),console.log(" Sin conexin")};return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[]),r}function Fm(){return qm()?null:l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-destructive text-destructive-foreground",children:l.jsxs("div",{className:"container mx-auto px-4 py-2 flex items-center justify-center gap-2 text-sm font-medium",children:[l.jsx(Ki,{className:"w-4 h-4"}),l.jsx("span",{children:"Sin conexin - Modo offline"})]})})}function zm(){const[r,e]=p.useState(null),[t,s]=p.useState(!1);p.useEffect(()=>{const i=o=>{o.preventDefault(),e(o),s(!0)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}},[]);const n=async()=>{if(!r)return;r.prompt();const{outcome:i}=await r.userChoice;console.log(`Usuario ${i==="accepted"?"acept":"rechaz"} la instalacin`),e(null),s(!1)},a=()=>{s(!1),localStorage.setItem("install-prompt-dismissed","true")};return p.useEffect(()=>{localStorage.getItem("install-prompt-dismissed")==="true"&&s(!1)},[]),p.useEffect(()=>{if(t){const i=setTimeout(()=>{s(!1)},1e4);return()=>clearTimeout(i)}},[t]),t?l.jsxs("div",{className:"fixed bottom-[calc(var(--bottom-nav-height)+1rem)] sm:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-40 bg-card border rounded-lg shadow-lg p-4 animate-in slide-in-from-bottom-5",children:[l.jsx("button",{onClick:a,className:"absolute top-2 right-2 p-1 rounded-full hover:bg-muted","aria-label":"Cerrar",children:l.jsx(Fr,{className:"w-4 h-4"})}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:l.jsx(Tc,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Instalar Farmaplus"}),l.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Instala la app para acceso rpido y funcionalidad offline"}),l.jsx(Fe,{onClick:n,size:"sm",className:"w-full",children:"Instalar ahora"})]})]})]}):null}const Vm={initial:{opacity:0},in:{opacity:1},out:{opacity:0}},Hm={type:"tween",ease:"easeOut",duration:.2},Se=({children:r})=>l.jsx(De.div,{initial:"initial",animate:"in",exit:"out",variants:Vm,transition:Hm,className:"h-full w-full",children:r}),Wm={default:{icon:on,className:"bg-card text-card-foreground border-border"},success:{icon:jc,className:"bg-success/10 text-success border-success/20"},warning:{icon:Hi,className:"bg-warning/10 text-warning border-warning/20"},error:{icon:Ui,className:"bg-destructive/10 text-destructive border-destructive/20"},info:{icon:on,className:"bg-primary/10 text-primary border-primary/20"}};function Km({open:r,onClose:e,message:t,variant:s="default",duration:n=4e3,action:a,position:i="bottom",className:o}){const c=Wm[s],u=c.icon;return p.useEffect(()=>{if(r&&n>0){const d=setTimeout(e,n);return()=>clearTimeout(d)}},[r,n,e]),l.jsx(Un,{children:r&&l.jsxs(De.div,{initial:{y:i==="bottom"?100:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:i==="bottom"?100:-100,opacity:0},transition:{type:"spring",stiffness:500,damping:40},className:q("fixed left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-4 py-3 rounded-lg border elevation-3 min-w-[300px] max-w-[500px]",i==="bottom"?"bottom-6":"top-6",c.className,o),children:[l.jsx(u,{className:"w-5 h-5 flex-shrink-0"}),l.jsx("p",{className:"flex-1 text-body-medium",children:t}),a&&l.jsx(De.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{a.onClick(),e()},className:"text-label-large font-semibold hover:opacity-80 transition-opacity",children:a.label}),l.jsx(De.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"hover:bg-foreground/10 rounded-full p-1 transition-colors",children:l.jsx(Fr,{className:"w-4 h-4"})})]})})}const kl=p.createContext(void 0);function Up(){const r=p.useContext(kl);if(!r)throw new Error("useSnackbar must be used within SnackbarProvider");return r}function Gm({children:r}){const[e,t]=p.useState([]),[s,n]=p.useState(null),a=p.useCallback(o=>{const c=Math.random().toString(36).substring(7),u={...o,id:c};s?t(d=>[...d,u]):n(u)},[s]),i=p.useCallback(()=>{n(null),setTimeout(()=>{t(o=>o.length>0?(n(o[0]),o.slice(1)):o)},200)},[]);return l.jsxs(kl.Provider,{value:{showSnackbar:a},children:[r,s&&l.jsx(Km,{...s,open:!0,onClose:i})]})}function H({className:r,...e}){return l.jsx("div",{className:q("animate-pulse rounded-md bg-muted",r),...e})}function Bp(){return l.jsxs("div",{className:"rounded-xl border bg-card p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(H,{className:"h-10 w-10 rounded-full"}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(H,{className:"h-4 w-[200px]"}),l.jsx(H,{className:"h-3 w-[150px]"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(H,{className:"h-3 w-full"}),l.jsx(H,{className:"h-3 w-4/5"}),l.jsx(H,{className:"h-3 w-3/5"})]})]})}function Mp(){return l.jsxs("div",{className:"rounded-xl border bg-card",children:[l.jsx("div",{className:"border-b p-4",children:l.jsx(H,{className:"h-6 w-[150px]"})}),l.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((r,e)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(H,{className:"h-4 w-[100px]"}),l.jsx(H,{className:"h-4 w-[200px]"}),l.jsx(H,{className:"h-4 w-[150px]"}),l.jsx(H,{className:"h-4 w-[80px] ml-auto"})]},e))})]})}function qp(){return l.jsxs("div",{className:"rounded-xl border bg-card p-6",children:[l.jsxs("div",{className:"space-y-2 mb-6",children:[l.jsx(H,{className:"h-6 w-[180px]"}),l.jsx(H,{className:"h-4 w-[250px]"})]}),l.jsx("div",{className:"flex items-end gap-2 h-[200px]",children:[...Array(7)].map((r,e)=>l.jsx(H,{className:"flex-1",style:{height:`${Math.random()*60+40}%`}},e))})]})}function Fp(){return l.jsxs("div",{className:"rounded-xl border bg-card p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(H,{className:"h-5 w-[120px]"}),l.jsx(H,{className:"h-8 w-8 rounded-full"})]}),l.jsx(H,{className:"h-10 w-[100px]"}),l.jsx(H,{className:"h-3 w-full"})]})}const ms=p.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:q("rounded-lg border border-border bg-card text-card-foreground",r),...e}));ms.displayName="Card";const Nn=p.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:q("flex flex-col space-y-1.5 p-6",r),...e}));Nn.displayName="CardHeader";const Jm=p.forwardRef(({className:r,...e},t)=>l.jsx("h3",{ref:t,className:q("text-2xl font-semibold leading-none tracking-tight",r),...e}));Jm.displayName="CardTitle";const Qm=p.forwardRef(({className:r,...e},t)=>l.jsx("p",{ref:t,className:q("text-sm text-muted-foreground",r),...e}));Qm.displayName="CardDescription";const Pn=p.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:q("p-6 pt-0",r),...e}));Pn.displayName="CardContent";const Ym=p.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:q("flex items-center p-6 pt-0",r),...e}));Ym.displayName="CardFooter";function qe(){return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(H,{className:"h-8 w-[250px]"}),l.jsx(H,{className:"h-4 w-[350px]"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((r,e)=>l.jsxs(ms,{children:[l.jsxs(Nn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(H,{className:"h-4 w-[100px]"}),l.jsx(H,{className:"h-4 w-4 rounded-full"})]}),l.jsxs(Pn,{children:[l.jsx(H,{className:"h-8 w-[120px] mb-2"}),l.jsx(H,{className:"h-3 w-[150px]"})]})]},e))}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((r,e)=>l.jsxs(ms,{className:"p-6 h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx(H,{className:"h-6 w-[180px]"}),l.jsx(H,{className:"h-5 w-[60px] rounded-full"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(H,{className:"h-4 w-full"}),l.jsx(H,{className:"h-4 w-full"}),l.jsx(H,{className:"h-4 w-full"})]})]},e))}),l.jsxs(ms,{children:[l.jsxs(Nn,{children:[l.jsx(H,{className:"h-6 w-[150px] mb-4"}),l.jsx(H,{className:"h-10 w-full max-w-sm"})]}),l.jsx(Pn,{children:l.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((r,e)=>l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(H,{className:"h-12 w-12 rounded-full"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(H,{className:"h-4 w-[250px]"}),l.jsx(H,{className:"h-4 w-[200px]"})]})]},e))})})]})]})}function Xm({children:r,className:e}){return l.jsx(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:q("container max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6",e),children:r})}function $t(){return l.jsxs(Xm,{children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between pb-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(H,{className:"h-8 w-64"}),l.jsx(H,{className:"h-4 w-96"})]}),l.jsx(H,{className:"h-10 w-32"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(H,{className:"h-[200px] w-full rounded-xl"}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.jsx(H,{className:"h-[150px] w-full rounded-xl"}),l.jsx(H,{className:"h-[150px] w-full rounded-xl"}),l.jsx(H,{className:"h-[150px] w-full rounded-xl"})]})]})]})}const Zm=p.lazy(()=>ke(()=>import("./Dashboard-DJOyAhcW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),ep=p.lazy(()=>ke(()=>import("./Stock-5nK6BrAb.js"),__vite__mapDeps([34,1,2,13,25,6,12,14]))),tp=p.lazy(()=>ke(()=>import("./PreCount-BZd5gJxz.js"),__vite__mapDeps([35,1,2,18,36,37,38,39,28,13,40,30,41,42,43,44,45,20,9,46,7,10,25,12,22,14]))),rp=p.lazy(()=>ke(()=>import("./StockImport-BlP-hXmT.js"),__vite__mapDeps([47,1,2,27,13,18,14,28,45,20,16,17,48,8,46,4,42,49,12]))),sp=p.lazy(()=>ke(()=>import("./ExpirationControl-BrMAWyl9.js"),__vite__mapDeps([50,1,2,18,28,36,37,38,39,13,40,30,41,51,24,43,14,12,22,45,20,10,6,42,9,7,25]))),np=p.lazy(()=>ke(()=>import("./CyclicInventory-pgWixXhf.js"),__vite__mapDeps([52,1,2,18,26,27,13,21,6,16,17,3,30,4,53,12,14]))),ap=p.lazy(()=>ke(()=>import("./CyclicInventoryDetail-EHvGC-Gw.js"),__vite__mapDeps([54,1,2,18,55,56,13,30,38,42,40,3,46,27,39,28,57,45,20,14,58,23,12,59]))),ip=p.lazy(()=>ke(()=>import("./Products-CdEgqQzm.js"),__vite__mapDeps([60,1,2,18,28,44,32,12,56,13,30,14,31,41]))),op=p.lazy(()=>ke(()=>import("./Reports-Bi0l57qK.js"),__vite__mapDeps([61,1,2,18,31,55,43,44,14,62,12,22,10,33,40,63,13]))),lp=p.lazy(()=>ke(()=>import("./Settings-DIFd6jp_.js"),__vite__mapDeps([64,1,2,28,39,9,18,14,17,5,65,40,13,63,10,66,53,12]))),cp=p.lazy(()=>ke(()=>import("./Profile-CDcDTTKF.js"),__vite__mapDeps([67,1,2,18,28,65,63,12,13,14]))),up=p.lazy(()=>ke(()=>import("./M3ComponentsDemo-ByWPs3Mi.js"),__vite__mapDeps([68,1,2,13,19,20,69,12,14]))),dp=p.lazy(()=>ke(()=>import("./AnimationsDemo-CmBDs3Og.js"),__vite__mapDeps([70,1,2,13,15,12,14]))),hp=p.lazy(()=>ke(()=>import("./Login-DL_cUc-9.js"),__vite__mapDeps([71,1,2,18,28,4,13,66,25,57,12,14]))),fp=p.lazy(()=>ke(()=>import("./NotFound-C1CxUoFu.js"),__vite__mapDeps([72,1,2]))),mp=p.lazy(()=>ke(()=>import("./AdminBranches-BWP2gPXr.js"),__vite__mapDeps([73,1,2,18,31,58,13,20,49,30,40,12,14]))),pp=p.lazy(()=>ke(()=>import("./SmartAnalystPage-RjJDa_8W.js"),__vite__mapDeps([74,1,2,18,55,45,13,20,28,12,21,22,51,24,43,14,29,48,10,69,40]))),gp=p.lazy(()=>ke(()=>import("./AdminAudit-DqbFvDIB.js"),__vite__mapDeps([75,1,2,11,12,13,14,31]))),vp=new hc,yp=({children:r})=>{const{user:e,isLoading:t}=ea();return t?l.jsx(qe,{}):e?l.jsx(l.Fragment,{children:r}):l.jsx(Ei,{to:"/login",replace:!0})},ui=({children:r})=>{const{user:e,isLoading:t}=ea();return t?l.jsx(qe,{}):!e||e.role!=="admin"?l.jsx(Ei,{to:"/",replace:!0}):l.jsx(l.Fragment,{children:r})},wp=()=>{const r=ji();return l.jsx(Un,{mode:"wait",children:l.jsxs(Bl,{location:r,children:[l.jsx(we,{path:"/login",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(hp,{})})})}),l.jsxs(we,{element:l.jsx(yp,{children:l.jsx(Am,{})}),children:[l.jsx(we,{path:"/",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(Zm,{})})})}),l.jsx(we,{path:"/stock",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(ep,{})})})}),l.jsx(we,{path:"/stock/pre-count",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(tp,{})})})}),l.jsx(we,{path:"/stock/import",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(rp,{})})})}),l.jsx(we,{path:"/stock/expiration-control",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(sp,{})})})}),l.jsx(we,{path:"/cyclic-inventory",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(np,{})})})}),l.jsx(we,{path:"/cyclic-inventory/:id",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(ap,{})})})}),l.jsx(we,{path:"/products",element:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(ip,{})})})}),l.jsx(we,{path:"/reports",element:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(op,{})})})}),l.jsx(we,{path:"/settings",element:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(lp,{})})})}),l.jsx(we,{path:"/profile",element:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(cp,{})})})}),l.jsx(we,{path:"/m3-demo",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(up,{})})})}),l.jsx(we,{path:"/animations-demo",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(dp,{})})})}),l.jsx(we,{path:"/admin/branches",element:l.jsx(ui,{children:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(mp,{})})})})}),l.jsx(we,{path:"/admin/audit",element:l.jsx(ui,{children:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(gp,{})})})})}),l.jsx(we,{path:"/smart-analyst",element:l.jsx(p.Suspense,{fallback:l.jsx($t,{}),children:l.jsx(Se,{children:l.jsx(pp,{})})})})]}),l.jsx(we,{path:"*",element:l.jsx(p.Suspense,{fallback:l.jsx(qe,{}),children:l.jsx(Se,{children:l.jsx(fp,{})})})})]},r.pathname)})},bp=()=>(p.useEffect(()=>{const r=setTimeout(async()=>{try{await wl(),yl().then(e=>{e&&console.log("Base de datos inicializada con archivo por defecto")})}catch(e){console.error("Error initializing DB:",e)}},1e3);return()=>clearTimeout(r)},[]),l.jsx(mc,{client:vp,children:l.jsx(Pc,{children:l.jsx(Gm,{children:l.jsx(Um,{children:l.jsx(Nh,{children:l.jsxs(Ph,{children:[l.jsx(Mm,{}),l.jsx(Fm,{}),l.jsx(zm,{}),l.jsx(Ul,{children:l.jsx(wp,{})})]})})})})})}));function xp(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/farmaplus-pwa/service-worker.js",{scope:"/farmaplus-pwa/"}).then(r=>{console.log("Service Worker registrado con xito:",r)}).catch(r=>{console.log("Error al registrar el Service Worker:",r)})})}const _p=p.createContext(null),Sp=({children:r})=>{const[e,t]=p.useState(null);p.useEffect(()=>{const n=a=>{a.preventDefault(),t(a)};return window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("beforeinstallprompt",n)}},[]);const s=()=>{e==null||e.prompt()};return l.jsx(_p.Provider,{value:{installPrompt:e,showInstallPrompt:s},children:r})},kp=localStorage.getItem("theme");kp==="dark"&&document.documentElement.classList.add("dark");sn.createRoot(document.getElementById("root")).render(l.jsx(y.StrictMode,{children:l.jsx(Sp,{children:l.jsx(bp,{})})}));xp();export{pm as $,ht as A,Fe as B,qn as C,Qo as D,$c as E,xc as F,Bi as G,Zn as H,Ic as I,jc as J,Tc as K,zi as L,kc as M,on as N,um as O,Cs as P,qe as Q,Fi as R,gs as S,Hi as T,zn as U,Xm as V,Ki as W,Fr as X,Dc as Y,xl as Z,gm as _,Ui as a,vm as a0,ym as a1,wl as a2,bl as a3,hm as a4,fm as a5,mm as a6,Fn as a7,om as a8,ga as a9,Mp as aA,qp as aB,yl as aC,$t as aD,Lp as aE,ws as aa,Rc as ab,im as ac,_l as ad,wm as ae,Zi as af,dm as ag,ke as ah,vl as ai,na as aj,_m as ak,Wi as al,Sm as am,Ec as an,wc as ao,_c as ap,Bm as aq,xm as ar,bm as as,ra as at,tl as au,Nc as av,Up as aw,Mi as ax,Bp as ay,Fp as az,q as b,Y as c,Xo as d,Zo as e,el as f,lm as g,gf as h,jm as i,ms as j,Nn as k,Jm as l,Qm as m,Pn as n,pf as o,Dp as p,Sc as q,vs as r,ys as s,Dr as t,ea as u,Ee as v,Ji as w,Vn as x,Yi as y,Xi as z};
